function EditorChangesHistory(){this.clear()}function TextureView(t,e){this.layers=e,this.texture=Texture.empty(),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.map={},this.map.canvasMap=$(t),this.map.canvas=this.map.canvasMap.get(0),this.map.canvas&&(this.map.ctx=this.map.canvas.getContext("2d"),this.map.ctx.imageSmoothingEnabled=!1)}function updateSkin(t,e,i){skin.ctx.save();var n=0,o=skin.canvas.width,s=0,r=skin.canvas.height;t&&e&&(i=i||1,n=Math.max(n,Math.min(t.x,e.x)-i),s=Math.max(s,Math.min(t.y,e.y)-i),o=Math.min(o,Math.max(e.x,t.x)+i),r=Math.min(r,Math.max(e.y,t.y)+i)),skin.ctx.rect(n,s,o-n,r-s),skin.ctx.clip(),paintSkin(),skin.ctx.restore()}function drawZoomedSkin(t,e,i,n,o){if(forceImageScalling){var s=activelayer().canvas[0];if(t=t>=0&&t||0,e=e>=0&&e||0,i=i||s.width,n=n||s.height,o||s.width>512)console.alert("implement fast drawZoomedSkin.");else for(var r=activelayer(),s=r.canvas[0],a=r.ctx.getImageData(0,0,s.width,s.height),h=t;h<i;++h)for(var l=e;l<n;++l){var d=4*(l*s.width+h),c=a[d],u=a[d+1],g=a[d+2],f=a[d+3];skin.zoomcanvasctx.strokeStyle=skin.zoomcanvasctx.fillStyle="rgba("+c+","+u+","+g+","+f/255+")",skin.zoomcanvasctx.fillRect(h,l,1,1),skin.zoomcanvasctx.strokeRect(h,l,1,1),(modelObject.grid.show||modelObject.grid.alpha&&f<32)&&(skin.zoomcanvasctx.strokeStyle="rgb(192, 192, 192)",skin.zoomcanvasctx.strokeRect(h,l,1,1))}}}function drawOnZoomedSkin(drawer){if(forceImageScalling)with(skin.zoomcanvasctx){var zoom=skin.zoomcanvas.width/modelObject.texture.width;save(),scale(zoom,zoom),drawer(skin.zoomcanvasctx),restore()}else drawer(skin.canvas)}function redrawZoomedSkin(t,e,i){}function drawSkinBlocksMap(){console.log("obsolete drawSkinBlocksMap");var t=modelObject.textureList();skin.map.canvas.width=256,skin.map.canvas.height=128,skin.map.ctx.imageSmoothingEnabled=!1;var e=Math.ceil(Math.pow(t.length/2,.5)),i=Math.ceil(t.length/e),n=Math.min(128,Math.floor(128/e)),o=0,s=skin.canvas.width/16,r=skin.canvas.height/16,a=modelObject.texture.scale;skin.map.ctx.save(),skin.map.ctx.fillStyle=skin.map.ctx.createPattern(skin.canvas,"repeat");for(var o=0;o<t.length;o++){var h=t[o];skin.map.ctx.drawImage(skin.canvas,h%16*16*a,16*~~(h/16)*a,s,r,Math.floor(o%i*n),Math.floor(o/i)*n,n,n)}skin.map.ctx.restore()}function renderAffectedBlocks(){var t=modelObject.affectedBlocks(),e=$("#affected-blocks");if(0==t.length)return void(renderAffectedBlocks=function(){});var i=new BatchRender({texture:modelObject.texture});i.onRender=function(t,i,n,o){e.append(i)},paintSkin(!0),e.html(""),i.render(null,t.map(function(t){return previewMapForBlock(t)})),paintSkin(!1),e.css("display","inline-block")}function clear(){modelObject&&modelObject.clear()}function redraw(){modelObject&&modelObject.redraw()}function draw(){modelObject&&modelObject.draw()}function getRGB(slot){if(!slots[slot]||!slots[slot].colorpicker)return[0,0,0,0];with(slots[slot].colorpicker.color)return[Math.round(255*r),Math.round(255*g),Math.round(255*b),Math.round(255*a)]}function getHSV(slot){if(!slots[slot]||!slots[slot].colorpicker)return[0,0,0,0];with(slots[slot].colorpicker.color)return[6*h,s,v,a]}function getBrush(t){return 10==t&&(t=8),slots[t]&&slots[t].colorpicker&&slots[t].colorpicker.brush}function hsv_rgb_randomized(t,e){var i=HSV_RGB(t[0],Math.min(1,Math.max(0,t[1]+(Math.random()-.5)*e*.1)),Math.min(1,Math.max(0,t[2]+(Math.random()-.5)*e*.1)));return[Math.round(255*i[0]),Math.round(255*i[1]),Math.round(255*i[2]),Math.round(255*t[3])]}function TextureLayers(t){this.layers=[],this.container=$(t),this.disposable={},this.container.hasClass("template")&&this.container.data("template",Handlebars.compile(this.container.html())).empty().removeClass("template");var e=this;this.container.sortable({axis:"y",cursor:"move",distance:4,hanfle:".drag-handle",items:".layer",containment:".layerList",update:function(){e.onChange({orderChange:e.activeLayer}),e.updateLayerList()}})}function rotateColors(h){for(var r=0,g=1,b=2,a=3,pixels=activelayer().imageData.data,i=0;i<pixels.length;i+=4)if(pixels[i+a]>0){var pixel=RGB_HSV(pixels[i+r]/255,pixels[i+g]/255,pixels[i+b]/255);pixel[0]=(pixel[0]+h+600)%6,pixel=HSV_RGB(pixel[0],pixel[1],pixel[2]),pixels[i+r]=255*pixel[r],pixels[i+g]=255*pixel[g],pixels[i+b]=255*pixel[b]}with(activelayer())ctx.putImageData(imageData,0,0);paintSkin(),redrawZoomedSkin(),redraw()}function ResourceGallery(t){this.container=$(t),this.skin={},this.items={}}function GifRecorder(t){this.maxsize=t||250,this.frames=[]}function ModelMoCAnt(){this.ModelMoCAnt.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","ant.png")}function ModelMoCBear(){this.ModelMoCBear.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","bearblack.png"),this.addTexture("assets","mocreatures","textures","models","bearbrowm.png"),this.addTexture("assets","mocreatures","textures","models","bearpanda.png"),this.addTexture("assets","mocreatures","textures","models","bearpolar.png")}function ModelMoCBee(){this.ModelMoCBee.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","bee.png")}function ModelMoCBigCat1(){this.ModelMoCBigCat1.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","lionf.png"),this.addTexture("assets","mocreatures","textures","models","lionb.png"),this.addTexture("assets","mocreatures","textures","models","panther.png"),this.addTexture("assets","mocreatures","textures","models","cheetah.png"),this.addTexture("assets","mocreatures","textures","models","tiger.png"),this.addTexture("assets","mocreatures","textures","models","tigerw.png"),this.addTexture("assets","mocreatures","textures","models","leopard.png")}function ModelMoCBigCat(){this.ModelMoCBigCat.apply(this,arguments)}function ModelMoCBird(){this.ModelMoCBird.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","birdblack.png"),this.addTexture("assets","mocreatures","textures","models","birdblue.png"),this.addTexture("assets","mocreatures","textures","models","birdgreen.png"),this.addTexture("assets","mocreatures","textures","models","birdred.png"),this.addTexture("assets","mocreatures","textures","models","birdwhite.png"),this.addTexture("assets","mocreatures","textures","models","birdyellow.png")}function ModelMoCBoar(){this.ModelMoCBoar.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","boara.png"),this.addTexture("assets","mocreatures","textures","models","boarb.png")}function ModelMoCBunny(){this.ModelMoCBunny.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","bunny.png"),this.addTexture("assets","mocreatures","textures","models","bunnya.png"),this.addTexture("assets","mocreatures","textures","models","bunnyb.png"),this.addTexture("assets","mocreatures","textures","models","bunnyc.png"),this.addTexture("assets","mocreatures","textures","models","bunnyd.png"),this.addTexture("assets","mocreatures","textures","models","bunnye.png")}function ModelMoCButterfly(){this.ModelMoCButterfly.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","bfagalaisurticae.png"),this.addTexture("assets","mocreatures","textures","models","bfargyreushyperbius.png"),this.addTexture("assets","mocreatures","textures","models","bfathymanefte.png"),this.addTexture("assets","mocreatures","textures","models","bfcatopsiliapomona.png"),this.addTexture("assets","mocreatures","textures","models","bfmorphopeleides.png"),this.addTexture("assets","mocreatures","textures","models","bfpierisrapae.png"),this.addTexture("assets","mocreatures","textures","models","bfvanessaatalanta.png")}function ModelMoCCrab(){this.ModelMoCCrab.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","craba.png"),this.addTexture("assets","mocreatures","textures","models","crabb.png")}function ModelMoCCricket(){this.ModelMoCCricket.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","cricketa.png"),this.addTexture("assets","mocreatures","textures","models","cricketb.png")}function ModelMoCCrocodile(){this.ModelMoCCrocodile.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","crocodile.png")}function ModelMoCDeer(){this.ModelMoCDeer.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","deer.png"),this.addTexture("assets","mocreatures","textures","models","deerb.png"),this.addTexture("assets","mocreatures","textures","models","deerf.png")}function ModelMoCDolphin(){this.ModelMoCDolphin.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","dolphin.png"),this.addTexture("assets","mocreatures","textures","models","dolphin2.png"),this.addTexture("assets","mocreatures","textures","models","dolphin3.png"),this.addTexture("assets","mocreatures","textures","models","dolphin4.png"),this.addTexture("assets","mocreatures","textures","models","dolphin5.png"),this.addTexture("assets","mocreatures","textures","models","dolphin6.png")}function ModelMoCDragonfly(){this.ModelMoCDragonfly.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","dragonflya.png"),this.addTexture("assets","mocreatures","textures","models","dragonflyb.png"),this.addTexture("assets","mocreatures","textures","models","dragonflyc.png"),this.addTexture("assets","mocreatures","textures","models","dragonflyd.png")}function ModelMoCDuck(){this.ModelMoCDuck.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","duck.png")}function ModelMoCEgg(){this.ModelMoCEgg.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","egg.png")}function ModelMoCFirefly(){this.ModelMoCFirefly.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","firefly.png"),this.addTexture("assets","mocreatures","textures","models","fireflyglow.png")}function ModelMoCFishBowl(){this.ModelMoCFishBowl.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","fishbowl.png")}function ModelMoCFishy(){this.ModelMoCFishy.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","fishy1.png"),this.addTexture("assets","mocreatures","textures","models","fishy2.png"),this.addTexture("assets","mocreatures","textures","models","fishy3.png"),this.addTexture("assets","mocreatures","textures","models","fishy4.png"),this.addTexture("assets","mocreatures","textures","models","fishy5.png"),this.addTexture("assets","mocreatures","textures","models","fishy6.png"),this.addTexture("assets","mocreatures","textures","models","fishy7.png"),this.addTexture("assets","mocreatures","textures","models","fishy8.png"),this.addTexture("assets","mocreatures","textures","models","fishy9.png"),this.addTexture("assets","mocreatures","textures","models","fishy10.png")}function ModelMoCFly(){this.ModelMoCFly.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","fly.png")}function ModelMoCFox(){this.ModelMoCFox.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","fox.png"),this.addTexture("assets","mocreatures","textures","models","foxsnow.png")}function ModelMoCGoat(){this.ModelMoCGoat.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","goat1.png"),this.addTexture("assets","mocreatures","textures","models","goat2.png"),this.addTexture("assets","mocreatures","textures","models","goat3.png"),this.addTexture("assets","mocreatures","textures","models","goat4.png"),this.addTexture("assets","mocreatures","textures","models","goat5.png"),this.addTexture("assets","mocreatures","textures","models","goat6.png")}function ModelMoCGolem(){this.ModelMoCGolem.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","golemt.png")}function ModelMoCJellyFish(){this.ModelMoCJellyFish.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","jellyfisha.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishb.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishc.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishd.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishe.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishf.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishg.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishh.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishi.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishj.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishk.png"),this.addTexture("assets","mocreatures","textures","models","jellyfishl.png")}function ModelMoCKitty(){this.ModelMoCKitty.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","pussycata.png"),this.addTexture("assets","mocreatures","textures","models","pussycatb.png"),this.addTexture("assets","mocreatures","textures","models","pussycatc.png"),this.addTexture("assets","mocreatures","textures","models","pussycatd.png"),this.addTexture("assets","mocreatures","textures","models","pussycate.png"),this.addTexture("assets","mocreatures","textures","models","pussycatf.png"),this.addTexture("assets","mocreatures","textures","models","pussycatg.png"),this.addTexture("assets","mocreatures","textures","models","pussycath.png"),this.addTexture("assets","mocreatures","textures","models","pussycati.png"),this.addTexture("assets","mocreatures","textures","models","pussycatj.png")}function ModelMoCKittyBed(){this.ModelMoCKittyBed.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","kittybed.png")}function ModelMoCKittyBed2(){this.ModelMoCKittyBed2.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","kittybed.png")}function ModelMoCKomodo(){this.ModelMoCKomodo.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","komododragon.png")}function ModelMoCLitterBox(){this.ModelMoCLitterBox.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","litterbox.png")}function ModelMoCMaggot(){this.ModelMoCMaggot.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","maggot.png")}function ModelMoCMediumFish(){this.ModelMoCMediumFish.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","mediumfish_bass.png"),this.addTexture("assets","mocreatures","textures","models","mediumfish_cod.png"),this.addTexture("assets","mocreatures","textures","models","mediumfish_salmon.png")}function ModelMoCMiniGolem(){this.ModelMoCMiniGolem.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","minigolem.png")}function ModelMoCMouse(){this.ModelMoCMouse.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","miceb.png"),this.addTexture("assets","mocreatures","textures","models","miceg.png"),this.addTexture("assets","mocreatures","textures","models","micew.png")}function ModelMoCNewHorse(){this.ModelMoCNewHorse.apply(this,arguments),["horsezorsemetal.png","horsebat.png","horsebatcrystaline.png","horseblack.png","horseblackdiamond.png","horseblackgold.png","horseblackmetal.png","horsebrightcreamy.png","horsebrightcreamydiamond.png","horsebrightcreamygold.png","horsebrightcreamymetal.png","horsebrightpinto.png","horsebrightpintodiamond.png","horsebrightpintogold.png","horsebrightpintometal.png","horsebrown.png","horsebrowndiamond.png","horsebrowngold.png","horsebrownmetal.png","horsebug.png","horsecow.png","horsecowdiamond.png","horsecowgold.png","horsecowmetal.png","horsecreamy.png","horsecreamydiamond.png","horsecreamygold.png","horsecreamymetal.png","horsedarkbrown.png","horsedarkbrowndiamond.png","horsedarkbrowngold.png","horsedarkbrownmetal.png","horsedarkpegasus.png","horsedarkpegasuscrystaline.png","horsedonkey.png","horsefairyblue.png","horsefairybluecrystaline.png","horsefairypink.png","horsefairypinkcrystaline.png","horsefairywhite.png","horsefairywhitecrystaline.png","horseghost.png","horseghostb.png","horseghostbcrystaline.png","horseghostcrystaline.png","horsegrey.png","horsegreydiamond.png","horsegreygold.png","horsegreymetal.png","horsemule.png","horsenightmare1.png","horsenightmare2.png","horsenightmare3.png","horsenightmare4.png","horsenightmare5.png","horsepalebrown.png","horsepalebrowndiamond.png","horsepalebrowngold.png","horsepalebrownmetal.png","horsepalespeckles.png","horsepalespecklesdiamond.png","horsepalespecklesgold.png","horsepalespecklesmetal.png","horsepegasus.png","horsepegasuscrystaline.png","horsepegasusskeleton.png","horsepinto.png","horsepintodiamond.png","horsepintogold.png","horsepintometal.png","horseskeleton.png","horsespeckled.png","horsespeckleddiamond.png","horsespeckledgold.png","horsespeckledmetal.png","horsespotted.png","horsespotteddiamond.png","horsespottedgold.png","horsespottedmetal.png","horseundead.png","horseundead01.png","horseundead02.png","horseundead03.png","horseundead04.png","horseundead05.png","horseundead06.png","horseundead07.png","horseundead11.png","horseundead12.png","horseundead13.png","horseundead14.png","horseundead15.png","horseundead16.png","horseundead17.png","horseundead21.png","horseundead22.png","horseundead23.png","horseundead24.png","horseundead25.png","horseundead26.png","horseundead27.png","horseundead31.png","horseundead32.png","horseundead33.png","horseundead34.png","horseundead35.png","horseundead36.png","horseundead37.png","horseundeadpegasus.png","horseundeadpegasus01.png","horseundeadpegasus02.png","horseundeadpegasus03.png","horseundeadpegasus04.png","horseundeadpegasus05.png","horseundeadpegasus06.png","horseundeadpegasus07.png","horseundeadpegasus11.png","horseundeadpegasus12.png","horseundeadpegasus13.png","horseundeadpegasus14.png","horseundeadpegasus15.png","horseundeadpegasus16.png","horseundeadpegasus17.png","horseundeadpegasus21.png","horseundeadpegasus22.png","horseundeadpegasus23.png","horseundeadpegasus24.png","horseundeadpegasus25.png","horseundeadpegasus26.png","horseundeadpegasus27.png","horseundeadpegasus31.png","horseundeadpegasus32.png","horseundeadpegasus33.png","horseundeadpegasus34.png","horseundeadpegasus35.png","horseundeadpegasus36.png","horseundeadpegasus37.png","horseundeadunicorn.png","horseundeadunicorn01.png","horseundeadunicorn02.png","horseundeadunicorn03.png","horseundeadunicorn04.png","horseundeadunicorn05.png","horseundeadunicorn06.png","horseundeadunicorn11.png","horseundeadunicorn12.png","horseundeadunicorn13.png","horseundeadunicorn14.png","horseundeadunicorn15.png","horseundeadunicorn16.png","horseundeadunicorn21.png","horseundeadunicorn22.png","horseundeadunicorn23.png","horseundeadunicorn24.png","horseundeadunicorn25.png","horseundeadunicorn26.png","horseundeadunicorn31.png","horseundeadunicorn32.png","horseundeadunicorn33.png","horseundeadunicorn34.png","horseundeadunicorn35.png","horseundeadunicorn36.png","horseunicorn.png","horseunicorncrystaline.png","horseunicornskeleton.png","horsewhite.png","horsewhitediamond.png","horsewhitegold.png","horsewhitemetal.png","horsezebra.png","horsezebradiamond.png","horsezebragold.png","horsezebrametal.png","horsezonky.png","horsezorse.png","horsezorsediamond.png","horsezorsegold.png"].forEach(function(t){this.addTexture("assets","mocreatures","textures","models",t)},this)}function ModelMoCOgre(){this.ModelMoCOgre.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","ogreblue.png"),this.addTexture("assets","mocreatures","textures","models","ogregreen.png"),this.addTexture("assets","mocreatures","textures","models","ogrered.png")}function ModelMoCOstrich(){this.ModelMoCOstrich.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","ostricha.png"),this.addTexture("assets","mocreatures","textures","models","ostrichb.png"),this.addTexture("assets","mocreatures","textures","models","ostrichc.png"),this.addTexture("assets","mocreatures","textures","models","ostrichd.png"),this.addTexture("assets","mocreatures","textures","models","ostriche.png"),this.addTexture("assets","mocreatures","textures","models","ostrichf.png"),this.addTexture("assets","mocreatures","textures","models","ostrichg.png"),this.addTexture("assets","mocreatures","textures","models","ostrichh.png")}function ModelMoCRaccoon(){this.ModelMoCRaccoon.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","raccoon.png")}function ModelMoCRat(){this.ModelMoCRat.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","ratb.png"),this.addTexture("assets","mocreatures","textures","models","ratbl.png"),this.addTexture("assets","mocreatures","textures","models","rath.png"),this.addTexture("assets","mocreatures","textures","models","ratw.png")}function ModelMoCRay(){this.ModelMoCRay.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","mantray.png"),this.addTexture("assets","mocreatures","textures","models","stingray.png")}function ModelMoCRoach(){this.ModelMoCRoach.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","roach.png")}function ModelMoCScorpion(){this.ModelMoCScorpion.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","scorpioncave.png"),this.addTexture("assets","mocreatures","textures","models","scorpioncavesaddle.png"),this.addTexture("assets","mocreatures","textures","models","scorpiondirt.png"),this.addTexture("assets","mocreatures","textures","models","scorpiondirtsaddle.png"),this.addTexture("assets","mocreatures","textures","models","scorpionfrost.png"),this.addTexture("assets","mocreatures","textures","models","scorpionfrostsaddle.png"),this.addTexture("assets","mocreatures","textures","models","scorpionnether.png"),this.addTexture("assets","mocreatures","textures","models","scorpionnethersaddle.png"),this.addTexture("assets","mocreatures","textures","models","scorpionundead.png"),this.addTexture("assets","mocreatures","textures","models","scorpionundeadsaddle.png")}function ModelMoCShark(){this.ModelMoCShark.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","shark.png")}function ModelMoCSilverSkeleton(){this.ModelMoCSilverSkeleton.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","silverskeleton.png")}function ModelMoCSmallFish(){this.ModelMoCSmallFish.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","smallfish_anchovy.png"),this.addTexture("assets","mocreatures","textures","models","smallfish_angelfish.png"),this.addTexture("assets","mocreatures","textures","models","smallfish_angler.png"),this.addTexture("assets","mocreatures","textures","models","smallfish_clownfish.png"),this.addTexture("assets","mocreatures","textures","models","smallfish_goldfish.png"),this.addTexture("assets","mocreatures","textures","models","smallfish_hippotang.png"),this.addTexture("assets","mocreatures","textures","models","smallfish_manderin.png"),this.addTexture("assets","mocreatures","textures","models","smallfish_piranha.png")}function ModelMoCSnail(){this.ModelMoCSnail.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","snaila.png"),this.addTexture("assets","mocreatures","textures","models","snailb.png"),this.addTexture("assets","mocreatures","textures","models","snailc.png"),this.addTexture("assets","mocreatures","textures","models","snaild.png"),this.addTexture("assets","mocreatures","textures","models","snaile.png"),this.addTexture("assets","mocreatures","textures","models","snailf.png")}function ModelMoCTurkey(){this.ModelMoCTurkey.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","turkey.png")}function ModelMoCTurtle(){this.ModelMoCTurtle.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","turtle.png"),this.addTexture("assets","mocreatures","textures","models","turtled.png"),this.addTexture("assets","mocreatures","textures","models","turtlel.png"),this.addTexture("assets","mocreatures","textures","models","turtlem.png"),this.addTexture("assets","mocreatures","textures","models","turtler.png")}function ModelMoCWere(){this.ModelMoCWere.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","wolfblack.png"),this.addTexture("assets","mocreatures","textures","models","wolfbright.png"),this.addTexture("assets","mocreatures","textures","models","wolfbrown.png"),this.addTexture("assets","mocreatures","textures","models","wolfdark.png"),this.addTexture("assets","mocreatures","textures","models","wolffire1.png"),this.addTexture("assets","mocreatures","textures","models","wolffire2.png"),this.addTexture("assets","mocreatures","textures","models","wolffire3.png"),this.addTexture("assets","mocreatures","textures","models","wolftimber.png"),this.addTexture("assets","mocreatures","textures","models","wolfwild.png")}function ModelMoCMoCWolf(){this.ModelMoCMoCWolf.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","wolfblack.png"),this.addTexture("assets","mocreatures","textures","models","wolfbright.png"),this.addTexture("assets","mocreatures","textures","models","wolfbrown.png"),this.addTexture("assets","mocreatures","textures","models","wolfdark.png"),this.addTexture("assets","mocreatures","textures","models","wolffire1.png"),this.addTexture("assets","mocreatures","textures","models","wolffire2.png"),this.addTexture("assets","mocreatures","textures","models","wolffire3.png"),this.addTexture("assets","mocreatures","textures","models","wolftimber.png"),this.addTexture("assets","mocreatures","textures","models","wolfwild.png")}function ModelMoCWraith(){this.ModelMoCWraith.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","wraith.png")}function ModelMoCWyvern(){this.ModelMoCWyvern.apply(this,arguments),this.addTexture("assets","mocreatures","textures","models","wyverndark.png"),this.addTexture("assets","mocreatures","textures","models","wyvernjungle.png"),this.addTexture("assets","mocreatures","textures","models","wyvernlight.png"),this.addTexture("assets","mocreatures","textures","models","wyvernmix.png"),this.addTexture("assets","mocreatures","textures","models","wyvernmother.png"),this.addTexture("assets","mocreatures","textures","models","wyvernsand.png"),this.addTexture("assets","mocreatures","textures","models","wyvernsun.png"),this.addTexture("assets","mocreatures","textures","models","wyvernundead.png")}function ModelMoCElephant(){this.ModelMoCElephant.call(this,arguments),this.addTexture("assets","mocreatures","textures","models","elephantafrican.png"),this.addTexture("assets","mocreatures","textures","models","elephantindian.png"),this.addTexture("assets","mocreatures","textures","models","elephantindianpretty.png"),this.addTexture("assets","mocreatures","textures","models","mammoth.png"),this.addTexture("assets","mocreatures","textures","models","mammothsonghua.png")}function ModelMoCSnake(){ModelBase.call(this),this.texture.width=64,this.texture.height=32,this.addTexture("mob","mocreatures","snake1.png"),this.addTexture("mob","mocreatures","snake2.png"),this.addTexture("mob","mocreatures","snake3.png"),this.addTexture("mob","mocreatures","snake4.png"),this.addTexture("mob","mocreatures","snake5.png"),this.addTexture("mob","mocreatures","snake6.png"),this.addTexture("mob","mocreatures","snake7.png"),this.addTexture("mob","mocreatures","snake8.png"),this.bodySnake=[];for(var t=-.3,e=.125,i=0,n=-1.6,o=0;o<this.bodyparts;o++){i=(this.bodyparts/2-o)*n;var s=(o+1)/this.bodyparts;t=s<e?-.2:s<2*e?-.15:s<4*e?0:s<6*e?0:s<7*e?-.15:-.2;var r=0;r=o%2==0?0:4,this.model["body"+o]=this.bodySnake[o]=new ModelRenderer(this,8,r),this.bodySnake[o].a(-1,-.5,0,2,2,2,t),this.bodySnake[o].a(0,23,i)}this.model.Tail=this.Tail=new ModelRenderer(this,36,0),this.Tail.a(-.5,.5,-1,1,1,5),this.Tail.a(0,23,i),i=this.bodyparts/2*n,this.model.Head=this.Head=new ModelRenderer(this,0,0),this.Head.a(-1,-.5,-2,2,2,2),this.Head.a(0,23,i),this.model.Nose=this.Nose=new ModelRenderer(this,16,0),this.Nose.a(-.5,-.3,-4,1,1,2),this.Nose.a(0,23,i),this.model.LNose=this.LNose=new ModelRenderer(this,22,0),this.LNose.a(-.5,.3,-4,1,1,2),this.LNose.a(0,23,i),this.model.TeethUR=this.TeethUR=new ModelRenderer(this,46,0),this.TeethUR.a(-.4,.3,-3.8,0,1,1),this.TeethUR.a(0,23,i),this.model.TeethUL=this.TeethUL=new ModelRenderer(this,44,0),this.TeethUL.a(.4,.3,-3.8,0,1,1),this.TeethUL.a(0,23,i),this.model.Tongue=this.Tongue=new ModelRenderer(this,28,0),this.Tongue.a(-.5,.5,-6,1,0,3),this.Tongue.a(0,23,i),this.model.Tongue1=this.Tongue1=new ModelRenderer(this,28,0),this.Tongue1.a(-.5,.5,-5,1,0,3),this.Tongue1.a(0,23,i),this.model.Tongue0=this.Tongue0=new ModelRenderer(this,28,0),this.Tongue0.a(-.5,.25,-4,1,0,3),this.Tongue0.a(0,23,i),this.model.Wing1L=this.Wing1L=new ModelRenderer(this,8,4),this.Wing1L.a(0,-.5,0,2,2,2),this.Wing1L.a(0,23,(this.bodyparts/2-1)*n),this.model.Wing1R=this.Wing1R=new ModelRenderer(this,8,4),this.Wing1R.a(-2,-.5,0,2,2,2),this.Wing1R.a(0,23,(this.bodyparts/2-1)*n),this.model.Wing2L=this.Wing2L=new ModelRenderer(this,8,4),this.Wing2L.a(.5,-.5,0,2,2,2),this.Wing2L.a(0,23,(this.bodyparts/2-2)*n),this.model.Wing2R=this.Wing2R=new ModelRenderer(this,8,4),this.Wing2R.a(-2.5,-.5,0,2,2,2),this.Wing2R.a(0,23,(this.bodyparts/2-2)*n),this.model.Wing3R=this.Wing3R=new ModelRenderer(this,16,4),this.Wing3R.a(-3,-.5,0,2,2,2),this.Wing3R.a(0,23,(this.bodyparts/2-3)*n),this.model.Wing3L=this.Wing3L=new ModelRenderer(this,16,4),this.Wing3L.a(1,-.5,0,2,2,2),this.Wing3L.a(0,23,(this.bodyparts/2-3)*n),this.model.Wing4R=this.Wing4R=new ModelRenderer(this,16,8),this.Wing4R.a(-2.5,-.5,0,2,2,2),this.Wing4R.a(0,23,(this.bodyparts/2-4)*n),this.model.Wing4L=this.Wing4L=new ModelRenderer(this,16,8),this.Wing4L.a(.5,-.5,0,2,2,2),this.Wing4L.a(0,23,(this.bodyparts/2-4)*n),this.model.Wing5L=this.Wing5L=new ModelRenderer(this,16,8),this.Wing5L.a(0,-.5,0,2,2,2),this.Wing5L.a(0,23,(this.bodyparts/2-5)*n),this.model.Wing5R=this.Wing5R=new ModelRenderer(this,16,8),this.Wing5R.a(-2,-.5,0,2,2,2),this.Wing5R.a(0,23,(this.bodyparts/2-5)*n)}function ModelMoCWereHuman(){ModelBiped.call(this),this.name="WereHuman",this.addTexture("mob","mocreatures","werehuman.png")}function TechneModel(t){this["super"](),t&&(this.name=t)}function NovaSkinProjects(){this.resourcePackLoader=new ResourcePackLoader,this.entityModelLoader=new EntityModelLoader,this.render=new BatchRender({width:350,height:350}),this.gallery=new ResourceGallery("#gallery-sidebar"),this.modelEditor=new NovaSkinEditor({canvas:"#display",resourcePackLoader:this.resourcePackLoader,notifications:this.notifications}),this.imageEditor=new ImageEditor({saveManager:this.modelEditor.saveManager,notifications:this.notifications}),this.audioEditor=new AudioEditor({container:".sounds-tab",player:"#audio-player",resourcePackLoader:this.resourcePackLoader,notifications:this.notifications}),this.initNotifications(),this.setupJsonEditor(),this.setupEventListeners(),this.showUserInfo(),this.fillSearchTypeAhead(),this.restoreState()}function DrawingTools(t){this.container=$(t),this.clipboard=new ClipboardTool(this),this.updateChain=[],this.setupTools()}function DrawingTool(t,e){this.tools=t,this.cursorCanvas=document.createElement("canvas"),this.cursorCanvas.width=this.cursorCanvas.height=16,this.cursorCtx=this.cursorCanvas.getContext("2d"),this.pixelStack=[]}function DrawingToolPencil(t,e,i){this["super"](t,i),this.setupColorPicker($(e)),this.mask=new Image,this.mask.src=i.mask,this.image=new Image,this.image.src=i.image}function DrawingToolFloodFill(t,e,i){this["super"](t,i),this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.colorSource=i.color,this.mask=new Image,this.mask.src=i.mask,this.image=new Image,this.image.src=i.image,
this.image.onload=this.update.bind(this),t.updateOnChanges(this,this.colorSource)}function DrawingToolGradientTool(t,e,i){this["super"](t,i),this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.startColor=i.start,this.endColor=i.end,t.updateOnChanges(this,this.startColor),t.updateOnChanges(this,this.endColor),this.cursorCanvas.width=32,this.cursorCanvas.height=32,this.image=new Image,this.image.src=i.image}function DrawingToolGradientLine(t,e,i){this["super"](t,e,i)}function DrawingToolGradientRectangle(t,e,i){this["super"](t,e,i)}function DrawingToolGradientEllipsis(t,e,i){this["super"](t,e,i)}function DrawingToolEraser(t,e,i){this["super"](t,i),this.brushSource=i.copybrush,this.image=new Image,this.image.src=i.image}function ClipboardTool(t){this.tools=t}function NovaSkinEditor(t){var e=this;this.config=$.extend(this.decodeEditorOptionsFromUrl(location.href),t),this.canvas=$(t.canvas).get(0),this.entityModelLoader=new EntityModelLoader,this.resourcePackLoader=t.resourcePackLoader||new ResourcePackLoader,this.layers=new TextureLayers(".layerList"),this.textureview=new TextureView("#skinMap",this.layers),this.changes=new EditorChangesHistory,this.drawtools=new DrawingTools("#colorPickers",this.changes),this.saveManager=new SaveManager(".store",this.textureview,this.resourcePackLoader),this.gifRecorder=new GifRecorder,this.modelview=new WebGLRender($.extend(t.renderOptions,{canvas:this.canvas,grid:{alpha:!0,pixel:!0,floorLines:!0,background:10066329,cube:!1,shadow:!1,viewporthelper:!0}})),this.config.resourcepack&&this.resourcePackLoader.get(this.config.resourcepack,function(t){e.resourcepack=t,e.saveManager.setResourcePack(t),e.config.block?e.showBlockModel(e.config.block,e.config.state):e.config.model&&e.showModel(e.config.model,e.config.skin)}),this.animate(),this.setupEventListeners()}function ImageEditor(t){this.saveManager=t.saveManager;var e=this;window.loadFromPixlr=function(t){e.save(t)},window.addEventListener("message",function(t){"https://www.picozu.com"===t.origin&&e.save(t.data.url)},!1);var i=this;$("#save-image-button").click(function(){"piskel"==i.editor?i.savePiskel():"pixlr"==i.editor?$("#image-editor .alert").show().find(".message").text("Save using menu File -> Save... inside pixlr editor"):"picozu"==i.editor?$("#image-editor .alert").show().find(".message").text("Click on the save button inside the Picozu image editor."):"aviary"==i.editor&&$("#image-editor .alert").show().find(".message").text("Click on the save button inside the image editor.")})}function AudioEditor(t){this.container=$(t.container),this.player=t.player,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.notifications=t.notifications,this.resourcePackLoader=t.resourcePackLoader,this.initSoundPlayer(),this.initAudioEditor(),this.initDefaults(),this.setupEventListeners()}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var r=e||window.event,a=h.call(arguments,1),l=0,c=0,u=0,g=0,f=0,p=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(u=r.detail*-1),"wheelDelta"in r&&(u=r.wheelDelta),"wheelDeltaY"in r&&(u=r.wheelDeltaY),"wheelDeltaX"in r&&(c=r.wheelDeltaX*-1),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(c=u*-1,u=0),l=0===u?c:u,"deltaY"in r&&(u=r.deltaY*-1,l=u),"deltaX"in r&&(c=r.deltaX,0===u&&(l=c*-1)),0!==u||0!==c){if(1===r.deltaMode){var m=t.data(this,"mousewheel-line-height");l*=m,u*=m,c*=m}else if(2===r.deltaMode){var v=t.data(this,"mousewheel-page-height");l*=v,u*=v,c*=v}if(g=Math.max(Math.abs(u),Math.abs(c)),(!s||g<s)&&(s=g,n(r,g)&&(s/=40)),n(r,g)&&(l/=40,c/=40,u/=40),l=Math[l>=1?"floor":"ceil"](l/s),c=Math[c>=1?"floor":"ceil"](c/s),u=Math[u>=1?"floor":"ceil"](u/s),d.settings.normalizeOffset&&this.getBoundingClientRect){var w=this.getBoundingClientRect();f=e.clientX-w.left,p=e.clientY-w.top}return e.deltaX=c,e.deltaY=u,e.deltaFactor=s,e.offsetX=f,e.offsetY=p,e.deltaMode=0,a.unshift(e,l,c,u),o&&clearTimeout(o),o=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){s=null}function n(t,e){return d.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var o,s,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(t.event.fixHooks)for(var l=r.length;l;)t.event.fixHooks[r[--l]]=t.event.mouseHooks;var d=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",d.getLineHeight(this)),t.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(){var t,e,i,n,o,s,r,a,h,l,d,c,u,g,f,p,m,v,w,y,R,A,b,x,L,C,k=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},E=[].slice,B={}.hasOwnProperty,M=function(t,e){return function(){return t.apply(e,arguments)}},S=function(t,e){function i(){this.constructor=t}for(var n in e)B.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};x=["extended","included"],p=function(){function t(){}return t["extends"]=function(t){var e,i,n;for(e in t)i=t[e],k.call(x,e)<0&&(this[e]=i);return null!=(n=t.extended)&&n.apply(this),this},t.includes=function(t){var e,i,n;for(e in t)i=t[e],k.call(x,e)<0&&(this.prototype[e]=i);return null!=(n=t.included)&&n.apply(this),this},t.delegate=function(){var t,e,i,n,o,s;for(t=1<=arguments.length?E.call(arguments,0):[],i=t.pop(),s=[],n=0,o=t.length;n<o;n++)e=t[n],s.push(this.prototype[e]=i.prototype[e]);return s},t.aliasFunction=function(t,e){var i=this;return this.prototype[t]=function(){var t;return t=1<=arguments.length?E.call(arguments,0):[],i.prototype[e].apply(i,t)}},t.aliasProperty=function(t,e){return Object.defineProperty(this.prototype,t,{get:function(){return this[e]},set:function(t){return this[e]=t}})},t.included=function(t){return t.call(this,this.prototype)},t}(),L=Array.prototype.slice,t=function(t,e){return null==e&&(e=document),"object"==typeof t||"undefined"!=typeof exports&&null!==exports?t:e.querySelector(t)},A=function(){function t(){}return t.uniqid=function(){var t;return t=0,{get:function(){return t++}}}(),t.extend=function(){var t,e,i,n,o,s,r;for(i=arguments[0],o=2<=arguments.length?E.call(arguments,1):[],e=i,s=0,r=o.length;s<r;s++){t=o[s];for(n in t)B.call(t,n)&&(e[n]=t[n])}return e},t.clampRGB=function(t){return t<0?0:t>255?255:t},t.copyAttributes=function(t,e,i){var n,o,s,r,a,h;for(null==i&&(i={}),r=t.attributes,h=[],o=0,s=r.length;o<s;o++)n=r[o],null!=i.except&&(a=n.nodeName,k.call(i.except,a)>=0)||h.push(e.setAttribute(n.nodeName,n.nodeValue));return h},t.dataArray=function(t){return null==t&&(t=0),o.NodeJS||null!=window.Uint8Array?new Uint8Array(t):new Array(t)},t}(),"undefined"!=typeof exports&&null!==exports?(y=exports,r=require("canvas"),u=r.Image,l=require("fibers"),b=require("fs")):y=window,o=function(i){function n(){this.nodeFileReady=M(this.nodeFileReady,this);var t,i,o,s=this;if(0===arguments.length)throw"Invalid arguments";return this instanceof n?(this.finishInit=this.finishInit.bind(this),this.imageLoaded=this.imageLoaded.bind(this),t=arguments[0],n.NodeJS||(o=parseInt(n.getAttrId(t[0]),10),i="function"==typeof t[1]?t[1]:"function"==typeof t[2]?t[2]:function(){},isNaN(o)||!R.has(o))?(this.id=A.uniqid.get(),this.initializedPixelData=this.originalPixelData=null,this.cropCoordinates={x:0,y:0},this.cropped=!1,this.resized=!1,this.pixelStack=[],this.layerStack=[],this.canvasQueue=[],this.currentLayer=null,this.scaled=!1,this.analyze=new e(this),this.renderer=new w(this),this.domIsLoaded(function(){return s.parseArguments(t),s.setup()}),this):R.execute(o,i)):new n(arguments)}return S(n,i),n.version={release:"4.1.2",date:"7/27/2013"},n.DEBUG=!1,n.allowRevert=!0,n.crossOrigin="anonymous",n.remoteProxy="",n.proxyParam="camanProxyUrl",n.NodeJS="undefined"!=typeof exports&&null!==exports,n.autoload=!n.NodeJS,n.toString=function(){return"Version "+n.version.release+", Released "+n.version.date},n.getAttrId=function(e){return!!n.NodeJS||("string"==typeof e&&(e=t(e)),null==e||null==e.getAttribute?null:e.getAttribute("data-caman-id"))},n.prototype.domIsLoaded=function(t){var e,i=this;return n.NodeJS?setTimeout(function(){return t.call(i)},0):"complete"===document.readyState?(f.debug("DOM initialized"),setTimeout(function(){return t.call(i)},0)):(e=function(){if("complete"===document.readyState)return f.debug("DOM initialized"),t.call(i)},document.addEventListener("readystatechange",e,!1))},n.prototype.parseArguments=function(t){var e,i,n,o;if(0===t.length)throw"Invalid arguments given";if(this.initObj=null,this.initType=null,this.imageUrl=null,this.callback=function(){},this.setInitObject(t[0]),1!==t.length){switch(typeof t[1]){case"string":this.imageUrl=t[1];break;case"function":this.callback=t[1]}if(2!==t.length&&(this.callback=t[2],4===t.length)){n=t[4],o=[];for(e in n)B.call(n,e)&&(i=n[e],o.push(this.options[e]=i));return o}}},n.prototype.setInitObject=function(e){if(n.NodeJS)return this.initObj=e,void(this.initType="node");if("object"==typeof e?this.initObj=e:this.initObj=t(e),null==this.initObj)throw"Could not find image or canvas for initialization.";return this.initType=this.initObj.nodeName.toLowerCase()},n.prototype.setup=function(){switch(this.initType){case"node":return this.initNode();case"img":return this.initImage();case"canvas":return this.initCanvas()}},n.prototype.initNode=function(){return f.debug("Initializing for NodeJS"),"string"==typeof this.initObj?b.readFile(this.initObj,this.nodeFileReady):this.nodeFileReady(null,this.initObj)},n.prototype.nodeFileReady=function(t,e){if(t)throw t;return this.image=new u,this.image.src=e,f.debug("Image loaded. Width = "+this.imageWidth()+", Height = "+this.imageHeight()),this.canvas=new r(this.imageWidth(),this.imageHeight()),this.finishInit()},n.prototype.initImage=function(){return this.image=this.initObj,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),A.copyAttributes(this.image,this.canvas,{except:["src"]}),this.image.parentNode.replaceChild(this.canvas,this.image),this.imageAdjustments(),this.waitForImageLoaded()},n.prototype.initCanvas=function(){return this.canvas=this.initObj,this.context=this.canvas.getContext("2d"),null!=this.imageUrl?(this.image=document.createElement("img"),this.image.src=this.imageUrl,this.imageAdjustments(),this.waitForImageLoaded()):this.finishInit()},n.prototype.imageAdjustments=function(){if(this.needsHiDPISwap()&&(f.debug(this.image.src,"->",this.hiDPIReplacement()),this.swapped=!0,this.image.src=this.hiDPIReplacement()),c.isRemote(this.image))return this.image.src=c.proxyUrl(this.image.src),f.debug("Remote image detected, using URL = "+this.image.src)},n.prototype.waitForImageLoaded=function(){return this.isImageLoaded()?this.imageLoaded():this.image.onload=this.imageLoaded},n.prototype.isImageLoaded=function(){return!!this.image.complete&&(null==this.image.naturalWidth||0!==this.image.naturalWidth)},n.prototype.imageWidth=function(){return this.image.width||this.image.naturalWidth},n.prototype.imageHeight=function(){return this.image.height||this.image.naturalHeight},n.prototype.imageLoaded=function(){return f.debug("Image loaded. Width = "+this.imageWidth()+", Height = "+this.imageHeight()),this.swapped?(this.canvas.width=this.imageWidth()/this.hiDPIRatio(),this.canvas.height=this.imageHeight()/this.hiDPIRatio()):(this.canvas.width=this.imageWidth(),this.canvas.height=this.imageHeight()),this.finishInit()},n.prototype.finishInit=function(){var t,e,i,o,s;if(null==this.context&&(this.context=this.canvas.getContext("2d")),this.originalWidth=this.preScaledWidth=this.width=this.canvas.width,this.originalHeight=this.preScaledHeight=this.height=this.canvas.height,this.hiDPIAdjustments(),this.hasId()||this.assignId(),null!=this.image&&this.context.drawImage(this.image,0,0,this.imageWidth(),this.imageHeight(),0,0,this.preScaledWidth,this.preScaledHeight),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data,n.allowRevert)for(this.initializedPixelData=A.dataArray(this.pixelData.length),this.originalPixelData=A.dataArray(this.pixelData.length),s=this.pixelData,t=i=0,o=s.length;i<o;t=++i)e=s[t],this.initializedPixelData[t]=e,this.originalPixelData[t]=e;return this.dimensions={width:this.canvas.width,height:this.canvas.height},n.NodeJS||R.put(this.id,this),this.callback.call(this,this),this.callback=function(){}},n.prototype.reloadCanvasData=function(){return this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data},n.prototype.resetOriginalPixelData=function(){var t,e,i,o,s,r;if(!n.allowRevert)throw"Revert disabled";for(this.originalPixelData=A.dataArray(this.pixelData.length),s=this.pixelData,r=[],t=i=0,o=s.length;i<o;t=++i)e=s[t],r.push(this.originalPixelData[t]=e);return r},n.prototype.hasId=function(){return null!=n.getAttrId(this.canvas)},n.prototype.assignId=function(){if(!n.NodeJS&&!this.canvas.getAttribute("data-caman-id"))return this.canvas.setAttribute("data-caman-id",this.id)},n.prototype.hiDPIDisabled=function(){return null!==this.canvas.getAttribute("data-caman-hidpi-disabled")},n.prototype.hiDPIAdjustments=function(){var t;if(!n.NodeJS&&this.needsHiDPISwap())return t=this.hiDPIRatio(),1!==t?(f.debug("HiDPI ratio = "+t),this.scaled=!0,this.preScaledWidth=this.canvas.width,this.preScaledHeight=this.canvas.height,this.canvas.width=this.preScaledWidth*t,this.canvas.height=this.preScaledHeight*t,this.canvas.style.width=""+this.preScaledWidth+"px",this.canvas.style.height=""+this.preScaledHeight+"px",this.context.scale(t,t),this.width=this.originalWidth=this.canvas.width,this.height=this.originalHeight=this.canvas.height):void 0},n.prototype.hiDPIRatio=function(){var t,e;return e=window.devicePixelRatio||1,t=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,e/t},n.prototype.hiDPICapable=function(){return null!=window.devicePixelRatio&&1!==window.devicePixelRatio},n.prototype.needsHiDPISwap=function(){return!(this.hiDPIDisabled()||!this.hiDPICapable())&&null!==this.hiDPIReplacement()},n.prototype.hiDPIReplacement=function(){return null==this.image?null:this.image.getAttribute("data-caman-hidpi")},n.prototype.replaceCanvas=function(t){var e;return e=this.canvas,this.canvas=t,this.context=this.canvas.getContext("2d"),n.NodeJS||e.parentNode.replaceChild(this.canvas,e),this.width=this.canvas.width,this.height=this.canvas.height,this.reloadCanvasData(),this.dimensions={width:this.canvas.width,height:this.canvas.height}},n.prototype.render=function(t){var e=this;return null==t&&(t=function(){}),h.trigger(this,"renderStart"),this.renderer.execute(function(){return e.context.putImageData(e.imageData,0,0),t.call(e)})},n.prototype.revert=function(t){var e,i,o,s,r;if(null==t&&(t=!0),!n.allowRevert)throw"Revert disabled";for(r=this.originalVisiblePixels(),e=o=0,s=r.length;o<s;e=++o)i=r[e],this.pixelData[e]=i;if(t)return this.context.putImageData(this.imageData,0,0)},n.prototype.reset=function(){var t,e,i,n,o,s,r,a,h;for(t=document.createElement("canvas"),A.copyAttributes(this.canvas,t),t.width=this.originalWidth,t.height=this.originalHeight,e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),s=n.data,h=this.initializedPixelData,i=r=0,a=h.length;r<a;i=++r)o=h[i],s[i]=o;return e.putImageData(n,0,0),this.cropCoordinates={x:0,y:0},this.resized=!1,this.replaceCanvas(t)},n.prototype.originalVisiblePixels=function(){var t,e,i,o,s,r,a,h,l,d,c,u,g,f,p,v,w,y,R,A,b;if(!n.allowRevert)throw"Revert disabled";if(d=[],u=this.cropCoordinates.x,o=u+this.width,g=this.cropCoordinates.y,s=g+this.height,this.resized){for(t=document.createElement("canvas"),t.width=this.originalWidth,t.height=this.originalHeight,i=t.getContext("2d"),a=i.getImageData(0,0,t.width,t.height),l=a.data,y=this.originalPixelData,r=p=0,w=y.length;p<w;r=++p)h=y[r],l[r]=h;i.putImageData(a,0,0),c=document.createElement("canvas"),c.width=this.width,c.height=this.height,i=c.getContext("2d"),i.drawImage(t,0,0,this.originalWidth,this.originalHeight,0,0,this.width,this.height),l=i.getImageData(0,0,this.width,this.height).data,f=this.width}else l=this.originalPixelData,f=this.originalWidth;for(r=v=0,R=l.length;v<R;r=v+=4)e=m.locationToCoordinates(r,f),u<=(A=e.x)&&A<o&&g<=(b=e.y)&&b<s&&d.push(l[r],l[r+1],l[r+2],l[r+3]);return d},n.prototype.process=function(t,e){return this.renderer.add({type:d.Type.Single,name:t,processFn:e}),this},n.prototype.processKernel=function(t,e,i,n){var o,s,r;if(null==i&&(i=null),null==n&&(n=0),null==i)for(i=0,o=s=0,r=e.length;0<=r?s<r:s>r;o=0<=r?++s:--s)i+=e[o];return this.renderer.add({type:d.Type.Kernel,name:t,adjust:e,divisor:i,bias:n}),this},n.prototype.processPlugin=function(t,e){return this.renderer.add({type:d.Type.Plugin,plugin:t,args:e}),this},n.prototype.newLayer=function(t){var e;return e=new g(this),this.canvasQueue.push(e),this.renderer.add({type:d.Type.LayerDequeue}),t.call(e),this.renderer.add({type:d.Type.LayerFinished}),this},n.prototype.executeLayer=function(t){return this.pushContext(t)},n.prototype.pushContext=function(t){return this.layerStack.push(this.currentLayer),this.pixelStack.push(this.pixelData),this.currentLayer=t,this.pixelData=t.pixelData},n.prototype.popContext=function(){return this.pixelData=this.pixelStack.pop(),this.currentLayer=this.layerStack.pop()},n.prototype.applyCurrentLayer=function(){return this.currentLayer.applyToParent()},n}(p),y.Caman=o,o.Analyze=function(){function t(t){this.c=t}return t.prototype.calculateLevels=function(){var t,e,i,n,o,s,r;for(e={r:{},g:{},b:{}},t=n=0;n<=255;t=++n)e.r[t]=0,e.g[t]=0,e.b[t]=0;for(t=o=0,r=this.c.pixelData.length;o<r;t=o+=4)e.r[this.c.pixelData[t]]++,e.g[this.c.pixelData[t+1]]++,e.b[this.c.pixelData[t+2]]++;for(i=this.c.pixelData.length/4,t=s=0;s<=255;t=++s)e.r[t]/=i,e.g[t]/=i,e.b[t]/=i;return e},t}(),e=o.Analyze,o.DOMUpdated=function(){var t,e,i,n,o,r;if(e=document.querySelectorAll("img[data-caman]"),e.length>0){for(r=[],n=0,o=e.length;n<o;n++)t=e[n],r.push(i=new s(t,function(){return this.parse(),this.execute()}));return r}},o.autoload&&!function(){return"complete"===document.readyState?o.DOMUpdated():document.addEventListener("DOMContentLoaded",o.DOMUpdated,!1)}(),s=function(){function t(t,e){this.dataStr=t.getAttribute("data-caman"),this.caman=o(t,e.bind(this))}var e;return e="(\\w+)\\((.*?)\\)",t.prototype.parse=function(){var t,i,n,o,s,r,a,h,l,d,c,u,g;if(this.ele=this.caman.canvas,h=new RegExp(e,"g"),l=this.dataStr.match(h),l.length>0){for(h=new RegExp(e),g=[],d=0,c=l.length;d<c;d++){s=l[d],u=s.match(h),a=u[0],n=u[1],t=u[2],r=new Function("return function() {        this."+n+"("+t+");      };");try{o=r(),g.push(o.call(this.caman))}catch(p){i=p,g.push(f.debug(i))}}return g}},t.prototype.execute=function(){var t;return t=this.ele,this.caman.render(function(){return t.parentNode.replaceChild(this.toImage(),t)})},t}(),o.Blender=function(){function t(){}return t.blenders={},t.register=function(t,e){return this.blenders[t]=e},t.execute=function(t,e,i){return this.blenders[t](e,i)},t}(),i=o.Blender,o.Calculate=function(){function t(){}return t.distance=function(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))},t.randomRange=function(t,e,i){var n;return null==i&&(i=!1),n=t+Math.random()*(e-t),i?n.toFixed(i):Math.round(n)},t.luminance=function(t){return.299*t.r+.587*t.g+.114*t.b},t.bezier=function(t,e,i,n,o,s){var r,a,h,l,d,c,u,g,f,p,m,v,w,y,R,A,b,x,L,C,k,E,B,M,S,F,T;for(R=t[0],L=t[1],A=e[0],C=e[1],b=i[0],k=i[1],x=n[0],E=n[1],u={},d=parseInt(3*(A-R),10),h=3*(b-A)-d,r=x-R-d-h,c=3*(C-L),l=3*(k-C)-c,a=E-L-c-l,p=B=0;B<1e3;p=++B)y=p/1e3,g=Math.round(r*Math.pow(y,3)+h*Math.pow(y,2)+d*y+R),f=Math.round(a*Math.pow(y,3)+l*Math.pow(y,2)+c*y+L),o&&f<o?f=o:s&&f>s&&(f=s),u[g]=f;if(u.length<n[0]+1)for(p=M=0,F=n[0];0<=F?M<=F:M>=F;p=0<=F?++M:--M)if(null==u[p]){for(v=[p-1,u[p-1]],m=S=p,T=n[0];p<=T?S<=T:S>=T;m=p<=T?++S:--S)if(null!=u[m]){w=[m,u[m]];break}u[p]=v[1]+(w[1]-v[1])/(w[0]-v[0])*(p-v[0])}return null==u[n[0]]&&(u[n[0]]=u[n[0]-1]),u},t}(),n=o.Calculate,o.Convert=function(){function t(){}return t.hexToRGB=function(t){var e,i,n;return"#"===t.charAt(0)&&(t=t.substr(1)),n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),e=parseInt(t.substr(4,2),16),{r:n,g:i,b:e}},t.rgbToHSL=function(t,e,i){var n,o,s,r,a,h;return"object"==typeof t&&(e=t.g,i=t.b,t=t.r),t/=255,e/=255,i/=255,r=Math.max(t,e,i),a=Math.min(t,e,i),s=(r+a)/2,r===a?o=h=0:(n=r-a,h=s>.5?n/(2-r-a):n/(r+a),o=function(){switch(r){case t:return(e-i)/n+(e<i?6:0);case e:return(i-t)/n+2;case i:return(t-e)/n+4}}(),o/=6),{h:o,s:h,l:s}},t.hslToRGB=function(t,e,i){var n,o,s,r,a;return"object"==typeof t&&(e=t.s,i=t.l,t=t.h),0===e?a=o=n=i:(r=i<.5?i*(1+e):i+e-i*e,s=2*i-r,a=this.hueToRGB(s,r,t+1/3),o=this.hueToRGB(s,r,t),n=this.hueToRGB(s,r,t-1/3)),{r:255*a,g:255*o,b:255*n}},t.hueToRGB=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},t.rgbToHSV=function(t,e,i){var n,o,s,r,a,h;return t/=255,e/=255,i/=255,s=Math.max(t,e,i),r=Math.min(t,e,i),h=s,n=s-r,a=0===s?0:n/s,s===r?o=0:(o=function(){switch(s){case t:return(e-i)/n+(e<i?6:0);case e:return(i-t)/n+2;case i:return(t-e)/n+4}}(),o/=6),{h:o,s:a,v:h}},t.hsvToRGB=function(t,e,i){var n,o,s,r,a,h,l,d;switch(r=Math.floor(6*t),o=6*t-r,a=i*(1-e),h=i*(1-o*e),d=i*(1-(1-o)*e),r%6){case 0:l=i,s=d,n=a;break;case 1:l=h,s=i,n=a;break;case 2:l=a,s=i,n=d;break;case 3:l=a,s=h,n=i;break;case 4:l=d,s=a,n=i;break;case 5:l=i,s=a,n=h}return{r:Math.floor(255*l),g:Math.floor(255*s),b:Math.floor(255*n)}},t.rgbToXYZ=function(t,e,i){var n,o,s;return t/=255,e/=255,i/=255,t>.04045?t=Math.pow((t+.055)/1.055,2.4):t/=12.92,e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,n=.4124*t+.3576*e+.1805*i,o=.2126*t+.7152*e+.0722*i,s=.0193*t+.1192*e+.9505*i,{x:100*n,y:100*o,z:100*s}},t.xyzToRGB=function(t,e,i){var n,o,s;return t/=100,e/=100,i/=100,s=3.2406*t+-1.5372*e+-.4986*i,o=-.9689*t+1.8758*e+.0415*i,n=.0557*t+-.204*e+1.057*i,s>.0031308?s=1.055*Math.pow(s,.4166666667)-.055:s*=12.92,o>.0031308?o=1.055*Math.pow(o,.4166666667)-.055:o*=12.92,n>.0031308?n=1.055*Math.pow(n,.4166666667)-.055:n*=12.92,{r:255*s,g:255*o,b:255*n}},t.xyzToLab=function(t,e,i){var n,o,s,r,a,h;return"object"==typeof t&&(e=t.y,i=t.z,t=t.x),r=95.047,a=100,h=108.883,t/=r,e/=a,i/=h,t=t>.008856451679?Math.pow(t,.3333333333):7.787037037*t+.1379310345,e=e>.008856451679?Math.pow(e,.3333333333):7.787037037*e+.1379310345,i=i>.008856451679?Math.pow(i,.3333333333):7.787037037*i+.1379310345,s=116*e-16,n=500*(t-e),o=200*(e-i),{l:s,a:n,b:o}},t.labToXYZ=function(t,e,i){var n,o,s;return"object"==typeof t&&(e=t.a,i=t.b,t=t.l),o=(t+16)/116,n=o+e/500,s=o-i/200,n=n>.2068965517?n*n*n:.1284185493*(n-.1379310345),o=o>.2068965517?o*o*o:.1284185493*(o-.1379310345),s=s>.2068965517?s*s*s:.1284185493*(s-.1379310345),{x:95.047*n,y:100*o,z:108.883*s}},t.rgbToLab=function(t,e,i){var n;return"object"==typeof t&&(e=t.g,i=t.b,t=t.r),n=this.rgbToXYZ(t,e,i),this.xyzToLab(n)},t.labToRGB=function(t,e,i){},t}(),a=o.Convert,o.Event=function(){function t(){}return t.events={},t.types=["processStart","processComplete","renderStart","renderFinished","blockStarted","blockFinished"],t.trigger=function(t,e,i){var n,o,s,r,a;if(null==i&&(i=null),this.events[e]&&this.events[e].length){for(r=this.events[e],a=[],o=0,s=r.length;o<s;o++)n=r[o],null===n.target||t.id===n.target.id?a.push(n.fn.call(t,i)):a.push(void 0);return a}},t.listen=function(t,e,i){var n,o;return"string"==typeof t&&(o=t,n=e,t=null,e=o,i=n),!(k.call(this.types,e)<0)&&(this.events[e]||(this.events[e]=[]),this.events[e].push({target:t,fn:i}),!0)},t}(),h=o.Event,o.Filter=function(){function t(){}return t.Type={Single:1,Kernel:2,LayerDequeue:3,LayerFinished:4,LoadOverlay:5,Plugin:6},t.register=function(t,e){return o.prototype[t]=e},t}(),d=o.Filter,o.IO=function(){function t(){}return t.domainRegex=/(?:(?:http|https):\/\/)((?:\w+)\.(?:(?:\w|\.)+))/,t.isRemote=function(t){return null!=t&&(!this.corsEnabled(t)&&this.isURLRemote(t.src))},t.corsEnabled=function(t){var e;return null!=t.crossOrigin&&("anonymous"===(e=t.crossOrigin.toLowerCase())||"use-credentials"===e)},t.isURLRemote=function(t){var e;return e=t.match(this.domainRegex),!!e&&e[1]!==document.domain},t.remoteCheck=function(t){if(this.isURLRemote(t)){if(o.remoteProxy.length)return o.isURLRemote(o.remoteProxy)?void f.info("Cannot use a remote proxy for loading images."):this.proxyUrl(t);f.info("Attempting to load a remote image without a configured proxy. URL: "+t)}},t.proxyUrl=function(t){return""+o.remoteProxy+"?"+o.proxyParam+"="+encodeURIComponent(t)},t.useProxy=function(t){var e;return e={ruby:"rb",python:"py",perl:"pl",javascript:"js"},t=t.toLowerCase(),null!=e[t]&&(t=e[t]),"proxies/caman_proxy."+t},t}(),o.prototype.save=function(){return"undefined"!=typeof exports&&null!==exports?this.nodeSave.apply(this,arguments):this.browserSave.apply(this,arguments)},o.prototype.browserSave=function(t){var e;return null==t&&(t="png"),t=t.toLowerCase(),e=this.toBase64(t).replace("image/"+t,"image/octet-stream"),document.location.href=e},o.prototype.nodeSave=function(t,e){var i,n;null==e&&(e=!0);try{if(n=b.statSync(t),n.isFile()&&!e)return!1}catch(o){i=o,f.debug("Creating output file "+t)}return b.writeFile(t,this.canvas.toBuffer(),function(){return f.debug("Finished writing to "+t)})},o.prototype.toImage=function(t){var e;return e=document.createElement("img"),e.src=this.toBase64(t),e.width=this.dimensions.width,e.height=this.dimensions.height,window.devicePixelRatio&&(e.width/=window.devicePixelRatio,e.height/=window.devicePixelRatio),e},o.prototype.toBase64=function(t){return null==t&&(t="png"),t=t.toLowerCase(),this.canvas.toDataURL("image/"+t)},c=o.IO,o.Layer=function(){function e(t){this.c=t,this.filter=this.c,this.options={blendingMode:"normal",opacity:1},this.layerID=A.uniqid.get(),this.canvas="undefined"!=typeof exports&&null!==exports?new r:document.createElement("canvas"),this.canvas.width=this.c.dimensions.width,this.canvas.height=this.c.dimensions.height,this.context=this.canvas.getContext("2d"),this.context.createImageData(this.canvas.width,this.canvas.height),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data}return e.prototype.newLayer=function(t){return this.c.newLayer.call(this.c,t)},e.prototype.setBlendingMode=function(t){return this.options.blendingMode=t,this},e.prototype.opacity=function(t){return this.options.opacity=t/100,this},e.prototype.copyParent=function(){var t,e,i,n;for(e=this.c.pixelData,t=i=0,n=this.c.pixelData.length;i<n;t=i+=4)this.pixelData[t]=e[t],this.pixelData[t+1]=e[t+1],this.pixelData[t+2]=e[t+2],this.pixelData[t+3]=e[t+3];return this},e.prototype.fillColor=function(){return this.c.fillColor.apply(this.c,arguments)},e.prototype.overlayImage=function(e){return"object"==typeof e?e=e.src:"string"==typeof e&&"#"===e[0]&&(e=t(e).src),e?(this.c.renderer.renderQueue.push({type:d.Type.LoadOverlay,src:e,layer:this}),this):this},e.prototype.applyToParent=function(){var t,e,n,o,s,r,a,h,l;for(n=this.c.pixelStack[this.c.pixelStack.length-1],e=this.c.pixelData,l=[],t=a=0,h=e.length;a<h;t=a+=4)r={r:n[t],g:n[t+1],b:n[t+2],a:n[t+3]},s={r:e[t],g:e[t+1],b:e[t+2],a:e[t+3]},o=i.execute(this.options.blendingMode,s,r),o.r=A.clampRGB(o.r),o.g=A.clampRGB(o.g),o.b=A.clampRGB(o.b),null==o.a&&(o.a=s.a),n[t]=r.r-(r.r-o.r)*(this.options.opacity*(o.a/255)),n[t+1]=r.g-(r.g-o.g)*(this.options.opacity*(o.a/255)),l.push(n[t+2]=r.b-(r.b-o.b)*(this.options.opacity*(o.a/255)));return l},e}(),g=o.Layer,o.Logger=function(){function t(){var t,e,i,n;for(n=["log","info","warn","error"],e=0,i=n.length;e<i;e++)t=n[e],this[t]=function(t){return function(){var e,i;if(e=1<=arguments.length?E.call(arguments,0):[],o.DEBUG)try{return console[t].apply(console,e)}catch(n){return i=n,console[t](e)}}}(t);this.debug=this.log}return t}(),f=new o.Logger,o.Pixel=function(){function t(t,e,i,n,o){this.r=null!=t?t:0,this.g=null!=e?e:0,this.b=null!=i?i:0,this.a=null!=n?n:255,this.c=null!=o?o:null,this.loc=0}return t.coordinatesToLocation=function(t,e,i){return 4*(e*i+t)},t.locationToCoordinates=function(t,e){var i,n;return n=Math.floor(t/(4*e)),i=t%(4*e)/4,{x:i,y:n}},t.prototype.setContext=function(t){return this.c=t},t.prototype.locationXY=function(){var t,e;if(null==this.c)throw"Requires a CamanJS context";return e=this.c.dimensions.height-Math.floor(this.loc/(4*this.c.dimensions.width)),t=this.loc%(4*this.c.dimensions.width)/4,{x:t,y:e}},t.prototype.pixelAtLocation=function(e){if(null==this.c)throw"Requires a CamanJS context";return new t(this.c.pixelData[e],this.c.pixelData[e+1],this.c.pixelData[e+2],this.c.pixelData[e+3],this.c)},t.prototype.getPixelRelative=function(e,i){var n;if(null==this.c)throw"Requires a CamanJS context";return n=this.loc+4*this.c.dimensions.width*(i*-1)+4*e,n>this.c.pixelData.length||n<0?new t(0,0,0,255,this.c):this.pixelAtLocation(n)},t.prototype.putPixelRelative=function(t,e,i){var n;if(null==this.c)throw"Requires a CamanJS context";if(n=this.loc+4*this.c.dimensions.width*(e*-1)+4*t,!(newLoc>this.c.pixelData.length||newLoc<0))return this.c.pixelData[newLoc]=i.r,this.c.pixelData[newLoc+1]=i.g,this.c.pixelData[newLoc+2]=i.b,this.c.pixelData[newLoc+3]=i.a,!0},t.prototype.getPixel=function(t,e){var i;if(null==this.c)throw"Requires a CamanJS context";return i=this.coordinatesToLocation(t,e,this.width),this.pixelAtLocation(i)},t.prototype.putPixel=function(t,e,i){var n;if(null==this.c)throw"Requires a CamanJS context";return n=this.coordinatesToLocation(t,e,this.width),this.c.pixelData[n]=i.r,this.c.pixelData[n+1]=i.g,this.c.pixelData[n+2]=i.b,this.c.pixelData[n+3]=i.a},t.prototype.toString=function(){return this.toKey()},t.prototype.toHex=function(t){var e;return null==t&&(t=!1),e="#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16),t?e+this.a.toString(16):e},t}(),m=o.Pixel,o.Plugin=function(){function t(){}return t.plugins={},t.register=function(t,e){return this.plugins[t]=e},t.execute=function(t,e,i){return this.plugins[e].apply(t,i)},t}(),v=o.Plugin,o.Renderer=function(){function t(t){this.c=t,this.processNext=M(this.processNext,this),this.renderQueue=[],this.modPixelData=null}return t.Blocks=o.NodeJS?require("os").cpus().length:4,t.prototype.add=function(t){if(null!=t)return this.renderQueue.push(t)},t.prototype.processNext=function(){var t;if(0===this.renderQueue.length)return h.trigger(this,"renderFinished"),null!=this.finishedFn&&this.finishedFn.call(this.c),this;switch(this.currentJob=this.renderQueue.shift(),this.currentJob.type){case d.Type.LayerDequeue:return t=this.c.canvasQueue.shift(),this.c.executeLayer(t),this.processNext();case d.Type.LayerFinished:return this.c.applyCurrentLayer(),this.c.popContext(),this.processNext();case d.Type.LoadOverlay:return this.loadOverlay(this.currentJob.layer,this.currentJob.src);case d.Type.Plugin:return this.executePlugin();default:return this.executeFilter();
}},t.prototype.execute=function(t){return this.finishedFn=t,this.modPixelData=A.dataArray(this.c.pixelData.length),this.processNext()},t.prototype.eachBlock=function(e){var i,n,s,r,a,h,d,c,u,g,f,p,m=this;for(this.blocksDone=0,c=this.c.pixelData.length,n=Math.floor(c/4/t.Blocks),i=4*n,d=i+c/4%t.Blocks*4,p=[],h=g=0,f=t.Blocks;0<=f?g<f:g>f;h=0<=f?++g:--g)u=h*i,r=u+(h===t.Blocks-1?d:i),o.NodeJS?(a=l(function(){return e.call(m,h,u,r)}),s=a.run(),p.push(this.blockFinished(s))):p.push(setTimeout(function(t,i,n){return function(){return e.call(m,t,i,n)}}(h,u,r),0));return p},t.prototype.executeFilter=function(){return h.trigger(this.c,"processStart",this.currentJob),this.currentJob.type===d.Type.Single?this.eachBlock(this.renderBlock):this.eachBlock(this.renderKernel)},t.prototype.executePlugin=function(){return f.debug("Executing plugin "+this.currentJob.plugin),v.execute(this.c,this.currentJob.plugin,this.currentJob.args),f.debug("Plugin "+this.currentJob.plugin+" finished!"),this.processNext()},t.prototype.renderBlock=function(e,i,n){var s,r,a;for(f.debug("Block #"+e+" - Filter: "+this.currentJob.name+", Start: "+i+", End: "+n),h.trigger(this.c,"blockStarted",{blockNum:e,totalBlocks:t.Blocks,startPixel:i,endPixel:n}),r=new m,r.setContext(this.c),s=a=i;a<n;s=a+=4)r.loc=s,r.r=this.c.pixelData[s],r.g=this.c.pixelData[s+1],r.b=this.c.pixelData[s+2],r.a=this.c.pixelData[s+3],this.currentJob.processFn(r),this.c.pixelData[s]=A.clampRGB(r.r),this.c.pixelData[s+1]=A.clampRGB(r.g),this.c.pixelData[s+2]=A.clampRGB(r.b),this.c.pixelData[s+3]=A.clampRGB(r.a);return o.NodeJS?l["yield"](e):this.blockFinished(e)},t.prototype.renderKernel=function(t,e,i){var n,s,r,a,h,d,c,u,g,p,v,w,y,R,b,x,L,C;for(w=this.currentJob.name,r=this.currentJob.bias,d=this.currentJob.divisor,v=this.c.pixelData.length,n=this.currentJob.adjust,s=Math.sqrt(n.length),p=[],f.debug("Rendering kernel - Filter: "+this.currentJob.name),e=Math.max(e,4*this.c.dimensions.width*((s-1)/2)),i=Math.min(i,v-4*this.c.dimensions.width*((s-1)/2)),a=(s-1)/2,R=new m,R.setContext(this.c),c=x=e;x<i;c=x+=4){for(R.loc=c,h=0,u=L=-a;-a<=a?L<=a:L>=a;u=-a<=a?++L:--L)for(g=C=a;a<=-a?C<=-a:C>=-a;g=a<=-a?++C:--C)y=R.getPixelRelative(u,g),p[3*h]=y.r,p[3*h+1]=y.g,p[3*h+2]=y.b,h++;b=this.processKernel(n,p,d,r),this.modPixelData[c]=A.clampRGB(b.r),this.modPixelData[c+1]=A.clampRGB(b.g),this.modPixelData[c+2]=A.clampRGB(b.b),this.modPixelData[c+3]=this.c.pixelData[c+3]}return o.NodeJS?l["yield"](t):this.blockFinished(t)},t.prototype.blockFinished=function(e){var i,n,o;if(e>=0&&f.debug("Block #"+e+" finished! Filter: "+this.currentJob.name),this.blocksDone++,h.trigger(this.c,"blockFinished",{blockNum:e,blocksFinished:this.blocksDone,totalBlocks:t.Blocks}),this.blocksDone===t.Blocks){if(this.currentJob.type===d.Type.Kernel)for(i=n=0,o=this.c.pixelData.length;0<=o?n<o:n>o;i=0<=o?++n:--n)this.c.pixelData[i]=this.modPixelData[i];return e>=0&&f.debug("Filter "+this.currentJob.name+" finished!"),h.trigger(this.c,"processComplete",this.currentJob),this.processNext()}},t.prototype.processKernel=function(t,e,i,n){var o,s,r,a;for(s={r:0,g:0,b:0},o=r=0,a=t.length;0<=a?r<a:r>a;o=0<=a?++r:--r)s.r+=t[o]*e[3*o],s.g+=t[o]*e[3*o+1],s.b+=t[o]*e[3*o+2];return s.r=s.r/i+n,s.g=s.g/i+n,s.b=s.b/i+n,s},t.prototype.loadOverlay=function(t,e){var i,n,o=this;return i=document.createElement("img"),i.onload=function(){return t.context.drawImage(i,0,0,o.c.dimensions.width,o.c.dimensions.height),t.imageData=t.context.getImageData(0,0,o.c.dimensions.width,o.c.dimensions.height),t.pixelData=t.imageData.data,o.c.pixelData=t.pixelData,o.processNext()},n=c.remoteCheck(e),i.src=null!=n?n:e},t}(),w=o.Renderer,o.Store=function(){function t(){}return t.items={},t.has=function(t){return null!=this.items[t]},t.get=function(t){return this.items[t]},t.put=function(t,e){return this.items[t]=e},t.execute=function(t,e){var i=this;return setTimeout(function(){return e.call(i.get(t),i.get(t))},0),this.get(t)},t.flush=function(t){return null==t&&(t=!1),t?delete this.items[t]:this.items={}},t}(),R=o.Store,i.register("normal",function(t,e){return{r:t.r,g:t.g,b:t.b}}),i.register("multiply",function(t,e){return{r:t.r*e.r/255,g:t.g*e.g/255,b:t.b*e.b/255}}),i.register("screen",function(t,e){return{r:255-(255-t.r)*(255-e.r)/255,g:255-(255-t.g)*(255-e.g)/255,b:255-(255-t.b)*(255-e.b)/255}}),i.register("overlay",function(t,e){var i;return i={},i.r=e.r>128?255-2*(255-t.r)*(255-e.r)/255:e.r*t.r*2/255,i.g=e.g>128?255-2*(255-t.g)*(255-e.g)/255:e.g*t.g*2/255,i.b=e.b>128?255-2*(255-t.b)*(255-e.b)/255:e.b*t.b*2/255,i}),i.register("difference",function(t,e){return{r:t.r-e.r,g:t.g-e.g,b:t.b-e.b}}),i.register("addition",function(t,e){return{r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}}),i.register("exclusion",function(t,e){return{r:128-2*(e.r-128)*(t.r-128)/255,g:128-2*(e.g-128)*(t.g-128)/255,b:128-2*(e.b-128)*(t.b-128)/255}}),i.register("softLight",function(t,e){var i;return i={},i.r=e.r>128?255-(255-e.r)*(255-(t.r-128))/255:e.r*(t.r+128)/255,i.g=e.g>128?255-(255-e.g)*(255-(t.g-128))/255:e.g*(t.g+128)/255,i.b=e.b>128?255-(255-e.b)*(255-(t.b-128))/255:e.b*(t.b+128)/255,i}),i.register("lighten",function(t,e){return{r:e.r>t.r?e.r:t.r,g:e.g>t.g?e.g:t.g,b:e.b>t.b?e.b:t.b}}),i.register("darken",function(t,e){return{r:e.r>t.r?t.r:e.r,g:e.g>t.g?t.g:e.g,b:e.b>t.b?t.b:e.b}}),d.register("fillColor",function(){var t;return t=1===arguments.length?a.hexToRGB(arguments[0]):{r:arguments[0],g:arguments[1],b:arguments[2]},this.process("fillColor",function(e){return e.r=t.r,e.g=t.g,e.b=t.b,e.a=255,e})}),d.register("brightness",function(t){return t=Math.floor(255*(t/100)),this.process("brightness",function(e){return e.r+=t,e.g+=t,e.b+=t,e})}),d.register("saturation",function(t){return t*=-.01,this.process("saturation",function(e){var i;return i=Math.max(e.r,e.g,e.b),e.r!==i&&(e.r+=(i-e.r)*t),e.g!==i&&(e.g+=(i-e.g)*t),e.b!==i&&(e.b+=(i-e.b)*t),e})}),d.register("vibrance",function(t){return t*=-1,this.process("vibrance",function(e){var i,n,o;return o=Math.max(e.r,e.g,e.b),n=(e.r+e.g+e.b)/3,i=2*Math.abs(o-n)/255*t/100,e.r!==o&&(e.r+=(o-e.r)*i),e.g!==o&&(e.g+=(o-e.g)*i),e.b!==o&&(e.b+=(o-e.b)*i),e})}),d.register("greyscale",function(t){return this.process("greyscale",function(t){var e;return e=n.luminance(t),t.r=e,t.g=e,t.b=e,t})}),d.register("contrast",function(t){return t=Math.pow((t+100)/100,2),this.process("contrast",function(e){return e.r/=255,e.r-=.5,e.r*=t,e.r+=.5,e.r*=255,e.g/=255,e.g-=.5,e.g*=t,e.g+=.5,e.g*=255,e.b/=255,e.b-=.5,e.b*=t,e.b+=.5,e.b*=255,e})}),d.register("hue",function(t){return this.process("hue",function(e){var i,n,o,s,r,h;return s=a.rgbToHSV(e.r,e.g,e.b),o=100*s.h,o+=Math.abs(t),o%=100,o/=100,s.h=o,h=a.hsvToRGB(s.h,s.s,s.v),r=h.r,n=h.g,i=h.b,e.r=r,e.g=n,e.b=i,e})}),d.register("colorize",function(){var t,e;return 2===arguments.length?(e=a.hexToRGB(arguments[0]),t=arguments[1]):4===arguments.length&&(e={r:arguments[0],g:arguments[1],b:arguments[2]},t=arguments[3]),this.process("colorize",function(i){return i.r-=(i.r-e.r)*(t/100),i.g-=(i.g-e.g)*(t/100),i.b-=(i.b-e.b)*(t/100),i})}),d.register("invert",function(){return this.process("invert",function(t){return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,t})}),d.register("sepia",function(t){return null==t&&(t=100),t/=100,this.process("sepia",function(e){return e.r=Math.min(255,e.r*(1-.607*t)+e.g*(.769*t)+e.b*(.189*t)),e.g=Math.min(255,e.r*(.349*t)+e.g*(1-.314*t)+e.b*(.168*t)),e.b=Math.min(255,e.r*(.272*t)+e.g*(.534*t)+e.b*(1-.869*t)),e})}),d.register("gamma",function(t){return this.process("gamma",function(e){return e.r=255*Math.pow(e.r/255,t),e.g=255*Math.pow(e.g/255,t),e.b=255*Math.pow(e.b/255,t),e})}),d.register("noise",function(t){return t=2.55*Math.abs(t),this.process("noise",function(e){var i;return i=n.randomRange(t*-1,t),e.r+=i,e.g+=i,e.b+=i,e})}),d.register("clip",function(t){return t=2.55*Math.abs(t),this.process("clip",function(e){return e.r>255-t?e.r=255:e.r<t&&(e.r=0),e.g>255-t?e.g=255:e.g<t&&(e.g=0),e.b>255-t?e.b=255:e.b<t&&(e.b=0),e})}),d.register("channels",function(t){var e,i;if("object"!=typeof t)return this;for(e in t)B.call(t,e)&&(i=t[e],0!==i?t[e]/=100:delete t[e]);return 0===t.length?this:this.process("channels",function(e){return null!=t.red&&(t.red>0?e.r+=(255-e.r)*t.red:e.r-=e.r*Math.abs(t.red)),null!=t.green&&(t.green>0?e.g+=(255-e.g)*t.green:e.g-=e.g*Math.abs(t.green)),null!=t.blue&&(t.blue>0?e.b+=(255-e.b)*t.blue:e.b-=e.b*Math.abs(t.blue)),e})}),d.register("curves",function(){var t,e,i,o,s,r,a,h,l,d,c,u;if(e=arguments[0],i=2<=arguments.length?E.call(arguments,1):[],"string"==typeof e&&(e=e.split("")),"v"===e[0]&&(e=["r","g","b"]),i.length<3||i.length>4)throw"Invalid number of arguments to curves filter";if(h=i[0],o=i[1],s=4===i.length?i[2]:i[1],r=i[i.length-1],t=n.bezier(h,o,s,r,0,255),h[0]>0)for(a=l=0,c=h[0];0<=c?l<c:l>c;a=0<=c?++l:--l)t[a]=h[1];if(r[0]<255)for(a=d=u=r[0];u<=255?d<=255:d>=255;a=u<=255?++d:--d)t[a]=r[1];return this.process("curves",function(i){var n,o;for(a=n=0,o=e.length;0<=o?n<o:n>o;a=0<=o?++n:--n)i[e[a]]=t[i[e[a]]];return i})}),d.register("exposure",function(t){var e,i,n;return n=Math.abs(t)/100,e=[0,255*n],i=[255-255*n,255],t<0&&(e=e.reverse(),i=i.reverse()),this.curves("rgb",[0,0],e,i,[255,255])}),o.Plugin.register("crop",function(t,e,i,n){var o,s;return null==i&&(i=0),null==n&&(n=0),"undefined"!=typeof exports&&null!==exports?o=new r(t,e):(o=document.createElement("canvas"),A.copyAttributes(this.canvas,o),o.width=t,o.height=e),s=o.getContext("2d"),s.drawImage(this.canvas,i,n,t,e,0,0,t,e),this.cropCoordinates={x:i,y:n},this.cropped=!0,this.replaceCanvas(o)}),o.Plugin.register("resize",function(t){var e,i;return null==t&&(t=null),null===t||null==t.width&&null==t.height?void f.error("Invalid or missing dimensions given for resize"):(null==t.width?t.width=this.canvas.width*t.height/this.canvas.height:null==t.height&&(t.height=this.canvas.height*t.width/this.canvas.width),"undefined"!=typeof exports&&null!==exports?e=new r(t.width,t.height):(e=document.createElement("canvas"),A.copyAttributes(this.canvas,e),e.width=t.width,e.height=t.height),i=e.getContext("2d"),i.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,t.width,t.height),this.resized=!0,this.replaceCanvas(e))}),o.Filter.register("crop",function(){return this.processPlugin("crop",Array.prototype.slice.call(arguments,0))}),o.Filter.register("resize",function(){return this.processPlugin("resize",Array.prototype.slice.call(arguments,0))}),o.Filter.register("boxBlur",function(){return this.processKernel("Box Blur",[1,1,1,1,1,1,1,1,1])}),o.Filter.register("heavyRadialBlur",function(){return this.processKernel("Heavy Radial Blur",[0,0,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,0,0])}),o.Filter.register("gaussianBlur",function(){return this.processKernel("Gaussian Blur",[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1])}),o.Filter.register("motionBlur",function(t){var e;return e=0===t||180===t?[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]:t>0&&t<90||t>180&&t<270?[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0]:90===t||270===t?[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],this.processKernel("Motion Blur",e)}),o.Filter.register("sharpen",function(t){return null==t&&(t=100),t/=100,this.processKernel("Sharpen",[0,-t,0,-t,4*t+1,-t,0,-t,0])}),C={brightness:function(t,e,i){return t.r=t.r-t.r*e*i.strength,t.g=t.g-t.g*e*i.strength,t.b=t.b-t.b*e*i.strength,t},gamma:function(t,e,i){return t.r=255*Math.pow(t.r/255,Math.max(10*e*i.strength,1)),t.g=255*Math.pow(t.g/255,Math.max(10*e*i.strength,1)),t.b=255*Math.pow(t.b/255,Math.max(10*e*i.strength,1)),t},colorize:function(t,e,i){return t.r-=(t.r-i.color.r)*e,t.g-=(t.g-i.color.g)*e,t.b-=(t.b-i.color.b)*e,t}},d.register("vignette",function(t,e){var i,o,s,r;return null==e&&(e=60),"string"==typeof t&&"%"===t.substr(-1)&&(t=this.dimensions.height>this.dimensions.width?this.dimensions.width*(parseInt(t.substr(0,t.length-1),10)/100):this.dimensions.height*(parseInt(t.substr(0,t.length-1),10)/100)),e/=100,o=[this.dimensions.width/2,this.dimensions.height/2],r=Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2)),s=r-t,i=n.bezier([0,1],[30,30],[70,60],[100,80]),this.process("vignette",function(r){var a,h,l;return l=r.locationXY(),a=n.distance(l.x,l.y,o[0],o[1]),a>s&&(h=Math.max(1,i[Math.round((a-s)/t*100)]/10*e),r.r=255*Math.pow(r.r/255,h),r.g=255*Math.pow(r.g/255,h),r.b=255*Math.pow(r.b/255,h)),r})}),d.register("rectangularVignette",function(t){var e,i,s,r,h,l,d;if(e={strength:50,cornerRadius:0,method:"brightness",color:{r:0,g:0,b:0}},t=A.extend(e,t),!t.size)return this;if("string"==typeof t.size)s=parseInt(t.size,10)/100,t.size={width:this.dimensions.width*s,height:this.dimensions.height*s};else if("object"==typeof t.size)for(d=["width","height"],h=0,l=d.length;h<l;h++)i=d[h],"string"==typeof t.size[i]&&(t.size[i]=this.dimensions[i]*(parseInt(t.size[i],10)/100));else"number"===t.size&&(r=t.size,t.size={width:r,height:r});return"string"==typeof t.cornerRadius&&(t.cornerRadius=t.size.width/2*(parseInt(t.cornerRadius,10)/100)),t.strength/=100,t.size.width=Math.floor(t.size.width),t.size.height=Math.floor(t.size.height),t.image={width:this.dimensions.width,height:this.dimensions.height},"colorize"===t.method&&"string"==typeof t.color&&(t.color=a.hexToRGB(t.color)),t.coords={left:(this.dimensions.width-t.size.width)/2,right:this.dimensions.width-t.coords.left,bottom:(this.dimensions.height-t.size.height)/2,top:this.dimensions.height-t.coords.bottom},t.corners=[{x:t.coords.left+t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.bottom+t.cornerRadius},{x:t.coords.left+t.cornerRadius,y:t.coords.bottom+t.cornerRadius}],t.maxDist=n.distance(0,0,t.corners[3].x,t.corners[3].y)-t.cornerRadius,this.process("rectangularVignette",function(e){var i,n,s;return n=e.locationXY(),n.x>t.corners[0].x&&n.x<t.corners[1].x&&n.y>t.coords.bottom&&n.y<t.coords.top?e:n.x>t.coords.left&&n.x<t.coords.right&&n.y>t.corners[3].y&&n.y<t.corners[2].y?e:(n.x>t.corners[0].x&&n.x<t.corners[1].x&&n.y>t.coords.top?i=(n.y-t.coords.top)/t.maxDist:n.y>t.corners[2].y&&n.y<t.corners[1].y&&n.x>t.coords.right?i=(n.x-t.coords.right)/t.maxDist:n.x>t.corners[0].x&&n.x<t.corners[1].x&&n.y<t.coords.bottom?i=(t.coords.bottom-n.y)/t.maxDist:n.y>t.corners[2].y&&n.y<t.corners[1].y&&n.x<t.coords.left?i=(t.coords.left-n.x)/t.maxDist:n.x<=t.corners[0].x&&n.y>=t.corners[0].y?(s=o.distance(n.x,n.y,t.corners[0].x,t.corners[0].y),i=(s-t.cornerRadius)/t.maxDist):n.x>=t.corners[1].x&&n.y>=t.corners[1].y?(s=o.distance(n.x,n.y,t.corners[1].x,t.corners[1].y),i=(s-t.cornerRadius)/t.maxDist):n.x>=t.corners[2].x&&n.y<=t.corners[2].y?(s=o.distance(n.x,n.y,t.corners[2].x,t.corners[2].y),i=(s-t.cornerRadius)/t.maxDist):n.x<=t.corners[3].x&&n.y<=t.corners[3].y&&(s=o.distance(n.x,n.y,t.corners[3].x,t.corners[3].y),i=(s-t.cornerRadius)/t.maxDist),i<0?e:C[t.method](e,i,t))})}),function(){var t,e,i,n,s;return n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],e=function(t,e,i,n,o,s,a){var h,l,d,c,u,g,f;return h="undefined"!=typeof exports&&null!==exports?new r:document.createElement("canvas"),h.width=t,h.height=e,c=i+Math.cos(o)*s*.5,g=n+Math.sin(o)*s*.5,u=i-Math.cos(o)*s*.5,f=n-Math.sin(o)*s*.5,l=h.getContext("2d"),d=l.createLinearGradient(c,g,u,f),a?(d.addColorStop(0,"white"),d.addColorStop(.5,"black"),d.addColorStop(1,"white")):(d.addColorStop(0,"white"),d.addColorStop(1,"black")),l.fillStyle=d,l.fillRect(0,0,t,e),l.getImageData(0,0,t,e)},i=function(t,e,i,n,o,s){var a,h,l;return a="undefined"!=typeof exports&&null!==exports?new r:document.createElement("canvas"),a.width=t,a.height=e,h=a.getContext("2d"),l=h.createRadialGradient(i,n,o,i,n,s),l.addColorStop(1,"white"),l.addColorStop(0,"black"),h.fillStyle=l,h.fillRect(0,0,t,e),h.getImageData(0,0,t,e)},t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},o.Plugin.register("compoundBlur",function(e,i,o,r){var a,h,l,d,c,u,g,f,p,m,v,w,y,R,A,b,x,L,C,k,E,B,M,S,F,T,P,_,D,H,$,O,N,I,W,j,X,z,Y,U,V,G,Z,K,q,J,Q,tt,et,it,nt,ot,st,rt,at,ht,lt,dt;for(G=this.dimensions.width,m=this.dimensions.height,A=this.pixelData,_=e.data,U=G*m,V=U<<2,M=[],w=et=0;0<=V?et<V:et>V;w=0<=V?++et:--et)M[w]=A[w];for(c=0,X=r,r-=1;X-- >=0;)if(x=i+.5|0,0!==x){for(x>256&&(x=256),u=x+x+1,Y=G<<2,Z=G-1,v=m-1,D=x+1,z=D*(D+1)/2,j=new t,N=void 0,O=j,w=it=1;1<=u?it<u:it>u;w=1<=u?++it:--it)O=O.next=new t,w===D&&(N=O);for(O.next=j,I=null,W=null,tt=J=0,C=n[x],$=s[x],q=nt=0;0<=m?nt<m:nt>m;q=0<=m?++nt:--nt){for(F=g=a=P=p=l=0,T=D*(S=M[J]),f=D*(B=M[J+1]),h=D*(E=M[J+2]),P+=z*S,p+=z*B,l+=z*E,O=j,w=ot=0;0<=D?ot<D:ot>D;w=0<=D?++ot:--ot)O.r=S,O.g=B,O.b=E,O=O.next;for(w=st=1;1<=D?st<D:st>D;w=1<=D?++st:--st)k=J+((Z<w?Z:w)<<2),P+=(O.r=S=M[k])*(H=D-w),p+=(O.g=B=M[k+1])*H,l+=(O.b=E=M[k+2])*H,F+=S,g+=B,a+=E,O=O.next;for(I=j,W=N,K=rt=0;0<=G?rt<G:rt>G;K=0<=G?++rt:--rt)M[J]=P*C>>$,M[J+1]=p*C>>$,M[J+2]=l*C>>$,P-=T,p-=f,l-=h,T-=I.r,f-=I.g,h-=I.b,k=tt+((k=K+D)<Z?k:Z)<<2,F+=I.r=M[k],g+=I.g=M[k+1],a+=I.b=M[k+2],P+=F,p+=g,l+=a,I=I.next,T+=S=W.r,f+=B=W.g,h+=E=W.b,F-=S,g-=B,a-=E,W=W.next,J+=4;tt+=G}for(K=at=0;0<=G?at<G:at>G;K=0<=G?++at:--at){for(g=a=F=p=l=P=0,J=K<<2,T=D*(S=M[J]),f=D*(B=M[J+1]),h=D*(E=M[J+2]),P+=z*S,p+=z*B,l+=z*E,O=j,w=ht=0;0<=D?ht<D:ht>D;w=0<=D?++ht:--ht)O.r=S,O.g=B,O.b=E,O=O.next;for(Q=G,w=lt=1;1<=D?lt<D:lt>D;w=1<=D?++lt:--lt)J=Q+K<<2,P+=(O.r=S=M[J])*(H=D-w),p+=(O.g=B=M[J+1])*H,l+=(O.b=E=M[J+2])*H,F+=S,g+=B,a+=E,O=O.next,w<v&&(Q+=G);for(J=K,I=j,W=N,q=dt=0;0<=m?dt<m:dt>m;q=0<=m?++dt:--dt)k=J<<2,M[k]=P*C>>$,M[k+1]=p*C>>$,M[k+2]=l*C>>$,P-=T,p-=f,l-=h,T-=I.r,f-=I.g,h-=I.b,k=K+((k=q+D)<v?k:v)*G<<2,P+=F+=I.r=M[k],p+=g+=I.g=M[k+1],l+=a+=I.b=M[k+2],I=I.next,T+=S=W.r,f+=B=W.g,h+=E=W.b,F-=S,g-=B,a-=E,W=W.next,J+=G}for(i*=o,w=U;--w>-1;)R=w<<2,L=(255&_[R+2])/255*r,b=0|L,b===c?(d=256*(L-(0|L)),y=256-d,A[R]=A[R]*y+M[R]*d>>8,A[R+1]=A[R+1]*y+M[R+1]*d>>8,A[R+2]=A[R+2]*y+M[R+2]*d>>8):b===c+1&&(A[R]=M[R],A[R+1]=M[R+1],A[R+2]=M[R+2]);c++}return this}),o.Filter.register("tiltShift",function(t){var i,n;return i={center:{x:this.dimensions.width/2,y:this.dimensions.height/2},angle:45,focusWidth:200,startRadius:3,radiusFactor:1.5,steps:3},t=A.extend(i,t),t.angle*=Math.PI/180,n=e(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,t.angle,t.focusWidth,!0),this.processPlugin("compoundBlur",[n,t.startRadius,t.radiusFactor,t.steps])}),o.Filter.register("radialBlur",function(t){var e,n,o,s;return e={size:50,center:{x:this.dimensions.width/2,y:this.dimensions.height/2},startRadius:3,radiusFactor:1.5,steps:3,radius:null},t=A.extend(e,t),t.radius||(t.radius=this.dimensions.width<this.dimensions.height?this.dimensions.height:this.dimensions.width),o=t.radius/2-t.size,s=t.radius/2,n=i(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,o,s),this.processPlugin("compoundBlur",[n,t.startRadius,t.radiusFactor,t.steps])})}(),o.Filter.register("edgeEnhance",function(){return this.processKernel("Edge Enhance",[0,0,0,-1,1,0,0,0,0])}),o.Filter.register("edgeDetect",function(){return this.processKernel("Edge Detect",[-1,-1,-1,-1,8,-1,-1,-1,-1])}),o.Filter.register("emboss",function(){return this.processKernel("Emboss",[-2,-1,0,-1,1,1,0,1,2])}),o.Filter.register("posterize",function(t){var e,i;return e=256/t,i=255/(t-1),this.process("posterize",function(t){return t.r=Math.floor(Math.floor(t.r/e)*i),t.g=Math.floor(Math.floor(t.g/e)*i),t.b=Math.floor(Math.floor(t.b/e)*i),t})}),o.Filter.register("vintage",function(t){if(null==t&&(t=!0),this.greyscale(),this.contrast(5),this.noise(3),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.87),t)return this.vignette("40%",30)}),o.Filter.register("lomo",function(t){return null==t&&(t=!0),this.brightness(15),this.exposure(15),this.curves("rgb",[0,0],[200,0],[155,255],[255,255]),this.saturation(-20),this.gamma(1.8),t&&this.vignette("50%",60),this.brightness(5)}),o.Filter.register("clarity",function(t){return null==t&&(t=!1),this.vibrance(20),this.curves("rgb",[5,0],[130,150],[190,220],[250,255]),this.sharpen(15),this.vignette("45%",20),t&&(this.greyscale(),this.contrast(4)),this}),o.Filter.register("sinCity",function(){return this.contrast(100),this.brightness(15),this.exposure(10),this.posterize(80),this.clip(30),this.greyscale()}),o.Filter.register("sunrise",function(){return this.exposure(3.5),this.saturation(-5),this.vibrance(50),this.sepia(60),this.colorize("#e87b22",10),this.channels({red:8,blue:8}),this.contrast(5),this.gamma(1.2),this.vignette("55%",25)}),o.Filter.register("crossProcess",function(){return this.exposure(5),this.colorize("#e87b22",4),this.sepia(20),this.channels({blue:8,red:3}),this.curves("b",[0,0],[100,150],[180,180],[255,255]),this.contrast(15),this.vibrance(75),this.gamma(1.6)}),o.Filter.register("orangePeel",function(){return this.curves("rgb",[0,0],[100,50],[140,200],[255,255]),this.vibrance(-30),this.saturation(-30),this.colorize("#ff9000",30),this.contrast(-5),this.gamma(1.4)}),o.Filter.register("love",function(){return this.brightness(5),this.exposure(8),this.contrast(4),this.colorize("#c42007",30),this.vibrance(50),this.gamma(1.3)}),o.Filter.register("grungy",function(){return this.gamma(1.5),this.clip(25),this.saturation(-60),this.contrast(5),this.noise(5),this.vignette("50%",30)}),o.Filter.register("jarques",function(){return this.saturation(-35),this.curves("b",[20,0],[90,120],[186,144],[255,230]),this.curves("r",[0,0],[144,90],[138,120],[255,255]),this.curves("g",[10,0],[115,105],[148,100],[255,248]),this.curves("rgb",[0,0],[120,100],[128,140],[255,255]),this.sharpen(20)}),o.Filter.register("pinhole",function(){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),o.Filter.register("oldBoot",function(){return this.saturation(-20),this.vibrance(-50),this.gamma(1.1),this.sepia(30),this.channels({red:-10,blue:5}),this.curves("rgb",[0,0],[80,50],[128,230],[255,255]),this.vignette("60%",30)}),o.Filter.register("glowingSun",function(t){if(null==t&&(t=!0),this.brightness(10),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.gamma(.8),this.filter.contrast(50),this.filter.exposure(10)}),this.newLayer(function(){return this.setBlendingMode("softLight"),this.opacity(80),this.fillColor("#f49600")}),this.exposure(20),this.gamma(.8),t)return this.vignette("45%",20)}),o.Filter.register("hazyDays",function(){return this.gamma(1.2),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(60),this.copyParent(),this.filter.channels({red:5}),this.filter.stackBlur(15)}),this.newLayer(function(){return this.setBlendingMode("addition"),this.opacity(40),this.fillColor("#6899ba")}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(35),this.copyParent(),this.filter.brightness(40),this.filter.vibrance(40),this.filter.exposure(30),this.filter.contrast(15),this.filter.curves("r",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("g",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("b",[0,40],[128,128],[128,128],[255,215]),this.filter.stackBlur(5)}),this.curves("r",[20,0],[128,158],[128,128],[235,255]),this.curves("g",[20,0],[128,128],[128,128],[235,255]),this.curves("b",[20,0],[128,108],[128,128],[235,255]),this.vignette("45%",20)}),o.Filter.register("herMajesty",function(){return this.brightness(40),this.colorize("#ea1c5d",10),this.curves("b",[0,10],[128,180],[190,190],[255,255]),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(50),this.copyParent(),this.filter.gamma(.7),this.newLayer(function(){return this.setBlendingMode("normal"),this.opacity(60),this.fillColor("#ea1c5d")})}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(60),this.copyParent(),this.filter.saturation(50),this.filter.hue(90),this.filter.contrast(10)}),this.gamma(1.4),this.vibrance(-30),this.newLayer(function(){return this.opacity(10),this.fillColor("#e5f0ff")}),this}),o.Filter.register("nostalgia",function(){return this.saturation(20),this.gamma(1.4),this.greyscale(),this.contrast(5),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.8),this.contrast(5),this.exposure(10),this.newLayer(function(){return this.setBlendingMode("overlay"),this.copyParent(),this.opacity(55),this.filter.stackBlur(10)}),this.vignette("50%",30)}),o.Filter.register("hemingway",function(){return this.greyscale(),this.contrast(10),this.gamma(.9),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(40),this.copyParent(),this.filter.exposure(15),this.filter.contrast(15),this.filter.channels({green:10,red:5})}),this.sepia(30),this.curves("rgb",[0,10],[120,90],[180,200],[235,255]),this.channels({red:5,green:-2}),this.exposure(15)}),o.Filter.register("concentrate",function(){return this.sharpen(40),this.saturation(-50),this.channels({red:3}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.sharpen(5),this.filter.contrast(50),this.filter.exposure(10),this.filter.channels({blue:5})}),this.brightness(10)}),o.Plugin.register("rotate",function(t){var e,i,n,o,s,a,h,l;return e=t%360,0===e?this.dimensions={width:this.canvas.width,height:this.canvas.height}:(s=Math.PI/180,"undefined"!=typeof exports&&null!==exports?i=new r:(i=document.createElement("canvas"),A.copyAttributes(this.canvas,i)),90===e||e===-270||270===e||e===-90?(a=this.canvas.height,o=this.canvas.width,h=a/2,l=o/2):180===e?(a=this.canvas.width,o=this.canvas.height,h=a/2,l=o/2):(a=Math.sqrt(Math.pow(this.originalWidth,2)+Math.pow(this.originalHeight,2)),o=a,h=this.canvas.height/2,l=this.canvas.width/2),i.width=a,i.height=o,n=i.getContext("2d"),n.save(),n.translate(h,l),n.rotate(e*s),n.drawImage(this.canvas,-this.canvas.width/2,-this.canvas.height/2,this.canvas.width,this.canvas.height),n.restore(),this.replaceCanvas(i))}),o.Filter.register("rotate",function(){return this.processPlugin("rotate",Array.prototype.slice.call(arguments,0))}),function(){var t,e,i;return e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},o.Plugin.register("stackBlur",function(n){var o,s,r,a,h,l,d,c,u,g,f,p,m,v,w,y,R,A,b,x,L,C,k,E,B,M,S,F,T,P,_,D,H,$,O,N,I,W,j,X,z,Y,U,V,G;if(!(isNaN(n)||n<1)){for(n|=0,w=this.pixelData,P=this.dimensions.width,c=this.dimensions.height,a=n+n+1,T=P<<2,_=P-1,u=c-1,x=n+1,F=x*(x+1)/2,S=new t,k=S,g=I=1;1<=a?I<a:I>a;g=1<=a?++I:--I)k=k.next=new t,g===x&&(E=k);for(k.next=S,B=null,M=null,N=$=0,f=e[n],C=i[n],H=W=0;0<=c?W<c:W>c;H=0<=c?++W:--W){for(R=h=o=b=d=r=0,A=x*(y=w[$]),l=x*(v=w[$+1]),s=x*(m=w[$+2]),b+=F*y,d+=F*v,r+=F*m,k=S,g=j=0;0<=x?j<x:j>x;g=0<=x?++j:--j)k.r=y,k.g=v,k.b=m,k=k.next;for(g=X=1;1<=x?X<x:X>x;g=1<=x?++X:--X)p=$+((_<g?_:g)<<2),b+=(k.r=y=w[p])*(L=x-g),d+=(k.g=v=w[p+1])*L,r+=(k.b=m=w[p+2])*L,R+=y,h+=v,o+=m,k=k.next;for(B=S,M=E,D=z=0;0<=P?z<P:z>P;D=0<=P?++z:--z)w[$]=b*f>>C,w[$+1]=d*f>>C,w[$+2]=r*f>>C,b-=A,d-=l,r-=s,A-=B.r,l-=B.g,s-=B.b,p=N+((p=D+n+1)<_?p:_)<<2,R+=B.r=w[p],h+=B.g=w[p+1],o+=B.b=w[p+2],b+=R,d+=h,r+=o,B=B.next,A+=y=M.r,l+=v=M.g,s+=m=M.b,R-=y,h-=v,o-=m,M=M.next,$+=4;N+=P}for(D=Y=0;0<=P?Y<P:Y>P;D=0<=P?++Y:--Y){for(h=o=R=d=r=b=0,$=D<<2,A=x*(y=w[$]),l=x*(v=w[$+1]),s=x*(m=w[$+2]),b+=F*y,d+=F*v,r+=F*m,k=S,g=U=0;0<=x?U<x:U>x;g=0<=x?++U:--U)k.r=y,k.g=v,k.b=m,k=k.next;for(O=P,g=V=1;1<=n?V<=n:V>=n;g=1<=n?++V:--V)$=O+D<<2,b+=(k.r=y=w[$])*(L=x-g),d+=(k.g=v=w[$+1])*L,r+=(k.b=m=w[$+2])*L,R+=y,h+=v,o+=m,k=k.next,g<u&&(O+=P);for($=D,B=S,M=E,H=G=0;0<=c?G<c:G>c;H=0<=c?++G:--G)p=$<<2,w[p]=b*f>>C,w[p+1]=d*f>>C,w[p+2]=r*f>>C,b-=A,d-=l,r-=s,A-=B.r,l-=B.g,s-=B.b,p=D+((p=H+x)<u?p:u)*P<<2,b+=R+=B.r=w[p],d+=h+=B.g=w[p+1],r+=o+=B.b=w[p+2],B=B.next,A+=y=M.r,l+=v=M.g,s+=m=M.b,R-=y,h-=v,o-=m,M=M.next,$+=P}return this}}),o.Filter.register("stackBlur",function(t){return this.processPlugin("stackBlur",[t])})}(),o.Filter.register("threshold",function(t){return this.process("threshold",function(e){var i;return i=.2126*e.r+.7152*e.g+.0722*e.b,i<t?(e.r=0,e.g=0,e.b=0):(e.r=255,e.g=255,e.b=255),e})})}.call(this),function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){function i(i,s,a){function h(t,e,n){var o,s="$()."+i+'("'+e+'")';return t.each(function(t,h){var l=a.data(h,i);if(!l)return void r(i+" not initialized. Cannot call methods, i.e. "+s);
var d=l[e];if(!d||"_"==e.charAt(0))return void r(s+" is not a valid method");var c=d.apply(l,n);o=void 0===o?c:o}),void 0!==o?o:t}function l(t,e){t.each(function(t,n){var o=a.data(n,i);o?(o.option(e),o._init()):(o=new s(n,e),a.data(n,i,o))})}a=a||e||t.jQuery,a&&(s.prototype.option||(s.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=o.call(arguments,1);return h(this,t,e)}return l(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var o=Array.prototype.slice,s=t.console,r="undefined"==typeof s?function(){}:function(t){s.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){function t(t){var e=parseFloat(t),i=t.indexOf("%")==-1&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<l;e++){var i=h[e];t[i]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function o(){if(!d){d=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var o=n(e);s.isBoxSizeOuter=r=200==t(o.width),i.removeChild(e)}}function s(e){if(o(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var s=n(e);if("none"==s.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var d=a.isBorderBox="border-box"==s.boxSizing,c=0;c<l;c++){var u=h[c],g=s[u],f=parseFloat(g);a[u]=isNaN(f)?0:f}var p=a.paddingLeft+a.paddingRight,m=a.paddingTop+a.paddingBottom,v=a.marginLeft+a.marginRight,w=a.marginTop+a.marginBottom,y=a.borderLeftWidth+a.borderRightWidth,R=a.borderTopWidth+a.borderBottomWidth,A=d&&r,b=t(s.width);b!==!1&&(a.width=b+(A?0:p+y));var x=t(s.height);return x!==!1&&(a.height=x+(A?0:m+R)),a.innerWidth=a.width-(p+y),a.innerHeight=a.height-(m+R),a.outerWidth=a.width+v,a.outerHeight=a.height+w,a}}var r,a="undefined"==typeof console?e:function(t){console.error(t)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],l=h.length,d=!1;return s}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return n.indexOf(e)==-1&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return n!=-1&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var s=this._onceEvents&&this._onceEvents[t];o;){var r=s&&s[o];r&&(this.off(t,o),delete s[o]),o.apply(this,e),n+=r?0:1,o=i[n]}return this}},t}),function(t,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.Unipointer=e(t,t.EvEmitter)}(window,function(t,e){function i(){}function n(){}var o=n.prototype=Object.create(e.prototype);o.bindStartEvent=function(t){this._bindStartEvent(t,!0)},o.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},o._bindStartEvent=function(e,i){i=void 0===i||!!i;var n=i?"addEventListener":"removeEventListener";t.navigator.pointerEnabled?e[n]("pointerdown",this):t.navigator.msPointerEnabled?e[n]("MSPointerDown",this):(e[n]("mousedown",this),e[n]("touchstart",this))},o.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},o.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},o.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},o.onMSPointerDown=o.onpointerdown=function(t){this._pointerDown(t,t)},o._pointerDown=function(t,e){this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},o.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var s={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};return o._bindPostStartEvents=function(e){if(e){var i=s[e.type];i.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=i}},o._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},o.onmousemove=function(t){this._pointerMove(t,t)},o.onMSPointerMove=o.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},o.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},o._pointerMove=function(t,e){this.pointerMove(t,e)},o.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},o.onmouseup=function(t){this._pointerUp(t,t)},o.onMSPointerUp=o.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},o.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},o._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},o.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},o._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},o.pointerDone=i,o.onMSPointerCancel=o.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},o.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},o._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},o.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},n.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},n}),function(t,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.Unidragger=e(t,t.Unipointer)}(window,function(t,e){function i(){}function n(){}var o=n.prototype=Object.create(e.prototype);o.bindHandles=function(){this._bindHandles(!0)},o.unbindHandles=function(){this._bindHandles(!1)};var s=t.navigator;return o._bindHandles=function(t){t=void 0===t||!!t;var e;e=s.pointerEnabled?function(e){e.style.touchAction=t?"none":""}:s.msPointerEnabled?function(e){e.style.msTouchAction=t?"none":""}:i;for(var n=t?"addEventListener":"removeEventListener",o=0;o<this.handles.length;o++){var r=this.handles[o];this._bindStartEvent(r,t),e(r),r[n]("click",this)}},o.pointerDown=function(t,e){if("INPUT"==t.target.nodeName&&"range"==t.target.type)return this.isPointerDown=!1,void delete this.pointerIdentifier;this._dragPointerDown(t,e);var i=document.activeElement;i&&i.blur&&i.blur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])},o._dragPointerDown=function(t,i){this.pointerDownPoint=e.getPointerPoint(i);var n=this.canPreventDefaultOnPointerDown(t,i);n&&t.preventDefault()},o.canPreventDefaultOnPointerDown=function(t){return"SELECT"!=t.target.nodeName},o.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},o._dragPointerMove=function(t,i){var n=e.getPointerPoint(i),o={x:n.x-this.pointerDownPoint.x,y:n.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(o)&&this._dragStart(t,i),o},o.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},o.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},o._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},o._dragStart=function(t,i){this.isDragging=!0,this.dragStartPoint=e.getPointerPoint(i),this.isPreventingClicks=!0,this.dragStart(t,i)},o.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},o._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},o.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},o._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},o.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},o.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},o._staticClick=function(t,e){if(!this.isIgnoringMouseUp||"mouseup"!=t.type){var i=t.target.nodeName;"INPUT"!=i&&"TEXTAREA"!=i||t.target.focus(),this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400))}},o.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},n.getPointerPoint=e.getPointerPoint,n}),function(t,e){"function"==typeof define&&define.amd?define(["get-size/get-size","unidragger/unidragger"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("get-size"),require("unidragger")):t.Draggabilly=e(t,t.getSize,t.Unidragger)}(window,function(t,e,i){function n(){}function o(t,e){for(var i in e)t[i]=e[i];return t}function s(t){return t instanceof HTMLElement}function r(t,e){this.element="string"==typeof t?h.querySelector(t):t,g&&(this.$element=g(this.element)),this.options=o({},this.constructor.defaults),this.option(e),this._create()}function a(t,e,i){return i=i||"round",e?Math[i](t/e)*e:t}var h=t.document,l=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,d=0;l||(l=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-d)),n=setTimeout(t,i);return d=e+i,n});var c=h.documentElement,u="string"==typeof c.style.transform?"transform":"WebkitTransform",g=t.jQuery,f=r.prototype=Object.create(i.prototype);r.defaults={},f.option=function(t){o(this.options,t)};var p={relative:!0,absolute:!0,fixed:!0};return f._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=o({},this.position);var t=getComputedStyle(this.element);p[t.position]||(this.element.style.position="relative"),this.enable(),this.setHandles()},f.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},f.dispatchEvent=function(e,i,n){var o=[i].concat(n);this.emitEvent(e,o);var s=t.jQuery;if(s&&this.$element)if(i){var r=s.Event(i);r.type=e,this.$element.trigger(r,n)}else this.$element.trigger(e,n)},f._getPosition=function(){var t=getComputedStyle(this.element),e=this._getPositionCoord(t.left,"width"),i=this._getPositionCoord(t.top,"height");this.position.x=isNaN(e)?0:e,this.position.y=isNaN(i)?0:i,this._addTransformPosition(t)},f._getPositionCoord=function(t,i){if(t.indexOf("%")!=-1){var n=e(this.element.parentNode);return n?parseFloat(t)/100*n[i]:0}return parseInt(t,10)},f._addTransformPosition=function(t){var e=t[u];if(0===e.indexOf("matrix")){var i=e.split(","),n=0===e.indexOf("matrix3d")?12:4,o=parseInt(i[n],10),s=parseInt(i[n+1],10);this.position.x+=o,this.position.y+=s}},f.pointerDown=function(t,e){this._dragPointerDown(t,e);var i=h.activeElement;i&&i.blur&&i!=h.body&&i.blur(),this._bindPostStartEvents(t),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",t,[e])},f.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},f.dragStart=function(t,e){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",t,[e]),this.animate())},f.measureContainment=function(){var t=this.options.containment;if(t){var i=s(t)?t:"string"==typeof t?h.querySelector(t):this.element.parentNode,n=e(this.element),o=e(i),r=this.element.getBoundingClientRect(),a=i.getBoundingClientRect(),l=o.borderLeftWidth+o.borderRightWidth,d=o.borderTopWidth+o.borderBottomWidth,c=this.relativeStartPosition={x:r.left-(a.left+o.borderLeftWidth),y:r.top-(a.top+o.borderTopWidth)};this.containSize={width:o.width-l-c.x-n.width,height:o.height-d-c.y-n.height}}},f.dragMove=function(t,e,i){if(this.isEnabled){var n=i.x,o=i.y,s=this.options.grid,r=s&&s[0],h=s&&s[1];n=a(n,r),o=a(o,h),n=this.containDrag("x",n,r),o=this.containDrag("y",o,h),n="y"==this.options.axis?0:n,o="x"==this.options.axis?0:o,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+o,this.dragPoint.x=n,this.dragPoint.y=o,this.dispatchEvent("dragMove",t,[e,i])}},f.containDrag=function(t,e,i){if(!this.options.containment)return e;var n="x"==t?"width":"height",o=this.relativeStartPosition[t],s=a(-o,i,"ceil"),r=this.containSize[n];return r=a(r,i,"floor"),Math.min(r,Math.max(s,e))},f.pointerUp=function(t,e){this.element.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},f.dragEnd=function(t,e){this.isEnabled&&(u&&(this.element.style[u]="",this.setLeftTop()),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",t,[e]))},f.animate=function(){if(this.isDragging){this.positionDrag();var t=this;l(function(){t.animate()})}},f.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},f.positionDrag=function(){this.element.style[u]="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},f.staticClick=function(t,e){this.dispatchEvent("staticClick",t,[e])},f.enable=function(){this.isEnabled=!0},f.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},f.destroy=function(){this.disable(),this.element.style[u]="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},f._init=n,g&&g.bridget&&g.bridget("draggabilly",r),r}),THREE.ShaderLib.mirror={uniforms:{mirrorColor:{value:new THREE.Color(8355711)},mirrorSampler:{value:null},textureMatrix:{value:new THREE.Matrix4}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 mirrorCoord;","void main() {","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","mirrorCoord = textureMatrix * worldPosition;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 mirrorColor;","uniform sampler2D mirrorSampler;","varying vec4 mirrorCoord;","float blendOverlay(float base, float blend) {","return( base < 0.5 ? ( 2.0 * base * blend ) : (1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","void main() {","vec4 color = texture2DProj(mirrorSampler, mirrorCoord);","color = vec4(blendOverlay(mirrorColor.r, color.r), blendOverlay(mirrorColor.g, color.g), blendOverlay(mirrorColor.b, color.b), 1.0);","gl_FragColor = color;","}"].join("\n")},THREE.Mirror=function(t,e,i){THREE.Object3D.call(this),this.name="mirror_"+this.id,i=i||{},this.matrixNeedsUpdate=!0;var n=void 0!==i.textureWidth?i.textureWidth:512,o=void 0!==i.textureHeight?i.textureHeight:512;this.clipBias=void 0!==i.clipBias?i.clipBias:0;var s=void 0!==i.color?new THREE.Color(i.color):new THREE.Color(8355711);this.renderer=t,this.mirrorPlane=new THREE.Plane,this.normal=new THREE.Vector3(0,0,1),this.mirrorWorldPosition=new THREE.Vector3,this.cameraWorldPosition=new THREE.Vector3,this.rotationMatrix=new THREE.Matrix4,this.lookAtPosition=new THREE.Vector3(0,0,(-1)),this.clipPlane=new THREE.Vector4;var r=void 0!==i.debugMode&&i.debugMode;if(r){var a=new THREE.ArrowHelper(new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,0),10,16777088),h=new THREE.Geometry;h.vertices.push(new THREE.Vector3((-10),(-10),0)),h.vertices.push(new THREE.Vector3(10,(-10),0)),h.vertices.push(new THREE.Vector3(10,10,0)),h.vertices.push(new THREE.Vector3((-10),10,0)),h.vertices.push(h.vertices[0]);var l=new THREE.Line(h,new THREE.LineBasicMaterial({color:16777088}));this.add(a),this.add(l)}e instanceof THREE.PerspectiveCamera?this.camera=e:(this.camera=new THREE.PerspectiveCamera,console.log(this.name+": camera is not a Perspective Camera!")),this.textureMatrix=new THREE.Matrix4,this.mirrorCamera=this.camera.clone(),this.mirrorCamera.matrixAutoUpdate=!0;var d={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1};this.renderTarget=new THREE.WebGLRenderTarget(n,o,d),this.renderTarget2=new THREE.WebGLRenderTarget(n,o,d);var c=THREE.ShaderLib.mirror,u=THREE.UniformsUtils.clone(c.uniforms);this.material=new THREE.ShaderMaterial({fragmentShader:c.fragmentShader,vertexShader:c.vertexShader,uniforms:u}),this.material.uniforms.mirrorSampler.value=this.renderTarget.texture,this.material.uniforms.mirrorColor.value=s,this.material.uniforms.textureMatrix.value=this.textureMatrix,THREE.Math.isPowerOfTwo(n)&&THREE.Math.isPowerOfTwo(o)||(this.renderTarget.texture.generateMipmaps=!1,this.renderTarget2.texture.generateMipmaps=!1),this.updateTextureMatrix(),this.render()},THREE.Mirror.prototype=Object.create(THREE.Object3D.prototype),THREE.Mirror.prototype.constructor=THREE.Mirror,THREE.Mirror.prototype.renderWithMirror=function(t){this.updateTextureMatrix(),this.matrixNeedsUpdate=!1;var e=t.camera;t.camera=this.mirrorCamera,t.renderTemp(),t.material.uniforms.mirrorSampler.value=t.renderTarget2.texture,this.render(),this.matrixNeedsUpdate=!0,t.material.uniforms.mirrorSampler.value=t.renderTarget.texture,t.camera=e,t.updateTextureMatrix()},THREE.Mirror.prototype.updateTextureMatrix=function(){this.updateMatrixWorld(),this.camera.updateMatrixWorld(),this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(this.camera.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.normal.set(0,0,1),this.normal.applyMatrix4(this.rotationMatrix);var t=this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);t.reflect(this.normal).negate(),t.add(this.mirrorWorldPosition),this.rotationMatrix.extractRotation(this.camera.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition);var e=this.mirrorWorldPosition.clone().sub(this.lookAtPosition);e.reflect(this.normal).negate(),e.add(this.mirrorWorldPosition),this.up.set(0,-1,0),this.up.applyMatrix4(this.rotationMatrix),this.up.reflect(this.normal).negate(),this.mirrorCamera.position.copy(t),this.mirrorCamera.up=this.up,this.mirrorCamera.lookAt(e),this.mirrorCamera.updateProjectionMatrix(),this.mirrorCamera.updateMatrixWorld(),this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld),this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.mirrorCamera.projectionMatrix),this.textureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),this.mirrorPlane.setFromNormalAndCoplanarPoint(this.normal,this.mirrorWorldPosition),this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),this.clipPlane.set(this.mirrorPlane.normal.x,this.mirrorPlane.normal.y,this.mirrorPlane.normal.z,this.mirrorPlane.constant);var i=new THREE.Vector4,n=this.mirrorCamera.projectionMatrix;i.x=(Math.sign(this.clipPlane.x)+n.elements[8])/n.elements[0],i.y=(Math.sign(this.clipPlane.y)+n.elements[9])/n.elements[5],i.z=-1,i.w=(1+n.elements[10])/n.elements[14];var o=new THREE.Vector4;o=this.clipPlane.multiplyScalar(2/this.clipPlane.dot(i)),n.elements[2]=o.x,n.elements[6]=o.y,n.elements[10]=o.z+1-this.clipBias,n.elements[14]=o.w},THREE.Mirror.prototype.render=function(){this.matrixNeedsUpdate&&this.updateTextureMatrix(),this.matrixNeedsUpdate=!0;for(var t=this;null!==t.parent;)t=t.parent;if(void 0!==t&&t instanceof THREE.Scene){var e=this.material.visible;this.material.visible=!1,this.renderer.render(t,this.mirrorCamera,this.renderTarget,!0),this.material.visible=e}},THREE.Mirror.prototype.renderTemp=function(){this.matrixNeedsUpdate&&this.updateTextureMatrix(),this.matrixNeedsUpdate=!0;for(var t=this;null!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&this.renderer.render(t,this.mirrorCamera,this.renderTarget2,!0)},function(){"use strict";var t=function(t){THREE.MeshBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.side=THREE.FrontSide,this.transparent=!0,this.setValues(t),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(t){t?(this.color.setRGB(1,1,0),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};t.prototype=Object.create(THREE.MeshBasicMaterial.prototype),t.prototype.constructor=t;var e=function(t){THREE.LineBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.transparent=!0,this.linewidth=1,this.setValues(t),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(t){t?(this.color.setRGB(1,1,0),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};e.prototype=Object.create(THREE.LineBasicMaterial.prototype),e.prototype.constructor=e;var i=new t({visible:!1,transparent:!1});THREE.TransformGizmo=function(){this.init=function(){THREE.Object3D.call(this),this.handles=new THREE.Object3D,this.pickers=new THREE.Object3D,this.planes=new THREE.Object3D,this.add(this.handles),this.add(this.pickers),this.add(this.planes);var t=new THREE.PlaneBufferGeometry(50,50,2,2),e=new THREE.MeshBasicMaterial({visible:!1,side:THREE.DoubleSide}),i={XY:new THREE.Mesh(t,e),YZ:new THREE.Mesh(t,e),XZ:new THREE.Mesh(t,e),XYZE:new THREE.Mesh(t,e)};this.activePlane=i.XYZE,i.YZ.rotation.set(0,Math.PI/2,0),i.XZ.rotation.set(-Math.PI/2,0,0);for(var n in i)i[n].name=n,this.planes.add(i[n]),this.planes[n]=i[n];var o=function(t,e){for(var i in t)for(n=t[i].length;n--;){var o=t[i][n][0],s=t[i][n][1],r=t[i][n][2];o.name=i,s&&o.position.set(s[0],s[1],s[2]),r&&o.rotation.set(r[0],r[1],r[2]),e.add(o)}};o(this.handleGizmos,this.handles),o(this.pickerGizmos,this.pickers),this.traverse(function(t){if(t instanceof THREE.Mesh){t.updateMatrix();var e=t.geometry.clone();e.applyMatrix(t.matrix),t.geometry=e,t.position.set(0,0,0),t.rotation.set(0,0,0),t.scale.set(1,1,1)}})},this.highlight=function(t){this.traverse(function(e){e.material&&e.material.highlight&&(e.name===t?e.material.highlight(!0):e.material.highlight(!1))})}},THREE.TransformGizmo.prototype=Object.create(THREE.Object3D.prototype),THREE.TransformGizmo.prototype.constructor=THREE.TransformGizmo,THREE.TransformGizmo.prototype.update=function(t,e){var i=new THREE.Vector3(0,0,0),n=new THREE.Vector3(0,1,0),o=new THREE.Matrix4;this.traverse(function(s){s.name.search("E")!==-1?s.quaternion.setFromRotationMatrix(o.lookAt(e,i,n)):s.name.search("X")===-1&&s.name.search("Y")===-1&&s.name.search("Z")===-1||s.quaternion.setFromEuler(t)})},THREE.TransformGizmoTranslate=function(){THREE.TransformGizmo.call(this);var n=new THREE.Geometry,o=new THREE.Mesh(new THREE.CylinderGeometry(0,.05,.2,12,1,(!1)));o.position.y=.5,o.updateMatrix(),n.merge(o.geometry,o.matrix);var s=new THREE.BufferGeometry;s.addAttribute("position",new THREE.Float32Attribute([0,0,0,1,0,0],3));var r=new THREE.BufferGeometry;r.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,1,0],3));var a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,0,1],3)),this.handleGizmos={X:[[new THREE.Mesh(n,new t({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new THREE.Line(s,new e({color:16711680}))]],Y:[[new THREE.Mesh(n,new t({color:65280})),[0,.5,0]],[new THREE.Line(r,new e({color:65280}))]],Z:[[new THREE.Mesh(n,new t({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new THREE.Line(a,new e({color:255}))]],XYZ:[[new THREE.Mesh(new THREE.OctahedronGeometry(.1,0),new t({color:16777215,opacity:.25})),[0,0,0],[0,0,0]]],XY:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new t({color:16776960,opacity:.25})),[.15,.15,0]]],YZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new t({color:65535,opacity:.25})),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new t({color:16711935,opacity:.25})),[.15,0,.15],[-Math.PI/2,0,0]]]},this.pickerGizmos={X:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,(!1)),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,(!1)),i),[0,.6,0]]],Z:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,(!1)),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new THREE.Mesh(new THREE.OctahedronGeometry(.2,0),i)]],XY:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),i),[.2,.2,0]]],YZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),i),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),i),[.2,0,.2],[-Math.PI/2,0,0]]]},this.setActivePlane=function(t,e){var i=new THREE.Matrix4;e.applyMatrix4(i.getInverse(i.extractRotation(this.planes.XY.matrixWorld))),"X"===t&&(this.activePlane=this.planes.XY,Math.abs(e.y)>Math.abs(e.z)&&(this.activePlane=this.planes.XZ)),"Y"===t&&(this.activePlane=this.planes.XY,Math.abs(e.x)>Math.abs(e.z)&&(this.activePlane=this.planes.YZ)),"Z"===t&&(this.activePlane=this.planes.XZ,Math.abs(e.x)>Math.abs(e.y)&&(this.activePlane=this.planes.YZ)),"XYZ"===t&&(this.activePlane=this.planes.XYZE),"XY"===t&&(this.activePlane=this.planes.XY),"YZ"===t&&(this.activePlane=this.planes.YZ),"XZ"===t&&(this.activePlane=this.planes.XZ)},this.init()},THREE.TransformGizmoTranslate.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoTranslate.prototype.constructor=THREE.TransformGizmoTranslate,THREE.TransformGizmoRotate=function(){THREE.TransformGizmo.call(this);var t=function(t,e,i){var n=new THREE.BufferGeometry,o=[];i=i?i:1;for(var s=0;s<=64*i;++s)"x"===e&&o.push(0,Math.cos(s/32*Math.PI)*t,Math.sin(s/32*Math.PI)*t),"y"===e&&o.push(Math.cos(s/32*Math.PI)*t,0,Math.sin(s/32*Math.PI)*t),"z"===e&&o.push(Math.sin(s/32*Math.PI)*t,Math.cos(s/32*Math.PI)*t,0);return n.addAttribute("position",new THREE.Float32Attribute(o,3)),n};this.handleGizmos={X:[[new THREE.Line(new t(1,"x",.5),new e({color:16711680}))]],Y:[[new THREE.Line(new t(1,"y",.5),new e({color:65280}))]],Z:[[new THREE.Line(new t(1,"z",.5),new e({color:255}))]],E:[[new THREE.Line(new t(1.25,"z",1),new e({color:13421568}))]],XYZE:[[new THREE.Line(new t(1,"z",1),new e({color:7895160}))]]},this.pickerGizmos={X:[[new THREE.Mesh(new THREE.TorusBufferGeometry(1,.12,4,12,Math.PI),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.TorusBufferGeometry(1,.12,4,12,Math.PI),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new THREE.Mesh(new THREE.TorusBufferGeometry(1,.12,4,12,Math.PI),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new THREE.Mesh(new THREE.TorusBufferGeometry(1.25,.12,2,24),i)]],XYZE:[[new THREE.Mesh(new THREE.Geometry)]]},this.setActivePlane=function(t){"E"===t&&(this.activePlane=this.planes.XYZE),"X"===t&&(this.activePlane=this.planes.YZ),"Y"===t&&(this.activePlane=this.planes.XZ),"Z"===t&&(this.activePlane=this.planes.XY)},this.update=function(t,e){THREE.TransformGizmo.prototype.update.apply(this,arguments);var i=({handles:this.handles,pickers:this.pickers},new THREE.Matrix4),n=new THREE.Euler(0,0,1),o=new THREE.Quaternion,s=new THREE.Vector3(1,0,0),r=new THREE.Vector3(0,1,0),a=new THREE.Vector3(0,0,1),h=new THREE.Quaternion,l=new THREE.Quaternion,d=new THREE.Quaternion,c=e.clone();n.copy(this.planes.XY.rotation),o.setFromEuler(n),i.makeRotationFromQuaternion(o).getInverse(i),c.applyMatrix4(i),this.traverse(function(t){o.setFromEuler(n),"X"===t.name&&(h.setFromAxisAngle(s,Math.atan2(-c.y,c.z)),o.multiplyQuaternions(o,h),t.quaternion.copy(o)),"Y"===t.name&&(l.setFromAxisAngle(r,Math.atan2(c.x,c.z)),o.multiplyQuaternions(o,l),t.quaternion.copy(o)),"Z"===t.name&&(d.setFromAxisAngle(a,Math.atan2(c.y,c.x)),o.multiplyQuaternions(o,d),t.quaternion.copy(o))})},this.init()},THREE.TransformGizmoRotate.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoRotate.prototype.constructor=THREE.TransformGizmoRotate,THREE.TransformGizmoScale=function(){THREE.TransformGizmo.call(this);var n=new THREE.Geometry,o=new THREE.Mesh(new THREE.BoxGeometry(.125,.125,.125));o.position.y=.5,o.updateMatrix(),n.merge(o.geometry,o.matrix);var s=new THREE.BufferGeometry;s.addAttribute("position",new THREE.Float32Attribute([0,0,0,1,0,0],3));var r=new THREE.BufferGeometry;r.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,1,0],3));var a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32Attribute([0,0,0,0,0,1],3)),this.handleGizmos={X:[[new THREE.Mesh(n,new t({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new THREE.Line(s,new e({color:16711680}))]],Y:[[new THREE.Mesh(n,new t({color:65280})),[0,.5,0]],[new THREE.Line(r,new e({color:65280}))]],Z:[[new THREE.Mesh(n,new t({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new THREE.Line(a,new e({color:255}))]],XYZ:[[new THREE.Mesh(new THREE.BoxBufferGeometry(.125,.125,.125),new t({color:16777215,opacity:.25}))]]},this.pickerGizmos={X:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,(!1)),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,(!1)),i),[0,.6,0]]],Z:[[new THREE.Mesh(new THREE.CylinderBufferGeometry(.2,0,1,4,1,(!1)),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new THREE.Mesh(new THREE.BoxBufferGeometry(.4,.4,.4),i)]]},this.setActivePlane=function(t,e){var i=new THREE.Matrix4;e.applyMatrix4(i.getInverse(i.extractRotation(this.planes.XY.matrixWorld))),"X"===t&&(this.activePlane=this.planes.XY,Math.abs(e.y)>Math.abs(e.z)&&(this.activePlane=this.planes.XZ)),"Y"===t&&(this.activePlane=this.planes.XY,Math.abs(e.x)>Math.abs(e.z)&&(this.activePlane=this.planes.YZ)),"Z"===t&&(this.activePlane=this.planes.XZ,Math.abs(e.x)>Math.abs(e.y)&&(this.activePlane=this.planes.YZ)),"XYZ"===t&&(this.activePlane=this.planes.XYZE)},this.init()},THREE.TransformGizmoScale.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoScale.prototype.constructor=THREE.TransformGizmoScale,THREE.TransformControls=function(t,e){function i(t){if(void 0!==a.object&&l!==!0&&(void 0===t.button||0===t.button)){var e=t.changedTouches?t.changedTouches[0]:t,i=r(e,d[h].pickers.children),n=null;i&&(n=i.object.name,t.preventDefault()),a.axis!==n&&(a.axis=n,a.update(),a.dispatchEvent(g))}}function n(t){if(void 0!==a.object&&l!==!0&&(void 0===t.button||0===t.button)){var e=t.changedTouches?t.changedTouches[0]:t;if(0===e.button||void 0===e.button){var i=r(e,d[h].pickers.children);if(i){t.preventDefault(),t.stopPropagation(),a.dispatchEvent(f),a.axis=i.object.name,a.update(),C.copy(Y).sub(j).normalize(),d[h].setActivePlane(a.axis,C);var n=r(e,[d[h].activePlane]);n&&($.copy(a.object.position),O.copy(a.object.scale),N.extractRotation(a.object.matrix),z.extractRotation(a.object.matrixWorld),I.extractRotation(a.object.parent.matrixWorld),W.setFromMatrixScale(k.getInverse(a.object.parent.matrixWorld)),R.copy(n.point))}}l=!0}}function o(t){if(void 0!==a.object&&null!==a.axis&&l!==!1&&(void 0===t.button||0===t.button)){var e=t.changedTouches?t.changedTouches[0]:t,i=r(e,[d[h].activePlane]);i!==!1&&(t.preventDefault(),t.stopPropagation(),y.copy(i.point),"translate"===h?(y.sub(R),y.multiply(W),
"local"===a.space&&(y.applyMatrix4(k.getInverse(z)),a.axis.search("X")===-1&&(y.x=0),a.axis.search("Y")===-1&&(y.y=0),a.axis.search("Z")===-1&&(y.z=0),y.applyMatrix4(N),a.object.position.copy($),a.object.position.add(y)),"world"!==a.space&&a.axis.search("XYZ")===-1||(a.axis.search("X")===-1&&(y.x=0),a.axis.search("Y")===-1&&(y.y=0),a.axis.search("Z")===-1&&(y.z=0),y.applyMatrix4(k.getInverse(I)),a.object.position.copy($),a.object.position.add(y)),null!==a.translationSnap&&("local"===a.space&&a.object.position.applyMatrix4(k.getInverse(z)),a.axis.search("X")!==-1&&(a.object.position.x=Math.round(a.object.position.x/a.translationSnap)*a.translationSnap),a.axis.search("Y")!==-1&&(a.object.position.y=Math.round(a.object.position.y/a.translationSnap)*a.translationSnap),a.axis.search("Z")!==-1&&(a.object.position.z=Math.round(a.object.position.z/a.translationSnap)*a.translationSnap),"local"===a.space&&a.object.position.applyMatrix4(z))):"scale"===h?(y.sub(R),y.multiply(W),"local"===a.space&&("XYZ"===a.axis?(x=1+y.y/Math.max(O.x,O.y,O.z),a.object.scale.x=O.x*x,a.object.scale.y=O.y*x,a.object.scale.z=O.z*x):(y.applyMatrix4(k.getInverse(z)),"X"===a.axis&&(a.object.scale.x=O.x*(1+y.x/O.x)),"Y"===a.axis&&(a.object.scale.y=O.y*(1+y.y/O.y)),"Z"===a.axis&&(a.object.scale.z=O.z*(1+y.z/O.z))))):"rotate"===h&&(y.sub(j),y.multiply(W),E.copy(R).sub(j),E.multiply(W),"E"===a.axis?(y.applyMatrix4(k.getInverse(L)),E.applyMatrix4(k.getInverse(L)),A.set(Math.atan2(y.z,y.y),Math.atan2(y.x,y.z),Math.atan2(y.y,y.x)),b.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),B.setFromRotationMatrix(k.getInverse(I)),H.setFromAxisAngle(C,A.z-b.z),T.setFromRotationMatrix(z),B.multiplyQuaternions(B,H),B.multiplyQuaternions(B,T),a.object.quaternion.copy(B)):"XYZE"===a.axis?(H.setFromEuler(y.clone().cross(E).normalize()),B.setFromRotationMatrix(k.getInverse(I)),P.setFromAxisAngle(H,-y.clone().angleTo(E)),T.setFromRotationMatrix(z),B.multiplyQuaternions(B,P),B.multiplyQuaternions(B,T),a.object.quaternion.copy(B)):"local"===a.space?(y.applyMatrix4(k.getInverse(z)),E.applyMatrix4(k.getInverse(z)),A.set(Math.atan2(y.z,y.y),Math.atan2(y.x,y.z),Math.atan2(y.y,y.x)),b.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),T.setFromRotationMatrix(N),null!==a.rotationSnap?(P.setFromAxisAngle(M,Math.round((A.x-b.x)/a.rotationSnap)*a.rotationSnap),_.setFromAxisAngle(S,Math.round((A.y-b.y)/a.rotationSnap)*a.rotationSnap),D.setFromAxisAngle(F,Math.round((A.z-b.z)/a.rotationSnap)*a.rotationSnap)):(P.setFromAxisAngle(M,A.x-b.x),_.setFromAxisAngle(S,A.y-b.y),D.setFromAxisAngle(F,A.z-b.z)),"X"===a.axis&&T.multiplyQuaternions(T,P),"Y"===a.axis&&T.multiplyQuaternions(T,_),"Z"===a.axis&&T.multiplyQuaternions(T,D),a.object.quaternion.copy(T)):"world"===a.space&&(A.set(Math.atan2(y.z,y.y),Math.atan2(y.x,y.z),Math.atan2(y.y,y.x)),b.set(Math.atan2(E.z,E.y),Math.atan2(E.x,E.z),Math.atan2(E.y,E.x)),B.setFromRotationMatrix(k.getInverse(I)),null!==a.rotationSnap?(P.setFromAxisAngle(M,Math.round((A.x-b.x)/a.rotationSnap)*a.rotationSnap),_.setFromAxisAngle(S,Math.round((A.y-b.y)/a.rotationSnap)*a.rotationSnap),D.setFromAxisAngle(F,Math.round((A.z-b.z)/a.rotationSnap)*a.rotationSnap)):(P.setFromAxisAngle(M,A.x-b.x),_.setFromAxisAngle(S,A.y-b.y),D.setFromAxisAngle(F,A.z-b.z)),T.setFromRotationMatrix(z),"X"===a.axis&&B.multiplyQuaternions(B,P),"Y"===a.axis&&B.multiplyQuaternions(B,_),"Z"===a.axis&&B.multiplyQuaternions(B,D),B.multiplyQuaternions(B,T),a.object.quaternion.copy(B))),a.update(),a.dispatchEvent(g),a.dispatchEvent(m))}}function s(t){t.preventDefault(),void 0!==t.button&&0!==t.button||(l&&null!==a.axis&&(p.mode=h,a.dispatchEvent(p)),l=!1,t instanceof TouchEvent?(a.axis=null,a.update(),a.dispatchEvent(g)):i(t))}function r(i,n){var o=e.getBoundingClientRect(),s=(i.clientX-o.left)/o.width,r=(i.clientY-o.top)/o.height;w.set(2*s-1,-(2*r)+1),v.setFromCamera(w,t);var a=v.intersectObjects(n,!0);return!!a[0]&&a[0]}THREE.Object3D.call(this),e=void 0!==e?e:document,this.object=void 0,this.visible=!1,this.translationSnap=null,this.rotationSnap=null,this.space="world",this.size=1,this.axis=null;var a=this,h="translate",l=!1,d={translate:new THREE.TransformGizmoTranslate,rotate:new THREE.TransformGizmoRotate,scale:new THREE.TransformGizmoScale};for(var c in d){var u=d[c];u.visible=c===h,this.add(u)}var g={type:"change"},f={type:"mouseDown"},p={type:"mouseUp",mode:h},m={type:"objectChange"},v=new THREE.Raycaster,w=new THREE.Vector2,y=new THREE.Vector3,R=new THREE.Vector3,A=new THREE.Vector3,b=new THREE.Vector3,x=1,L=new THREE.Matrix4,C=new THREE.Vector3,k=new THREE.Matrix4,E=new THREE.Vector3,B=new THREE.Quaternion,M=new THREE.Vector3(1,0,0),S=new THREE.Vector3(0,1,0),F=new THREE.Vector3(0,0,1),T=new THREE.Quaternion,P=new THREE.Quaternion,_=new THREE.Quaternion,D=new THREE.Quaternion,H=new THREE.Quaternion,$=new THREE.Vector3,O=new THREE.Vector3,N=new THREE.Matrix4,I=new THREE.Matrix4,W=new THREE.Vector3,j=new THREE.Vector3,X=new THREE.Euler,z=new THREE.Matrix4,Y=new THREE.Vector3,U=new THREE.Euler;e.addEventListener("mousedown",n,!1),e.addEventListener("touchstart",n,!1),e.addEventListener("mousemove",i,!1),e.addEventListener("touchmove",i,!1),e.addEventListener("mousemove",o,!1),e.addEventListener("touchmove",o,!1),e.addEventListener("mouseup",s,!1),e.addEventListener("mouseout",s,!1),e.addEventListener("touchend",s,!1),e.addEventListener("touchcancel",s,!1),e.addEventListener("touchleave",s,!1),this.dispose=function(){e.removeEventListener("mousedown",n),e.removeEventListener("touchstart",n),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i),e.removeEventListener("mousemove",o),e.removeEventListener("touchmove",o),e.removeEventListener("mouseup",s),e.removeEventListener("mouseout",s),e.removeEventListener("touchend",s),e.removeEventListener("touchcancel",s),e.removeEventListener("touchleave",s)},this.attach=function(t){this.object=t,this.visible=!0,this.update()},this.detach=function(){this.object=void 0,this.visible=!1,this.axis=null},this.getMode=function(){return h},this.setMode=function(t){h=t?t:h,"scale"===h&&(a.space="local");for(var e in d)d[e].visible=e===h;this.update(),a.dispatchEvent(g)},this.setTranslationSnap=function(t){a.translationSnap=t},this.setRotationSnap=function(t){a.rotationSnap=t},this.setSize=function(t){a.size=t,this.update(),a.dispatchEvent(g)},this.setSpace=function(t){a.space=t,this.update(),a.dispatchEvent(g)},this.update=function(){void 0!==a.object&&(a.object.updateMatrixWorld(),j.setFromMatrixPosition(a.object.matrixWorld),X.setFromRotationMatrix(k.extractRotation(a.object.matrixWorld)),t.updateMatrixWorld(),Y.setFromMatrixPosition(t.matrixWorld),U.setFromRotationMatrix(k.extractRotation(t.matrixWorld)),x=j.distanceTo(Y)/6*a.size,this.position.copy(j),this.scale.set(x,x,x),C.copy(Y).sub(j).normalize(),"local"===a.space?d[h].update(X,C):"world"===a.space&&d[h].update(new THREE.Euler,C),d[h].highlight(a.axis))}},THREE.TransformControls.prototype=Object.create(THREE.Object3D.prototype),THREE.TransformControls.prototype.constructor=THREE.TransformControls}(),!function(t,e){"function"==typeof define&&define.amd?define("wavesurfer",[],function(){return t.WaveSurfer=e()}):"object"==typeof exports?module.exports=e():t.WaveSurfer=e()}(this,function(){"use strict";var t={defaultParams:{height:128,waveColor:"#999",progressColor:"#555",cursorColor:"#333",cursorWidth:1,skipLength:2,minPxPerSec:20,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,fillParent:!0,scrollParent:!1,hideScrollbar:!1,normalize:!1,audioContext:null,container:null,dragSelection:!0,loopSelection:!0,audioRate:1,interact:!0,splitChannels:!1,mediaContainer:null,mediaControls:!1,renderer:"Canvas",backend:"WebAudio",mediaType:"audio",autoCenter:!0},init:function(e){if(this.params=t.util.extend({},this.defaultParams,e),this.container="string"==typeof e.container?document.querySelector(this.params.container):this.params.container,!this.container)throw new Error("Container element not found");if(null==this.params.mediaContainer?this.mediaContainer=this.container:"string"==typeof this.params.mediaContainer?this.mediaContainer=document.querySelector(this.params.mediaContainer):this.mediaContainer=this.params.mediaContainer,!this.mediaContainer)throw new Error("Media Container element not found");this.savedVolume=0,this.isMuted=!1,this.tmpEvents=[],this.currentAjax=null,this.createDrawer(),this.createBackend(),this.isDestroyed=!1},createDrawer:function(){var e=this;this.drawer=Object.create(t.Drawer[this.params.renderer]),this.drawer.init(this.container,this.params),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(t,i){setTimeout(function(){e.seekTo(i)},0)}),this.drawer.on("scroll",function(t){e.fireEvent("scroll",t)})},createBackend:function(){var e=this;this.backend&&this.backend.destroy(),"AudioElement"==this.params.backend&&(this.params.backend="MediaElement"),"WebAudio"!=this.params.backend||t.WebAudio.supportsWebAudio()||(this.params.backend="MediaElement"),this.backend=Object.create(t[this.params.backend]),this.backend.init(this.params),this.backend.on("finish",function(){e.fireEvent("finish")}),this.backend.on("play",function(){e.fireEvent("play")}),this.backend.on("pause",function(){e.fireEvent("pause")}),this.backend.on("audioprocess",function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)})},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},play:function(t,e){this.fireEvent("interaction",this.play.bind(this,t,e)),this.backend.play(t,e)},pause:function(){this.backend.pause()},playPause:function(){this.backend.isPaused()?this.play():this.pause()},isPlaying:function(){return!this.backend.isPaused()},skipBackward:function(t){this.skip(-t||-this.params.skipLength)},skipForward:function(t){this.skip(t||this.params.skipLength)},skip:function(t){var e=this.getCurrentTime()||0,i=this.getDuration()||1;e=Math.max(0,Math.min(i,e+(t||0))),this.seekAndCenter(e/i)},seekAndCenter:function(t){this.seekTo(t),this.drawer.recenter(t)},seekTo:function(t){this.fireEvent("interaction",this.seekTo.bind(this,t));var e=this.backend.isPaused(),i=this.params.scrollParent;e&&(this.params.scrollParent=!1),this.backend.seekTo(t*this.getDuration()),this.drawer.progress(this.backend.getPlayedPercents()),e||(this.backend.pause(),this.backend.play()),this.params.scrollParent=i,this.fireEvent("seek",t)},stop:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)},setVolume:function(t){this.backend.setVolume(t)},setPlaybackRate:function(t){this.backend.setPlaybackRate(t)},toggleMute:function(){this.isMuted?(this.backend.setVolume(this.savedVolume),this.isMuted=!1):(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0)},toggleScroll:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()},toggleInteraction:function(){this.params.interact=!this.params.interact},drawBuffer:function(){var t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),e=this.drawer.getWidth(),i=t;this.params.fillParent&&(!this.params.scrollParent||t<e)&&(i=e);var n=this.backend.getPeaks(i);this.drawer.drawPeaks(n,i),this.fireEvent("redraw",n,i)},zoom:function(t){this.params.minPxPerSec=t,this.params.scrollParent=!0,this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",t)},loadArrayBuffer:function(t){this.decodeArrayBuffer(t,function(t){this.isDestroyed||this.loadDecodedBuffer(t)}.bind(this))},loadDecodedBuffer:function(t){this.backend.load(t),this.drawBuffer(),this.fireEvent("ready")},loadBlob:function(t){var e=this,i=new FileReader;i.addEventListener("progress",function(t){e.onProgress(t)}),i.addEventListener("load",function(t){e.loadArrayBuffer(t.target.result)}),i.addEventListener("error",function(){e.fireEvent("error","Error reading file")}),i.readAsArrayBuffer(t),this.empty()},load:function(t,e){switch(this.empty(),this.params.backend){case"WebAudio":return this.loadBuffer(t,e);case"MediaElement":return this.loadMediaElement(t,e)}},loadBuffer:function(t,e){var i=function(e){return e&&this.tmpEvents.push(this.once("ready",e)),this.getArrayBuffer(t,this.loadArrayBuffer.bind(this))}.bind(this);return e?(this.backend.setPeaks(e),this.drawBuffer(),void this.tmpEvents.push(this.once("interaction",i))):i()},loadMediaElement:function(t,e){var i=t;if("string"==typeof t)this.backend.load(i,this.mediaContainer,e);else{var n=t;this.backend.loadElt(n,e),i=n.src}this.tmpEvents.push(this.backend.once("canplay",function(){this.drawBuffer(),this.fireEvent("ready")}.bind(this)),this.backend.once("error",function(t){this.fireEvent("error",t)}.bind(this))),e?this.backend.setPeaks(e):this.backend.supportsWebAudio()&&this.getArrayBuffer(i,function(t){this.decodeArrayBuffer(t,function(t){this.backend.buffer=t,this.drawBuffer()}.bind(this))}.bind(this))},decodeArrayBuffer:function(t,e){this.arraybuffer=t,this.backend.decodeArrayBuffer(t,function(i){this.isDestroyed||this.arraybuffer!=t||(e(i),this.arraybuffer=null)}.bind(this),this.fireEvent.bind(this,"error","Error decoding audiobuffer"))},getArrayBuffer:function(e,i){var n=this,o=t.util.ajax({url:e,responseType:"arraybuffer"});return this.currentAjax=o,this.tmpEvents.push(o.on("progress",function(t){n.onProgress(t)}),o.on("success",function(t,e){i(t),n.currentAjax=null}),o.on("error",function(t){n.fireEvent("error","XHR error: "+t.target.statusText),n.currentAjax=null})),o},onProgress:function(t){if(t.lengthComputable)var e=t.loaded/t.total;else e=t.loaded/(t.loaded+1e6);this.fireEvent("loading",Math.round(100*e),t.target)},exportPCM:function(t,e,i){t=t||1024,e=e||1e4,i=i||!1;var n=this.backend.getPeaks(t,e),o=[].map.call(n,function(t){return Math.round(t*e)/e}),s=JSON.stringify(o);return i||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(s)),s},exportImage:function(t,e){return t||(t="image/png"),e||(e=1),this.drawer.getImage(t,e)},cancelAjax:function(){this.currentAjax&&(this.currentAjax.xhr.abort(),this.currentAjax=null)},clearTmpEvents:function(){this.tmpEvents.forEach(function(t){t.un()})},empty:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)},destroy:function(){this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.backend.destroy(),this.drawer.destroy(),this.isDestroyed=!0}};return t.create=function(e){var i=Object.create(t);return i.init(e),i},t.util={extend:function(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(e){Object.keys(e).forEach(function(i){t[i]=e[i]})}),t},min:function(t){var e=+(1/0);for(var i in t)t[i]<e&&(e=t[i]);return e},max:function(t){var e=-(1/0);for(var i in t)t[i]>e&&(e=t[i]);return e},getId:function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},ajax:function(e){var i=Object.create(t.Observer),n=new XMLHttpRequest,o=!1;return n.open(e.method||"GET",e.url,!0),n.responseType=e.responseType||"json",n.addEventListener("progress",function(t){i.fireEvent("progress",t),t.lengthComputable&&t.loaded==t.total&&(o=!0)}),n.addEventListener("load",function(t){o||i.fireEvent("progress",t),i.fireEvent("load",t),200==n.status||206==n.status?i.fireEvent("success",n.response,t):i.fireEvent("error",t)}),n.addEventListener("error",function(t){i.fireEvent("error",t)}),n.send(),i.xhr=n,i}},t.Observer={on:function(t,e){this.handlers||(this.handlers={});var i=this.handlers[t];return i||(i=this.handlers[t]=[]),i.push(e),{name:t,callback:e,un:this.un.bind(this,t,e)}},un:function(t,e){if(this.handlers){var i=this.handlers[t];if(i)if(e)for(var n=i.length-1;n>=0;n--)i[n]==e&&i.splice(n,1);else i.length=0}},unAll:function(){this.handlers=null},once:function(t,e){var i=this,n=function(){e.apply(this,arguments),setTimeout(function(){i.un(t,n)},0)};return this.on(t,n)},fireEvent:function(t){if(this.handlers){var e=this.handlers[t],i=Array.prototype.slice.call(arguments,1);e&&e.forEach(function(t){t.apply(null,i)})}}},t.util.extend(t,t.Observer),t.WebAudio={scriptBufferSize:256,PLAYING_STATE:0,PAUSED_STATE:1,FINISHED_STATE:2,supportsWebAudio:function(){return!(!window.AudioContext&&!window.webkitAudioContext)},getAudioContext:function(){return t.WebAudio.audioContext||(t.WebAudio.audioContext=new(window.AudioContext||window.webkitAudioContext)),t.WebAudio.audioContext},getOfflineAudioContext:function(e){return t.WebAudio.offlineAudioContext||(t.WebAudio.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),t.WebAudio.offlineAudioContext},init:function(e){this.params=e,this.ac=e.audioContext||this.getAudioContext(),this.lastPlay=this.ac.currentTime,this.startPosition=0,this.scheduledPause=null,this.states=[Object.create(t.WebAudio.state.playing),Object.create(t.WebAudio.state.paused),Object.create(t.WebAudio.state.finished)],this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(this.PAUSED_STATE),this.setPlaybackRate(this.params.audioRate)},disconnectFilters:function(){this.filters&&(this.filters.forEach(function(t){t&&t.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))},setState:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))},setFilter:function(){this.setFilters([].slice.call(arguments))},setFilters:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce(function(t,e){return t.connect(e),e},this.analyser).connect(this.gainNode))},createScriptNode:function(){this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(this.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(this.scriptBufferSize),this.scriptNode.connect(this.ac.destination)},addOnAudioProcess:function(){var t=this;this.scriptNode.onaudioprocess=function(){var e=t.getCurrentTime();e>=t.getDuration()?(t.setState(t.FINISHED_STATE),t.fireEvent("pause")):e>=t.scheduledPause?t.pause():t.state===t.states[t.PLAYING_STATE]&&t.fireEvent("audioprocess",e)}},removeOnAudioProcess:function(){this.scriptNode.onaudioprocess=null},createAnalyserNode:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)},createVolumeNode:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)},setVolume:function(t){this.gainNode.gain.value=t},getVolume:function(){return this.gainNode.gain.value},decodeArrayBuffer:function(t,e,i){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(t,function(t){e(t)}.bind(this),i)},setPeaks:function(t){this.peaks=t},getPeaks:function(t){if(this.peaks)return this.peaks;for(var e=this.buffer.length/t,i=~~(e/10)||1,n=this.buffer.numberOfChannels,o=[],s=[],r=0;r<n;r++)for(var a=o[r]=[],h=this.buffer.getChannelData(r),l=0;l<t;l++){for(var d=~~(l*e),c=~~(d+e),u=0,g=0,f=d;f<c;f+=i){var p=h[f];p>g&&(g=p),p<u&&(u=p)}a[2*l]=g,a[2*l+1]=u,(0==r||g>s[2*l])&&(s[2*l]=g),(0==r||u<s[2*l+1])&&(s[2*l+1]=u)}return this.params.splitChannels?o:s},getPlayedPercents:function(){return this.state.getPlayedPercents.call(this)},disconnectSource:function(){this.source&&this.source.disconnect()},destroy:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect()},load:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()},createSource:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.value=this.playbackRate,this.source.buffer=this.buffer,this.source.connect(this.analyser)},isPaused:function(){return this.state!==this.states[this.PLAYING_STATE]},getDuration:function(){return this.buffer?this.buffer.duration:0},seekTo:function(t,e){if(this.buffer)return this.scheduledPause=null,null==t&&(t=this.getCurrentTime(),t>=this.getDuration()&&(t=0)),null==e&&(e=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[this.FINISHED_STATE]&&this.setState(this.PAUSED_STATE),{start:t,end:e}},getPlayedTime:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate},play:function(t,e){if(this.buffer){this.createSource();var i=this.seekTo(t,e);t=i.start,e=i.end,this.scheduledPause=e,this.source.start(0,t,e-t),this.setState(this.PLAYING_STATE),this.fireEvent("play")}},pause:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(this.PAUSED_STATE),this.fireEvent("pause")},getCurrentTime:function(){return this.state.getCurrentTime.call(this)},setPlaybackRate:function(t){t=t||1,this.isPaused()?this.playbackRate=t:(this.pause(),this.playbackRate=t,this.play())}},t.WebAudio.state={},t.WebAudio.state.playing={init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}},t.WebAudio.state.paused={init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition}},t.WebAudio.state.finished={init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}},t.util.extend(t.WebAudio,t.Observer),t.MediaElement=Object.create(t.WebAudio),t.util.extend(t.MediaElement,{init:function(t){this.params=t,this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){}},this.mediaType=t.mediaType.toLowerCase(),this.elementPosition=t.elementPosition,this.setPlaybackRate(this.params.audioRate),this.createTimer()},createTimer:function(){var t=this,e=function(){if(!t.isPaused()){t.fireEvent("audioprocess",t.getCurrentTime());var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame;i(e)}};this.on("play",e)},load:function(t,e,i){var n=document.createElement(this.mediaType);n.controls=this.params.mediaControls,n.autoplay=this.params.autoplay||!1,n.preload="auto",n.src=t,n.style.width="100%";var o=e.querySelector(this.mediaType);o&&e.removeChild(o),e.appendChild(n),this._load(n,i)},loadElt:function(t,e){var i=t;i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,this._load(i,e)},_load:function(t,e){var i=this;t.load(),t.addEventListener("error",function(){i.fireEvent("error","Error loading media element")}),t.addEventListener("canplay",function(){i.fireEvent("canplay")}),t.addEventListener("ended",function(){i.fireEvent("finish")}),this.media=t,this.peaks=e,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate)},isPaused:function(){return!this.media||this.media.paused},getDuration:function(){var t=this.media.duration;return t>=1/0&&(t=this.media.seekable.end(0)),t},getCurrentTime:function(){return this.media&&this.media.currentTime},getPlayedPercents:function(){return this.getCurrentTime()/this.getDuration()||0},setPlaybackRate:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate},seekTo:function(t){null!=t&&(this.media.currentTime=t),this.clearPlayEnd()},play:function(t,e){this.seekTo(t),this.media.play(),e&&this.setPlayEnd(e),this.fireEvent("play")},pause:function(){this.media&&this.media.pause(),this.clearPlayEnd(),this.fireEvent("pause")},setPlayEnd:function(t){var e=this;this.onPlayEnd=function(i){i>=t&&(e.pause(),e.seekTo(t))},this.on("audioprocess",this.onPlayEnd)},clearPlayEnd:function(){this.onPlayEnd&&(this.un("audioprocess",this.onPlayEnd),this.onPlayEnd=null)},getPeaks:function(e){return this.buffer?t.WebAudio.getPeaks.call(this,e):this.peaks||[]},getVolume:function(){return this.media.volume},setVolume:function(t){this.media.volume=t},destroy:function(){this.pause(),this.unAll(),this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}),t.AudioElement=t.MediaElement,t.Drawer={init:function(t,e){this.container=t,this.params=e,this.width=0,this.height=e.height*this.params.pixelRatio,this.lastPos=0,this.initDrawer(e),this.createWrapper(),this.createElements()},createWrapper:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()},handleEvent:function(t,e){!e&&t.preventDefault();var i,n=t.targetTouches?t.targetTouches[0].clientX:t.clientX,o=this.wrapper.getBoundingClientRect(),s=this.width,r=this.getWidth();return!this.params.fillParent&&s<r?(i=(n-o.left)*this.params.pixelRatio/s||0,i>1&&(i=1)):i=(n-o.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,i},setupWrapperEvents:function(){var t=this;this.wrapper.addEventListener("click",function(e){var i=t.wrapper.offsetHeight-t.wrapper.clientHeight;if(0!=i){var n=t.wrapper.getBoundingClientRect();if(e.clientY>=n.bottom-i)return}t.params.interact&&t.fireEvent("click",e,t.handleEvent(e))}),this.wrapper.addEventListener("scroll",function(e){t.fireEvent("scroll",e)})},drawPeaks:function(t,e){this.resetScroll(),this.setWidth(e),this.params.barWidth?this.drawBars(t):this.drawWave(t)},style:function(t,e){return Object.keys(e).forEach(function(i){t.style[i]!==e[i]&&(t.style[i]=e[i])}),t},resetScroll:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)},recenter:function(t){var e=this.wrapper.scrollWidth*t;this.recenterOnPosition(e,!0)},recenterOnPosition:function(t,e){var i=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),o=t-n,s=o-i,r=this.wrapper.scrollWidth-this.wrapper.clientWidth;if(0!=r){if(!e&&-n<=s&&s<n){var a=5;s=Math.max(-a,Math.min(a,s)),o=i+s}o=Math.max(0,Math.min(r,o)),o!=i&&(this.wrapper.scrollLeft=o)}},getWidth:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)},setWidth:function(t){this.width=t,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize()},setHeight:function(t){t!=this.height&&(this.height=t,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize())},progress:function(t){var e=1/this.params.pixelRatio,i=Math.round(t*this.width)*e;if(i<this.lastPos||i-this.lastPos>=e){if(this.lastPos=i,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*t);this.recenterOnPosition(n)}this.updateProgress(t)}},destroy:function(){this.unAll(),this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=null)},initDrawer:function(){},createElements:function(){},updateSize:function(){},drawWave:function(t,e){},clearWave:function(){},updateProgress:function(t){}},t.util.extend(t.Drawer,t.Observer),t.Drawer.Canvas=Object.create(t.Drawer),t.util.extend(t.Drawer.Canvas,{createElements:function(){var t=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:0,top:0,bottom:0}));if(this.waveCc=t.getContext("2d"),this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.params.waveColor!=this.params.progressColor){var e=this.progressWave.appendChild(document.createElement("canvas"));this.progressCc=e.getContext("2d")}},updateSize:function(){var t=Math.round(this.width/this.params.pixelRatio);this.waveCc.canvas.width=this.width,this.waveCc.canvas.height=this.height,this.style(this.waveCc.canvas,{width:t+"px"}),this.style(this.progressWave,{display:"block"}),this.progressCc&&(this.progressCc.canvas.width=this.width,this.progressCc.canvas.height=this.height,this.style(this.progressCc.canvas,{width:t+"px"})),this.clearWave()},clearWave:function(){this.waveCc.clearRect(0,0,this.width,this.height),this.progressCc&&this.progressCc.clearRect(0,0,this.width,this.height)},drawBars:function(e,i){if(e[0]instanceof Array){var n=e;if(this.params.splitChannels)return this.setHeight(n.length*this.params.height*this.params.pixelRatio),void n.forEach(this.drawBars,this);e=n[0]}var o=[].some.call(e,function(t){return t<0});o&&(e=[].filter.call(e,function(t,e){return e%2==0}));var s=.5/this.params.pixelRatio,r=this.width,a=this.params.height*this.params.pixelRatio,h=a*i||0,l=a/2,d=e.length,c=this.params.barWidth*this.params.pixelRatio,u=Math.max(this.params.pixelRatio,~~(c/2)),g=c+u,f=1;this.params.normalize&&(f=t.util.max(e));var p=d/r;this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(t){if(t)for(var i=0;i<r;i+=g){var n=Math.round(e[Math.floor(i*p)]/f*l);t.fillRect(i+s,l-n+h,c+s,2*n)}},this)},drawWave:function(e,i){if(e[0]instanceof Array){var n=e;if(this.params.splitChannels)return this.setHeight(n.length*this.params.height*this.params.pixelRatio),void n.forEach(this.drawWave,this);e=n[0]}var o=[].some.call(e,function(t){return t<0});if(!o){for(var s=[],r=0,a=e.length;r<a;r++)s[2*r]=e[r],s[2*r+1]=-e[r];e=s}var h=.5/this.params.pixelRatio,l=this.params.height*this.params.pixelRatio,d=l*i||0,c=l/2,u=~~(e.length/2),g=1;this.params.fillParent&&this.width!=u&&(g=this.width/u);var f=1;if(this.params.normalize){var p=t.util.max(e),m=t.util.min(e);f=-m>p?-m:p}this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(t){if(t){t.beginPath(),t.moveTo(h,c+d);for(var i=0;i<u;i++){var n=Math.round(e[2*i]/f*c);t.lineTo(i*g+h,c-n+d)}for(var i=u-1;i>=0;i--){var n=Math.round(e[2*i+1]/f*c);t.lineTo(i*g+h,c-n+d)}t.closePath(),t.fill(),t.fillRect(0,c+d-h,this.width,h)}},this)},updateProgress:function(t){var e=Math.round(this.width*t)/this.params.pixelRatio;this.style(this.progressWave,{width:e+"px"})},getImage:function(t,e){return this.waveCc.canvas.toDataURL(t,e)}}),t.Drawer.MultiCanvas=Object.create(t.Drawer),t.util.extend(t.Drawer.MultiCanvas,{initDrawer:function(t){if(this.maxCanvasWidth=null!=t.maxCanvasWidth?t.maxCanvasWidth:4e3,this.maxCanvasElementWidth=Math.round(this.maxCanvasWidth/this.params.pixelRatio),this.maxCanvasWidth<=1)throw"maxCanvasWidth must be greater than 1.";if(this.maxCanvasWidth%2==1)throw"maxCanvasWidth must be an even number.";this.hasProgressCanvas=this.params.waveColor!=this.params.progressColor,this.halfPixel=.5/this.params.pixelRatio,this.canvases=[]},createElements:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.addCanvas()},updateSize:function(){for(var t=Math.round(this.width/this.params.pixelRatio),e=Math.ceil(t/this.maxCanvasElementWidth);this.canvases.length<e;)this.addCanvas();for(;this.canvases.length>e;)this.removeCanvas();
for(var i in this.canvases){var n=this.maxCanvasWidth+2*Math.ceil(this.params.pixelRatio/2);i==this.canvases.length-1&&(n=this.width-this.maxCanvasWidth*(this.canvases.length-1)),this.updateDimensions(this.canvases[i],n,this.height),this.clearWaveForEntry(this.canvases[i])}},addCanvas:function(){var t={},e=this.maxCanvasElementWidth*this.canvases.length;t.wave=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:e+"px",top:0,bottom:0})),t.waveCtx=t.wave.getContext("2d"),this.hasProgressCanvas&&(t.progress=this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:e+"px",top:0,bottom:0})),t.progressCtx=t.progress.getContext("2d")),this.canvases.push(t)},removeCanvas:function(){var t=this.canvases.pop();t.wave.parentElement.removeChild(t.wave),this.hasProgressCanvas&&t.progress.parentElement.removeChild(t.progress)},updateDimensions:function(t,e,i){var n=Math.round(e/this.params.pixelRatio),o=Math.round(this.width/this.params.pixelRatio);t.start=t.waveCtx.canvas.offsetLeft/o||0,t.end=t.start+n/o,t.waveCtx.canvas.width=e,t.waveCtx.canvas.height=i,this.style(t.waveCtx.canvas,{width:n+"px"}),this.style(this.progressWave,{display:"block"}),this.hasProgressCanvas&&(t.progressCtx.canvas.width=e,t.progressCtx.canvas.height=i,this.style(t.progressCtx.canvas,{width:n+"px"}))},clearWave:function(){for(var t in this.canvases)this.clearWaveForEntry(this.canvases[t])},clearWaveForEntry:function(t){t.waveCtx.clearRect(0,0,t.waveCtx.canvas.width,t.waveCtx.canvas.height),this.hasProgressCanvas&&t.progressCtx.clearRect(0,0,t.progressCtx.canvas.width,t.progressCtx.canvas.height)},drawBars:function(e,i){if(e[0]instanceof Array){var n=e;if(this.params.splitChannels)return this.setHeight(n.length*this.params.height*this.params.pixelRatio),void n.forEach(this.drawBars,this);e=n[0]}var o=[].some.call(e,function(t){return t<0});o&&(e=[].filter.call(e,function(t,e){return e%2==0}));var s=this.width,r=this.params.height*this.params.pixelRatio,a=r*i||0,h=r/2,l=e.length,d=this.params.barWidth*this.params.pixelRatio,c=Math.max(this.params.pixelRatio,~~(d/2)),u=d+c,g=1;this.params.normalize&&(g=t.util.max(e));for(var f=l/s,p=0;p<s;p+=u){var m=Math.round(e[Math.floor(p*f)]/g*h);this.fillRect(p+this.halfPixel,h-m+a,d+this.halfPixel,2*m)}},drawWave:function(e,i){if(e[0]instanceof Array){var n=e;if(this.params.splitChannels)return this.setHeight(n.length*this.params.height*this.params.pixelRatio),void n.forEach(this.drawWave,this);e=n[0]}var o=[].some.call(e,function(t){return t<0});if(!o){for(var s=[],r=0,a=e.length;r<a;r++)s[2*r]=e[r],s[2*r+1]=-e[r];e=s}var h=this.params.height*this.params.pixelRatio,l=h*i||0,d=h/2,c=1;if(this.params.normalize){var u=t.util.max(e),g=t.util.min(e);c=-g>u?-g:u}this.drawLine(e,c,d,l),this.fillRect(0,d+l-this.halfPixel,this.width,this.halfPixel)},drawLine:function(t,e,i,n){for(var o in this.canvases){var s=this.canvases[o];this.setFillStyles(s),this.drawLineToContext(s,s.waveCtx,t,e,i,n),this.drawLineToContext(s,s.progressCtx,t,e,i,n)}},drawLineToContext:function(t,e,i,n,o,s){if(e){var r=i.length/2,a=1;this.params.fillParent&&this.width!=r&&(a=this.width/r);var h=Math.round(r*t.start),l=Math.round(r*t.end);e.beginPath(),e.moveTo(this.halfPixel,o+s);for(var d=h;d<l;d++){var c=Math.round(i[2*d]/n*o);e.lineTo((d-h)*a+this.halfPixel,o-c+s)}for(var d=l-1;d>=h;d--){var c=Math.round(i[2*d+1]/n*o);e.lineTo((d-h)*a+this.halfPixel,o-c+s)}e.closePath(),e.fill()}},fillRect:function(t,e,i,n){for(var o in this.canvases){var s=this.canvases[o],r=o*this.maxCanvasWidth,a={x1:Math.max(t,o*this.maxCanvasWidth),y1:e,x2:Math.min(t+i,o*this.maxCanvasWidth+s.waveCtx.canvas.width),y2:e+n};a.x1<a.x2&&(this.setFillStyles(s),this.fillRectToContext(s.waveCtx,a.x1-r,a.y1,a.x2-a.x1,a.y2-a.y1),this.fillRectToContext(s.progressCtx,a.x1-r,a.y1,a.x2-a.x1,a.y2-a.y1))}},fillRectToContext:function(t,e,i,n,o){t&&t.fillRect(e,i,n,o)},setFillStyles:function(t){t.waveCtx.fillStyle=this.params.waveColor,this.hasProgressCanvas&&(t.progressCtx.fillStyle=this.params.progressColor)},updateProgress:function(t){var e=Math.round(this.width*t)/this.params.pixelRatio;this.style(this.progressWave,{width:e+"px"})}}),function(){var e=function(){var e=document.querySelectorAll("wavesurfer");Array.prototype.forEach.call(e,function(e){var i=t.util.extend({container:e,backend:"MediaElement",mediaControls:!0},e.dataset);e.style.display="block";var n=t.create(i);if(e.dataset.peaks)var o=JSON.parse(e.dataset.peaks);n.load(e.dataset.url,o)})};"complete"===document.readyState?e():window.addEventListener("load",e)}(),t}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JSONEditor=e():t.JSONEditor=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t,e,i){if(!(this instanceof n))throw new Error('JSONEditor constructor called without "new".');var o=h.getInternetExplorerVersion();if(-1!=o&&9>o)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");if(e&&(e.error&&(console.warn('Option "error" has been renamed to "onError"'),e.onError=e.error,delete e.error),e.change&&(console.warn('Option "change" has been renamed to "onChange"'),e.onChange=e.change,delete e.change),e.editable&&(console.warn('Option "editable" has been renamed to "onEditable"'),e.onEditable=e.editable,delete e.editable),e)){var s=["ace","theme","ajv","schema","onChange","onEditable","onError","onModeChange","escapeUnicode","history","search","mode","modes","name","indentation","sortObjectKeys"];Object.keys(e).forEach(function(t){-1===s.indexOf(t)&&console.warn('Unknown option "'+t+'". This option will be ignored')})}arguments.length&&this._create(t,e,i)}var o;try{o=i(1)}catch(s){}var r=i(51),a=i(62),h=i(54);n.modes={},n.prototype.DEBOUNCE_INTERVAL=150,n.prototype._create=function(t,e,i){this.container=t,this.options=e||{},this.json=i||{};var n=this.options.mode||"tree";this.setMode(n)},n.prototype.destroy=function(){},n.prototype.set=function(t){this.json=t},n.prototype.get=function(){return this.json},n.prototype.setText=function(t){this.json=h.parse(t)},n.prototype.getText=function(){return JSON.stringify(this.json)},n.prototype.setName=function(t){this.options||(this.options={}),this.options.name=t},n.prototype.getName=function(){return this.options&&this.options.name},n.prototype.setMode=function(t){var e,i,o=this.container,s=h.extend({},this.options),r=s.mode;s.mode=t;var a=n.modes[t];if(!a)throw new Error('Unknown mode "'+s.mode+'"');try{var l="text"==a.data;if(i=this.getName(),e=this[l?"getText":"get"](),this.destroy(),h.clear(this),h.extend(this,a.mixin),this.create(o,s),this.setName(i),this[l?"setText":"set"](e),"function"==typeof a.load)try{a.load.call(this)}catch(d){console.error(d)}if("function"==typeof s.onModeChange&&t!==r)try{s.onModeChange(t,r)}catch(d){console.error(d)}}catch(d){this._onError(d)}},n.prototype.getMode=function(){return this.options.mode},n.prototype._onError=function(t){if(!this.options||"function"!=typeof this.options.onError)throw t;this.options.onError(t)},n.prototype.setSchema=function(t){if(t){var e;try{e=this.options.ajv||o({allErrors:!0,verbose:!0})}catch(i){console.warn("Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.")}e&&(this.validateSchema=e.compile(t),this.options.schema=t,this.validate()),this.refresh()}else this.validateSchema=null,this.options.schema=null,this.validate(),this.refresh()},n.prototype.validate=function(){},n.prototype.refresh=function(){},n.registerMode=function(t){var e,i;if(h.isArray(t))for(e=0;e<t.length;e++)n.registerMode(t[e]);else{if(!("mode"in t))throw new Error('Property "mode" missing');if(!("mixin"in t))throw new Error('Property "mixin" missing');if(!("data"in t))throw new Error('Property "data" missing');var o=t.mode;if(o in n.modes)throw new Error('Mode "'+o+'" already registered');if("function"!=typeof t.mixin.create)throw new Error('Required function "create" missing on mixin');var s=["setMode","registerMode","modes"];for(e=0;e<s.length;e++)if(i=s[e],i in t.mixin)throw new Error('Reserved property "'+i+'" not allowed in mixin');n.modes[o]=t}},n.registerMode(r),n.registerMode(a),t.exports=n},function(t,e,i){"use strict";function n(t){return v.test(t)}function o(t){function e(t,e){var i;if("string"==typeof t){if(i=L(t),!i)throw new Error('no schema with key or ref "'+t+'"')}else{var n=B(t);i=n.validate||M(n)}var o=i(e);return i.async?"*"==H._opts.async?p(o):o:(H.errors=i.errors,o)}function y(t){var e=B(t);return e.validate||M(e)}function R(t,e,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)R(t[o],void 0,i,n);else{e=r.normalizeId(e||t.id),_(e);var s=H._schemas[e]=B(t,i,!0);s.meta=n}}function A(t,e,i){R(t,e,i,!0)}function b(t,i){var o=t.$schema||H._opts.defaultMeta||x(),s=H._formats.uri;H._formats.uri="function"==typeof s?n:v;var r=e(o,t);if(H._formats.uri=s,!r&&i){var a="schema is invalid:"+S();if("log"!=H._opts.validateSchema)throw new Error(a);console.error(a)}return r}function x(){var t=H._opts.meta;return H._opts.defaultMeta="object"==typeof t?t.id||t:H._opts.v5?u.META_SCHEMA_ID:m,H._opts.defaultMeta}function L(t){var e=C(t);switch(typeof e){case"object":return e.validate||M(e);case"string":return L(e)}}function C(t){return t=r.normalizeId(t),H._schemas[t]||H._refs[t]}function k(t){switch(typeof t){case"undefined":return E(H._schemas),E(H._refs),void H._cache.clear();case"string":var e=C(t);return e&&H._cache.del(e.jsonStr),delete H._schemas[t],void delete H._refs[t];case"object":if(t instanceof RegExp)return E(H._schemas,t),void E(H._refs,t);var i=l(t);H._cache.del(i);var n=t.id;n&&(n=r.normalizeId(n),delete H._schemas[n],delete H._refs[n])}}function E(t,e){for(var i in t){var n=t[i];n.meta||e&&!e.test(i)||(H._cache.del(n.jsonStr),delete t[i])}}function B(t,e,i){if("object"!=typeof t)throw new Error("schema should be object");var n=l(t),o=H._cache.get(n);if(o)return o;i=i||H._opts.addUsedSchema!==!1;var s=r.normalizeId(t.id);s&&i&&_(s),H._opts.validateSchema===!1||e||b(t,!0);var a=r.ids.call(H,t),d=new h({id:s,schema:t,localRefs:a,jsonStr:n});return"#"!=s[0]&&i&&(H._refs[s]=d),H._cache.put(n,d),d}function M(t,e){function i(){var e=t.validate,n=e.apply(null,arguments);return i.errors=e.errors,n}if(t.compiling)return t.validate=i,i.schema=t.schema,i.errors=null,i.root=e?e:i,t.schema.$async===!0&&(i.async=!0),i;t.compiling=!0;var n;t.meta&&(n=H._opts,H._opts=H._metaOpts);var o;try{o=s.call(H,t.schema,e,t.localRefs)}finally{t.compiling=!1,t.meta&&(H._opts=n)}return t.validate=o,t.refs=o.refs,t.refVal=o.refVal,t.root=o.root,o}function S(t,e){if(t=t||H.errors,!t)return"No errors";e=e||{};for(var i=void 0===e.separator?", ":e.separator,n=void 0===e.dataVar?"data":e.dataVar,o="",s=0;s<t.length;s++){var r=t[s];r&&(o+=n+r.dataPath+" "+r.message+i)}return o.slice(0,-i.length)}function F(t,e){"string"==typeof e&&(e=new RegExp(e)),H._formats[t]=e}function T(){if(H._opts.meta!==!1){var t=i(50);A(t,m,!0),H._refs["http://json-schema.org/schema"]=m}var e=H._opts.schemas;if(e)if(Array.isArray(e))R(e);else for(var n in e)R(e[n],n)}function P(){for(var t in H._opts.formats){var e=H._opts.formats[t];F(t,e)}}function _(t){if(H._schemas[t]||H._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function D(){for(var t=g.copy(H._opts),e=0;e<w.length;e++)delete t[w[e]];return t}if(!(this instanceof o))return new o(t);var H=this;t=this._opts=g.copy(t)||{},this._schemas={},this._refs={},this._formats=d(t.format),this._cache=t.cache||new a,this._loadingSchemas={},this.RULES=c(),this.validate=e,this.compile=y,this.addSchema=R,this.addMetaSchema=A,this.validateSchema=b,this.getSchema=L,this.removeSchema=k,this.addFormat=F,this.errorsText=S,this._addSchema=B,this._compile=M,t.loopRequired=t.loopRequired||1/0,(t.async||t.transpile)&&f.setup(t),t.beautify===!0&&(t.beautify={indent_size:2}),"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),this._metaOpts=D(),T(),t.formats&&P(),t.v5&&u.enable(this),"object"==typeof t.meta&&A(t.meta)}var s=i(2),r=i(3),a=i(21),h=i(16),l=i(12),d=i(22),c=i(23),u=i(43),g=i(11),f=i(17),p=i(19);t.exports=o,o.prototype.compileAsync=f.compile,o.prototype.addKeyword=i(49),o.ValidationError=i(20);var m="http://json-schema.org/draft-04/schema",v=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,w=["removeAdditional","useDefaults","coerceTypes"]},function(module,exports,__webpack_require__){"use strict";function compile(schema,root,localRefs,baseId){function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||_root&&_root.schema==_schema;if(_root.schema!=root.schema)return compile.call(self,_schema,_root,localRefs,baseId);var $async=_schema.$async===!0;$async&&!opts.transpile&&async.setup(opts);var sourceCode=validateGenerator({isTop:!0,schema:_schema,isRoot:isRoot,baseId:baseId,root:_root,schemaPath:"",errSchemaPath:"#",errorPath:'""',RULES:RULES,validate:validateGenerator,util:util,resolve:resolve,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:opts,formats:formats,self:self});sourceCode=vars(refVal,refValCode)+vars(patterns,patternCode)+vars(defaults,defaultCode)+vars(customRules,customRuleCode)+sourceCode,opts.beautify&&(beautify?sourceCode=beautify(sourceCode,opts.beautify):console.error('"npm install js-beautify" to use beautify option'));var validate,validateCode,transpile=opts._transpileFunc;try{validateCode=$async&&transpile?transpile(sourceCode):sourceCode,eval(validateCode),refVal[0]=validate}catch(e){throw console.error("Error compiling schema, function code:",validateCode),e}return validate.schema=_schema,validate.errors=null,validate.refs=refs,validate.refVal=refVal,validate.root=isRoot?validate:_root,$async&&(validate.async=!0),validate.sourceCode=sourceCode,validate}function resolveRef(t,e,i){e=resolve.url(t,e);var n,o,s=refs[e];if(void 0!==s)return n=refVal[s],o="refVal["+s+"]",resolvedRef(n,o);if(!i){var r=root.refs[e];if(void 0!==r)return n=root.refVal[r],o=addLocalRef(e,n),resolvedRef(n,o)}o=addLocalRef(e);var a=resolve.call(self,localCompile,root,e);if(!a){var h=localRefs&&localRefs[e];h&&(a=resolve.inlineRef(h,opts.inlineRefs)?h:compile.call(self,h,root,localRefs,t))}return a?(replaceLocalRef(e,a),resolvedRef(a,o)):void 0}function addLocalRef(t,e){var i=refVal.length;return refVal[i]=e,refs[t]=i,"refVal"+i}function replaceLocalRef(t,e){var i=refs[t];refVal[i]=e}function resolvedRef(t,e){return"object"==typeof t?{code:e,schema:t,inline:!0}:{code:e,async:t&&t.async}}function usePattern(t){var e=patternsHash[t];return void 0===e&&(e=patternsHash[t]=patterns.length,patterns[e]=t),"pattern"+e}function useDefault(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return util.toQuotedString(t);case"object":if(null===t)return"null";var e=stableStringify(t),i=defaultsHash[e];return void 0===i&&(i=defaultsHash[e]=defaults.length,defaults[i]=t),"default"+i}}function useCustomRule(t,e,i,n){var o,s=t.definition.compile,r=t.definition.inline,a=t.definition.macro;s?o=s.call(self,e,i):a?(o=a.call(self,e,i),opts.validateSchema!==!1&&self.validateSchema(o,!0)):o=r?r.call(self,n,t.keyword,e,i):t.definition.validate;var h=customRules.length;return customRules[h]=o,{code:"customRule"+h,validate:o}}var self=this,opts=this._opts,refVal=[void 0],refs={},patterns=[],patternsHash={},defaults=[],defaultsHash={},customRules=[];root=root||{schema:schema,refVal:refVal,refs:refs};var formats=this._formats,RULES=this.RULES;return localCompile(schema,root,localRefs,baseId)}function patternCode(t,e){return"var pattern"+t+" = new RegExp("+util.toQuotedString(e[t])+");"}function defaultCode(t){return"var default"+t+" = defaults["+t+"];"}function refValCode(t,e){return e[t]?"var refVal"+t+" = refVal["+t+"];":""}function customRuleCode(t){return"var customRule"+t+" = customRules["+t+"];"}function vars(t,e){if(!t.length)return"";for(var i="",n=0;n<t.length;n++)i+=e(n,t);return i}var resolve=__webpack_require__(3),util=__webpack_require__(11),stableStringify=__webpack_require__(12),async=__webpack_require__(17),beautify=function(){try{return __webpack_require__(!function(){var t=new Error('Cannot find module "js-beautify"');throw t.code="MODULE_NOT_FOUND",t}()).js_beautify}catch(t){}}(),validateGenerator=__webpack_require__(18);module.exports=compile;var co=__webpack_require__(19),ucs2length=util.ucs2length,equal=__webpack_require__(10),ValidationError=__webpack_require__(20)},function(t,e,i){"use strict";function n(t,e,i){var s=this._refs[i];if("string"==typeof s){if(!this._refs[s])return n.call(this,t,e,s);s=this._refs[s]}if(s=s||this._schemas[i],s instanceof w)return a(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var r,h,l,d=o.call(this,e,i);return d&&(r=d.schema,e=d.root,l=d.baseId),r instanceof w?h=r.validate||t.call(this,r.schema,e,void 0,l):r&&(h=a(r,this._opts.inlineRefs)?r:t.call(this,r,e,void 0,l)),h}function o(t,e){var i=p.parse(e,!1,!0),n=c(i),o=d(t.schema.id);if(n!==o){var a=u(n),h=this._refs[a];if("string"==typeof h)return s.call(this,t,h,i);if(h instanceof w)h.validate||this._compile(h),t=h;else if(h=this._schemas[a],h instanceof w){if(h.validate||this._compile(h),a==u(e))return{schema:h,root:t,baseId:o};t=h}if(!t.schema)return;o=d(t.schema.id)}return r.call(this,i,o,t.schema,t)}function s(t,e,i){var n=o.call(this,t,e);if(n){var s=n.schema,a=n.baseId;return t=n.root,s.id&&(a=g(a,s.id)),r.call(this,i,a,s,t)}}function r(t,e,i,n){if(t.hash=t.hash||"","#/"==t.hash.slice(0,2)){for(var s=t.hash.split("/"),r=1;r<s.length;r++){var a=s[r];if(a){if(a=v.unescapeFragment(a),i=i[a],!i)break;if(i.id&&!y[a]&&(e=g(e,i.id)),i.$ref){var h=g(e,i.$ref),l=o.call(this,n,h);l&&(i=l.schema,n=l.root,e=l.baseId)}}}return i&&i!=n.schema?{schema:i,root:n,baseId:e}:void 0}}function a(t,e){return e!==!1&&(void 0===e||e===!0?h(t):e?l(t)<=e:void 0)}function h(t){var e;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if(e=t[i],"object"==typeof e&&!h(e))return!1}else for(var n in t){if("$ref"==n)return!1;if(e=t[n],"object"==typeof e&&!h(e))return!1}return!0}function l(t){var e,i=0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(e=t[n],"object"==typeof e&&(i+=l(e)),i==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(R[o])i++;else if(e=t[o],"object"==typeof e&&(i+=l(e)+1),i==1/0)return 1/0}return i}function d(t,e){e!==!1&&(t=u(t));var i=p.parse(t,!1,!0);return c(i)}function c(t){return(t.protocol||"")+(t.protocol?"//":"")+(t.host||"")+(t.path||"")+"#"}function u(t){return t?t.replace(A,""):""}function g(t,e){return e=u(e),p.resolve(t,e)}function f(t){function e(t,i,o){if(Array.isArray(t))for(var s=0;s<t.length;s++)e.call(this,t[s],i+"/"+s,o);else if(t&&"object"==typeof t){if("string"==typeof t.id){var r=o=o?p.resolve(o,t.id):t.id;r=u(r);var a=this._refs[r];if("string"==typeof a&&(a=this._refs[a]),a&&a.schema){if(!m(t,a.schema))throw new Error('id "'+r+'" resolves to more than one schema')}else if(r!=u(i))if("#"==r[0]){if(n[r]&&!m(t,n[r]))throw new Error('id "'+r+'" resolves to more than one schema');n[r]=t}else this._refs[r]=i}for(var h in t)e.call(this,t[h],i+"/"+v.escapeFragment(h),o)}}var i=u(t.id),n={};return e.call(this,t,d(i,!1),i),n}var p=i(4),m=i(10),v=i(11),w=i(16);t.exports=n,n.normalizeId=u,n.fullPath=d,n.url=g,n.ids=f,n.inlineRef=a;var y=v.toHash(["properties","patternProperties","enum","dependencies","definitions"]),R=v.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]),A=/#\/?$/},function(t,e,i){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,i){if(t&&l(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,i),o}function s(t){return h(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function r(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}function h(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function d(t){return null===t}function c(t){return null==t}var u=i(5);e.parse=o,e.resolve=r,e.resolveObject=a,e.format=s,e.Url=n;var g=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(m),w=["%","/","?",";","#"].concat(v),y=["/","?","#"],R=255,A=/^[a-z0-9A-Z_-]{0,63}$/,b=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},L={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=i(7);n.prototype.parse=function(t,e,i){if(!h(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var o=g.exec(n);if(o){o=o[0];var s=o.toLowerCase();this.protocol=s,n=n.substr(o.length)}if(i||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var r="//"===n.substr(0,2);!r||o&&L[o]||(n=n.substr(2),this.slashes=!0)}if(!L[o]&&(r||o&&!C[o])){for(var a=-1,l=0;l<y.length;l++){var d=n.indexOf(y[l]);-1!==d&&(-1===a||a>d)&&(a=d)}var c,f;f=-1===a?n.lastIndexOf("@"):n.lastIndexOf("@",a),-1!==f&&(c=n.slice(0,f),n=n.slice(f+1),this.auth=decodeURIComponent(c)),a=-1;for(var l=0;l<w.length;l++){var d=n.indexOf(w[l]);-1!==d&&(-1===a||a>d)&&(a=d)}-1===a&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var m=this.hostname.split(/\./),l=0,E=m.length;E>l;l++){var B=m[l];if(B&&!B.match(A)){for(var M="",S=0,F=B.length;F>S;S++)M+=B.charCodeAt(S)>127?"x":B[S];if(!M.match(A)){var T=m.slice(0,l),P=m.slice(l+1),_=B.match(b);_&&(T.push(_[1]),P.unshift(_[2])),P.length&&(n="/"+P.join(".")+n),this.hostname=T.join(".");break}}}if(this.hostname.length>R?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var D=this.hostname.split("."),H=[],l=0;l<D.length;++l){var $=D[l];H.push($.match(/[^A-Za-z0-9_-]/)?"xn--"+u.encode($):$)}this.hostname=H.join(".")}var O=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+O,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!x[s])for(var l=0,E=v.length;E>l;l++){var I=v[l],W=encodeURIComponent(I);W===I&&(W=escape(I)),n=n.split(I).join(W)}var j=n.indexOf("#");-1!==j&&(this.hash=n.substr(j),n=n.slice(0,j));var X=n.indexOf("?");if(-1!==X?(this.search=n.substr(X),this.query=n.substr(X+1),e&&(this.query=k.parse(this.query)),n=n.slice(0,X)):e&&(this.search="",this.query={}),n&&(this.pathname=n),C[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",$=this.search||"";this.path=O+$}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(s=k.stringify(this.query));var r=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||C[e])&&o!==!1?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),r=r.replace("#","%23"),e+o+i+r+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h(t)){var e=new n;e.parse(t,!1,!0),t=e}var i=new n;if(Object.keys(this).forEach(function(t){i[t]=this[t]},this),i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(i[e]=t[e])}),C[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i;if(t.protocol&&t.protocol!==i.protocol){if(!C[t.protocol])return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.href=i.format(),i;if(i.protocol=t.protocol,t.host||L[t.protocol])i.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),i.pathname=o.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var s=i.pathname||"",r=i.search||"";i.path=s+r}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var a=i.pathname&&"/"===i.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),u=l||a||i.host&&t.pathname,g=u,f=i.pathname&&i.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],p=i.protocol&&!C[i.protocol];if(p&&(i.hostname="",i.port=null,i.host&&(""===f[0]?f[0]=i.host:f.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),u=u&&(""===o[0]||""===f[0])),l)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,f=o;else if(o.length)f||(f=[]),f.pop(),f=f.concat(o),i.search=t.search,i.query=t.query;else if(!c(t.search)){if(p){i.hostname=i.host=f.shift();var m=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");m&&(i.auth=m.shift(),i.host=i.hostname=m.shift())}return i.search=t.search,i.query=t.query,d(i.pathname)&&d(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!f.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var v=f.slice(-1)[0],w=(i.host||t.host)&&("."===v||".."===v)||""===v,y=0,R=f.length;R>=0;R--)v=f[R],"."==v?f.splice(R,1):".."===v?(f.splice(R,1),y++):y&&(f.splice(R,1),y--);if(!u&&!g)for(;y--;y)f.unshift("..");!u||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),w&&"/"!==f.join("/").substr(-1)&&f.push("");var A=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(p){i.hostname=i.host=A?"":f.length?f.shift():"";var m=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");m&&(i.auth=m.shift(),i.host=i.hostname=m.shift())}return u=u||i.host&&f.length,u&&!A&&f.unshift(""),f.length?i.pathname=f.join("/"):(i.pathname=null,i.path=null),d(i.pathname)&&d(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){var n;(function(t,o){!function(s){function r(t){throw RangeError(T[t])}function a(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function h(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(F,".");var o=t.split("."),s=a(o,e).join(".");return n+s}function l(t){for(var e,i,n=[],o=0,s=t.length;s>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&s>o?(i=t.charCodeAt(o++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),o--)):n.push(e);return n}function d(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:A}function u(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function g(t,e,i){var n=0;for(t=i?_(t/C):t>>1,t+=_(t/e);t>P*x>>1;n+=A)t=_(t/P);return _(n+(P+1)*t/(t+L))}function f(t){var e,i,n,o,s,a,h,l,u,f,p=[],m=t.length,v=0,w=E,y=k;for(i=t.lastIndexOf(B),0>i&&(i=0),n=0;i>n;++n)t.charCodeAt(n)>=128&&r("not-basic"),p.push(t.charCodeAt(n));for(o=i>0?i+1:0;m>o;){for(s=v,a=1,h=A;o>=m&&r("invalid-input"),l=c(t.charCodeAt(o++)),(l>=A||l>_((R-v)/a))&&r("overflow"),v+=l*a,u=y>=h?b:h>=y+x?x:h-y,!(u>l);h+=A)f=A-u,a>_(R/f)&&r("overflow"),a*=f;e=p.length+1,y=g(v-s,e,0==s),_(v/e)>R-w&&r("overflow"),w+=_(v/e),v%=e,p.splice(v++,0,w)}return d(p)}function p(t){var e,i,n,o,s,a,h,d,c,f,p,m,v,w,y,L=[];for(t=l(t),m=t.length,e=E,i=0,s=k,a=0;m>a;++a)p=t[a],128>p&&L.push(D(p));for(n=o=L.length,o&&L.push(B);m>n;){for(h=R,a=0;m>a;++a)p=t[a],p>=e&&h>p&&(h=p);for(v=n+1,h-e>_((R-i)/v)&&r("overflow"),i+=(h-e)*v,e=h,a=0;m>a;++a)if(p=t[a],e>p&&++i>R&&r("overflow"),p==e){for(d=i,c=A;f=s>=c?b:c>=s+x?x:c-s,!(f>d);c+=A)y=d-f,w=A-f,L.push(D(u(f+y%w,0))),d=_(y/w);L.push(D(u(d,0))),s=g(i,v,n==o),i=0,++n}++i,++e}return L.join("")}function m(t){return h(t,function(t){return M.test(t)?f(t.slice(4).toLowerCase()):t})}function v(t){return h(t,function(t){return S.test(t)?"xn--"+p(t):t})}var w=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof o&&o);w.global!==w&&w.window!==w&&w.self!==w||(s=w);var y,R=2147483647,A=36,b=1,x=26,L=38,C=700,k=72,E=128,B="-",M=/^xn--/,S=/[^\x20-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=A-b,_=Math.floor,D=String.fromCharCode;y={version:"1.3.2",ucs2:{decode:l,encode:d},decode:f,encode:p,toASCII:v,toUnicode:m},n=function(){return y}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,i(6)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,i){"use strict";e.decode=e.parse=i(8),e.encode=e.stringify=i(9)},function(t,e){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var r=/\+/g;t=t.split(e);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var h=t.length;a>0&&h>a&&(h=a);for(var l=0;h>l;++l){var d,c,u,g,f=t[l].replace(r,"%20"),p=f.indexOf(n);p>=0?(d=f.substr(0,p),c=f.substr(p+1)):(d=f,c=""),u=decodeURIComponent(d),g=decodeURIComponent(c),i(s,u)?Array.isArray(s[u])?s[u].push(g):s[u]=[s[u],g]:s[u]=g}return s}},function(t,e){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,o){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var s=encodeURIComponent(i(o))+n;return Array.isArray(t[o])?t[o].map(function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[o]))}).join(e):o?encodeURIComponent(i(o))+n+encodeURIComponent(i(t)):""}},function(t,e){"use strict";t.exports=function i(t,e){if(t===e)return!0;var n,o=Array.isArray(t),s=Array.isArray(e);if(o&&s){if(t.length!=e.length)return!1;for(n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0}if(o!=s)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){var r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(n=0;n<r.length;n++)if(void 0===e[r[n]])return!1;for(n=0;n<r.length;n++)if(!i(t[r[n]],e[r[n]]))return!1;return!0}return!1}},function(t,e,i){"use strict";function n(t,e){e=e||{};for(var i in t)e[i]=t[i];return e}function o(t,e,i){var n=i?" !== ":" === ",o=i?" || ":" && ",s=i?"!":"",r=i?"":"!";switch(t){case"null":return e+n+"null";case"array":return s+"Array.isArray("+e+")";case"object":return"("+s+e+o+"typeof "+e+n+'"object"'+o+r+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+n+'"number"'+o+r+"("+e+" % 1))";default:return"typeof "+e+n+'"'+t+'"'}}function s(t,e){switch(t.length){
case 1:return o(t[0],e,!0);default:var i="",n=a(t);n.array&&n.object&&(i=n["null"]?"(":"(!"+e+" || ",i+="typeof "+e+' !== "object")',delete n["null"],delete n.array,delete n.object),n.number&&delete n.integer;for(var s in n)i+=(i?" && ":"")+o(s,e,!0);return i}}function r(t){if(Array.isArray(t)){for(var e=[],i=0;i<t.length;i++){var n=t[i];C[n]&&(e[e.length]=n)}if(e.length)return e}else if(C[t])return[t]}function a(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=!0;return e}function h(t){return"number"==typeof t?"["+t+"]":k.test(t)?"."+t:"['"+t.replace(E,"\\$&")+"']"}function l(t){return t.replace(E,"\\$&")}function d(t){for(var e,i=0,n=t.length,o=0;n>o;)i++,e=t.charCodeAt(o++),e>=55296&&56319>=e&&n>o&&(e=t.charCodeAt(o),56320==(64512&e)&&o++);return i}function c(t,e){e+="[^0-9]";var i=t.match(new RegExp(e,"g"));return i?i.length:0}function u(t,e,i){return e+="([^0-9])",i=i.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),i+"$1")}function g(t){return t.replace(B,"").replace(M,"").replace(S,"if (!($1))")}function f(t,e){var i=t.match(F);return i&&2===i.length?e?t.replace(P,"").replace(H,$):t.replace(T,"").replace(_,D):t}function p(t,e){for(var i in t)if(e[i])return!0}function m(t){return"'"+l(t)+"'"}function v(t,e,i,n){var o=i?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return R(t,o)}function w(t,e,i){var n=m(i?"/"+x(e):h(e));return R(t,n)}function y(t,e,i){var n=t.match(O);if(!n)throw new Error("Invalid relative JSON-pointer: "+t);var o=+n[1],s=n[2];if("#"==s){if(o>=e)throw new Error("Cannot access property/index "+o+" levels up, current level is "+e);return i[e-o]}if(o>e)throw new Error("Cannot access data "+o+" levels up, current level is "+e);var r="data"+(e-o||"");if(!s)return r;for(var a=r,l=s.split("/"),d=0;d<l.length;d++){var c=l[d];c&&(r+=h(L(c)),a+=" && "+r)}return a}function R(t,e){return'""'==t?e:(t+" + "+e).replace(/' \+ '/g,"")}function A(t){return L(decodeURIComponent(t))}function b(t){return encodeURIComponent(x(t))}function x(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function L(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}t.exports={copy:n,checkDataType:o,checkDataTypes:s,coerceToTypes:r,toHash:a,getProperty:h,escapeQuotes:l,ucs2length:d,varOccurences:c,varReplace:u,cleanUpCode:g,cleanUpVarErrors:f,schemaHasRules:p,stableStringify:i(12),toQuotedString:m,getPathExpr:v,getPath:w,getData:y,unescapeFragment:A,escapeFragment:b,escapeJsonPointer:x};var C=a(["string","number","integer","boolean","null"]),k=/^[a-z$_][a-z$_0-9]*$/i,E=/'|\\/g,B=/else\s*{\s*}/g,M=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,S=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,F=/[^v\.]errors/g,T=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,P=/var errors = 0;|var vErrors = null;/g,_="return errors === 0;",D="validate.errors = null; return true;",H=/if \(errors === 0\) return true;\s*else throw new ValidationError\(vErrors\);/,$="return true;",O=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/},function(t,e,i){var n="undefined"!=typeof JSON?JSON:i(13);t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var i=e.space||"";"number"==typeof i&&(i=Array(i+1).join(" "));var r="boolean"==typeof e.cycles&&e.cycles,a=e.replacer||function(t,e){return e},h=e.cmp&&function(t){return function(e){return function(i,n){var o={key:i,value:e[i]},s={key:n,value:e[n]};return t(o,s)}}}(e.cmp),l=[];return function d(t,e,c,u){var g=i?"\n"+new Array(u+1).join(i):"",f=i?": ":":";if(c&&c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),c=a.call(t,e,c),void 0!==c){if("object"!=typeof c||null===c)return n.stringify(c);if(o(c)){for(var p=[],m=0;m<c.length;m++){var v=d(c,m,c[m],u+1)||n.stringify(null);p.push(g+i+v)}return"["+p.join(",")+g+"]"}if(-1!==l.indexOf(c)){if(r)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(c);for(var w=s(c).sort(h&&h(c)),p=[],m=0;m<w.length;m++){var e=w[m],y=d(c,e,c[e],u+1);if(y){var R=n.stringify(e)+f+y;p.push(g+i+R)}}return l.splice(l.indexOf(c),1),"{"+p.join(",")+g+"}"}}({"":t},"",t,0)};var o=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},s=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},i=[];for(var n in t)e.call(t,n)&&i.push(n);return i}},function(t,e,i){e.parse=i(14),e.stringify=i(15)},function(t,e){var i,n,o,s,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(t){throw{name:"SyntaxError",message:t,at:i,text:o}},h=function(t){return t&&t!==n&&a("Expected '"+t+"' instead of '"+n+"'"),n=o.charAt(i),i+=1,n},l=function(){var t,e="";for("-"===n&&(e="-",h("-"));n>="0"&&"9">=n;)e+=n,h();if("."===n)for(e+=".";h()&&n>="0"&&"9">=n;)e+=n;if("e"===n||"E"===n)for(e+=n,h(),"-"!==n&&"+"!==n||(e+=n,h());n>="0"&&"9">=n;)e+=n,h();return t=+e,isFinite(t)?t:void a("Bad number")},d=function(){var t,e,i,o="";if('"'===n)for(;h();){if('"'===n)return h(),o;if("\\"===n)if(h(),"u"===n){for(i=0,e=0;4>e&&(t=parseInt(h(),16),isFinite(t));e+=1)i=16*i+t;o+=String.fromCharCode(i)}else{if("string"!=typeof r[n])break;o+=r[n]}else o+=n}a("Bad string")},c=function(){for(;n&&" ">=n;)h()},u=function(){switch(n){case"t":return h("t"),h("r"),h("u"),h("e"),!0;case"f":return h("f"),h("a"),h("l"),h("s"),h("e"),!1;case"n":return h("n"),h("u"),h("l"),h("l"),null}a("Unexpected '"+n+"'")},g=function(){var t=[];if("["===n){if(h("["),c(),"]"===n)return h("]"),t;for(;n;){if(t.push(s()),c(),"]"===n)return h("]"),t;h(","),c()}}a("Bad array")},f=function(){var t,e={};if("{"===n){if(h("{"),c(),"}"===n)return h("}"),e;for(;n;){if(t=d(),c(),h(":"),Object.hasOwnProperty.call(e,t)&&a('Duplicate key "'+t+'"'),e[t]=s(),c(),"}"===n)return h("}"),e;h(","),c()}}a("Bad object")};s=function(){switch(c(),n){case"{":return f();case"[":return g();case'"':return d();case"-":return l();default:return n>="0"&&"9">=n?l():u()}},t.exports=function(t,e){var r;return o=t,i=0,n=" ",r=s(),c(),n&&a("Syntax error"),"function"==typeof e?function h(t,i){var n,o,s=t[i];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(o=h(s,n),void 0!==o?s[n]=o:delete s[n]);return e.call(t,i,s)}({"":r},""):r}},function(t,e){function i(t){return a.lastIndex=0,a.test(t)?'"'+t.replace(a,function(t){var e=h[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function n(t,e){var a,h,l,d,c,u=o,g=e[t];switch(g&&"object"==typeof g&&"function"==typeof g.toJSON&&(g=g.toJSON(t)),"function"==typeof r&&(g=r.call(e,t,g)),typeof g){case"string":return i(g);case"number":return isFinite(g)?String(g):"null";case"boolean":case"null":return String(g);case"object":if(!g)return"null";if(o+=s,c=[],"[object Array]"===Object.prototype.toString.apply(g)){for(d=g.length,a=0;d>a;a+=1)c[a]=n(a,g)||"null";return l=0===c.length?"[]":o?"[\n"+o+c.join(",\n"+o)+"\n"+u+"]":"["+c.join(",")+"]",o=u,l}if(r&&"object"==typeof r)for(d=r.length,a=0;d>a;a+=1)h=r[a],"string"==typeof h&&(l=n(h,g),l&&c.push(i(h)+(o?": ":":")+l));else for(h in g)Object.prototype.hasOwnProperty.call(g,h)&&(l=n(h,g),l&&c.push(i(h)+(o?": ":":")+l));return l=0===c.length?"{}":o?"{\n"+o+c.join(",\n"+o)+"\n"+u+"}":"{"+c.join(",")+"}",o=u,l}}var o,s,r,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.exports=function(t,e,i){var a;if(o="",s="","number"==typeof i)for(a=0;i>a;a+=1)s+=" ";else"string"==typeof i&&(s=i);if(r=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return n("",{"":t})}},function(t,e,i){"use strict";function n(t){o.copy(t,this)}var o=i(11);t.exports=n},function(module,exports,__webpack_require__){"use strict";function setupAsync(t,e){e!==!1&&(e=!0);var i,n=t.async,o=t.transpile;switch(typeof o){case"string":var s=TRANSPILE[o];if(!s)throw new Error("bad transpiler: "+o);return t._transpileFunc=s(t,e);case"undefined":case"boolean":if("string"==typeof n){if(i=ASYNC[n],!i)throw new Error("bad async mode: "+n);return t.transpile=i(t,e)}for(var r=0;r<MODES.length;r++){var a=MODES[r];if(setupAsync(a,!1))return util.copy(a,t),t.transpile}throw new Error("generators, nodent and regenerator are not available");case"function":return t._transpileFunc=t.transpile;default:throw new Error("bad transpiler: "+o)}}function checkGenerators(opts,required){try{return eval("(function*(){})()"),!0}catch(e){if(required)throw new Error("generators not supported")}}function checkAsyncFunction(opts,required){try{return eval("(async function(){})()"),!0}catch(e){if(required)throw new Error("es7 async functions not supported")}}function getRegenerator(t,e){try{return regenerator||(regenerator=__webpack_require__(!function(){var t=new Error('Cannot find module "regenerator"');throw t.code="MODULE_NOT_FOUND",t}()),regenerator.runtime()),t.async&&t.async!==!0||(t.async="es7"),regeneratorTranspile}catch(i){if(e)throw new Error("regenerator not available")}}function regeneratorTranspile(t){return regenerator.compile(t).code}function getNodent(t,e){try{return nodent||(nodent=__webpack_require__(!function(){var t=new Error('Cannot find module "nodent"');throw t.code="MODULE_NOT_FOUND",t}())({log:!1,dontInstallRequireHook:!0})),"es7"!=t.async&&(t.async&&t.async!==!0&&console.warn("nodent transpiles only es7 async functions"),t.async="es7"),nodentTranspile}catch(i){if(e)throw new Error("nodent not available")}}function nodentTranspile(t){return nodent.compile(t,"",{promises:!0,sourcemap:!1}).code}function compileAsync(t,e){function i(t,e,n){function s(n){function s(n,s){if(n)return e(n);if(!o._refs[r]&&!o._schemas[r])try{o.addSchema(s,r)}catch(a){return void e(a)}i(t,e)}var r=n.missingSchema;if(o._refs[r]||o._schemas[r])return e(new Error("Schema "+r+" is loaded but"+n.missingRef+"cannot be resolved"));var a=o._loadingSchemas[r];a?"function"==typeof a?o._loadingSchemas[r]=[a,s]:a[a.length]=s:(o._loadingSchemas[r]=s,o._opts.loadSchema(r,function(t,e){var i=o._loadingSchemas[r];if(delete o._loadingSchemas[r],"function"==typeof i)i(t,e);else for(var n=0;n<i.length;n++)i[n](t,e)}))}function r(t,i){return n?void setTimeout(function(){e(t,i)}):e(t,i)}var a;try{a=o.compile(t)}catch(h){return void(h.missingSchema?s(h):r(h))}r(null,a)}var n,o=this;try{n=this._addSchema(t)}catch(s){return void setTimeout(function(){e(s)})}if(n.validate)setTimeout(function(){e(null,n.validate)});else{if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");i(t,e,!0)}}module.exports={setup:setupAsync,compile:compileAsync};var util=__webpack_require__(11),ASYNC={"*":checkGenerators,"co*":checkGenerators,es7:checkAsyncFunction},TRANSPILE={nodent:getNodent,regenerator:getRegenerator},MODES=[{async:"co*"},{async:"es7",transpile:"nodent"},{async:"co*",transpile:"regenerator"}],regenerator,nodent},function(t,e){"use strict";t.exports=function(t,e){function i(t){for(var e=0;e<t.rules.length;e++)if(n(t.rules[e]))return!0}function n(e){return void 0!==t.schema[e.keyword]||"properties"==e.keyword&&(t.schema.additionalProperties===!1||"object"==typeof t.schema.additionalProperties||t.schema.patternProperties&&Object.keys(t.schema.patternProperties).length||t.opts.v5&&t.schema.patternGroups&&Object.keys(t.schema.patternGroups).length)}var o="",s=t.schema.$async===!0;if(t.isTop){var r=t.isTop,a=t.level=0,h=t.dataLevel=0,l="data";if(t.rootId=t.resolve.fullPath(t.root.schema.id),t.baseId=t.baseId||t.rootId,s){t.async=!0;var d="es7"==t.opts.async;t.yieldAwait=d?"await":"yield"}delete t.isTop,t.dataPathArr=[void 0],o+=" validate = ",s?d?o+=" (async function ":("co*"==t.opts.async&&(o+="co.wrap"),o+="(function* "):o+=" (function ",o+=" (data, dataPath, parentData, parentDataProperty) { 'use strict'; var vErrors = null; ",o+=" var errors = 0;     "}else{var a=t.level,h=t.dataLevel,l="data"+(h||"");if(t.schema.id&&(t.baseId=t.resolve.url(t.baseId,t.schema.id)),s&&!t.async)throw new Error("async schema in sync schema");o+=" var errs_"+a+" = errors;"}var c,u="valid"+a,g=!t.opts.allErrors,f="",p="",m=t.schema.type,v=Array.isArray(m);if(m&&t.opts.coerceTypes){var w=t.util.coerceToTypes(m);if(w){var y=t.schemaPath+".type",R=t.errSchemaPath+"/type",A=v?"checkDataTypes":"checkDataType";o+=" if ("+t.util[A](m,l,!0)+") {  ";var b="dataType"+a,x="coerced"+a;o+=" var "+b+" = typeof "+l+"; var "+x+" = undefined; ";var L="",C=w;if(C)for(var k,E=-1,B=C.length-1;B>E;)k=C[E+=1],E&&(o+=" if ("+x+" === undefined) { ",L+="}"),"string"==k?o+=" if ("+b+" == 'number' || "+b+" == 'boolean') "+x+" = '' + "+l+"; else if ("+l+" === null) "+x+" = ''; ":"number"==k||"integer"==k?(o+=" if ("+b+" == 'boolean' || "+l+" === null || ("+b+" == 'string' && "+l+" && "+l+" == +"+l+" ","integer"==k&&(o+=" && !("+l+" % 1)"),o+=")) "+x+" = +"+l+"; "):"boolean"==k?o+=" if ("+l+" === 'false' || "+l+" === 0 || "+l+" === null) "+x+" = false; else if ("+l+" === 'true' || "+l+" === 1) "+x+" = true; ":"null"==k&&(o+=" if ("+l+" === '' || "+l+" === 0 || "+l+" === false) "+x+" = null; ");o+=" "+L+" if ("+x+" === undefined) {   ";var M=M||[];M.push(o),o="",t.createErrors!==!1?(o+=" { keyword: '"+(c||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+R+"\" , params: { type: '",o+=v?""+m.join(","):""+m,o+="' } ",t.opts.messages!==!1&&(o+=" , message: 'should be ",o+=v?""+m.join(","):""+m,o+="' "),t.opts.verbose&&(o+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var S=o;if(o=M.pop(),o+=!t.compositeRule&&g?t.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else { ",h){var F="data"+(h-1||""),T=t.dataPathArr[h];o+=" "+l+" = "+F+"["+T+"] = "+x+"; "}else o+=" data = "+x+"; if (parentData !== undefined) parentData[parentDataProperty] = "+x+"; ";o+=" } } "}}var P=t.RULES;if(P)for(var _,D=-1,H=P.length-1;H>D;)if(_=P[D+=1],i(_)){if(_.type&&(o+=" if ("+t.util.checkDataType(_.type,l)+") { "),t.opts.useDefaults&&!t.compositeRule)if("object"==_.type&&t.schema.properties){var $=t.schema.properties,O=Object.keys($),N=O;if(N)for(var I,W=-1,j=N.length-1;j>W;){I=N[W+=1];var X=$[I];if(void 0!==X["default"]){var z=l+t.util.getProperty(I);o+="  if ("+z+" === undefined) "+z+" = ",o+="clone"==t.opts.useDefaults?" "+JSON.stringify(X["default"])+" ":" "+t.useDefault(X["default"])+" ",o+="; "}}}else if("array"==_.type&&Array.isArray(t.schema.items)){var Y=t.schema.items;if(Y)for(var X,E=-1,U=Y.length-1;U>E;)if(X=Y[E+=1],void 0!==X["default"]){var z=l+"["+E+"]";o+="  if ("+z+" === undefined) "+z+" = ",o+="clone"==t.opts.useDefaults?" "+JSON.stringify(X["default"])+" ":" "+t.useDefault(X["default"])+" ",o+="; "}}var V=_.rules;if(V)for(var G,Z=-1,K=V.length-1;K>Z;)if(G=V[Z+=1],n(G)){if(G.custom){var $=t.schema[G.keyword],q=t.useCustomRule(G,$,t.schema,t),J=q.code+".errors",y=t.schemaPath+"."+G.keyword,R=t.errSchemaPath+"/"+G.keyword,Q="errs"+a,E="i"+a,tt="ruleErr"+a,et=G.definition,it=et.async,nt=et.inline,ot=et.macro;if(it&&!t.async)throw new Error("async keyword in sync schema");if(nt||ot||(o+=""+J+" = null;"),o+="var "+Q+" = errors;var valid"+a+";",nt&&et.statements)o+=" "+q.validate;else if(ot){var st=t.util.copy(t);st.level++,st.schema=q.validate,st.schemaPath="";var rt=t.compositeRule;t.compositeRule=st.compositeRule=!0;var at=t.validate(st).replace(/validate\.schema/g,q.code);t.compositeRule=st.compositeRule=rt,o+=" "+at}else if(et.compile||et.validate){var M=M||[];M.push(o),o="",o+="  "+q.code+".call( ",o+=t.opts.passContext?"this":"self",q.validate.length,o+=et.compile||et.schema===!1?" , "+l+" ":" , validate.schema"+y+" , "+l+" , validate.schema"+t.schemaPath+" ",o+=" , (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath),o+=h?" , data"+(h-1||"")+" , "+t.dataPathArr[h]+" ":" , parentData , parentDataProperty ",o+=" )  ";var ht=o;o=M.pop(),et.errors!==!1&&(it?(J="customErrors"+a,o+=" var "+J+" = null; try { valid"+a+" = "+t.yieldAwait+ht+"; } catch (e) { valid"+a+" = false; if (e instanceof ValidationError) "+J+" = e.errors; else throw e; } "):o+=" "+q.code+".errors = null; ")}o+="if (! ",o+=nt?et.statements?" valid"+a+" ":" ("+q.validate+") ":ot?" valid"+st.level+" ":it?et.errors===!1?" ("+t.yieldAwait+ht+") ":" valid"+a+" ":" "+ht+" ",o+=") { ",c=G.keyword;var M=M||[];M.push(o),o="";var M=M||[];M.push(o),o="",t.createErrors!==!1?(o+=" { keyword: '"+(c||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+R+"\" , params: { keyword: '"+G.keyword+"' } ",t.opts.messages!==!1&&(o+=" , message: 'should pass \""+G.keyword+"\" keyword validation' "),t.opts.verbose&&(o+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var S=o;o=M.pop(),o+=!t.compositeRule&&g?t.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var lt=o;o=M.pop(),nt?et.errors?"full"!=et.errors&&(o+="  for (var "+E+"="+Q+"; "+E+"<errors; "+E+"++) { var "+tt+" = vErrors["+E+"]; if ("+tt+".dataPath === undefined) { "+tt+".dataPath = (dataPath || '') + "+t.errorPath+"; } if ("+tt+".schemaPath === undefined) { "+tt+'.schemaPath = "'+R+'"; } ',t.opts.verbose&&(o+=" "+tt+".schema = validate.schema"+y+"; "+tt+".data = "+l+"; "),o+=" } "):et.errors===!1?o+=" "+lt+" ":(o+=" if ("+Q+" == errors) { "+lt+" } else {  for (var "+E+"="+Q+"; "+E+"<errors; "+E+"++) { var "+tt+" = vErrors["+E+"]; if ("+tt+".dataPath === undefined) { "+tt+".dataPath = (dataPath || '') + "+t.errorPath+"; } if ("+tt+".schemaPath === undefined) { "+tt+'.schemaPath = "'+R+'"; } ',t.opts.verbose&&(o+=" "+tt+".schema = validate.schema"+y+"; "+tt+".data = "+l+"; "),o+=" } } "):ot?(o+="   var err =   ",t.createErrors!==!1?(o+=" { keyword: '"+(c||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+R+"\" , params: { keyword: '"+G.keyword+"' } ",t.opts.messages!==!1&&(o+=" , message: 'should pass \""+G.keyword+"\" keyword validation' "),t.opts.verbose&&(o+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&g&&(o+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false ")):et.errors===!1?o+=" "+lt+" ":(o+=" if (Array.isArray("+J+")) { if (vErrors === null) vErrors = "+J+"; else vErrors.concat("+J+"); errors = vErrors.length;  for (var "+E+"="+Q+"; "+E+"<errors; "+E+"++) { var "+tt+" = vErrors["+E+"];  "+tt+".dataPath = (dataPath || '') + "+t.errorPath+";   "+tt+'.schemaPath = "'+R+'";  ',t.opts.verbose&&(o+=" "+tt+".schema = validate.schema"+y+"; "+tt+".data = "+l+"; "),o+=" } } else { "+lt+" } "),c=void 0,o+=" } ",g&&(o+=" else { ")}else o+=" "+G.code(t,G.keyword)+" ";g&&(f+="}")}if(g&&(o+=" "+f+" ",f=""),_.type&&(o+=" } ",m&&m===_.type)){var dt=!0;o+=" else { ";var y=t.schemaPath+".type",R=t.errSchemaPath+"/type",M=M||[];M.push(o),o="",t.createErrors!==!1?(o+=" { keyword: '"+(c||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+R+"\" , params: { type: '",o+=v?""+m.join(","):""+m,o+="' } ",t.opts.messages!==!1&&(o+=" , message: 'should be ",o+=v?""+m.join(","):""+m,o+="' "),t.opts.verbose&&(o+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var S=o;o=M.pop(),o+=!t.compositeRule&&g?t.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } "}g&&(o+=" if (errors === ",o+=r?"0":"errs_"+a,o+=") { ",p+="}")}if(m&&!dt&&(!t.opts.coerceTypes||!w)){var y=t.schemaPath+".type",R=t.errSchemaPath+"/type",A=v?"checkDataTypes":"checkDataType";o+=" if ("+t.util[A](m,l,!0)+") {   ";var M=M||[];M.push(o),o="",t.createErrors!==!1?(o+=" { keyword: '"+(c||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+R+"\" , params: { type: '",o+=v?""+m.join(","):""+m,o+="' } ",t.opts.messages!==!1&&(o+=" , message: 'should be ",o+=v?""+m.join(","):""+m,o+="' "),t.opts.verbose&&(o+=" , schema: validate.schema"+y+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var S=o;o=M.pop(),o+=!t.compositeRule&&g?t.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" }"}return g&&(o+=" "+p+" "),r?(s?(o+=" if (errors === 0) return true;           ",o+=" else throw new ValidationError(vErrors); "):(o+=" validate.errors = vErrors; ",o+=" return errors === 0;       "),o+=" });"):o+=" var "+u+" = errors === errs_"+a+";",o=t.util.cleanUpCode(o),r&&g&&(o=t.util.cleanUpVarErrors(o,s)),o}},function(t,e){function i(t){var e=this,i=c.call(arguments,1);return new Promise(function(o,s){function r(e){var i;try{i=t.next(e)}catch(n){return s(n)}l(i)}function h(e){var i;try{i=t["throw"](e)}catch(n){return s(n)}l(i)}function l(t){if(t.done)return o(t.value);var i=n.call(e,t.value);return i&&a(i)?i.then(r,h):h(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(t.value)+'"'))}return"function"==typeof t&&(t=t.apply(e,i)),t&&"function"==typeof t.next?void r():o(t)})}function n(t){return t?a(t)?t:l(t)||h(t)?i.call(this,t):"function"==typeof t?o.call(this,t):Array.isArray(t)?s.call(this,t):d(t)?r.call(this,t):t:t}function o(t){var e=this;return new Promise(function(i,n){t.call(e,function(t,e){return t?n(t):(arguments.length>2&&(e=c.call(arguments,1)),void i(e))})})}function s(t){return Promise.all(t.map(n,this))}function r(t){function e(t,e){i[e]=void 0,s.push(t.then(function(t){i[e]=t}))}for(var i=new t.constructor,o=Object.keys(t),s=[],r=0;r<o.length;r++){var h=o[r],l=n.call(this,t[h]);l&&a(l)?e(l,h):i[h]=t[h]}return Promise.all(s).then(function(){return i})}function a(t){return"function"==typeof t.then}function h(t){return"function"==typeof t.next&&"function"==typeof t["throw"]}function l(t){var e=t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName||h(e.prototype))}function d(t){return Object==t.constructor}var c=Array.prototype.slice;t.exports=i["default"]=i.co=i,i.wrap=function(t){function e(){return i.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e}},function(t,e){"use strict";function i(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}t.exports=i,i.prototype=Object.create(Error.prototype),i.prototype.constructor=i},function(t,e){"use strict";var i=t.exports=function(){this._cache={}};i.prototype.put=function(t,e){this._cache[t]=e},i.prototype.get=function(t){return this._cache[t]},i.prototype.del=function(t){delete this._cache[t]},i.prototype.clear=function(){this._cache={}}},function(t,e,i){"use strict";function n(t){t="full"==t?"full":"fast";var e=g.copy(n[t]);for(var i in n.compare)e[i]={validate:e[i],compare:n.compare[i]};return e}function o(t){var e=t.match(f);if(!e)return!1;var i=+e[1],n=+e[2];return i>=1&&12>=i&&n>=1&&n<=p[i]}function s(t,e){var i=t.match(m);if(!i)return!1;var n=i[1],o=i[2],s=i[3],r=i[5];return 23>=n&&59>=o&&59>=s&&(!e||r)}function r(t){var e=t.split(b);return o(e[0])&&s(e[1],!0)}function a(t){return t.length<=255&&v.test(t)}function h(t){return x.test(t)&&w.test(t)}function l(t){try{return new RegExp(t),!0}catch(e){return!1}}function d(t,e){return t&&e?t>e?1:e>t?-1:t===e?0:void 0:void 0}function c(t,e){return t&&e&&(t=t.match(m),e=e.match(m),t&&e)?(t=t[1]+t[2]+t[3]+(t[4]||""),e=e[1]+e[2]+e[3]+(e[4]||""),t>e?1:e>t?-1:t===e?0:void 0):void 0}function u(t,e){if(t&&e){t=t.split(b),e=e.split(b);var i=d(t[0],e[0]);if(void 0!==i)return i||c(t[1],e[1])}}var g=i(11),f=/^\d\d\d\d-(\d\d)-(\d\d)$/,p=[0,31,29,31,30,31,30,31,31,30,31,30,31],m=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,v=/^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i,w=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:\#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:urn\:uuid\:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,R=/^(?:\/(?:[^~\/]|~0|~1)+)*(?:\/)?$|^\#(?:\/(?:[a-z0-9_\-\.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)+)*(?:\/)?$/i,A=/^(?:0|[1-9][0-9]*)(?:\#|(?:\/(?:[^~\/]|~0|~1)+)*(?:\/)?)$/;t.exports=n,n.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:v,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:l,uuid:y,"json-pointer":R,"relative-json-pointer":A},n.full={date:o,time:s,"date-time":r,uri:h,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:l,uuid:y,"json-pointer":R,"relative-json-pointer":A},n.compare={date:d,time:c,"date-time":u};var b=/t|\s/i,x=/\/|\:/},function(t,e,i){"use strict";var n=i(24),o=i(11);t.exports=function(){var t=[{type:"number",rules:["maximum","minimum","multipleOf"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","properties"]},{rules:["$ref","enum","not","anyOf","oneOf","allOf"]}];return t.all=["type","additionalProperties","patternProperties"],t.keywords=["additionalItems","$schema","id","title","description","default"],t.types=["number","integer","string","array","object","boolean","null"],t.forEach(function(e){e.rules=e.rules.map(function(e){return t.all.push(e),{keyword:e,code:n[e]}})}),t.keywords=o.toHash(t.all.concat(t.keywords)),t.all=o.toHash(t.all),t.types=o.toHash(t.types),t}},function(t,e,i){"use strict";t.exports={$ref:i(25),allOf:i(26),anyOf:i(27),dependencies:i(28),"enum":i(29),format:i(30),items:i(31),maximum:i(32),minimum:i(32),maxItems:i(33),minItems:i(33),maxLength:i(34),minLength:i(34),maxProperties:i(35),minProperties:i(35),multipleOf:i(36),not:i(37),oneOf:i(38),pattern:i(39),properties:i(40),required:i(41),uniqueItems:i(42),validate:i(18)}},function(t,e){"use strict";t.exports=function(t,e){var i,n,o,s=" ",r=t.level,a=t.dataLevel,h=t.schema[e],l=t.errSchemaPath+"/"+e,d=!t.opts.allErrors,c="data"+(a||""),u="valid"+r;if("#"==h||"#/"==h)t.isRoot?(n=t.async,o="validate"):(n=t.root.schema.$async===!0,o="root.refVal[0]");else{var g=t.resolveRef(t.baseId,h,t.isRoot);if(void 0===g){var f="can't resolve reference "+h+" from id "+t.baseId;if("fail"==t.opts.missingRefs){console.log(f);var p=p||[];p.push(s),s="",t.createErrors!==!1?(s+=" { keyword: '"+(i||"$ref")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+l+"\" , params: { ref: '"+t.util.escapeQuotes(h)+"' } ",t.opts.messages!==!1&&(s+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(h)+"' "),t.opts.verbose&&(s+=" , schema: "+t.util.toQuotedString(h)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),s+=" } "):s+=" {} ";var m=s;s=p.pop(),s+=!t.compositeRule&&d?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(s+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs){var v=new Error(f);throw v.missingRef=t.resolve.url(t.baseId,h),v.missingSchema=t.resolve.normalizeId(t.resolve.fullPath(v.missingRef)),v}console.log(f),d&&(s+=" if (true) { ")}}else if(g.inline){var w=t.util.copy(t);w.level++,w.schema=g.schema,w.schemaPath="",w.errSchemaPath=h;var y=t.validate(w).replace(/validate\.schema/g,g.code);s+=" "+y+" ",d&&(s+=" if (valid"+w.level+") { ")}else n=g.async,o=g.code}if(o){var p=p||[];p.push(s),s="",s+=t.opts.passContext?" "+o+".call(this, ":" "+o+"( ",s+=" "+c+", (dataPath || '')",'""'!=t.errorPath&&(s+=" + "+t.errorPath),s+=a?" , data"+(a-1||"")+" , "+t.dataPathArr[a]+" ":" , parentData , parentDataProperty ",
s+=")  ";var R=s;if(s=p.pop(),n){if(!t.async)throw new Error("async schema referenced by sync schema");s+=" try { ",d&&(s+="var "+u+" ="),s+=" "+t.yieldAwait+" "+R+"; } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; } ",d&&(s+=" if ("+u+") { ")}else s+=" if (!"+R+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",d&&(s+=" else { ")}return s}},function(t,e){"use strict";t.exports=function(t,e){var i=" ",n=t.schema[e],o=t.schemaPath+"."+e,s=t.errSchemaPath+"/"+e,r=!t.opts.allErrors,a=t.util.copy(t),h="";a.level++;var l=n;if(l)for(var d,c=-1,u=l.length-1;u>c;)d=l[c+=1],t.util.schemaHasRules(d,t.RULES.all)&&(a.schema=d,a.schemaPath=o+"["+c+"]",a.errSchemaPath=s+"/"+c,i+=" "+t.validate(a)+"  ",r&&(i+=" if (valid"+a.level+") { ",h+="}"));return r&&(i+=" "+h.slice(0,-1)),i=t.util.cleanUpCode(i)}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u="errs__"+o,g=t.util.copy(t),f="";g.level++;var p=r.every(function(e){return t.util.schemaHasRules(e,t.RULES.all)});if(p){n+=" var "+u+" = errors; var "+c+" = false;  ";var m=t.compositeRule;t.compositeRule=g.compositeRule=!0;var v=r;if(v)for(var w,y=-1,R=v.length-1;R>y;)w=v[y+=1],g.schema=w,g.schemaPath=a+"["+y+"]",g.errSchemaPath=h+"/"+y,n+=" "+t.validate(g)+" "+c+" = "+c+" || valid"+g.level+"; if (!"+c+") { ",f+="}";t.compositeRule=g.compositeRule=m,n+=" "+f+" if (!"+c+") {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"anyOf")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } "),n=t.util.cleanUpCode(n)}else l&&(n+=" if (true) { ");return n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="errs__"+o,u=t.util.copy(t),g="";u.level++;var f={},p={};for(y in r){var m=r[y],v=Array.isArray(m)?p:f;v[y]=m}n+="var "+c+" = errors;";var w=t.errorPath;n+="var missing"+o+";";for(var y in p){v=p[y],n+=" if ("+d+t.util.getProperty(y)+" !== undefined && ( ";var R=v;if(R)for(var A,b=-1,x=R.length-1;x>b;){A=R[b+=1],b&&(n+=" || ");var L=t.util.getProperty(A);n+=" ( "+d+L+" === undefined && (missing"+o+" = "+t.util.toQuotedString(t.opts.jsonPointers?A:L)+") ) "}n+=")) {  ";var C="missing"+o,k="' + "+C+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(w,C,!0):w+" + "+C);var E=E||[];E.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"dependencies")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { property: '"+t.util.escapeQuotes(y)+"', missingProperty: '"+k+"', depsCount: "+v.length+", deps: '"+t.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should have ",n+=1==v.length?"property "+t.util.escapeQuotes(v[0]):"properties "+t.util.escapeQuotes(v.join(", ")),n+=" when property "+t.util.escapeQuotes(y)+" is present' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var B=n;n=E.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+B+"]); ":" validate.errors = ["+B+"]; return false; ":" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }   ",l&&(g+="}",n+=" else { ")}t.errorPath=w;for(var y in f){var m=f[y];t.util.schemaHasRules(m,t.RULES.all)&&(n+=" valid"+u.level+" = true; if ("+d+"['"+y+"'] !== undefined) { ",u.schema=m,u.schemaPath=a+t.util.getProperty(y),u.errSchemaPath=h+"/"+t.util.escapeFragment(y),n+=" "+t.validate(u)+" }  ",l&&(n+=" if (valid"+u.level+") { ",g+="}"))}return l&&(n+="   "+g+" if ("+c+" == errors) {"),n=t.util.cleanUpCode(n)}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u=t.opts.v5&&r.$data,g=u?t.util.getData(r.$data,s,t.dataPathArr):r;u&&(n+=" var schema"+o+" = "+g+"; ",g="schema"+o);var f="i"+o;u||(n+=" var schema"+o+" = validate.schema"+a+";"),n+="var "+c+";",u&&(n+=" if (schema"+o+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+o+")) "+c+" = false; else {"),n+=""+c+" = false;for (var "+f+"=0; "+f+"<schema"+o+".length; "+f+"++) if (equal("+d+", schema"+o+"["+f+"])) { "+c+" = true; break; }",u&&(n+="  }  "),n+=" if (!"+c+") {   ";var p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"enum")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||"");if(t.opts.format===!1)return l&&(n+=" if (true) { "),n;var c=t.opts.v5&&r.$data,u=c?t.util.getData(r.$data,s,t.dataPathArr):r;if(c&&(n+=" var schema"+o+" = "+u+"; ",u="schema"+o),c){var g="format"+o;n+=" var "+g+" = formats["+u+"]; var isObject"+o+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; if (isObject"+o+") { var async"+o+" = "+g+".async; "+g+" = "+g+".validate; } if (  ",c&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),n+=" ("+g+" && !(typeof "+g+" == 'function' ? ",n+=t.async?" (async"+o+" ? "+t.yieldAwait+" "+g+"("+d+") : "+g+"("+d+")) ":" "+g+"("+d+") ",n+=" : "+g+".test("+d+")))) {"}else{var g=t.formats[r];if(!g)return l&&(n+=" if (true) { "),n;var f="object"==typeof g&&!(g instanceof RegExp)&&g.validate;if(f){var p=g.async===!0;g=g.validate}if(p){if(!t.async)throw new Error("async format in sync schema");var m="formats"+t.util.getProperty(r)+".validate";n+=" if (!("+t.yieldAwait+" "+m+"("+d+"))) { "}else{n+=" if (! ";var m="formats"+t.util.getProperty(r);f&&(m+=".validate"),n+="function"==typeof g?" "+m+"("+d+") ":" "+m+".test("+d+") ",n+=") { "}}var v=v||[];v.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"format")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { format:  ',n+=c?""+u:""+t.util.toQuotedString(r),n+="  } ",t.opts.messages!==!1&&(n+=" , message: 'should match format \"",n+=c?"' + "+u+" + '":""+t.util.escapeQuotes(r),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=c?"validate.schema"+a:""+t.util.toQuotedString(r),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var w=n;return n=v.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u="errs__"+o,g=t.util.copy(t),f="";g.level++;var p=g.dataLevel=t.dataLevel+1,m="data"+p;if(n+="var "+u+" = errors;var "+c+";",Array.isArray(r)){var v=t.schema.additionalItems;if(v===!1){n+=" "+c+" = "+d+".length <= "+r.length+"; ";var w=h;h=t.errSchemaPath+"/additionalItems",n+="  if (!"+c+") {   ";var y=y||[];y.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"additionalItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit: '+r.length+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have more than "+r.length+" items' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var R=n;n=y.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+R+"]); ":" validate.errors = ["+R+"]; return false; ":" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",h=w,l&&(f+="}",n+=" else { ")}var A=r;if(A)for(var b,x=-1,L=A.length-1;L>x;)if(b=A[x+=1],t.util.schemaHasRules(b,t.RULES.all)){n+=" valid"+g.level+" = true; if ("+d+".length > "+x+") { ";var C=d+"["+x+"]";g.schema=b,g.schemaPath=a+"["+x+"]",g.errSchemaPath=h+"/"+x,g.errorPath=t.util.getPathExpr(t.errorPath,x,t.opts.jsonPointers,!0),g.dataPathArr[p]=x;var k=t.validate(g);n+=t.util.varOccurences(k,m)<2?" "+t.util.varReplace(k,m,C)+" ":" var "+m+" = "+C+"; "+k+" ",n+=" }  ",l&&(n+=" if (valid"+g.level+") { ",f+="}")}if("object"==typeof v&&t.util.schemaHasRules(v,t.RULES.all)){g.schema=v,g.schemaPath=t.schemaPath+".additionalItems",g.errSchemaPath=t.errSchemaPath+"/additionalItems",n+=" valid"+g.level+" = true; if ("+d+".length > "+r.length+") {  for (var i"+o+" = "+r.length+"; i"+o+" < "+d+".length; i"+o+"++) { ",g.errorPath=t.util.getPathExpr(t.errorPath,"i"+o,t.opts.jsonPointers,!0);var C=d+"[i"+o+"]";g.dataPathArr[p]="i"+o;var k=t.validate(g);n+=t.util.varOccurences(k,m)<2?" "+t.util.varReplace(k,m,C)+" ":" var "+m+" = "+C+"; "+k+" ",l&&(n+=" if (!valid"+g.level+") break; "),n+=" } }  ",l&&(n+=" if (valid"+g.level+") { ",f+="}")}}else if(t.util.schemaHasRules(r,t.RULES.all)){g.schema=r,g.schemaPath=a,g.errSchemaPath=h,n+="  for (var i"+o+" = 0; i"+o+" < "+d+".length; i"+o+"++) { ",g.errorPath=t.util.getPathExpr(t.errorPath,"i"+o,t.opts.jsonPointers,!0);var C=d+"[i"+o+"]";g.dataPathArr[p]="i"+o;var k=t.validate(g);n+=t.util.varOccurences(k,m)<2?" "+t.util.varReplace(k,m,C)+" ":" var "+m+" = "+C+"; "+k+" ",l&&(n+=" if (!valid"+g.level+") break; "),n+=" }  ",l&&(n+=" if (valid"+g.level+") { ",f+="}")}return l&&(n+=" "+f+" if ("+u+" == errors) {"),n=t.util.cleanUpCode(n)}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c=t.opts.v5&&r.$data,u=c?t.util.getData(r.$data,s,t.dataPathArr):r;c&&(n+=" var schema"+o+" = "+u+"; ",u="schema"+o);var g="maximum"==e,f=g?"exclusiveMaximum":"exclusiveMinimum",p=t.schema[f],m=t.opts.v5&&p&&p.$data,v=g?"<":">",w=g?">":"<";if(m){var y=t.util.getData(p.$data,s,t.dataPathArr),R="exclusive"+o,A="op"+o,b="' + "+A+" + '";n+=" var schemaExcl"+o+" = "+y+"; ",y="schemaExcl"+o,n+=" var exclusive"+o+"; if (typeof "+y+" != 'boolean' && typeof "+y+" != 'undefined') { ";var i=f,x=x||[];x.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: '"+f+" should be boolean' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var L=n;n=x.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+L+"]); ":" validate.errors = ["+L+"]; return false; ":" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if( ",c&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=" ((exclusive"+o+" = "+y+" === true) ? "+d+" "+w+"= "+u+" : "+d+" "+w+" "+u+")) { var op"+o+" = exclusive"+o+" ? '"+v+"' : '"+v+"=';"}else{var R=p===!0,b=v;R||(b+="=");var A="'"+b+"'";n+=" if ( ",c&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=" "+d+" "+w,R&&(n+="="),n+=" "+u+") {"}var i=e,x=x||[];x.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { comparison: '+A+", limit: "+u+", exclusive: "+R+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be "+b+" ",n+=c?"' + "+u:""+r+"'"),t.opts.verbose&&(n+=" , schema:  ",n+=c?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var L=n;return n=x.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+L+"]); ":" validate.errors = ["+L+"]; return false; ":" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c=t.opts.v5&&r.$data,u=c?t.util.getData(r.$data,s,t.dataPathArr):r;c&&(n+=" var schema"+o+" = "+u+"; ",u="schema"+o);var g="maxItems"==e?">":"<";n+="if ( ",c&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=" "+d+".length "+g+" "+u+") { ";var i=e,f=f||[];f.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit: '+u+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have ",n+="maxItems"==e?"more":"less",n+=" than ",n+=c?"' + "+u+" + '":""+r,n+=" items' "),t.opts.verbose&&(n+=" , schema:  ",n+=c?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c=t.opts.v5&&r.$data,u=c?t.util.getData(r.$data,s,t.dataPathArr):r;c&&(n+=" var schema"+o+" = "+u+"; ",u="schema"+o);var g="maxLength"==e?">":"<";n+="if ( ",c&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=t.opts.unicode===!1?" "+d+".length ":" ucs2length("+d+") ",n+=" "+g+" "+u+") { ";var i=e,f=f||[];f.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit: '+u+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT be ",n+="maxLength"==e?"longer":"shorter",n+=" than ",n+=c?"' + "+u+" + '":""+r,n+=" characters' "),t.opts.verbose&&(n+=" , schema:  ",n+=c?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c=t.opts.v5&&r.$data,u=c?t.util.getData(r.$data,s,t.dataPathArr):r;c&&(n+=" var schema"+o+" = "+u+"; ",u="schema"+o);var g="maxProperties"==e?">":"<";n+="if ( ",c&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'number') || "),n+=" Object.keys("+d+").length "+g+" "+u+") { ";var i=e,f=f||[];f.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit: '+u+" } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have ",n+="maxProperties"==e?"more":"less",n+=" than ",n+=c?"' + "+u+" + '":""+r,n+=" properties' "),t.opts.verbose&&(n+=" , schema:  ",n+=c?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c=t.opts.v5&&r.$data,u=c?t.util.getData(r.$data,s,t.dataPathArr):r;c&&(n+=" var schema"+o+" = "+u+"; ",u="schema"+o),n+="var division"+o+";if (",c&&(n+=" "+u+" !== undefined && ( typeof "+u+" != 'number' || "),n+=" (division"+o+" = "+d+" / "+u+", ",n+=t.opts.multipleOfPrecision?" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+t.opts.multipleOfPrecision+" ":" division"+o+" !== parseInt(division"+o+") ",n+=" ) ",c&&(n+="  )  "),n+=" ) {   ";var g=g||[];g.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"multipleOf")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { multipleOf: '+u+" } ",t.opts.messages!==!1&&(n+=" , message: 'should be multiple of ",n+=c?"' + "+u:""+r+"'"),t.opts.verbose&&(n+=" , schema:  ",n+=c?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var f=n;return n=g.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+f+"]); ":" validate.errors = ["+f+"]; return false; ":" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="errs__"+o,u=t.util.copy(t);if(u.level++,t.util.schemaHasRules(r,t.RULES.all)){u.schema=r,u.schemaPath=a,u.errSchemaPath=h,n+=" var "+c+" = errors;  ";var g=t.compositeRule;t.compositeRule=u.compositeRule=!0,u.createErrors=!1;var f;u.opts.allErrors&&(f=u.opts.allErrors,u.opts.allErrors=!1),n+=" "+t.validate(u)+" ",u.createErrors=!0,f&&(u.opts.allErrors=f),t.compositeRule=u.compositeRule=g,n+=" if (valid"+u.level+") {   ";var p=p||[];p.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"not")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var m=n;n=p.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",t.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"not")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should NOT be valid' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ");return n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u="errs__"+o,g=t.util.copy(t),f="";g.level++,n+="var "+u+" = errors;var prevValid"+o+" = false;var "+c+" = false; ";var p=t.compositeRule;t.compositeRule=g.compositeRule=!0;var m=r;if(m)for(var v,w=-1,y=m.length-1;y>w;)v=m[w+=1],t.util.schemaHasRules(v,t.RULES.all)?(g.schema=v,g.schemaPath=a+"["+w+"]",g.errSchemaPath=h+"/"+w,n+=" "+t.validate(g)+" "):n+=" var valid"+g.level+" = true; ",w&&(n+=" if (valid"+g.level+" && prevValid"+o+") "+c+" = false; else { ",f+="}"),n+=" if (valid"+g.level+") "+c+" = prevValid"+o+" = true;";t.compositeRule=g.compositeRule=p,n+=""+f+"if (!"+c+") {   ";var R=R||[];R.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"oneOf")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var A=n;return n=R.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+A+"]); ":" validate.errors = ["+A+"]; return false; ":" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }",t.opts.allErrors&&(n+=" } "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c=t.opts.v5&&r.$data,u=c?t.util.getData(r.$data,s,t.dataPathArr):r;c&&(n+=" var schema"+o+" = "+u+"; ",u="schema"+o);var g=c?"(new RegExp("+u+"))":t.usePattern(r);n+="if ( ",c&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),n+=" !"+g+".test("+d+") ) {   ";var f=f||[];f.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"pattern")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { pattern:  ',n+=c?""+u:""+t.util.toQuotedString(r),n+="  } ",t.opts.messages!==!1&&(n+=" , message: 'should match pattern \"",n+=c?"' + "+u+" + '":""+t.util.escapeQuotes(r),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=c?"validate.schema"+a:""+t.util.toQuotedString(r),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",l&&(n+=" else { "),n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u="errs__"+o,g=t.util.copy(t),f="";g.level++;var p=g.dataLevel=t.dataLevel+1,m="data"+p,v=Object.keys(r||{}),w=t.schema.patternProperties||{},y=Object.keys(w),R=t.schema.additionalProperties,A=v.length||y.length,b=R===!1,x="object"==typeof R&&Object.keys(R).length,L=t.opts.removeAdditional,C=b||x||L,k=t.schema.required;if(k&&(!t.opts.v5||!k.$data)&&k.length<t.opts.loopRequired)var E=t.util.toHash(k);if(t.opts.v5)var B=t.schema.patternGroups||{},M=Object.keys(B);if(n+="var "+u+" = errors;var valid"+g.level+" = true;",C){if(n+=" for (var key"+o+" in "+d+") { ",A){if(n+=" var isAdditional"+o+" = !(false ",v.length)if(v.length>5)n+=" || validate.schema"+a+"[key"+o+"] ";else{var S=v;if(S)for(var F,T=-1,P=S.length-1;P>T;)F=S[T+=1],n+=" || key"+o+" == "+t.util.toQuotedString(F)+" "}if(y.length){var _=y;if(_)for(var D,H=-1,$=_.length-1;$>H;)D=_[H+=1],n+=" || "+t.usePattern(D)+".test(key"+o+") "}if(t.opts.v5&&M&&M.length){var O=M;if(O)for(var N,H=-1,I=O.length-1;I>H;)N=O[H+=1],n+=" || "+t.usePattern(N)+".test(key"+o+") "}n+=" ); if (isAdditional"+o+") { "}if("all"==L)n+=" delete "+d+"[key"+o+"]; ";else{var W=t.errorPath,j="' + key"+o+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,"key"+o,t.opts.jsonPointers)),b)if(L)n+=" delete "+d+"[key"+o+"]; ";else{n+=" valid"+g.level+" = false; ";var X=h;h=t.errSchemaPath+"/additionalProperties";var z=z||[];z.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"additionalProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { additionalProperty: '"+j+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have additional properties' "),t.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var Y=n;n=z.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+Y+"]); ":" validate.errors = ["+Y+"]; return false; ":" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=X,l&&(n+=" break; ")}else if(x)if("failing"==L){n+=" var "+u+" = errors;  ";var U=t.compositeRule;t.compositeRule=g.compositeRule=!0,g.schema=R,g.schemaPath=t.schemaPath+".additionalProperties",g.errSchemaPath=t.errSchemaPath+"/additionalProperties",g.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,"key"+o,t.opts.jsonPointers);var V=d+"[key"+o+"]";g.dataPathArr[p]="key"+o;var G=t.validate(g);n+=t.util.varOccurences(G,m)<2?" "+t.util.varReplace(G,m,V)+" ":" var "+m+" = "+V+"; "+G+" ",n+=" if (!valid"+g.level+") { errors = "+u+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"[key"+o+"]; }  ",t.compositeRule=g.compositeRule=U}else{g.schema=R,g.schemaPath=t.schemaPath+".additionalProperties",g.errSchemaPath=t.errSchemaPath+"/additionalProperties",g.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,"key"+o,t.opts.jsonPointers);var V=d+"[key"+o+"]";g.dataPathArr[p]="key"+o;var G=t.validate(g);n+=t.util.varOccurences(G,m)<2?" "+t.util.varReplace(G,m,V)+" ":" var "+m+" = "+V+"; "+G+" ",l&&(n+=" if (!valid"+g.level+") break; ")}t.errorPath=W}A&&(n+=" } "),n+=" }  ",l&&(n+=" if (valid"+g.level+") { ",f+="}")}var Z=t.opts.useDefaults&&!t.compositeRule;if(v.length){var K=v;if(K)for(var F,q=-1,J=K.length-1;J>q;){F=K[q+=1];var Q=r[F];if(t.util.schemaHasRules(Q,t.RULES.all)){var tt=t.util.getProperty(F),V=d+tt,et=Z&&void 0!==Q["default"];g.schema=Q,g.schemaPath=a+tt,g.errSchemaPath=h+"/"+t.util.escapeFragment(F),g.errorPath=t.util.getPath(t.errorPath,F,t.opts.jsonPointers),g.dataPathArr[p]=t.util.toQuotedString(F);var G=t.validate(g);if(t.util.varOccurences(G,m)<2){G=t.util.varReplace(G,m,V);var it=V}else{var it=m;n+=" var "+m+" = "+V+"; "}if(et)n+=" "+G+" ";else{if(E&&E[F]){n+=" if ("+it+" === undefined) { valid"+g.level+" = false; ";var W=t.errorPath,X=h,nt=t.util.escapeQuotes(F);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(W,F,t.opts.jsonPointers)),h=t.errSchemaPath+"/required";var z=z||[];z.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+nt+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+nt+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var Y=n;n=z.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+Y+"]); ":" validate.errors = ["+Y+"]; return false; ":" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=X,t.errorPath=W,n+=" } else { "}else n+=l?" if ("+it+" === undefined) { valid"+g.level+" = true; } else { ":" if ("+it+" !== undefined) { ";n+=" "+G+" } "}}l&&(n+=" if (valid"+g.level+") { ",f+="}")}}var ot=y;if(ot)for(var D,st=-1,rt=ot.length-1;rt>st;){D=ot[st+=1];var Q=w[D];if(t.util.schemaHasRules(Q,t.RULES.all)){g.schema=Q,g.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(D),g.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(D),n+=" for (var key"+o+" in "+d+") { if ("+t.usePattern(D)+".test(key"+o+")) { ",g.errorPath=t.util.getPathExpr(t.errorPath,"key"+o,t.opts.jsonPointers);var V=d+"[key"+o+"]";g.dataPathArr[p]="key"+o;var G=t.validate(g);n+=t.util.varOccurences(G,m)<2?" "+t.util.varReplace(G,m,V)+" ":" var "+m+" = "+V+"; "+G+" ",l&&(n+=" if (!valid"+g.level+") break; "),n+=" } ",l&&(n+=" else valid"+g.level+" = true; "),n+=" }  ",l&&(n+=" if (valid"+g.level+") { ",f+="}")}}if(t.opts.v5){var at=M;if(at)for(var N,ht=-1,lt=at.length-1;lt>ht;){N=at[ht+=1];var dt=B[N],Q=dt.schema;if(t.util.schemaHasRules(Q,t.RULES.all)){g.schema=Q,g.schemaPath=t.schemaPath+".patternGroups"+t.util.getProperty(N)+".schema",g.errSchemaPath=t.errSchemaPath+"/patternGroups/"+t.util.escapeFragment(N)+"/schema",n+=" var pgPropCount"+o+" = 0; for (var key"+o+" in "+d+") { if ("+t.usePattern(N)+".test(key"+o+")) { pgPropCount"+o+"++; ",g.errorPath=t.util.getPathExpr(t.errorPath,"key"+o,t.opts.jsonPointers);var V=d+"[key"+o+"]";g.dataPathArr[p]="key"+o;var G=t.validate(g);n+=t.util.varOccurences(G,m)<2?" "+t.util.varReplace(G,m,V)+" ":" var "+m+" = "+V+"; "+G+" ",l&&(n+=" if (!valid"+g.level+") break; "),n+=" } ",l&&(n+=" else valid"+g.level+" = true; "),n+=" }  ",l&&(n+=" if (valid"+g.level+") { ",f+="}");var ct=dt.minimum,ut=dt.maximum;if(void 0!==ct||void 0!==ut){n+=" var "+c+" = true; ";var X=h;if(void 0!==ct){var gt=ct,ft="minimum",pt="less";n+=" "+c+" = pgPropCount"+o+" >= "+ct+"; ",h=t.errSchemaPath+"/patternGroups/minimum",n+="  if (!"+c+") {   ";var z=z||[];z.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"patternGroups")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { reason: '"+ft+"', limit: "+gt+", pattern: '"+t.util.escapeQuotes(N)+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have "+pt+" than "+gt+' properties matching pattern "'+t.util.escapeQuotes(N)+"\"' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var Y=n;n=z.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+Y+"]); ":" validate.errors = ["+Y+"]; return false; ":" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",void 0!==ut&&(n+=" else ")}if(void 0!==ut){var gt=ut,ft="maximum",pt="more";n+=" "+c+" = pgPropCount"+o+" <= "+ut+"; ",h=t.errSchemaPath+"/patternGroups/maximum",n+="  if (!"+c+") {   ";var z=z||[];z.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"patternGroups")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { reason: '"+ft+"', limit: "+gt+", pattern: '"+t.util.escapeQuotes(N)+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should NOT have "+pt+" than "+gt+' properties matching pattern "'+t.util.escapeQuotes(N)+"\"' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var Y=n;n=z.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+Y+"]); ":" validate.errors = ["+Y+"]; return false; ":" var err = "+Y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}h=X,l&&(n+=" if ("+c+") { ",f+="}")}}}}return l&&(n+=" "+f+" if ("+u+" == errors) {"),n=t.util.cleanUpCode(n)}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u=t.opts.v5&&r.$data,g=u?t.util.getData(r.$data,s,t.dataPathArr):r;if(u&&(n+=" var schema"+o+" = "+g+"; ",g="schema"+o),!u)if(r.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){
var f=[],p=r;if(p)for(var m,v=-1,w=p.length-1;w>v;){m=p[v+=1];var y=t.schema.properties[m];y&&t.util.schemaHasRules(y,t.RULES.all)||(f[f.length]=m)}}else var f=r;if(u||f.length){var R=t.errorPath,A=u||f.length>=t.opts.loopRequired;if(l)if(n+=" var missing"+o+"; ",A){u||(n+=" var schema"+o+" = validate.schema"+a+"; ");var b="i"+o,x="schema"+o+"["+b+"]",L="' + "+x+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(R,x,t.opts.jsonPointers)),n+=" var "+c+" = true; ",u&&(n+=" if (schema"+o+" === undefined) "+c+" = true; else if (!Array.isArray(schema"+o+")) "+c+" = false; else {"),n+=" for (var "+b+" = 0; "+b+" < schema"+o+".length; "+b+"++) { "+c+" = "+d+"[schema"+o+"["+b+"]] !== undefined; if (!"+c+") break; } ",u&&(n+="  }  "),n+="  if (!"+c+") {   ";var C=C||[];C.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+L+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+L+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var k=n;n=C.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+k+"]); ":" validate.errors = ["+k+"]; return false; ":" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var E=f;if(E)for(var B,b=-1,M=E.length-1;M>b;){B=E[b+=1],b&&(n+=" || ");var S=t.util.getProperty(B);n+=" ( "+d+S+" === undefined && (missing"+o+" = "+t.util.toQuotedString(t.opts.jsonPointers?B:S)+") ) "}n+=") {  ";var x="missing"+o,L="' + "+x+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(R,x,!0):R+" + "+x);var C=C||[];C.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+L+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+L+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var k=n;n=C.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+k+"]); ":" validate.errors = ["+k+"]; return false; ":" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(A){u||(n+=" var schema"+o+" = validate.schema"+a+"; ");var b="i"+o,x="schema"+o+"["+b+"]",L="' + "+x+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(R,x,t.opts.jsonPointers)),u&&(n+=" if (schema"+o+" && !Array.isArray(schema"+o+")) {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+L+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+L+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (schema"+o+" !== undefined) { "),n+=" for (var "+b+" = 0; "+b+" < schema"+o+".length; "+b+"++) { if ("+d+"[schema"+o+"["+b+"]] === undefined) {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+L+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+L+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",u&&(n+="  }  ")}else{var F=f;if(F)for(var m,b=-1,T=F.length-1;T>b;){m=F[b+=1];var S=t.util.getProperty(m),L=t.util.escapeQuotes(m);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(R,m,t.opts.jsonPointers)),n+=" if ("+d+S+" === undefined) {  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"required")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingProperty: '"+L+"' } ",t.opts.messages!==!1&&(n+=" , message: '",n+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+L+"\\'",n+="' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=R}else l&&(n+=" if (true) {");return n}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u=t.opts.v5&&r.$data,g=u?t.util.getData(r.$data,s,t.dataPathArr):r;if(u&&(n+=" var schema"+o+" = "+g+"; ",g="schema"+o),(r||u)&&t.opts.uniqueItems!==!1){u&&(n+=" var "+c+"; if ("+g+" === false || "+g+" === undefined) "+c+" = true; else if (typeof "+g+" != 'boolean') "+c+" = false; else { "),n+=" var "+c+" = true; if ("+d+".length > 1) { var i = "+d+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+c+" = false; break outer; } } } } ",u&&(n+="  }  "),n+=" if (!"+c+") {   ";var f=f||[];f.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"uniqueItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { i: i, j: j } ',t.opts.messages!==!1&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(n+=" , schema:  ",n+=u?"validate.schema"+a:""+r,n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var p=n;n=f.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n}},function(t,e,i){"use strict";function n(t){function e(e,i,o){var s={inline:o||n[e],statements:!0,errors:"full"};i&&(s.type=i),t.addKeyword(e,s)}var n={"switch":i(44),constant:i(45),_formatLimit:i(46),patternRequired:i(47)};if(t._opts.meta!==!1){var r=i(48);t.addMetaSchema(r,s)}e("constant"),t.addKeyword("contains",{type:"array",macro:o}),e("formatMaximum","string",n._formatLimit),e("formatMinimum","string",n._formatLimit),t.addKeyword("exclusiveFormatMaximum"),t.addKeyword("exclusiveFormatMinimum"),t.addKeyword("patternGroups"),e("patternRequired","object"),e("switch")}function o(t){return{not:{items:{not:t}}}}var s="https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json";t.exports={enable:n,META_SCHEMA_ID:s}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u="errs__"+o,g=t.util.copy(t),f="";g.level++;var p,m="ifPassed"+t.level;n+="var "+m+";";var v=r;if(v)for(var w,y=-1,R=v.length-1;R>y;){if(w=v[y+=1],y&&!p&&(n+=" if (!"+m+") { ",f+="}"),w["if"]&&t.util.schemaHasRules(w["if"],t.RULES.all)){n+=" var "+u+" = errors;   ";var A=t.compositeRule;if(t.compositeRule=g.compositeRule=!0,g.createErrors=!1,g.schema=w["if"],g.schemaPath=a+"["+y+"].if",g.errSchemaPath=h+"/"+y+"/if",n+=" "+t.validate(g)+" ",g.createErrors=!0,t.compositeRule=g.compositeRule=A,n+=" "+m+" = valid"+g.level+"; if ("+m+") {  ","boolean"==typeof w.then){if(w.then===!1){var b=b||[];b.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"switch")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { caseIndex: '+y+" } ",t.opts.messages!==!1&&(n+=" , message: 'should pass \"switch\" keyword validation' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var x=n;n=b.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+x+"]); ":" validate.errors = ["+x+"]; return false; ":" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" var valid"+g.level+" = "+w.then+"; "}else g.schema=w.then,g.schemaPath=a+"["+y+"].then",g.errSchemaPath=h+"/"+y+"/then",n+=" "+t.validate(g)+" ";n+="  } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } } "}else if(n+=" "+m+" = true;  ","boolean"==typeof w.then){if(w.then===!1){var b=b||[];b.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"switch")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { caseIndex: '+y+" } ",t.opts.messages!==!1&&(n+=" , message: 'should pass \"switch\" keyword validation' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var x=n;n=b.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+x+"]); ":" validate.errors = ["+x+"]; return false; ":" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" var valid"+g.level+" = "+w.then+"; "}else g.schema=w.then,g.schemaPath=a+"["+y+"].then",g.errSchemaPath=h+"/"+y+"/then",n+=" "+t.validate(g)+" ";p=w["continue"]}return n+=""+f+"var "+c+" = valid"+g.level+"; ",n=t.util.cleanUpCode(n)}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u=t.opts.v5&&r.$data,g=u?t.util.getData(r.$data,s,t.dataPathArr):r;u&&(n+=" var schema"+o+" = "+g+"; ",g="schema"+o),u||(n+=" var schema"+o+" = validate.schema"+a+";"),n+="var "+c+" = equal("+d+", schema"+o+"); if (!"+c+") {   ";var f=f||[];f.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"constant")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: 'should be equal to constant' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }"}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o;if(n+="var "+c+" = undefined;",t.opts.format===!1)return n+=" "+c+" = true; ";var u=t.schema.format,g=t.opts.v5&&u.$data,f="";if(g){var p=t.util.getData(u.$data,s,t.dataPathArr),m="format"+o,v="compare"+o;n+=" var "+m+" = formats["+p+"] , "+v+" = "+m+" && "+m+".compare;"}else{var m=t.formats[u];if(!m||!m.compare)return n+="  "+c+" = true; ";var v="formats"+t.util.getProperty(u)+".compare"}var w="formatMaximum"==e,y="exclusiveFormat"+(w?"Maximum":"Minimum"),R=t.schema[y],A=t.opts.v5&&R&&R.$data,b=w?"<":">",x="result"+o,L=t.opts.v5&&r.$data,C=L?t.util.getData(r.$data,s,t.dataPathArr):r;if(L&&(n+=" var schema"+o+" = "+C+"; ",C="schema"+o),A){var k=t.util.getData(R.$data,s,t.dataPathArr),E="exclusive"+o,B="op"+o,M="' + "+B+" + '";n+=" var schemaExcl"+o+" = "+k+"; ",k="schemaExcl"+o,n+=" if (typeof "+k+" != 'boolean' && "+k+" !== undefined) { "+c+" = false; ";var i=y,S=S||[];S.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_exclusiveFormatLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: {} ',t.opts.messages!==!1&&(n+=" , message: '"+y+" should be boolean' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var F=n;n=S.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+F+"]); ":" validate.errors = ["+F+"]; return false; ":" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }  ",l&&(f+="}",n+=" else { "),L&&(n+=" if ("+C+" === undefined) "+c+" = true; else if (typeof "+C+" != 'string') "+c+" = false; else { ",f+="}"),g&&(n+=" if (!"+v+") "+c+" = true; else { ",f+="}"),n+=" var "+x+" = "+v+"("+d+",  ",n+=L?""+C:""+t.util.toQuotedString(r),n+=" ); if ("+x+" === undefined) "+c+" = false; var exclusive"+o+" = "+k+" === true; if ("+c+" === undefined) { "+c+" = exclusive"+o+" ? "+x+" "+b+" 0 : "+x+" "+b+"= 0; } if (!"+c+") var op"+o+" = exclusive"+o+" ? '"+b+"' : '"+b+"=';"}else{var E=R===!0,M=b;E||(M+="=");var B="'"+M+"'";L&&(n+=" if ("+C+" === undefined) "+c+" = true; else if (typeof "+C+" != 'string') "+c+" = false; else { ",f+="}"),g&&(n+=" if (!"+v+") "+c+" = true; else { ",f+="}"),n+=" var "+x+" = "+v+"("+d+",  ",n+=L?""+C:""+t.util.toQuotedString(r),n+=" ); if ("+x+" === undefined) "+c+" = false; if ("+c+" === undefined) "+c+" = "+x+" "+b,E||(n+="="),n+=" 0;"}n+=""+f+"if (!"+c+") { ";var i=e,S=S||[];S.push(n),n="",t.createErrors!==!1?(n+=" { keyword: '"+(i||"_formatLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+'" , params: { limit:  ',n+=L?""+C:""+t.util.toQuotedString(r),n+="  } ",t.opts.messages!==!1&&(n+=" , message: 'should be "+M+' "',n+=L?"' + "+C+" + '":""+t.util.escapeQuotes(r),n+="\"' "),t.opts.verbose&&(n+=" , schema:  ",n+=L?"validate.schema"+a:""+t.util.toQuotedString(r),n+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var F=n;return n=S.pop(),n+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+F+"]); ":" validate.errors = ["+F+"]; return false; ":" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="}"}},function(t,e){"use strict";t.exports=function(t,e){var i,n=" ",o=t.level,s=t.dataLevel,r=t.schema[e],a=t.schemaPath+"."+e,h=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,d="data"+(s||""),c="valid"+o,u="key"+o,g="patternMatched"+o,f="";n+="var "+c+" = true;";var p=r;if(p)for(var m,v=-1,w=p.length-1;w>v;){m=p[v+=1],n+=" var "+g+" = false; for (var "+u+" in "+d+") { "+g+" = "+t.usePattern(m)+".test("+u+"); if ("+g+") break; } ";var y=t.util.escapeQuotes(m);n+=" if (!"+g+") { "+c+" = false;  var err =   ",t.createErrors!==!1?(n+=" { keyword: '"+(i||"patternRequired")+"' , dataPath: (dataPath || '') + "+t.errorPath+' , schemaPath: "'+h+"\" , params: { missingPattern: '"+y+"' } ",t.opts.messages!==!1&&(n+=" , message: 'should have property matching pattern \\'"+y+"\\'' "),t.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",l&&(f+="}",n+=" else { ")}return n+=""+f}},function(t,e){t.exports={id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/json-schema-v5.json#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema (v5 proposals)",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},$data:{type:"object",required:["$data"],properties:{$data:{type:"string",format:"relative-json-pointer"}},additionalProperties:!1}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{anyOf:[{type:"number",minimum:0,exclusiveMinimum:!0},{$ref:"#/definitions/$data"}]},maximum:{anyOf:[{type:"number"},{$ref:"#/definitions/$data"}]},exclusiveMaximum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},minimum:{anyOf:[{type:"number"},{$ref:"#/definitions/$data"}]},exclusiveMinimum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},maxLength:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minLength:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},pattern:{anyOf:[{type:"string",format:"regex"},{$ref:"#/definitions/$data"}]},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"},{$ref:"#/definitions/$data"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minItems:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},uniqueItems:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},maxProperties:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minProperties:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},required:{anyOf:[{$ref:"#/definitions/stringArray"},{$ref:"#/definitions/$data"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"},{$ref:"#/definitions/$data"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{anyOf:[{type:"array",minItems:1,uniqueItems:!0},{$ref:"#/definitions/$data"}]},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},format:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatMaximum:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},formatMinimum:{anyOf:[{type:"string"},{$ref:"#/definitions/$data"}]},exclusiveFormatMaximum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},exclusiveFormatMinimum:{anyOf:[{type:"boolean","default":!1},{$ref:"#/definitions/$data"}]},constant:{anyOf:[{},{$ref:"#/definitions/$data"}]},contains:{$ref:"#"},patternGroups:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{anyOf:[{$ref:"#/definitions/positiveInteger"},{$ref:"#/definitions/$data"}]},minimum:{anyOf:[{$ref:"#/definitions/positiveIntegerDefault0"},{$ref:"#/definitions/$data"}]},schema:{$ref:"#"}},additionalProperties:!1},"default":{}},"switch":{type:"array",items:{required:["then"],properties:{"if":{$ref:"#"},then:{anyOf:[{type:"boolean"},{$ref:"#"}]},"continue":{type:"boolean"}},additionalProperties:!1,dependencies:{"continue":["if"]}}}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"],formatMaximum:["format"],formatMinimum:["format"],exclusiveFormatMaximum:["formatMaximum"],exclusiveFormatMinimum:["formatMinimum"]},"default":{}}},function(t,e){"use strict";var i=/^[a-z_$][a-z0-9_$]*$/i;t.exports=function(t,e){function n(t,e,i){for(var n,o=0;o<s.RULES.length;o++){var r=s.RULES[o];if(r.type==e){n=r;break}}n||(n={type:e,rules:[]},s.RULES.push(n));var a={keyword:t,definition:i,custom:!0};n.rules.push(a)}function o(t){if(!s.RULES.types[t])throw new Error("Unknown type "+t)}var s=this;if(this.RULES.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!i.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){var r=e.type;if(Array.isArray(r)){var a,h=r.length;for(a=0;h>a;a++)o(r[a]);for(a=0;h>a;a++)n(t,r[a],e)}else r&&o(r),n(t,r,e)}this.RULES.keywords[t]=!0,this.RULES.all[t]=!0}},function(t,e){t.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean","default":!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean","default":!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}}},function(t,e,i){"use strict";var n=i(52),o=i(53),s=i(56),r=i(57),a=i(58),h=i(61),l=i(54),d={};d.create=function(t,e){if(!t)throw new Error("No container element provided.");this.container=t,this.dom={},this.highlighter=new n,this.selection=void 0,this.multiselection={nodes:[]},this.validateSchema=null,this.errorNodes=[],this.node=null,this.focusTarget=null,this._setOptions(e),this.options.history&&"view"!==this.options.mode&&(this.history=new o(this)),this._createFrame(),this._createTable()},d.destroy=function(){this.frame&&this.container&&this.frame.parentNode==this.container&&(this.container.removeChild(this.frame),this.frame=null),this.container=null,this.dom=null,this.clear(),this.node=null,this.focusTarget=null,this.selection=null,this.multiselection=null,this.errorNodes=null,this.validateSchema=null,this._debouncedValidate=null,this.history&&(this.history.destroy(),this.history=null),this.searchBox&&(this.searchBox.destroy(),this.searchBox=null),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null)},d._setOptions=function(t){if(this.options={search:!0,history:!0,mode:"tree",name:void 0,schema:null},t)for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.setSchema(this.options.schema),this._debouncedValidate=l.debounce(this.validate.bind(this),this.DEBOUNCE_INTERVAL)},d.set=function(t,e){if(e&&(console.warn('Second parameter "name" is deprecated. Use setName(name) instead.'),this.options.name=e),t instanceof Function||void 0===t)this.clear();else{this.content.removeChild(this.table);var i={field:this.options.name,value:t},n=new a(this,i);this._setRoot(n),this.validate();var o=!1;this.node.expand(o),this.content.appendChild(this.table)}this.history&&this.history.clear(),this.searchBox&&this.searchBox.clear()},d.get=function(){if(this.focusTarget){var t=a.getNodeFromTarget(this.focusTarget);t&&t.blur()}return this.node?this.node.getValue():void 0},d.getText=function(){return JSON.stringify(this.get())},d.setText=function(t){this.set(l.parse(t))},d.setName=function(t){this.options.name=t,this.node&&this.node.updateField(this.options.name)},d.getName=function(){return this.options.name},d.focus=function(){var t=this.content.querySelector("[contenteditable=true]");t?t.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(t=this.frame.querySelector("button"),t&&t.focus())},d.clear=function(){this.node&&(this.node.collapse(),this.tbody.removeChild(this.node.getDom()),delete this.node)},d._setRoot=function(t){this.clear(),this.node=t,this.tbody.appendChild(t.getDom())},d.search=function(t){var e;return this.node?(this.content.removeChild(this.table),e=this.node.search(t),this.content.appendChild(this.table)):e=[],e},d.expandAll=function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},d.collapseAll=function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},d._onAction=function(t,e){this.history&&this.history.add(t,e),this._onChange()},d._onChange=function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(t){console.error("Error in onChange callback: ",t)}},d.validate=function(){this.errorNodes&&this.errorNodes.forEach(function(t){t.setError(null)});var t=this.node;if(t){var e=t.validate(),i=[];if(this.validateSchema){var n=this.validateSchema(t.getValue());n||(i=this.validateSchema.errors.map(function(t){return l.improveSchemaError(t)}).map(function(e){return{node:t.findNode(e.dataPath),error:e}}).filter(function(t){return null!=t.node}))}this.errorNodes=e.concat(i).reduce(function(t,e){return e.node.findParents().map(function(t){return{node:t,child:e.node,error:{message:"object"===t.type?"Contains invalid properties":"Contains invalid items"}}}).concat(t,[e])},[]).map(function(t){return t.node.setError(t.error,t.child),t.node})}},d.refresh=function(){this.node&&this.node.updateDom({recurse:!0})},d.startAutoScroll=function(t){var e=this,i=this.content,n=l.getAbsoluteTop(i),o=i.clientHeight,s=n+o,r=24,a=50;n+r>t&&i.scrollTop>0?this.autoScrollStep=(n+r-t)/3:t>s-r&&o+i.scrollTop<i.scrollHeight?this.autoScrollStep=(s-r-t)/3:this.autoScrollStep=void 0,this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval(function(){e.autoScrollStep?i.scrollTop-=e.autoScrollStep:e.stopAutoScroll()},a)):this.stopAutoScroll()},d.stopAutoScroll=function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer),this.autoScrollStep&&delete this.autoScrollStep},d.setSelection=function(t){t&&("scrollTop"in t&&this.content&&(this.content.scrollTop=t.scrollTop),t.nodes&&this.select(t.nodes),t.range&&l.setSelectionOffset(t.range),t.dom&&t.dom.focus())},d.getSelection=function(){var t=l.getSelectionOffset();return t&&"DIV"!==t.container.nodeName&&(t=null),{dom:this.focusTarget,range:t,nodes:this.multiselection.nodes.slice(0),scrollTop:this.content?this.content.scrollTop:0}},d.scrollTo=function(t,e){var i=this.content;if(i){var n=this;n.animateTimeout&&(clearTimeout(n.animateTimeout),delete n.animateTimeout),n.animateCallback&&(n.animateCallback(!1),delete n.animateCallback);var o=i.clientHeight,s=i.scrollHeight-o,r=Math.min(Math.max(t-o/4,0),s),a=function(){var t=i.scrollTop,o=r-t;Math.abs(o)>3?(i.scrollTop+=o/3,n.animateCallback=e,n.animateTimeout=setTimeout(a,50)):(e&&e(!0),i.scrollTop=r,delete n.animateTimeout,delete n.animateCallback)};a()}else e&&e(!1)},d._createFrame=function(){function t(t){e._onEvent&&e._onEvent(t)}this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.container.appendChild(this.frame);var e=this;this.frame.onclick=function(e){var i=e.target;t(e),"BUTTON"==i.nodeName&&e.preventDefault()},this.frame.oninput=t,this.frame.onchange=t,this.frame.onkeydown=t,this.frame.onkeyup=t,this.frame.oncut=t,this.frame.onpaste=t,this.frame.onmousedown=t,this.frame.onmouseup=t,this.frame.onmouseover=t,this.frame.onmouseout=t,l.addEventListener(this.frame,"focus",t,!0),l.addEventListener(this.frame,"blur",t,!0),this.frame.onfocusin=t,this.frame.onfocusout=t,this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu);var i=document.createElement("button");i.className="jsoneditor-expand-all",i.title="Expand all fields",i.onclick=function(){e.expandAll()},this.menu.appendChild(i);var n=document.createElement("button");if(n.title="Collapse all fields",n.className="jsoneditor-collapse-all",n.onclick=function(){e.collapseAll()},this.menu.appendChild(n),this.history){var o=document.createElement("button");o.className="jsoneditor-undo jsoneditor-separator",o.title="Undo last action (Ctrl+Z)",o.onclick=function(){e._onUndo()},this.menu.appendChild(o),this.dom.undo=o;var r=document.createElement("button");r.className="jsoneditor-redo",r.title="Redo (Ctrl+Shift+Z)",r.onclick=function(){e._onRedo()},this.menu.appendChild(r),this.dom.redo=r,this.history.onChange=function(){o.disabled=!e.history.canUndo(),r.disabled=!e.history.canRedo()},this.history.onChange()}if(this.options&&this.options.modes&&this.options.modes.length){var a=this;this.modeSwitcher=new h(this.menu,this.options.modes,this.options.mode,function(t){a.modeSwitcher.destroy(),a.setMode(t),a.modeSwitcher.focus()})}this.options.search&&(this.searchBox=new s(this,this.menu))},d._onUndo=function(){this.history&&(this.history.undo(),this._onChange())},d._onRedo=function(){this.history&&(this.history.redo(),this._onChange())},d._onEvent=function(t){"keydown"==t.type&&this._onKeyDown(t),"focus"==t.type&&(this.focusTarget=t.target),"mousedown"==t.type&&this._startDragDistance(t),"mousemove"!=t.type&&"mouseup"!=t.type&&"click"!=t.type||this._updateDragDistance(t);var e=a.getNodeFromTarget(t.target);if(e&&e.selected){if("click"==t.type){if(t.target==e.dom.menu)return void this.showContextMenu(t.target);t.hasMoved||this.deselect()}"mousedown"==t.type&&a.onDragStart(this.multiselection.nodes,t)}else"mousedown"==t.type&&(this.deselect(),e&&t.target==e.dom.drag?a.onDragStart(e,t):(!e||t.target!=e.dom.field&&t.target!=e.dom.value&&t.target!=e.dom.select)&&this._onMultiSelectStart(t));e&&e.onEvent(t)},d._startDragDistance=function(t){this.dragDistanceEvent={initialTarget:t.target,initialPageX:t.pageX,initialPageY:t.pageY,dragDistance:0,hasMoved:!1}},d._updateDragDistance=function(t){this.dragDistanceEvent||this._startDragDistance(t);var e=t.pageX-this.dragDistanceEvent.initialPageX,i=t.pageY-this.dragDistanceEvent.initialPageY;return this.dragDistanceEvent.dragDistance=Math.sqrt(e*e+i*i),this.dragDistanceEvent.hasMoved=this.dragDistanceEvent.hasMoved||this.dragDistanceEvent.dragDistance>10,t.dragDistance=this.dragDistanceEvent.dragDistance,t.hasMoved=this.dragDistanceEvent.hasMoved,t.dragDistance},d._onMultiSelectStart=function(t){var e=a.getNodeFromTarget(t.target);if("tree"===this.options.mode&&void 0===this.options.onEditable){this.multiselection={start:e||null,end:null,nodes:[]},this._startDragDistance(t);var i=this;this.mousemove||(this.mousemove=l.addEventListener(window,"mousemove",function(t){i._onMultiSelect(t)})),this.mouseup||(this.mouseup=l.addEventListener(window,"mouseup",function(t){i._onMultiSelectEnd(t)}))}},d._onMultiSelect=function(t){if(t.preventDefault(),this._updateDragDistance(t),t.hasMoved){var e=a.getNodeFromTarget(t.target);
e&&(null==this.multiselection.start&&(this.multiselection.start=e),this.multiselection.end=e),this.deselect();var i=this.multiselection.start,n=this.multiselection.end||this.multiselection.start;i&&n&&(this.multiselection.nodes=this._findTopLevelNodes(i,n),this.select(this.multiselection.nodes))}},d._onMultiSelectEnd=function(t){this.multiselection.nodes[0]&&this.multiselection.nodes[0].dom.menu.focus(),this.multiselection.start=null,this.multiselection.end=null,this.mousemove&&(l.removeEventListener(window,"mousemove",this.mousemove),delete this.mousemove),this.mouseup&&(l.removeEventListener(window,"mouseup",this.mouseup),delete this.mouseup)},d.deselect=function(t){this.multiselection.nodes.forEach(function(t){t.setSelected(!1)}),this.multiselection.nodes=[],t&&(this.multiselection.start=null,this.multiselection.end=null)},d.select=function(t){if(!Array.isArray(t))return this.select([t]);if(t){this.deselect(),this.multiselection.nodes=t.slice(0);var e=t[0];t.forEach(function(t){t.setSelected(!0,t===e)})}},d._findTopLevelNodes=function(t,e){for(var i=t.getNodePath(),n=e.getNodePath(),o=0;o<i.length&&i[o]===n[o];)o++;var s=i[o-1],r=i[o],a=n[o];if(r&&a||(s.parent?(r=s,a=s,s=s.parent):(r=s.childs[0],a=s.childs[s.childs.length-1])),s&&r&&a){var h=s.childs.indexOf(r),l=s.childs.indexOf(a),d=Math.min(h,l),c=Math.max(h,l);return s.childs.slice(d,c+1)}return[]},d._onKeyDown=function(t){var e=t.which||t.keyCode,i=t.ctrlKey,n=t.shiftKey,o=!1;if(9==e){var s=this;setTimeout(function(){l.selectContentEditable(s.focusTarget)},0)}if(this.searchBox)if(i&&70==e)this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),o=!0;else if(114==e||i&&71==e){var r=!0;n?this.searchBox.previous(r):this.searchBox.next(r),o=!0}this.history&&(i&&!n&&90==e?(this._onUndo(),o=!0):i&&n&&90==e&&(this._onRedo(),o=!0)),o&&(t.preventDefault(),t.stopPropagation())},d._createTable=function(){var t=document.createElement("div");t.className="jsoneditor-outer",this.contentOuter=t,this.content=document.createElement("div"),this.content.className="jsoneditor-tree",t.appendChild(this.content),this.table=document.createElement("table"),this.table.className="jsoneditor-tree",this.content.appendChild(this.table);var e;this.colgroupContent=document.createElement("colgroup"),"tree"===this.options.mode&&(e=document.createElement("col"),e.width="24px",this.colgroupContent.appendChild(e)),e=document.createElement("col"),e.width="24px",this.colgroupContent.appendChild(e),e=document.createElement("col"),this.colgroupContent.appendChild(e),this.table.appendChild(this.colgroupContent),this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.frame.appendChild(t)},d.showContextMenu=function(t,e){var i=[],n=this;i.push({text:"Duplicate",title:"Duplicate selected fields (Ctrl+D)",className:"jsoneditor-duplicate",click:function(){a.onDuplicate(n.multiselection.nodes)}}),i.push({text:"Remove",title:"Remove selected fields (Ctrl+Del)",className:"jsoneditor-remove",click:function(){a.onRemove(n.multiselection.nodes)}});var o=new r(i,{close:e});o.show(t,this.content)},t.exports=[{mode:"tree",mixin:d,data:"json"},{mode:"view",mixin:d,data:"json"},{mode:"form",mixin:d,data:"json"}]},function(t,e){"use strict";function i(){this.locked=!1}i.prototype.highlight=function(t){this.locked||(this.node!=t&&(this.node&&this.node.setHighlight(!1),this.node=t,this.node.setHighlight(!0)),this._cancelUnhighlight())},i.prototype.unhighlight=function(){if(!this.locked){var t=this;this.node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout(function(){t.node.setHighlight(!1),t.node=void 0,t.unhighlightTimer=void 0},0))}},i.prototype._cancelUnhighlight=function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)},i.prototype.lock=function(){this.locked=!0},i.prototype.unlock=function(){this.locked=!1},t.exports=i},function(t,e,i){"use strict";function n(t){this.editor=t,this.history=[],this.index=-1,this.clear(),this.actions={editField:{undo:function(t){t.node.updateField(t.oldValue)},redo:function(t){t.node.updateField(t.newValue)}},editValue:{undo:function(t){t.node.updateValue(t.oldValue)},redo:function(t){t.node.updateValue(t.newValue)}},changeType:{undo:function(t){t.node.changeType(t.oldType)},redo:function(t){t.node.changeType(t.newType)}},appendNodes:{undo:function(t){t.nodes.forEach(function(e){t.parent.removeChild(e)})},redo:function(t){t.nodes.forEach(function(e){t.parent.appendChild(e)})}},insertBeforeNodes:{undo:function(t){t.nodes.forEach(function(e){t.parent.removeChild(e)})},redo:function(t){t.nodes.forEach(function(e){t.parent.insertBefore(e,t.beforeNode)})}},insertAfterNodes:{undo:function(t){t.nodes.forEach(function(e){t.parent.removeChild(e)})},redo:function(t){var e=t.afterNode;t.nodes.forEach(function(i){t.parent.insertAfter(t.node,e),e=i})}},removeNodes:{undo:function(t){var e=t.parent,i=e.childs[t.index]||e.append;t.nodes.forEach(function(t){e.insertBefore(t,i)})},redo:function(t){t.nodes.forEach(function(e){t.parent.removeChild(e)})}},duplicateNodes:{undo:function(t){t.nodes.forEach(function(e){t.parent.removeChild(e)})},redo:function(t){var e=t.afterNode;t.nodes.forEach(function(i){t.parent.insertAfter(i,e),e=i})}},moveNodes:{undo:function(t){t.nodes.forEach(function(e){t.oldBeforeNode.parent.moveBefore(e,t.oldBeforeNode)})},redo:function(t){t.nodes.forEach(function(e){t.newBeforeNode.parent.moveBefore(e,t.newBeforeNode)})}},sort:{undo:function(t){var e=t.node;e.hideChilds(),e.sort=t.oldSort,e.childs=t.oldChilds,e.showChilds()},redo:function(t){var e=t.node;e.hideChilds(),e.sort=t.newSort,e.childs=t.newChilds,e.showChilds()}}}}i(54),n.prototype.onChange=function(){},n.prototype.add=function(t,e){this.index++,this.history[this.index]={action:t,params:e,timestamp:new Date},this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1),this.onChange()},n.prototype.clear=function(){this.history=[],this.index=-1,this.onChange()},n.prototype.canUndo=function(){return this.index>=0},n.prototype.canRedo=function(){return this.index<this.history.length-1},n.prototype.undo=function(){if(this.canUndo()){var t=this.history[this.index];if(t){var e=this.actions[t.action];e&&e.undo?(e.undo(t.params),t.params.oldSelection&&this.editor.setSelection(t.params.oldSelection)):console.error(new Error('unknown action "'+t.action+'"'))}this.index--,this.onChange()}},n.prototype.redo=function(){if(this.canRedo()){this.index++;var t=this.history[this.index];if(t){var e=this.actions[t.action];e&&e.redo?(e.redo(t.params),t.params.newSelection&&this.editor.setSelection(t.params.newSelection)):console.error(new Error('unknown action "'+t.action+'"'))}this.onChange()}},n.prototype.destroy=function(){this.editor=null,this.history=[],this.index=-1},t.exports=n},function(t,e,i){"use strict";var n=i(55);e.parse=function(t){try{return JSON.parse(t)}catch(i){throw e.validate(t),i}},e.sanitize=function(t){function e(){return t.charAt(d)}function i(){return t.charAt(d+1)}function n(){return t.charAt(d-1)}function o(){for(var t=l.length-1;t>=0;){var e=l[t];if(" "!==e&&"\n"!==e&&"\r"!==e&&"\t"!==e)return e;t--}return""}function s(){for(d+=2;d<t.length&&("*"!==e()||"/"!==i());)d++;d+=2}function r(){for(d+=2;d<t.length&&"\n"!==e();)d++}function a(i){l.push('"'),d++;for(var o=e();d<t.length&&o!==i;)'"'===o&&"\\"!==n()&&l.push("\\"),"\\"===o&&(d++,o=e(),"'"!==o&&l.push("\\")),l.push(o),d++,o=e();o===i&&(l.push('"'),d++)}function h(){for(var t=["null","true","false"],i="",n=e(),o=/[a-zA-Z_$\d]/;o.test(n);)i+=n,d++,n=e();-1===t.indexOf(i)?l.push('"'+i+'"'):l.push(i)}var l=[],d=0,c=t.match(/^\s*(\/\*(.|[\r\n])*?\*\/)?\s*[\da-zA-Z_$]+\s*\(([\s\S]*)\)\s*;?\s*$/);for(c&&(t=c[3]);d<t.length;){var u=e();"/"===u&&"*"===i()?s():"/"===u&&"/"===i()?r():"'"===u||'"'===u?a(u):/[a-zA-Z_$]/.test(u)&&-1!==["{",","].indexOf(o())?h():(l.push(u),d++)}return l.join("")},e.escapeUnicodeChars=function(t){return t.replace(/[\u007F-\uFFFF]/g,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})},e.validate=function(t){"undefined"!=typeof n?n.parse(t):JSON.parse(t)},e.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},e.clear=function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e];return t},e.type=function(t){return null===t?"null":void 0===t?"undefined":t instanceof Number||"number"==typeof t?"number":t instanceof String||"string"==typeof t?"string":t instanceof Boolean||"boolean"==typeof t?"boolean":t instanceof RegExp||"regexp"==typeof t?"regexp":e.isArray(t)?"array":"object"};var o=/^https?:\/\/\S+$/;e.isUrl=function(t){return("string"==typeof t||t instanceof String)&&o.test(t)},e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.getAbsoluteLeft=function(t){var e=t.getBoundingClientRect();return e.left+window.pageXOffset||document.scrollLeft||0},e.getAbsoluteTop=function(t){var e=t.getBoundingClientRect();return e.top+window.pageYOffset||document.scrollTop||0},e.addClassName=function(t,e){var i=t.className.split(" ");-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" "))},e.removeClassName=function(t,e){var i=t.className.split(" "),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))},e.stripFormatting=function(t){for(var i=t.childNodes,n=0,o=i.length;o>n;n++){var s=i[n];s.style&&s.removeAttribute("style");var r=s.attributes;if(r)for(var a=r.length-1;a>=0;a--){var h=r[a];h.specified===!0&&s.removeAttribute(h.name)}e.stripFormatting(s)}},e.setEndOfContentEditable=function(t){var e,i;document.createRange&&(e=document.createRange(),e.selectNodeContents(t),e.collapse(!1),i=window.getSelection(),i.removeAllRanges(),i.addRange(e))},e.selectContentEditable=function(t){if(t&&"DIV"==t.nodeName){var e,i;window.getSelection&&document.createRange&&(i=document.createRange(),i.selectNodeContents(t),e=window.getSelection(),e.removeAllRanges(),e.addRange(i))}},e.getSelection=function(){if(window.getSelection){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}return null},e.setSelection=function(t){if(t&&window.getSelection){var e=window.getSelection();e.removeAllRanges(),e.addRange(t)}},e.getSelectionOffset=function(){var t=e.getSelection();return t&&"startOffset"in t&&"endOffset"in t&&t.startContainer&&t.startContainer==t.endContainer?{startOffset:t.startOffset,endOffset:t.endOffset,container:t.startContainer.parentNode}:null},e.setSelectionOffset=function(t){if(document.createRange&&window.getSelection){var i=window.getSelection();if(i){var n=document.createRange();t.container.firstChild||t.container.appendChild(document.createTextNode("")),n.setStart(t.container.firstChild,t.startOffset),n.setEnd(t.container.firstChild,t.endOffset),e.setSelection(n)}}},e.getInnerText=function(t,i){var n=void 0==i;if(n&&(i={text:"",flush:function(){var t=this.text;return this.text="",t},set:function(t){this.text=t}}),t.nodeValue)return i.flush()+t.nodeValue;if(t.hasChildNodes()){for(var o=t.childNodes,s="",r=0,a=o.length;a>r;r++){var h=o[r];if("DIV"==h.nodeName||"P"==h.nodeName){var l=o[r-1],d=l?l.nodeName:void 0;d&&"DIV"!=d&&"P"!=d&&"BR"!=d&&(s+="\n",i.flush()),s+=e.getInnerText(h,i),i.set("\n")}else"BR"==h.nodeName?(s+=i.flush(),i.set("\n")):s+=e.getInnerText(h,i)}return s}return"P"==t.nodeName&&-1!=e.getInternetExplorerVersion()?i.flush():""},e.getInternetExplorerVersion=function(){if(-1==s){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(e)&&(t=parseFloat(RegExp.$1))}s=t}return s},e.isFirefox=function(){return-1!=navigator.userAgent.indexOf("Firefox")};var s=-1;e.addEventListener=function(t,i,n,o){if(t.addEventListener)return void 0===o&&(o=!1),"mousewheel"===i&&e.isFirefox()&&(i="DOMMouseScroll"),t.addEventListener(i,n,o),n;if(t.attachEvent){var s=function(){return n.call(t,window.event)};return t.attachEvent("on"+i,s),s}},e.removeEventListener=function(t,i,n,o){t.removeEventListener?(void 0===o&&(o=!1),"mousewheel"===i&&e.isFirefox()&&(i="DOMMouseScroll"),t.removeEventListener(i,n,o)):t.detachEvent&&t.detachEvent("on"+i,n)},e.parsePath=function r(t){var e,i;if(0===t.length)return[];var n=t.match(/^\.(\w+)/);if(n)e=n[1],i=t.substr(e.length+1);else{if("["!==t[0])throw new SyntaxError("Failed to parse path");var o=t.indexOf("]");if(-1===o)throw new SyntaxError("Character ] expected in path");if(1===o)throw new SyntaxError("Index expected after [");var s=t.substring(1,o);e="*"===s?s:JSON.parse(s),i=t.substr(o+1)}return[e].concat(r(i))},e.improveSchemaError=function(t){if("enum"===t.keyword&&Array.isArray(t.schema)){var e=t.schema;if(e){if(e=e.map(function(t){return JSON.stringify(t)}),e.length>5){var i=["("+(e.length-5)+" more...)"];e=e.slice(0,5),e.push(i)}t.message="should be equal to one of: "+e.join(", ")}}return"additionalProperties"===t.keyword&&(t.message="should NOT have additional property: "+t.params.additionalProperty),t},e.insideRect=function(t,e,i){var n=void 0!==i?i:0;return e.left-n>=t.left&&e.right+n<=t.right&&e.top-n>=t.top&&e.bottom+n<=t.bottom},e.debounce=function(t,e,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,i||t.apply(o,s)},a=i&&!n;clearTimeout(n),n=setTimeout(r,e),a&&t.apply(o,s)}},e.textDiff=function(t,e){for(var i=e.length,n=0,o=t.length,s=e.length;e.charAt(n)===t.charAt(n)&&i>n;)n++;for(;e.charAt(s-1)===t.charAt(o-1)&&s>n&&o>0;)s--,o--;return{start:n,end:s}}},function(t,e,i){var n=function(){var t={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,i,n,o,s,r){var a=s.length-1;switch(o){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\x0B").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=s[a-1];case 13:this.$={};break;case 14:this.$=s[a-1];break;case 15:this.$=[s[a-2],s[a]];break;case 16:this.$={},this.$[s[a][0]]=s[a][1];break;case 17:this.$=s[a-2],s[a-2][s[a][0]]=s[a][1];break;case 18:this.$=[];break;case 19:this.$=s[a-1];break;case 20:this.$=[s[a]];break;case 21:this.$=s[a-2],s[a-2].push(s[a])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(t){o.length=o.length-2*t,s.length=s.length-t,r.length=r.length-t}function i(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,o=[0],s=[null],r=[],a=this.table,h="",l=0,d=0,c=0,u=2,g=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;r.push(f),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,m,v,w,y,R,A,b,x,L={};;){if(v=o[o.length-1],this.defaultActions[v]?w=this.defaultActions[v]:(null==p&&(p=i()),w=a[v]&&a[v][p]),"undefined"==typeof w||!w.length||!w[0]){if(!c){x=[];for(R in a[v])this.terminals_[R]&&R>2&&x.push("'"+this.terminals_[R]+"'");var C="";C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+this.terminals_[p]+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:f,expected:x})}if(3==c){if(p==g)throw new Error(C||"Parsing halted.");d=this.lexer.yyleng,h=this.lexer.yytext,l=this.lexer.yylineno,f=this.lexer.yylloc,p=i()}for(;!(u.toString()in a[v]);){if(0==v)throw new Error(C||"Parsing halted.");e(1),v=o[o.length-1]}m=p,p=u,v=o[o.length-1],w=a[v]&&a[v][u],c=3}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+p);switch(w[0]){case 1:o.push(p),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),o.push(w[1]),p=null,m?(p=m,m=null):(d=this.lexer.yyleng,h=this.lexer.yytext,l=this.lexer.yylineno,f=this.lexer.yylloc,c>0&&c--);break;case 2:if(A=this.productions_[w[1]][1],L.$=s[s.length-A],L._$={first_line:r[r.length-(A||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(A||1)].first_column,last_column:r[r.length-1].last_column},y=this.performAction.call(L,h,d,l,this.yy,w[1],s,r),"undefined"!=typeof y)return y;A&&(o=o.slice(0,-1*A*2),s=s.slice(0,-1*A),r=r.slice(0,-1*A)),o.push(this.productions_[w[1]][0]),s.push(L.$),r.push(L._$),b=a[o[o.length-2]][o[o.length-1]],o.push(b);break;case 3:return!0}}return!0}},e=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.match+=t,this.matched+=t;var e=t.match(/\n/);return e&&this.yylineno++,this._input=this._input.slice(1),t},unput:function(t){return this._input=t+this._input,this},more:function(){return this._more=!0,this},less:function(t){this._input=this.match.slice(t)+this._input},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,o;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length&&(i=this._input.match(this.rules[s[r]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=r,this.options.flex));r++);return e?(o=e[0].match(/\n.*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-1:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){switch(i){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},t.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],t.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},t}();return t.lexer=e,t}();e.parser=n,e.parse=n.parse.bind(n)},function(t,e){"use strict";function i(t,e){var i=this;this.editor=t,this.timeout=void 0,this.delay=200,this.lastText=void 0,this.dom={},this.dom.container=e;var n=document.createElement("table");this.dom.table=n,n.className="jsoneditor-search",e.appendChild(n);var o=document.createElement("tbody");this.dom.tbody=o,n.appendChild(o);var s=document.createElement("tr");o.appendChild(s);var r=document.createElement("td");s.appendChild(r);var a=document.createElement("div");this.dom.results=a,a.className="jsoneditor-results",r.appendChild(a),r=document.createElement("td"),s.appendChild(r);var h=document.createElement("div");this.dom.input=h,h.className="jsoneditor-frame",h.title="Search fields and values",r.appendChild(h);var l=document.createElement("table");h.appendChild(l);var d=document.createElement("tbody");l.appendChild(d),s=document.createElement("tr"),d.appendChild(s);var c=document.createElement("button");c.className="jsoneditor-refresh",r=document.createElement("td"),r.appendChild(c),s.appendChild(r);var u=document.createElement("input");this.dom.search=u,u.oninput=function(t){i._onDelayedSearch(t)},u.onchange=function(t){i._onSearch()},u.onkeydown=function(t){i._onKeyDown(t)},u.onkeyup=function(t){i._onKeyUp(t)},c.onclick=function(t){u.select()},r=document.createElement("td"),r.appendChild(u),s.appendChild(r);var g=document.createElement("button");g.title="Next result (Enter)",g.className="jsoneditor-next",g.onclick=function(){i.next()},r=document.createElement("td"),r.appendChild(g),s.appendChild(r);var f=document.createElement("button");f.title="Previous result (Shift+Enter)",f.className="jsoneditor-previous",f.onclick=function(){i.previous()},r=document.createElement("td"),r.appendChild(f),s.appendChild(r)}i.prototype.next=function(t){if(void 0!=this.results){var e=void 0!=this.resultIndex?this.resultIndex+1:0;e>this.results.length-1&&(e=0),this._setActiveResult(e,t)}},i.prototype.previous=function(t){if(void 0!=this.results){var e=this.results.length-1,i=void 0!=this.resultIndex?this.resultIndex-1:e;0>i&&(i=e),this._setActiveResult(i,t)}},i.prototype._setActiveResult=function(t,e){if(this.activeResult){var i=this.activeResult.node,n=this.activeResult.elem;"field"==n?delete i.searchFieldActive:delete i.searchValueActive,i.updateDom()}if(!this.results||!this.results[t])return this.resultIndex=void 0,void(this.activeResult=void 0);this.resultIndex=t;var o=this.results[this.resultIndex].node,s=this.results[this.resultIndex].elem;"field"==s?o.searchFieldActive=!0:o.searchValueActive=!0,this.activeResult=this.results[this.resultIndex],o.updateDom(),o.scrollTo(function(){e&&o.focus(s)})},i.prototype._clearDelay=function(){void 0!=this.timeout&&(clearTimeout(this.timeout),delete this.timeout)},i.prototype._onDelayedSearch=function(t){this._clearDelay();var e=this;this.timeout=setTimeout(function(t){e._onSearch()},this.delay)},i.prototype._onSearch=function(t){this._clearDelay();var e=this.dom.search.value,i=e.length>0?e:void 0;if(i!=this.lastText||t)if(this.lastText=i,this.results=this.editor.search(i),this._setActiveResult(void 0),void 0!=i){var n=this.results.length;switch(n){case 0:this.dom.results.innerHTML="no&nbsp;results";break;case 1:this.dom.results.innerHTML="1&nbsp;result";break;default:this.dom.results.innerHTML=n+"&nbsp;results"}}else this.dom.results.innerHTML=""},i.prototype._onKeyDown=function(t){var e=t.which;27==e?(this.dom.search.value="",this._onSearch(),t.preventDefault(),t.stopPropagation()):13==e&&(t.ctrlKey?this._onSearch(!0):t.shiftKey?this.previous():this.next(),t.preventDefault(),t.stopPropagation())},i.prototype._onKeyUp=function(t){var e=t.keyCode;27!=e&&13!=e&&this._onDelayedSearch(t)},i.prototype.clear=function(){this.dom.search.value="",this._onSearch()},i.prototype.destroy=function(){this.editor=null,this.dom.container.removeChild(this.dom.table),this.dom=null,this.results=null,this.activeResult=null,this._clearDelay()},t.exports=i},function(t,e,i){"use strict";function n(t,e){function i(t,e,o){o.forEach(function(o){if("separator"==o.type){var s=document.createElement("div");s.className="jsoneditor-separator",a=document.createElement("li"),a.appendChild(s),t.appendChild(a)}else{var r={},a=document.createElement("li");t.appendChild(a);var h=document.createElement("button");if(h.className=o.className,r.button=h,o.title&&(h.title=o.title),o.click&&(h.onclick=function(t){t.preventDefault(),n.hide(),o.click()}),a.appendChild(h),o.submenu){var l=document.createElement("div");l.className="jsoneditor-icon",h.appendChild(l),h.appendChild(document.createTextNode(o.text));var d;if(o.click){h.className+=" jsoneditor-default";var c=document.createElement("button");r.buttonExpand=c,c.className="jsoneditor-expand",c.innerHTML='<div class="jsoneditor-expand"></div>',a.appendChild(c),o.submenuTitle&&(c.title=o.submenuTitle),d=c}else{var u=document.createElement("div");u.className="jsoneditor-expand",h.appendChild(u),d=h}d.onclick=function(t){t.preventDefault(),n._onExpandItem(r),d.focus()};var g=[];r.subItems=g;var f=document.createElement("ul");r.ul=f,f.className="jsoneditor-menu",f.style.height="0",a.appendChild(f),i(f,g,o.submenu)}else h.innerHTML='<div class="jsoneditor-icon"></div>'+o.text;e.push(r)}})}this.dom={};var n=this,o=this.dom;this.anchor=void 0,this.items=t,this.eventListeners={},this.selection=void 0,this.onClose=e?e.close:void 0;var s=document.createElement("div");s.className="jsoneditor-contextmenu-root",o.root=s;var r=document.createElement("div");r.className="jsoneditor-contextmenu",o.menu=r,s.appendChild(r);var a=document.createElement("ul");a.className="jsoneditor-menu",r.appendChild(a),o.list=a,o.items=[];var h=document.createElement("button");o.focusButton=h;var l=document.createElement("li");l.style.overflow="hidden",l.style.height="0",l.appendChild(h),a.appendChild(l),i(a,this.dom.items,t),this.maxHeight=0,t.forEach(function(e){var i=24*(t.length+(e.submenu?e.submenu.length:0));n.maxHeight=Math.max(n.maxHeight,i)})}var o=i(54);n.prototype._getVisibleButtons=function(){var t=[],e=this;return this.dom.items.forEach(function(i){t.push(i.button),i.buttonExpand&&t.push(i.buttonExpand),i.subItems&&i==e.expandedItem&&i.subItems.forEach(function(e){t.push(e.button),e.buttonExpand&&t.push(e.buttonExpand)})}),t},n.visibleMenu=void 0,n.prototype.show=function(t,e){this.hide();var i=!0;if(e){var s=t.getBoundingClientRect(),r=e.getBoundingClientRect();s.bottom+this.maxHeight<r.bottom||s.top-this.maxHeight>r.top&&(i=!1)}if(i){var a=t.offsetHeight;this.dom.menu.style.left="0px",this.dom.menu.style.top=a+"px",this.dom.menu.style.bottom=""}else this.dom.menu.style.left="0px",this.dom.menu.style.top="",this.dom.menu.style.bottom="0px";var h=t.parentNode;h.insertBefore(this.dom.root,h.firstChild);var l=this,d=this.dom.list;this.eventListeners.mousedown=o.addEventListener(window,"mousedown",function(t){var e=t.target;e==d||l._isChildOf(e,d)||(l.hide(),t.stopPropagation(),t.preventDefault())}),this.eventListeners.keydown=o.addEventListener(window,"keydown",function(t){l._onKeyDown(t)}),this.selection=o.getSelection(),this.anchor=t,setTimeout(function(){l.dom.focusButton.focus()},0),n.visibleMenu&&n.visibleMenu.hide(),n.visibleMenu=this},n.prototype.hide=function(){this.dom.root.parentNode&&(this.dom.root.parentNode.removeChild(this.dom.root),this.onClose&&this.onClose());for(var t in this.eventListeners)if(this.eventListeners.hasOwnProperty(t)){var e=this.eventListeners[t];e&&o.removeEventListener(window,t,e),delete this.eventListeners[t]}n.visibleMenu==this&&(n.visibleMenu=void 0)},n.prototype._onExpandItem=function(t){var e=this,i=t==this.expandedItem,n=this.expandedItem;if(n&&(n.ul.style.height="0",n.ul.style.padding="",setTimeout(function(){e.expandedItem!=n&&(n.ul.style.display="",o.removeClassName(n.ul.parentNode,"jsoneditor-selected"))},300),this.expandedItem=void 0),!i){var s=t.ul;s.style.display="block",s.clientHeight,setTimeout(function(){e.expandedItem==t&&(s.style.height=24*s.childNodes.length+"px",s.style.padding="5px 10px")},0),o.addClassName(s.parentNode,"jsoneditor-selected"),this.expandedItem=t}},n.prototype._onKeyDown=function(t){var e,i,n,s,r=t.target,a=t.which,h=!1;27==a?(this.selection&&o.setSelection(this.selection),this.anchor&&this.anchor.focus(),this.hide(),h=!0):9==a?t.shiftKey?(e=this._getVisibleButtons(),i=e.indexOf(r),0==i&&(e[e.length-1].focus(),h=!0)):(e=this._getVisibleButtons(),i=e.indexOf(r),i==e.length-1&&(e[0].focus(),h=!0)):37==a?("jsoneditor-expand"==r.className&&(e=this._getVisibleButtons(),i=e.indexOf(r),n=e[i-1],n&&n.focus()),h=!0):38==a?(e=this._getVisibleButtons(),i=e.indexOf(r),n=e[i-1],n&&"jsoneditor-expand"==n.className&&(n=e[i-2]),n||(n=e[e.length-1]),n&&n.focus(),h=!0):39==a?(e=this._getVisibleButtons(),i=e.indexOf(r),s=e[i+1],s&&"jsoneditor-expand"==s.className&&s.focus(),h=!0):40==a&&(e=this._getVisibleButtons(),i=e.indexOf(r),s=e[i+1],s&&"jsoneditor-expand"==s.className&&(s=e[i+2]),s||(s=e[0]),s&&(s.focus(),h=!0),h=!0),h&&(t.stopPropagation(),t.preventDefault())},n.prototype._isChildOf=function(t,e){for(var i=t.parentNode;i;){if(i==e)return!0;i=i.parentNode}return!1},t.exports=n},function(t,e,i){"use strict";function n(t,e){this.editor=t,this.dom={},this.expanded=!1,e&&e instanceof Object?(this.setField(e.field,e.fieldEditable),this.setValue(e.value,e.type)):(this.setField(""),this.setValue(null)),this._debouncedOnChangeValue=a.debounce(this._onChangeValue.bind(this),n.prototype.DEBOUNCE_INTERVAL),this._debouncedOnChangeField=a.debounce(this._onChangeField.bind(this),n.prototype.DEBOUNCE_INTERVAL)}var o=i(59),s=i(57),r=i(60),a=i(54);n.prototype.DEBOUNCE_INTERVAL=150,n.prototype._updateEditability=function(){if(this.editable={field:!0,value:!0},this.editor&&(this.editable.field="tree"===this.editor.options.mode,this.editable.value="view"!==this.editor.options.mode,("tree"===this.editor.options.mode||"form"===this.editor.options.mode)&&"function"==typeof this.editor.options.onEditable)){var t=this.editor.options.onEditable({field:this.field,value:this.value,path:this.getPath()});"boolean"==typeof t?(this.editable.field=t,this.editable.value=t):("boolean"==typeof t.field&&(this.editable.field=t.field),"boolean"==typeof t.value&&(this.editable.value=t.value))}},n.prototype.getPath=function(){for(var t=this,e=[];t;){var i=t.parent?"array"!=t.parent.type?t.field:t.index:void 0;
void 0!==i&&e.unshift(i),t=t.parent}return e},n.prototype.findNode=function(t){for(var e=a.parsePath(t),i=this;i&&e.length>0;){var n=e.shift();if("number"==typeof n){if("array"!==i.type)throw new Error("Cannot get child node at index "+n+": node is no array");i=i.childs[n]}else{if("object"!==i.type)throw new Error("Cannot get child node "+n+": node is no object");i=i.childs.filter(function(t){return t.field===n})[0]}}return i},n.prototype.findParents=function(){for(var t=[],e=this.parent;e;)t.unshift(e),e=e.parent;return t},n.prototype.setError=function(t,e){this.getDom(),this.error=t;var i=this.dom.tdError;if(t){i||(i=document.createElement("td"),this.dom.tdError=i,this.dom.tdValue.parentNode.appendChild(i));var n=document.createElement("div");n.className="jsoneditor-popover jsoneditor-right",n.appendChild(document.createTextNode(t.message));var o=document.createElement("button");for(o.className="jsoneditor-schema-error",o.appendChild(n),o.onmouseover=o.onfocus=function(){for(var t=["right","above","below","left"],e=0;e<t.length;e++){var i=t[e];n.className="jsoneditor-popover jsoneditor-"+i;var o=this.editor.content.getBoundingClientRect(),s=n.getBoundingClientRect(),r=20,h=a.insideRect(o,s,r);if(h)break}}.bind(this),e&&(o.onclick=function(){e.findParents().forEach(function(t){t.expand(!1)}),e.scrollTo(function(){e.focus()})});i.firstChild;)i.removeChild(i.firstChild);i.appendChild(o)}else i&&(this.dom.tdError.parentNode.removeChild(this.dom.tdError),delete this.dom.tdError)},n.prototype.getIndex=function(){return this.parent?this.parent.childs.indexOf(this):-1},n.prototype.setParent=function(t){this.parent=t},n.prototype.setField=function(t,e){this.field=t,this.previousField=t,this.fieldEditable=e===!0},n.prototype.getField=function(){return void 0===this.field&&this._getDomField(),this.field},n.prototype.setValue=function(t,e){var i,o,s=this.childs;if(s)for(;s.length;)this.removeChild(s[0]);if(this.type=this._getType(t),e&&e!=this.type){if("string"!=e||"auto"!=this.type)throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+e+'"');this.type=e}if("array"==this.type){this.childs=[];for(var r=0,a=t.length;a>r;r++)i=t[r],void 0===i||i instanceof Function||(o=new n(this.editor,{value:i}),this.appendChild(o));this.value=""}else if("object"==this.type){this.childs=[];for(var h in t)t.hasOwnProperty(h)&&(i=t[h],void 0===i||i instanceof Function||(o=new n(this.editor,{field:h,value:i}),this.appendChild(o)));this.value="",this.editor.options.sortObjectKeys===!0&&this.sort("asc")}else this.childs=void 0,this.value=t;this.previousValue=this.value},n.prototype.getValue=function(){if("array"==this.type){var t=[];return this.childs.forEach(function(e){t.push(e.getValue())}),t}if("object"==this.type){var e={};return this.childs.forEach(function(t){e[t.getField()]=t.getValue()}),e}return void 0===this.value&&this._getDomValue(),this.value},n.prototype.getLevel=function(){return this.parent?this.parent.getLevel()+1:0},n.prototype.getNodePath=function(){var t=this.parent?this.parent.getNodePath():[];return t.push(this),t},n.prototype.clone=function(){var t=new n(this.editor);if(t.type=this.type,t.field=this.field,t.fieldInnerText=this.fieldInnerText,t.fieldEditable=this.fieldEditable,t.value=this.value,t.valueInnerText=this.valueInnerText,t.expanded=this.expanded,this.childs){var e=[];this.childs.forEach(function(i){var n=i.clone();n.setParent(t),e.push(n)}),t.childs=e}else t.childs=void 0;return t},n.prototype.expand=function(t){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="jsoneditor-expanded"),this.showChilds(),t!==!1&&this.childs.forEach(function(e){e.expand(t)}))},n.prototype.collapse=function(t){this.childs&&(this.hideChilds(),t!==!1&&this.childs.forEach(function(e){e.collapse(t)}),this.dom.expand&&(this.dom.expand.className="jsoneditor-collapsed"),this.expanded=!1)},n.prototype.showChilds=function(){var t=this.childs;if(t&&this.expanded){var e=this.dom.tr,i=e?e.parentNode:void 0;if(i){var n=this.getAppend(),o=e.nextSibling;o?i.insertBefore(n,o):i.appendChild(n),this.childs.forEach(function(t){i.insertBefore(t.getDom(),n),t.showChilds()})}}},n.prototype.hide=function(){var t=this.dom.tr,e=t?t.parentNode:void 0;e&&e.removeChild(t),this.hideChilds()},n.prototype.hideChilds=function(){var t=this.childs;if(t&&this.expanded){var e=this.getAppend();e.parentNode&&e.parentNode.removeChild(e),this.childs.forEach(function(t){t.hide()})}},n.prototype.appendChild=function(t){if(this._hasChilds()){if(t.setParent(this),t.fieldEditable="object"==this.type,"array"==this.type&&(t.index=this.childs.length),this.childs.push(t),this.expanded){var e=t.getDom(),i=this.getAppend(),n=i?i.parentNode:void 0;i&&n&&n.insertBefore(e,i),t.showChilds()}this.updateDom({updateIndexes:!0}),t.updateDom({recurse:!0})}},n.prototype.moveBefore=function(t,e){if(this._hasChilds()){var i=this.dom.tr?this.dom.tr.parentNode:void 0;if(i){var n=document.createElement("tr");n.style.height=i.clientHeight+"px",i.appendChild(n)}t.parent&&t.parent.removeChild(t),e instanceof h?this.appendChild(t):this.insertBefore(t,e),i&&i.removeChild(n)}},n.prototype.moveTo=function(t,e){if(t.parent==this){var i=this.childs.indexOf(t);e>i&&e++}var n=this.childs[e]||this.append;this.moveBefore(t,n)},n.prototype.insertBefore=function(t,e){if(this._hasChilds()){if(e==this.append)t.setParent(this),t.fieldEditable="object"==this.type,this.childs.push(t);else{var i=this.childs.indexOf(e);if(-1==i)throw new Error("Node not found");t.setParent(this),t.fieldEditable="object"==this.type,this.childs.splice(i,0,t)}if(this.expanded){var n=t.getDom(),o=e.getDom(),s=o?o.parentNode:void 0;o&&s&&s.insertBefore(n,o),t.showChilds()}this.updateDom({updateIndexes:!0}),t.updateDom({recurse:!0})}},n.prototype.insertAfter=function(t,e){if(this._hasChilds()){var i=this.childs.indexOf(e),n=this.childs[i+1];n?this.insertBefore(t,n):this.appendChild(t)}},n.prototype.search=function(t){var e,i=[],n=t?t.toLowerCase():void 0;if(delete this.searchField,delete this.searchValue,void 0!=this.field){var o=String(this.field).toLowerCase();e=o.indexOf(n),-1!=e&&(this.searchField=!0,i.push({node:this,elem:"field"})),this._updateDomField()}if(this._hasChilds()){if(this.childs){var s=[];this.childs.forEach(function(e){s=s.concat(e.search(t))}),i=i.concat(s)}if(void 0!=n){var r=!1;0==s.length?this.collapse(r):this.expand(r)}}else{if(void 0!=this.value){var a=String(this.value).toLowerCase();e=a.indexOf(n),-1!=e&&(this.searchValue=!0,i.push({node:this,elem:"value"}))}this._updateDomValue()}return i},n.prototype.scrollTo=function(t){if(!this.dom.tr||!this.dom.tr.parentNode)for(var e=this.parent,i=!1;e;)e.expand(i),e=e.parent;this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,t)},n.focusElement=void 0,n.prototype.focus=function(t){if(n.focusElement=t,this.dom.tr&&this.dom.tr.parentNode){var e=this.dom;switch(t){case"drag":e.drag?e.drag.focus():e.menu.focus();break;case"menu":e.menu.focus();break;case"expand":this._hasChilds()?e.expand.focus():e.field&&this.fieldEditable?(e.field.focus(),a.selectContentEditable(e.field)):e.value&&!this._hasChilds()?(e.value.focus(),a.selectContentEditable(e.value)):e.menu.focus();break;case"field":e.field&&this.fieldEditable?(e.field.focus(),a.selectContentEditable(e.field)):e.value&&!this._hasChilds()?(e.value.focus(),a.selectContentEditable(e.value)):this._hasChilds()?e.expand.focus():e.menu.focus();break;case"value":default:e.value&&!this._hasChilds()?(e.value.focus(),a.selectContentEditable(e.value)):e.field&&this.fieldEditable?(e.field.focus(),a.selectContentEditable(e.field)):this._hasChilds()?e.expand.focus():e.menu.focus()}}},n.select=function(t){setTimeout(function(){a.selectContentEditable(t)},0)},n.prototype.blur=function(){this._getDomValue(!1),this._getDomField(!1)},n.prototype.containsNode=function(t){if(this==t)return!0;var e=this.childs;if(e)for(var i=0,n=e.length;n>i;i++)if(e[i].containsNode(t))return!0;return!1},n.prototype._move=function(t,e){if(t!=e){if(t.containsNode(this))throw new Error("Cannot move a field into a child of itself");t.parent&&t.parent.removeChild(t);var i=t.clone();t.clearDom(),e?this.insertBefore(i,e):this.appendChild(i)}},n.prototype.removeChild=function(t){if(this.childs){var e=this.childs.indexOf(t);if(-1!=e){t.hide(),delete t.searchField,delete t.searchValue;var i=this.childs.splice(e,1)[0];return i.parent=null,this.updateDom({updateIndexes:!0}),i}}},n.prototype._remove=function(t){this.removeChild(t)},n.prototype.changeType=function(t){var e=this.type;if(e!=t){if("string"!=t&&"auto"!=t||"string"!=e&&"auto"!=e){var i,n=this.dom.tr?this.dom.tr.parentNode:void 0;i=this.expanded?this.getAppend():this.getDom();var o=i&&i.parentNode?i.nextSibling:void 0;this.hide(),this.clearDom(),this.type=t,"object"==t?(this.childs||(this.childs=[]),this.childs.forEach(function(t,e){t.clearDom(),delete t.index,t.fieldEditable=!0,void 0==t.field&&(t.field="")}),"string"!=e&&"auto"!=e||(this.expanded=!0)):"array"==t?(this.childs||(this.childs=[]),this.childs.forEach(function(t,e){t.clearDom(),t.fieldEditable=!1,t.index=e}),"string"!=e&&"auto"!=e||(this.expanded=!0)):this.expanded=!1,n&&(o?n.insertBefore(this.getDom(),o):n.appendChild(this.getDom())),this.showChilds()}else this.type=t;"auto"!=t&&"string"!=t||("string"==t?this.value=String(this.value):this.value=this._stringCast(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0})}},n.prototype._getDomValue=function(t){if(this.dom.value&&"array"!=this.type&&"object"!=this.type&&(this.valueInnerText=a.getInnerText(this.dom.value)),void 0!=this.valueInnerText)try{var e;if("string"==this.type)e=this._unescapeHTML(this.valueInnerText);else{var i=this._unescapeHTML(this.valueInnerText);e=this._stringCast(i)}e!==this.value&&(this.value=e,this._debouncedOnChangeValue())}catch(n){if(this.value=void 0,t!==!0)throw n}},n.prototype._onChangeValue=function(){var t=this.editor.getSelection();if(t.range){var e=a.textDiff(String(this.value),String(this.previousValue));t.range.startOffset=e.start,t.range.endOffset=e.end}var i=this.editor.getSelection();if(i.range){var n=a.textDiff(String(this.previousValue),String(this.value));i.range.startOffset=n.start,i.range.endOffset=n.end}this.editor._onAction("editValue",{node:this,oldValue:this.previousValue,newValue:this.value,oldSelection:t,newSelection:i}),this.previousValue=this.value},n.prototype._onChangeField=function(){var t=this.editor.getSelection();if(t.range){var e=a.textDiff(this.field,this.previousField);t.range.startOffset=e.start,t.range.endOffset=e.end}var i=this.editor.getSelection();if(i.range){var n=a.textDiff(this.previousField,this.field);i.range.startOffset=n.start,i.range.endOffset=n.end}this.editor._onAction("editField",{node:this,oldValue:this.previousField,newValue:this.field,oldSelection:t,newSelection:i}),this.previousField=this.field},n.prototype._updateDomValue=function(){var t=this.dom.value;if(t){var e=["jsoneditor-value"],i=this.value,n="auto"==this.type?a.type(i):this.type,o="string"==n&&a.isUrl(i);e.push("jsoneditor-"+n),o&&e.push("jsoneditor-url");var s=""==String(this.value)&&"array"!=this.type&&"object"!=this.type;if(s&&e.push("jsoneditor-empty"),this.searchValueActive&&e.push("jsoneditor-highlight-active"),this.searchValue&&e.push("jsoneditor-highlight"),t.className=e.join(" "),"array"==n||"object"==n){var r=this.childs?this.childs.length:0;t.title=this.type+" containing "+r+" items"}else o&&this.editable.value?t.title="Ctrl+Click or Ctrl+Enter to open url in new window":t.title="";if("boolean"===n&&this.editable.value?(this.dom.checkbox||(this.dom.checkbox=document.createElement("input"),this.dom.checkbox.type="checkbox",this.dom.tdCheckbox=document.createElement("td"),this.dom.tdCheckbox.className="jsoneditor-tree",this.dom.tdCheckbox.appendChild(this.dom.checkbox),this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox,this.dom.tdValue)),this.dom.checkbox.checked=this.value):this.dom.tdCheckbox&&(this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox),delete this.dom.tdCheckbox,delete this.dom.checkbox),this["enum"]&&this.editable.value){if(!this.dom.select){this.dom.select=document.createElement("select"),this.id=this.field+"_"+(new Date).getUTCMilliseconds(),this.dom.select.id=this.id,this.dom.select.name=this.dom.select.id,this.dom.select.option=document.createElement("option"),this.dom.select.option.value="",this.dom.select.option.innerHTML="--",this.dom.select.appendChild(this.dom.select.option);for(var h=0;h<this["enum"].length;h++)this.dom.select.option=document.createElement("option"),this.dom.select.option.value=this["enum"][h],this.dom.select.option.innerHTML=this["enum"][h],this.dom.select.option.value==this.value&&(this.dom.select.option.selected=!0),this.dom.select.appendChild(this.dom.select.option);this.dom.tdSelect=document.createElement("td"),this.dom.tdSelect.className="jsoneditor-tree",this.dom.tdSelect.appendChild(this.dom.select),this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect,this.dom.tdValue)}!this.schema||this.schema.hasOwnProperty("oneOf")||this.schema.hasOwnProperty("anyOf")||this.schema.hasOwnProperty("allOf")?delete this.valueFieldHTML:(this.valueFieldHTML=this.dom.tdValue.innerHTML,this.dom.tdValue.style.visibility="hidden",this.dom.tdValue.innerHTML="")}else this.dom.tdSelect&&(this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect),delete this.dom.tdSelect,delete this.dom.select,this.dom.tdValue.innerHTML=this.valueFieldHTML,this.dom.tdValue.style.visibility="",delete this.valueFieldHTML);a.stripFormatting(t)}},n.prototype._updateDomField=function(){var t=this.dom.field;if(t){var e=""==String(this.field)&&"array"!=this.parent.type;e?a.addClassName(t,"jsoneditor-empty"):a.removeClassName(t,"jsoneditor-empty"),this.searchFieldActive?a.addClassName(t,"jsoneditor-highlight-active"):a.removeClassName(t,"jsoneditor-highlight-active"),this.searchField?a.addClassName(t,"jsoneditor-highlight"):a.removeClassName(t,"jsoneditor-highlight"),a.stripFormatting(t)}},n.prototype._getDomField=function(t){if(this.dom.field&&this.fieldEditable&&(this.fieldInnerText=a.getInnerText(this.dom.field)),void 0!=this.fieldInnerText)try{var e=this._unescapeHTML(this.fieldInnerText);e!==this.field&&(this.field=e,this._debouncedOnChangeField())}catch(i){if(this.field=void 0,t!==!0)throw i}},n.prototype.validate=function(){var t=[];if("object"===this.type){for(var e={},i=[],n=0;n<this.childs.length;n++){var o=this.childs[n];e[o.field]&&i.push(o.field),e[o.field]=!0}i.length>0&&(t=this.childs.filter(function(t){return-1!==i.indexOf(t.field)}).map(function(t){return{node:t,error:{message:'duplicate key "'+t.field+'"'}}}))}if(this.childs)for(var n=0;n<this.childs.length;n++){var s=this.childs[n].validate();s.length>0&&(t=t.concat(s))}return t},n.prototype.clearDom=function(){this.dom={}},n.prototype.getDom=function(){var t=this.dom;if(t.tr)return t.tr;if(this._updateEditability(),t.tr=document.createElement("tr"),t.tr.node=this,"tree"===this.editor.options.mode){var e=document.createElement("td");if(this.editable.field&&this.parent){var i=document.createElement("button");t.drag=i,i.className="jsoneditor-dragarea",i.title="Drag to move this field (Alt+Shift+Arrows)",e.appendChild(i)}t.tr.appendChild(e);var n=document.createElement("td"),o=document.createElement("button");t.menu=o,o.className="jsoneditor-contextmenu",o.title="Click to open the actions menu (Ctrl+M)",n.appendChild(t.menu),t.tr.appendChild(n)}var s=document.createElement("td");return t.tr.appendChild(s),t.tree=this._createDomTree(),s.appendChild(t.tree),this.updateDom({updateIndexes:!0}),t.tr},n.onDragStart=function(t,e){if(!Array.isArray(t))return n.onDragStart([t],e);if(0!==t.length){var i=t[0],o=t[t.length-1],s=n.getNodeFromTarget(e.target),r=o._nextSibling(),h=i.editor,l=a.getAbsoluteTop(s.dom.tr)-a.getAbsoluteTop(i.dom.tr);h.mousemove||(h.mousemove=a.addEventListener(window,"mousemove",function(e){n.onDrag(t,e)})),h.mouseup||(h.mouseup=a.addEventListener(window,"mouseup",function(e){n.onDragEnd(t,e)})),h.highlighter.lock(),h.drag={oldCursor:document.body.style.cursor,oldSelection:h.getSelection(),oldBeforeNode:r,mouseX:e.pageX,offsetY:l,level:i.getLevel()},document.body.style.cursor="move",e.preventDefault()}},n.onDrag=function(t,e){if(!Array.isArray(t))return n.onDrag([t],e);if(0!==t.length){var i,o,s,r,l,d,c,u,g,f,p,m,v,w,y=t[0].editor,R=e.pageY-y.drag.offsetY,A=e.pageX,b=!1,x=t[0];if(i=x.dom.tr,g=a.getAbsoluteTop(i),m=i.offsetHeight,g>R){o=i;do o=o.previousSibling,c=n.getNodeFromTarget(o),f=o?a.getAbsoluteTop(o):0;while(o&&f>R);c&&!c.parent&&(c=void 0),c||(d=i.parentNode.firstChild,o=d?d.nextSibling:void 0,c=n.getNodeFromTarget(o),c==x&&(c=void 0)),c&&(o=c.dom.tr,f=o?a.getAbsoluteTop(o):0,R>f+m&&(c=void 0)),c&&(t.forEach(function(t){c.parent.moveBefore(t,c)}),b=!0)}else{var L=t[t.length-1];if(l=L.expanded&&L.append?L.append.getDom():L.dom.tr,r=l?l.nextSibling:void 0){p=a.getAbsoluteTop(r),s=r;do u=n.getNodeFromTarget(s),s&&(v=s.nextSibling?a.getAbsoluteTop(s.nextSibling):0,w=s?v-p:0,u.parent.childs.length==t.length&&u.parent.childs[t.length-1]==L&&(g+=27)),s=s.nextSibling;while(s&&R>g+w);if(u&&u.parent){var C=A-y.drag.mouseX,k=Math.round(C/24/2),E=y.drag.level+k,B=u.getLevel();for(o=u.dom.tr.previousSibling;E>B&&o;){c=n.getNodeFromTarget(o);var M=t.some(function(t){return t===c||c._isChildOf(t)});if(M);else{if(!(c instanceof h))break;var S=c.parent.childs;if(S.length==t.length&&S[t.length-1]==L)break;u=n.getNodeFromTarget(o),B=u.getLevel()}o=o.previousSibling}l.nextSibling!=u.dom.tr&&(t.forEach(function(t){u.parent.moveBefore(t,u)}),b=!0)}}}b&&(y.drag.mouseX=A,y.drag.level=x.getLevel()),y.startAutoScroll(R),e.preventDefault()}},n.onDragEnd=function(t,e){if(!Array.isArray(t))return n.onDrag([t],e);if(0!==t.length){var i=t[0],o=i.editor,s=i.parent,r=s.childs.indexOf(i),h=s.childs[r+t.length]||s.append;t[0]&&t[0].dom.menu.focus();var l={nodes:t,oldSelection:o.drag.oldSelection,newSelection:o.getSelection(),oldBeforeNode:o.drag.oldBeforeNode,newBeforeNode:h};l.oldBeforeNode!=l.newBeforeNode&&o._onAction("moveNodes",l),document.body.style.cursor=o.drag.oldCursor,o.highlighter.unlock(),t.forEach(function(t){e.target!==t.dom.drag&&e.target!==t.dom.menu&&o.highlighter.unhighlight()}),delete o.drag,o.mousemove&&(a.removeEventListener(window,"mousemove",o.mousemove),delete o.mousemove),o.mouseup&&(a.removeEventListener(window,"mouseup",o.mouseup),delete o.mouseup),o.stopAutoScroll(),e.preventDefault()}},n.prototype._isChildOf=function(t){for(var e=this.parent;e;){if(e==t)return!0;e=e.parent}return!1},n.prototype._createDomField=function(){return document.createElement("div")},n.prototype.setHighlight=function(t){this.dom.tr&&(t?a.addClassName(this.dom.tr,"jsoneditor-highlight"):a.removeClassName(this.dom.tr,"jsoneditor-highlight"),this.append&&this.append.setHighlight(t),this.childs&&this.childs.forEach(function(e){e.setHighlight(t)}))},n.prototype.setSelected=function(t,e){this.selected=t,this.dom.tr&&(t?a.addClassName(this.dom.tr,"jsoneditor-selected"):a.removeClassName(this.dom.tr,"jsoneditor-selected"),e?a.addClassName(this.dom.tr,"jsoneditor-first"):a.removeClassName(this.dom.tr,"jsoneditor-first"),this.append&&this.append.setSelected(t),this.childs&&this.childs.forEach(function(e){e.setSelected(t)}))},n.prototype.updateValue=function(t){this.value=t,this.updateDom()},n.prototype.updateField=function(t){this.field=t,this.updateDom()},n.prototype.updateDom=function(t){var e=this.dom.tree;e&&(e.style.marginLeft=24*this.getLevel()+"px");var i=this.dom.field;if(i){this.fieldEditable?(i.contentEditable=this.editable.field,i.spellcheck=!1,i.className="jsoneditor-field"):i.className="jsoneditor-readonly";var n;n=void 0!=this.index?this.index:void 0!=this.field?this.field:this._hasChilds()?this.type:"",i.innerHTML=this._escapeHTML(n),this._updateSchema()}var o=this.dom.value;if(o){var s=this.childs?this.childs.length:0;"array"==this.type?(o.innerHTML="["+s+"]",a.addClassName(this.dom.tr,"jsoneditor-expandable")):"object"==this.type?(o.innerHTML="{"+s+"}",a.addClassName(this.dom.tr,"jsoneditor-expandable")):(o.innerHTML=this._escapeHTML(this.value),a.removeClassName(this.dom.tr,"jsoneditor-expandable"))}this._updateDomField(),this._updateDomValue(),t&&t.updateIndexes===!0&&this._updateDomIndexes(),t&&t.recurse===!0&&this.childs&&this.childs.forEach(function(e){e.updateDom(t)}),this.append&&this.append.updateDom()},n.prototype._updateSchema=function(){this.editor&&this.editor.options&&(this.schema=n._findSchema(this.editor.options.schema,this.getPath()),this.schema?this["enum"]=n._findEnum(this.schema):delete this["enum"])},n._findEnum=function(t){if(t["enum"])return t["enum"];var e=t.oneOf||t.anyOf||t.allOf;if(e){var i=e.filter(function(t){return t["enum"]});if(i.length>0)return i[0]["enum"]}return null},n._findSchema=function(t,e){for(var i=t,n=0;n<e.length&&i;n++){var o=e[n];"string"==typeof o&&i.properties?i=i.properties[o]||null:"number"==typeof o&&i.items&&(i=i.items)}return i},n.prototype._updateDomIndexes=function(){var t=this.dom.value,e=this.childs;t&&e&&("array"==this.type?e.forEach(function(t,e){t.index=e;var i=t.dom.field;i&&(i.innerHTML=e)}):"object"==this.type&&e.forEach(function(t){void 0!=t.index&&(delete t.index,void 0==t.field&&(t.field=""))}))},n.prototype._createDomValue=function(){var t;return"array"==this.type?(t=document.createElement("div"),t.innerHTML="[...]"):"object"==this.type?(t=document.createElement("div"),t.innerHTML="{...}"):!this.editable.value&&a.isUrl(this.value)?(t=document.createElement("a"),t.href=this.value,t.target="_blank",t.innerHTML=this._escapeHTML(this.value)):(t=document.createElement("div"),t.contentEditable=this.editable.value,t.spellcheck=!1,t.innerHTML=this._escapeHTML(this.value)),t},n.prototype._createDomExpandButton=function(){var t=document.createElement("button");return this._hasChilds()?(t.className=this.expanded?"jsoneditor-expanded":"jsoneditor-collapsed",t.title="Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs."):(t.className="jsoneditor-invisible",t.title=""),t},n.prototype._createDomTree=function(){var t=this.dom,e=document.createElement("table"),i=document.createElement("tbody");e.style.borderCollapse="collapse",e.className="jsoneditor-values",e.appendChild(i);var n=document.createElement("tr");i.appendChild(n);var o=document.createElement("td");o.className="jsoneditor-tree",n.appendChild(o),t.expand=this._createDomExpandButton(),o.appendChild(t.expand),t.tdExpand=o;var s=document.createElement("td");s.className="jsoneditor-tree",n.appendChild(s),t.field=this._createDomField(),s.appendChild(t.field),t.tdField=s;var r=document.createElement("td");r.className="jsoneditor-tree",n.appendChild(r),"object"!=this.type&&"array"!=this.type&&(r.appendChild(document.createTextNode(":")),r.className="jsoneditor-separator"),t.tdSeparator=r;var a=document.createElement("td");return a.className="jsoneditor-tree",n.appendChild(a),t.value=this._createDomValue(),a.appendChild(t.value),t.tdValue=a,e},n.prototype.onEvent=function(t){var e=t.type,i=t.target||t.srcElement,n=this.dom,o=this,s=this._hasChilds();if(i!=n.drag&&i!=n.menu||("mouseover"==e?this.editor.highlighter.highlight(this):"mouseout"==e&&this.editor.highlighter.unhighlight()),"click"==e&&i==n.menu){var r=o.editor.highlighter;r.highlight(o),r.lock(),a.addClassName(n.menu,"jsoneditor-selected"),this.showContextMenu(n.menu,function(){a.removeClassName(n.menu,"jsoneditor-selected"),r.unlock(),r.unhighlight()})}if("click"==e&&(i==n.expand||("view"===o.editor.options.mode||"form"===o.editor.options.mode)&&"DIV"===i.nodeName)&&s){var h=t.ctrlKey;this._onExpand(h)}"change"==e&&i==n.checkbox&&(this.dom.value.innerHTML=!this.value,this._getDomValue()),"change"==e&&i==n.select&&(this.dom.value.innerHTML=n.select.value,this._getDomValue(),this._updateDomValue());var l=n.value;if(i==l)switch(e){case"blur":case"change":this._getDomValue(!0),this._updateDomValue(),this.value&&(l.innerHTML=this._escapeHTML(this.value));break;case"input":this._getDomValue(!0),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"click":!t.ctrlKey&&this.editable.value||a.isUrl(this.value)&&window.open(this.value,"_blank");break;case"keyup":this._getDomValue(!0),this._updateDomValue();break;case"cut":case"paste":setTimeout(function(){o._getDomValue(!0),o._updateDomValue()},1)}var d=n.field;if(i==d)switch(e){case"blur":case"change":this._getDomField(!0),this._updateDomField(),this.field&&(d.innerHTML=this._escapeHTML(this.field));break;case"input":this._getDomField(!0),this._updateSchema(),this._updateDomField(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"keyup":this._getDomField(!0),this._updateDomField();break;case"cut":case"paste":setTimeout(function(){o._getDomField(!0),o._updateDomField()},1)}var c=n.tree;if(i==c.parentNode&&"click"==e&&!t.hasMoved){var u=void 0!=t.offsetX?t.offsetX<24*(this.getLevel()+1):t.pageX<a.getAbsoluteLeft(n.tdSeparator);u||s?d&&(a.setEndOfContentEditable(d),d.focus()):l&&!this["enum"]&&(a.setEndOfContentEditable(l),l.focus())}(i!=n.tdExpand||s)&&i!=n.tdField&&i!=n.tdSeparator||"click"!=e||t.hasMoved||d&&(a.setEndOfContentEditable(d),d.focus()),"keydown"==e&&this.onKeyDown(t)},n.prototype.onKeyDown=function(t){var e,i,o,s,r,l,d,c,u=t.which||t.keyCode,g=t.target||t.srcElement,f=t.ctrlKey,p=t.shiftKey,m=t.altKey,v=!1,w="tree"===this.editor.options.mode,y=this.editor.multiselection.nodes.length>0?this.editor.multiselection.nodes:[this],R=y[0],A=y[y.length-1];if(13==u){if(g==this.dom.value)this.editable.value&&!t.ctrlKey||a.isUrl(this.value)&&(window.open(this.value,"_blank"),v=!0);else if(g==this.dom.expand){var b=this._hasChilds();if(b){var x=t.ctrlKey;this._onExpand(x),g.focus(),v=!0}}}else if(68==u)f&&w&&(n.onDuplicate(y),v=!0);else if(69==u)f&&(this._onExpand(p),g.focus(),v=!0);else if(77==u&&w)f&&(this.showContextMenu(g),v=!0);else if(46==u&&w)f&&(n.onRemove(y),v=!0);else if(45==u&&w)f&&!p?(this._onInsertBefore(),v=!0):f&&p&&(this._onInsertAfter(),v=!0);else if(35==u){if(m){var L=this._lastNode();L&&L.focus(n.focusElement||this._getElementName(g)),v=!0}}else if(36==u){if(m){var C=this._firstNode();C&&C.focus(n.focusElement||this._getElementName(g)),v=!0}}else if(37==u){if(m&&!p){var k=this._previousElement(g);k&&this.focus(this._getElementName(k)),v=!0}else if(m&&p&&w){if(A.expanded){var E=A.getAppend();o=E?E.nextSibling:void 0}else{var B=A.getDom();o=B.nextSibling}o&&(i=n.getNodeFromTarget(o),s=o.nextSibling,F=n.getNodeFromTarget(s),i&&i instanceof h&&1!=A.parent.childs.length&&F&&F.parent&&(r=this.editor.getSelection(),l=A._nextSibling(),y.forEach(function(t){F.parent.moveBefore(t,F)}),this.focus(n.focusElement||this._getElementName(g)),this.editor._onAction("moveNodes",{nodes:y,oldBeforeNode:l,newBeforeNode:F,oldSelection:r,newSelection:this.editor.getSelection()})))}}else if(38==u)m&&!p?(e=this._previousNode(),e&&(this.editor.deselect(!0),e.focus(n.focusElement||this._getElementName(g))),v=!0):!m&&f&&p&&w?(e=this._previousNode(),e&&(c=this.editor.multiselection,c.start=c.start||this,c.end=e,d=this.editor._findTopLevelNodes(c.start,c.end),this.editor.select(d),e.focus("field")),v=!0):m&&p&&w&&(e=R._previousNode(),e&&e.parent&&(r=this.editor.getSelection(),l=A._nextSibling(),y.forEach(function(t){e.parent.moveBefore(t,e)}),this.focus(n.focusElement||this._getElementName(g)),this.editor._onAction("moveNodes",{nodes:y,oldBeforeNode:l,newBeforeNode:e,oldSelection:r,newSelection:this.editor.getSelection()})),v=!0);else if(39==u){if(m&&!p){var M=this._nextElement(g);M&&this.focus(this._getElementName(M)),v=!0}else if(m&&p&&w){B=R.getDom();var S=B.previousSibling;S&&(e=n.getNodeFromTarget(S),e&&e.parent&&e instanceof h&&!e.isVisible()&&(r=this.editor.getSelection(),l=A._nextSibling(),y.forEach(function(t){e.parent.moveBefore(t,e)}),this.focus(n.focusElement||this._getElementName(g)),this.editor._onAction("moveNodes",{nodes:y,oldBeforeNode:l,newBeforeNode:e,oldSelection:r,newSelection:this.editor.getSelection()})))}}else if(40==u)if(m&&!p)i=this._nextNode(),i&&(this.editor.deselect(!0),i.focus(n.focusElement||this._getElementName(g))),v=!0;else if(!m&&f&&p&&w)i=this._nextNode(),i&&(c=this.editor.multiselection,c.start=c.start||this,c.end=i,d=this.editor._findTopLevelNodes(c.start,c.end),this.editor.select(d),i.focus("field")),v=!0;else if(m&&p&&w){i=A.expanded?A.append?A.append._nextNode():void 0:A._nextNode();var F=i&&(i._nextNode()||i.parent.append);F&&F.parent&&(r=this.editor.getSelection(),l=A._nextSibling(),y.forEach(function(t){F.parent.moveBefore(t,F)}),this.focus(n.focusElement||this._getElementName(g)),this.editor._onAction("moveNodes",{nodes:y,oldBeforeNode:l,newBeforeNode:F,oldSelection:r,newSelection:this.editor.getSelection()})),v=!0}v&&(t.preventDefault(),t.stopPropagation())},n.prototype._onExpand=function(t){if(t){var e=this.dom.tr.parentNode,i=e.parentNode,n=i.scrollTop;i.removeChild(e)}this.expanded?this.collapse(t):this.expand(t),t&&(i.appendChild(e),i.scrollTop=n)},n.onRemove=function(t){if(!Array.isArray(t))return n.onRemove([t]);if(t&&t.length>0){var e=t[0],i=e.parent,o=e.editor,s=e.getIndex();o.highlighter.unhighlight();var r=o.getSelection();n.blurNodes(t);var a=o.getSelection();t.forEach(function(t){t.parent._remove(t)}),o._onAction("removeNodes",{nodes:t.slice(0),parent:i,index:s,oldSelection:r,newSelection:a})}},n.onDuplicate=function(t){if(!Array.isArray(t))return n.onDuplicate([t]);if(t&&t.length>0){var e=t[t.length-1],i=e.parent,o=e.editor;o.deselect(o.multiselection.nodes);var s=o.getSelection(),r=e,a=t.map(function(t){var e=t.clone();return i.insertAfter(e,r),r=e,e});1===t.length?a[0].focus():o.select(a);var h=o.getSelection();o._onAction("duplicateNodes",{afterNode:e,nodes:a,parent:i,oldSelection:s,newSelection:h})}},n.prototype._onInsertBefore=function(t,e,i){var o=this.editor.getSelection(),s=new n(this.editor,{field:void 0!=t?t:"",value:void 0!=e?e:"",type:i});s.expand(!0),this.parent.insertBefore(s,this),this.editor.highlighter.unhighlight(),s.focus("field");var r=this.editor.getSelection();this.editor._onAction("insertBeforeNodes",{nodes:[s],beforeNode:this,parent:this.parent,oldSelection:o,newSelection:r})},n.prototype._onInsertAfter=function(t,e,i){var o=this.editor.getSelection(),s=new n(this.editor,{field:void 0!=t?t:"",value:void 0!=e?e:"",type:i});s.expand(!0),this.parent.insertAfter(s,this),this.editor.highlighter.unhighlight(),s.focus("field");var r=this.editor.getSelection();this.editor._onAction("insertAfterNodes",{nodes:[s],afterNode:this,parent:this.parent,oldSelection:o,newSelection:r})},n.prototype._onAppend=function(t,e,i){var o=this.editor.getSelection(),s=new n(this.editor,{field:void 0!=t?t:"",value:void 0!=e?e:"",type:i});s.expand(!0),this.parent.appendChild(s),this.editor.highlighter.unhighlight(),s.focus("field");var r=this.editor.getSelection();this.editor._onAction("appendNodes",{nodes:[s],parent:this.parent,oldSelection:o,newSelection:r})},n.prototype._onChangeType=function(t){var e=this.type;if(t!=e){var i=this.editor.getSelection();this.changeType(t);var n=this.editor.getSelection();this.editor._onAction("changeType",{node:this,oldType:e,newType:t,oldSelection:i,newSelection:n})}},n.prototype.sort=function(t){if(this._hasChilds()){var e="desc"==t?-1:1,i="array"==this.type?"value":"field";this.hideChilds();var n=this.childs,s=this.sortOrder;this.childs=this.childs.concat(),this.childs.sort(function(t,n){return e*o(t[i],n[i])}),this.sortOrder=1==e?"asc":"desc",this.editor._onAction("sort",{node:this,oldChilds:n,oldSort:s,newChilds:this.childs,newSort:this.sortOrder}),this.showChilds()}},n.prototype.getAppend=function(){return this.append||(this.append=new h(this.editor),this.append.setParent(this)),this.append.getDom()},n.getNodeFromTarget=function(t){for(;t;){if(t.node)return t.node;t=t.parentNode;
}},n.blurNodes=function(t){if(!Array.isArray(t))return void n.blurNodes([t]);var e=t[0],i=e.parent,o=e.getIndex();i.childs[o+t.length]?i.childs[o+t.length].focus():i.childs[o-1]?i.childs[o-1].focus():i.focus()},n.prototype._nextSibling=function(){var t=this.parent.childs.indexOf(this);return this.parent.childs[t+1]||this.parent.append},n.prototype._previousNode=function(){var t=null,e=this.getDom();if(e&&e.parentNode){var i=e;do i=i.previousSibling,t=n.getNodeFromTarget(i);while(i&&t instanceof h&&!t.isVisible())}return t},n.prototype._nextNode=function(){var t=null,e=this.getDom();if(e&&e.parentNode){var i=e;do i=i.nextSibling,t=n.getNodeFromTarget(i);while(i&&t instanceof h&&!t.isVisible())}return t},n.prototype._firstNode=function(){var t=null,e=this.getDom();if(e&&e.parentNode){var i=e.parentNode.firstChild;t=n.getNodeFromTarget(i)}return t},n.prototype._lastNode=function(){var t=null,e=this.getDom();if(e&&e.parentNode){var i=e.parentNode.lastChild;for(t=n.getNodeFromTarget(i);i&&t instanceof h&&!t.isVisible();)i=i.previousSibling,t=n.getNodeFromTarget(i)}return t},n.prototype._previousElement=function(t){var e=this.dom;switch(t){case e.value:if(this.fieldEditable)return e.field;case e.field:if(this._hasChilds())return e.expand;case e.expand:return e.menu;case e.menu:if(e.drag)return e.drag;default:return null}},n.prototype._nextElement=function(t){var e=this.dom;switch(t){case e.drag:return e.menu;case e.menu:if(this._hasChilds())return e.expand;case e.expand:if(this.fieldEditable)return e.field;case e.field:if(!this._hasChilds())return e.value;default:return null}},n.prototype._getElementName=function(t){var e=this.dom;for(var i in e)if(e.hasOwnProperty(i)&&e[i]==t)return i;return null},n.prototype._hasChilds=function(){return"array"==this.type||"object"==this.type},n.TYPE_TITLES={auto:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',object:'Field type "object". An object contains an unordered set of key/value pairs.',array:'Field type "array". An array contains an ordered collection of values.',string:'Field type "string". Field type is not determined from the value, but always returned as string.'},n.prototype.showContextMenu=function(t,e){var i=this,o=n.TYPE_TITLES,r=[];if(this.editable.value&&r.push({text:"Type",title:"Change the type of this field",className:"jsoneditor-type-"+this.type,submenu:[{text:"Auto",className:"jsoneditor-type-auto"+("auto"==this.type?" jsoneditor-selected":""),title:o.auto,click:function(){i._onChangeType("auto")}},{text:"Array",className:"jsoneditor-type-array"+("array"==this.type?" jsoneditor-selected":""),title:o.array,click:function(){i._onChangeType("array")}},{text:"Object",className:"jsoneditor-type-object"+("object"==this.type?" jsoneditor-selected":""),title:o.object,click:function(){i._onChangeType("object")}},{text:"String",className:"jsoneditor-type-string"+("string"==this.type?" jsoneditor-selected":""),title:o.string,click:function(){i._onChangeType("string")}}]}),this._hasChilds()){var a="asc"==this.sortOrder?"desc":"asc";r.push({text:"Sort",title:"Sort the childs of this "+this.type,className:"jsoneditor-sort-"+a,click:function(){i.sort(a)},submenu:[{text:"Ascending",className:"jsoneditor-sort-asc",title:"Sort the childs of this "+this.type+" in ascending order",click:function(){i.sort("asc")}},{text:"Descending",className:"jsoneditor-sort-desc",title:"Sort the childs of this "+this.type+" in descending order",click:function(){i.sort("desc")}}]})}if(this.parent&&this.parent._hasChilds()){r.length&&r.push({type:"separator"});var h=i.parent.childs;i==h[h.length-1]&&r.push({text:"Append",title:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"jsoneditor-append",click:function(){i._onAppend("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:o.auto,click:function(){i._onAppend("","","auto")}},{text:"Array",className:"jsoneditor-type-array",title:o.array,click:function(){i._onAppend("",[])}},{text:"Object",className:"jsoneditor-type-object",title:o.object,click:function(){i._onAppend("",{})}},{text:"String",className:"jsoneditor-type-string",title:o.string,click:function(){i._onAppend("","","string")}}]}),r.push({text:"Insert",title:"Insert a new field with type 'auto' before this field (Ctrl+Ins)",submenuTitle:"Select the type of the field to be inserted",className:"jsoneditor-insert",click:function(){i._onInsertBefore("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:o.auto,click:function(){i._onInsertBefore("","","auto")}},{text:"Array",className:"jsoneditor-type-array",title:o.array,click:function(){i._onInsertBefore("",[])}},{text:"Object",className:"jsoneditor-type-object",title:o.object,click:function(){i._onInsertBefore("",{})}},{text:"String",className:"jsoneditor-type-string",title:o.string,click:function(){i._onInsertBefore("","","string")}}]}),this.editable.field&&(r.push({text:"Duplicate",title:"Duplicate this field (Ctrl+D)",className:"jsoneditor-duplicate",click:function(){n.onDuplicate(i)}}),r.push({text:"Remove",title:"Remove this field (Ctrl+Del)",className:"jsoneditor-remove",click:function(){n.onRemove(i)}}))}var l=new s(r,{close:e});l.show(t,this.editor.content)},n.prototype._getType=function(t){return t instanceof Array?"array":t instanceof Object?"object":"string"==typeof t&&"string"!=typeof this._stringCast(t)?"string":"auto"},n.prototype._stringCast=function(t){var e=t.toLowerCase(),i=Number(t),n=parseFloat(t);return""==t?"":"null"==e?null:"true"==e||"false"!=e&&(isNaN(i)||isNaN(n)?t:i)},n.prototype._escapeHTML=function(t){if("string"!=typeof t)return String(t);var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),i=JSON.stringify(e),n=i.substring(1,i.length-1);return this.editor.options.escapeUnicode===!0&&(n=a.escapeUnicodeChars(n)),n},n.prototype._unescapeHTML=function(t){var e='"'+this._escapeJSON(t)+'"',i=a.parse(e);return i.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ").replace(/&amp;/g,"&")},n.prototype._escapeJSON=function(t){for(var e="",i=0;i<t.length;){var n=t.charAt(i);"\n"==n?e+="\\n":"\\"==n?(e+=n,i++,n=t.charAt(i),""!==n&&-1!='"\\/bfnrtu'.indexOf(n)||(e+="\\"),e+=n):e+='"'==n?'\\"':n,i++}return e};var h=r(n);t.exports=n},function(t,e){t.exports=function i(t,e){"use strict";var n,o,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,r=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,h=/^0x[0-9a-f]+$/i,l=/^0/,d=function(t){return i.insensitive&&(""+t).toLowerCase()||""+t},c=d(t).replace(r,"")||"",u=d(e).replace(r,"")||"",g=c.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=u.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=parseInt(c.match(h),16)||1!==g.length&&c.match(a)&&Date.parse(c),m=parseInt(u.match(h),16)||p&&u.match(a)&&Date.parse(u)||null;if(m){if(m>p)return-1;if(p>m)return 1}for(var v=0,w=Math.max(g.length,f.length);w>v;v++){if(n=!(g[v]||"").match(l)&&parseFloat(g[v])||g[v]||0,o=!(f[v]||"").match(l)&&parseFloat(f[v])||f[v]||0,isNaN(n)!==isNaN(o))return isNaN(n)?1:-1;if(typeof n!=typeof o&&(n+="",o+=""),o>n)return-1;if(n>o)return 1}return 0}},function(t,e,i){"use strict";function n(t){function e(t){this.editor=t,this.dom={}}return e.prototype=new t,e.prototype.getDom=function(){var t=this.dom;if(t.tr)return t.tr;this._updateEditability();var e=document.createElement("tr");if(e.node=this,t.tr=e,"tree"===this.editor.options.mode){t.tdDrag=document.createElement("td");var i=document.createElement("td");t.tdMenu=i;var n=document.createElement("button");n.className="jsoneditor-contextmenu",n.title="Click to open the actions menu (Ctrl+M)",t.menu=n,i.appendChild(t.menu)}var o=document.createElement("td"),s=document.createElement("div");return s.innerHTML="(empty)",s.className="jsoneditor-readonly",o.appendChild(s),t.td=o,t.text=s,this.updateDom(),e},e.prototype.updateDom=function(){var t=this.dom,e=t.td;e&&(e.style.paddingLeft=24*this.getLevel()+26+"px");var i=t.text;i&&(i.innerHTML="(empty "+this.parent.type+")");var n=t.tr;this.isVisible()?t.tr.firstChild||(t.tdDrag&&n.appendChild(t.tdDrag),t.tdMenu&&n.appendChild(t.tdMenu),n.appendChild(e)):t.tr.firstChild&&(t.tdDrag&&n.removeChild(t.tdDrag),t.tdMenu&&n.removeChild(t.tdMenu),n.removeChild(e))},e.prototype.isVisible=function(){return 0==this.parent.childs.length},e.prototype.showContextMenu=function(e,i){var n=this,o=t.TYPE_TITLES,r=[{text:"Append",title:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"jsoneditor-insert",click:function(){n._onAppend("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:o.auto,click:function(){n._onAppend("","","auto")}},{text:"Array",className:"jsoneditor-type-array",title:o.array,click:function(){n._onAppend("",[])}},{text:"Object",className:"jsoneditor-type-object",title:o.object,click:function(){n._onAppend("",{})}},{text:"String",className:"jsoneditor-type-string",title:o.string,click:function(){n._onAppend("","","string")}}]}],a=new s(r,{close:i});a.show(e,this.editor.content)},e.prototype.onEvent=function(t){var e=t.type,i=t.target||t.srcElement,n=this.dom,s=n.menu;if(i==s&&("mouseover"==e?this.editor.highlighter.highlight(this.parent):"mouseout"==e&&this.editor.highlighter.unhighlight()),"click"==e&&i==n.menu){var r=this.editor.highlighter;r.highlight(this.parent),r.lock(),o.addClassName(n.menu,"jsoneditor-selected"),this.showContextMenu(n.menu,function(){o.removeClassName(n.menu,"jsoneditor-selected"),r.unlock(),r.unhighlight()})}"keydown"==e&&this.onKeyDown(t)},e}var o=i(54),s=i(57);t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){for(var s={code:{text:"Code",title:"Switch to code highlighter",click:function(){n("code")}},form:{text:"Form",title:"Switch to form editor",click:function(){n("form")}},text:{text:"Text",title:"Switch to plain text editor",click:function(){n("text")}},tree:{text:"Tree",title:"Switch to tree editor",click:function(){n("tree")}},view:{text:"View",title:"Switch to tree view",click:function(){n("view")}}},r=[],a=0;a<e.length;a++){var h=e[a],l=s[h];if(!l)throw new Error('Unknown mode "'+h+'"');l.className="jsoneditor-type-modes"+(i==h?" jsoneditor-selected":""),r.push(l)}var d=s[i];if(!d)throw new Error('Unknown mode "'+i+'"');var c=d.text,u=document.createElement("button");u.className="jsoneditor-modes jsoneditor-separator",u.innerHTML=c+" &#x25BE;",u.title="Switch editor mode",u.onclick=function(){var t=new o(r);t.show(u)};var g=document.createElement("div");g.className="jsoneditor-modes",g.style.position="relative",g.appendChild(u),t.appendChild(g),this.dom={container:t,box:u,frame:g}}var o=i(57);n.prototype.focus=function(){this.dom.box.focus()},n.prototype.destroy=function(){this.dom&&this.dom.frame&&this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom=null},t.exports=n},function(t,e,i){"use strict";var n;try{n=i(63)}catch(o){}var s=i(61),r=i(54),a={},h=3;a.create=function(t,e){e=e||{},this.options=e,e.indentation?this.indentation=Number(e.indentation):this.indentation=2;var i=e.ace?e.ace:n;this.mode="code"==e.mode?"code":"text","code"==this.mode&&"undefined"==typeof i&&(this.mode="text",console.warn("Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.")),this.theme=e.theme||"ace/theme/jsoneditor";var o=this;this.container=t,this.dom={},this.aceEditor=void 0,this.textarea=void 0,this.validateSchema=null,this._debouncedValidate=r.debounce(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=t.clientWidth,this.height=t.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.frame.onclick=function(t){t.preventDefault()},this.frame.onkeydown=function(t){o._onKeyDown(t)},this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu);var a=document.createElement("button");a.className="jsoneditor-format",a.title="Format JSON data, with proper indentation and line feeds (Ctrl+\\)",this.menu.appendChild(a),a.onclick=function(){try{o.format(),o._onChange()}catch(t){o._onError(t)}};var h=document.createElement("button");if(h.className="jsoneditor-compact",h.title="Compact JSON data, remove all whitespaces (Ctrl+Shift+\\)",this.menu.appendChild(h),h.onclick=function(){try{o.compact(),o._onChange()}catch(t){o._onError(t)}},this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new s(this.menu,this.options.modes,this.options.mode,function(t){o.setMode(t),o.modeSwitcher.focus()})),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.frame.appendChild(this.content),this.container.appendChild(this.frame),"code"==this.mode){this.editorDom=document.createElement("div"),this.editorDom.style.height="100%",this.editorDom.style.width="100%",this.content.appendChild(this.editorDom);var l=i.edit(this.editorDom);l.$blockScrolling=1/0,l.setTheme(this.theme),l.setShowPrintMargin(!1),l.setFontSize(13),l.getSession().setMode("ace/mode/json"),l.getSession().setTabSize(this.indentation),l.getSession().setUseSoftTabs(!0),l.getSession().setUseWrapMode(!0),l.commands.bindKey("Ctrl-L",null),l.commands.bindKey("Command-L",null),this.aceEditor=l,this.hasOwnProperty("editor")||Object.defineProperty(this,"editor",{get:function(){return console.warn('Property "editor" has been renamed to "aceEditor".'),o.aceEditor},set:function(t){console.warn('Property "editor" has been renamed to "aceEditor".'),o.aceEditor=t}});var d=document.createElement("a");d.appendChild(document.createTextNode("powered by ace")),d.href="http://ace.ajax.org",d.target="_blank",d.className="jsoneditor-poweredBy",d.onclick=function(){window.open(d.href,d.target)},this.menu.appendChild(d),l.on("change",this._onChange.bind(this))}else{var c=document.createElement("textarea");c.className="jsoneditor-text",c.spellcheck=!1,this.content.appendChild(c),this.textarea=c,null===this.textarea.oninput?this.textarea.oninput=this._onChange.bind(this):this.textarea.onchange=this._onChange.bind(this)}this.setSchema(this.options.schema)},a._onChange=function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(t){console.error("Error in onChange callback: ",t)}},a._onKeyDown=function(t){var e=t.which||t.keyCode,i=!1;220==e&&t.ctrlKey&&(t.shiftKey?(this.compact(),this._onChange()):(this.format(),this._onChange()),i=!0),i&&(t.preventDefault(),t.stopPropagation())},a.destroy=function(){this.aceEditor&&(this.aceEditor.destroy(),this.aceEditor=null),this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.textarea=null,this._debouncedValidate=null},a.compact=function(){var t=this.get(),e=JSON.stringify(t);this.setText(e)},a.format=function(){var t=this.get(),e=JSON.stringify(t,null,this.indentation);this.setText(e)},a.focus=function(){this.textarea&&this.textarea.focus(),this.aceEditor&&this.aceEditor.focus()},a.resize=function(){if(this.aceEditor){var t=!1;this.aceEditor.resize(t)}},a.set=function(t){this.setText(JSON.stringify(t,null,this.indentation))},a.get=function(){var t,e=this.getText();try{t=r.parse(e)}catch(i){e=r.sanitize(e),t=r.parse(e)}return t},a.getText=function(){return this.textarea?this.textarea.value:this.aceEditor?this.aceEditor.getValue():""},a.setText=function(t){var e;if(e=this.options.escapeUnicode===!0?r.escapeUnicodeChars(t):t,this.textarea&&(this.textarea.value=e),this.aceEditor){var i=this.options.onChange;this.options.onChange=null,this.aceEditor.setValue(e,-1),this.options.onChange=i}this.validate()},a.validate=function(){this.dom.validationErrors&&(this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors),this.dom.validationErrors=null,this.content.style.marginBottom="",this.content.style.paddingBottom="");var t,e=!1,i=[];try{t=this.get(),e=!0}catch(n){}if(e&&this.validateSchema){var o=this.validateSchema(t);o||(i=this.validateSchema.errors.map(function(t){return r.improveSchemaError(t)}))}if(i.length>0){var s=i.length>h;if(s){i=i.slice(0,h);var a=this.validateSchema.errors.length-h;i.push("("+a+" more errors...)")}var l=document.createElement("div");l.innerHTML='<table class="jsoneditor-text-errors"><tbody>'+i.map(function(t){var e;return e="string"==typeof t?'<td colspan="2"><pre>'+t+"</pre></td>":"<td>"+t.dataPath+"</td><td>"+t.message+"</td>",'<tr><td><button class="jsoneditor-schema-error"></button></td>'+e+"</tr>"}).join("")+"</tbody></table>",this.dom.validationErrors=l,this.frame.appendChild(l);var d=l.clientHeight;this.content.style.marginBottom=-d+"px",this.content.style.paddingBottom=d+"px"}if(this.aceEditor){var c=!1;this.aceEditor.resize(c)}},t.exports=[{mode:"text",mixin:a,data:"text",load:a.format},{mode:"code",mixin:a,data:"text",load:a.format}]},function(t,e,i){var n=i(64);i(67),i(69),i(70),t.exports=n},function(t,e,i){!function(){function t(t){var e=i;t&&(i[t]||(i[t]={}),e=i[t]),e.define&&e.define.packaged||(n.original=e.define,e.define=n,e.define.packaged=!0),e.acequire&&e.acequire.packaged||(s.original=e.acequire,e.acequire=s,e.acequire.packaged=!0)}var e="ace",i=function(){return this}();if(i||"undefined"==typeof window||(i=window),e||"undefined"==typeof acequirejs){var n=function(t,e,i){return"string"!=typeof t?void(n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())):(2==arguments.length&&(i=e),void(n.modules[t]||(n.payloads[t]=i,n.modules[t]=null)))};n.modules={},n.payloads={};var o=function(t,e,i){if("string"==typeof e){var n=a(t,e);if(void 0!=n)return i&&i(),n}else if("[object Array]"===Object.prototype.toString.call(e)){for(var o=[],r=0,h=e.length;h>r;++r){var l=a(t,e[r]);if(void 0==l&&s.original)return;o.push(l)}return i&&i.apply(null,o)||!0}},s=function(t,e){var i=o("",t,e);return void 0==i&&s.original?s.original.apply(this,arguments):i},r=function(t,e){if(-1!==e.indexOf("!")){var i=e.split("!");return r(t,i[0])+"!"+r(t,i[1])}if("."==e.charAt(0)){var n=t.split("/").slice(0,-1).join("/");for(e=n+"/"+e;-1!==e.indexOf(".")&&o!=e;){var o=e;e=e.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return e},a=function(t,e){e=r(t,e);var i=n.modules[e];if(!i){if(i=n.payloads[e],"function"==typeof i){var s={},a={id:e,uri:"",exports:s,packaged:!0},h=function(t,i){return o(e,t,i)},l=i(h,s,a);s=l||a.exports,n.modules[e]=s,delete n.payloads[e]}i=n.modules[e]=s||i}return i};t(e)}}(),ace.define("ace/lib/regexp",["require","exports","module"],function(t,e,i){"use strict";function n(t){return(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":"")}function o(t,e,i){if(Array.prototype.indexOf)return t.indexOf(e,i);for(var n=i||0;n<t.length;n++)if(t[n]===e)return n;return-1}var s={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},r=void 0===s.exec.call(/()??/,"")[1],a=function(){var t=/^/g;return s.test.call(t,""),!t.lastIndex}();a&&r||(RegExp.prototype.exec=function(t){var e,i,h=s.exec.apply(this,arguments);if("string"==typeof t&&h){if(!r&&h.length>1&&o(h,"")>-1&&(i=RegExp(this.source,s.replace.call(n(this),"g","")),s.replace.call(t.slice(h.index),i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(h[t]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var l=1;l<h.length;l++)e=this._xregexp.captureNames[l-1],e&&(h[e]=h[l]);!a&&this.global&&!h[0].length&&this.lastIndex>h.index&&this.lastIndex--}return h},a||(RegExp.prototype.test=function(t){var e=s.exec.call(this,t);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(t,e,i){function n(){}function o(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(e){}}function s(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var i=f.call(arguments,1),o=function(){if(this instanceof o){var n=e.apply(this,i.concat(f.call(arguments)));return Object(n)===n?n:this}return e.apply(t,i.concat(f.call(arguments)))};return e.prototype&&(n.prototype=e.prototype,o.prototype=new n,n.prototype=null),o});var r,a,h,l,d,c=Function.prototype.call,u=Array.prototype,g=Object.prototype,f=u.slice,p=c.bind(g.toString),m=c.bind(g.hasOwnProperty);if((d=m(g,"__defineGetter__"))&&(r=c.bind(g.__defineGetter__),a=c.bind(g.__defineSetter__),h=c.bind(g.__lookupGetter__),l=c.bind(g.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function t(t){var e=new Array(t+2);return e[0]=e[1]=0,e}var e,i=[];return i.splice.apply(i,t(20)),i.splice.apply(i,t(26)),e=i.length,i.splice(5,0,"XXX"),e+1==i.length,e+1==i.length||void 0}()){var v=Array.prototype.splice;Array.prototype.splice=function(t,e){return arguments.length?v.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(f.call(arguments,2))):[]}}else Array.prototype.splice=function(t,e){var i=this.length;t>0?t>i&&(t=i):void 0==t?t=0:0>t&&(t=Math.max(i+t,0)),i>t+e||(e=i-t);var n=this.slice(t,t+e),o=f.call(arguments,2),s=o.length;if(t===i)s&&this.push.apply(this,o);else{var r=Math.min(e,i-t),a=t+r,h=a+s-r,l=i-a,d=i-r;if(a>h)for(var c=0;l>c;++c)this[h+c]=this[a+c];else if(h>a)for(c=l;c--;)this[h+c]=this[a+c];if(s&&t===d)this.length=d,this.push.apply(this,o);else for(this.length=d+s,c=0;s>c;++c)this[t+c]=o[c]}return n};Array.isArray||(Array.isArray=function(t){return"[object Array]"==p(t)});var w=Object("a"),y="a"!=w[0]||!(0 in w);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=H(this),i=y&&"[object String]"==p(this)?this.split(""):e,n=arguments[1],o=-1,s=i.length>>>0;if("[object Function]"!=p(t))throw new TypeError;for(;++o<s;)o in i&&t.call(n,i[o],o,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=H(this),i=y&&"[object String]"==p(this)?this.split(""):e,n=i.length>>>0,o=Array(n),s=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var r=0;n>r;r++)r in i&&(o[r]=t.call(s,i[r],r,e));return o}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,i=H(this),n=y&&"[object String]"==p(this)?this.split(""):i,o=n.length>>>0,s=[],r=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var a=0;o>a;a++)a in n&&(e=n[a],t.call(r,e,a,i)&&s.push(e));return s}),Array.prototype.every||(Array.prototype.every=function(t){var e=H(this),i=y&&"[object String]"==p(this)?this.split(""):e,n=i.length>>>0,o=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var s=0;n>s;s++)if(s in i&&!t.call(o,i[s],s,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=H(this),i=y&&"[object String]"==p(this)?this.split(""):e,n=i.length>>>0,o=arguments[1];if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");for(var s=0;n>s;s++)if(s in i&&t.call(o,i[s],s,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=H(this),i=y&&"[object String]"==p(this)?this.split(""):e,n=i.length>>>0;if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,s=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(s in i){o=i[s++];break}if(++s>=n)throw new TypeError("reduce of empty array with no initial value")}for(;n>s;s++)s in i&&(o=t.call(void 0,o,i[s],s,e));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=H(this),i=y&&"[object String]"==p(this)?this.split(""):e,n=i.length>>>0;if("[object Function]"!=p(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,s=n-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(s in i){o=i[s--];break}if(--s<0)throw new TypeError("reduceRight of empty array with no initial value")}do s in this&&(o=t.call(void 0,o,i[s],s,e));while(s--);return o}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var e=y&&"[object String]"==p(this)?this.split(""):H(this),i=e.length>>>0;if(!i)return-1;var n=0;for(arguments.length>1&&(n=s(arguments[1])),n=n>=0?n:Math.max(0,i+n);i>n;n++)if(n in e&&e[n]===t)return n;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var e=y&&"[object String]"==p(this)?this.split(""):H(this),i=e.length>>>0;if(!i)return-1;var n=i-1;for(arguments.length>1&&(n=Math.min(n,s(arguments[1]))),n=n>=0?n:i-Math.abs(n);n>=0;n--)if(n in e&&t===e[n])return n;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:g)}),!Object.getOwnPropertyDescriptor){var R="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,e){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(R+t);if(m(t,e)){var i,n,o;if(i={enumerable:!0,configurable:!0},d){var s=t.__proto__;t.__proto__=g;var n=h(t,e),o=l(t,e);if(t.__proto__=s,n||o)return n&&(i.get=n),o&&(i.set=o),i}return i.value=t[e],i}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var A;A=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var t={};for(var e in t)t[e]=null;return t.constructor=t.hasOwnProperty=t.propertyIsEnumerable=t.isPrototypeOf=t.toLocaleString=t.toString=t.valueOf=t.__proto__=null,t},Object.create=function(t,e){var i;if(null===t)i=A();else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var n=function(){};n.prototype=t,i=new n,i.__proto__=t}return void 0!==e&&Object.defineProperties(i,e),i}}if(Object.defineProperty){var b=o({}),x="undefined"==typeof document||o(document.createElement("div"));if(!b||!x)var L=Object.defineProperty}if(!Object.defineProperty||L){var C="Property description must be an object: ",k="Object.defineProperty called on non-object: ",E="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,e,i){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(k+t);if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError(C+i);if(L)try{return L.call(Object,t,e,i)}catch(n){}if(m(i,"value"))if(d&&(h(t,e)||l(t,e))){var o=t.__proto__;t.__proto__=g,delete t[e],t[e]=i.value,t.__proto__=o}else t[e]=i.value;else{if(!d)throw new TypeError(E);m(i,"get")&&r(t,e,i.get),m(i,"set")&&a(t,e,i.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,e){for(var i in e)m(e,i)&&Object.defineProperty(t,i,e[i]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(B){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;for(var e="";m(t,e);)e+="?";t[e]=!0;var i=m(t,e);return delete t[e],i}),!Object.keys){var M=!0,S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],F=S.length;for(var T in{toString:null})M=!1;Object.keys=function $(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var $=[];for(var e in t)m(t,e)&&$.push(e);if(M)for(var i=0,n=F;n>i;i++){var o=S[i];m(t,o)&&$.push(o)}return $}}Date.now||(Date.now=function(){return(new Date).getTime()});var P="\t\n\x0B\f\r \u2028\u2029\ufeff";if(!String.prototype.trim||P.trim()){P="["+P+"]";var _=new RegExp("^"+P+P+"*"),D=new RegExp(P+P+"*$");String.prototype.trim=function(){return String(this).replace(_,"").replace(D,"")}}var H=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(t,e,i){"use strict";t("./regexp"),t("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(t,e,i){"use strict";var n="http://www.w3.org/1999/xhtml";return e.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName("head")[0]||t.documentElement},e.createElement=function(t,e){return document.createElementNS?document.createElementNS(e||n,t):document.createElement(t)},e.hasCssClass=function(t,e){var i=(t.className||"").split(/\s+/g);return-1!==i.indexOf(e)},e.addCssClass=function(t,i){e.hasCssClass(t,i)||(t.className+=" "+i)},e.removeCssClass=function(t,e){for(var i=t.className.split(/\s+/g);;){var n=i.indexOf(e);if(-1==n)break;i.splice(n,1)}t.className=i.join(" ")},e.toggleCssClass=function(t,e){for(var i=t.className.split(/\s+/g),n=!0;;){var o=i.indexOf(e);if(-1==o)break;n=!1,i.splice(o,1)}return n&&i.push(e),t.className=i.join(" "),n},e.setCssClass=function(t,i,n){n?e.addCssClass(t,i):e.removeCssClass(t,i)},e.hasCssString=function(t,e){var i,n=0;if(e=e||document,e.createStyleSheet&&(i=e.styleSheets)){for(;n<i.length;)if(i[n++].owningElement.id===t)return!0}else if(i=e.getElementsByTagName("style"))for(;n<i.length;)if(i[n++].id===t)return!0;return!1},e.importCssString=function(t,i,n){if(n=n||document,i&&e.hasCssString(i,n))return null;var o;i&&(t+="\n/*# sourceURL=ace/css/"+i+" */"),n.createStyleSheet?(o=n.createStyleSheet(),o.cssText=t,i&&(o.owningElement.id=i)):(o=e.createElement("style"),o.appendChild(n.createTextNode(t)),i&&(o.id=i),e.getDocumentHead(n).appendChild(o))},e.importCssStylsheet=function(t,i){if(i.createStyleSheet)i.createStyleSheet(t);else{var n=e.createElement("link");n.rel="stylesheet",n.href=t,e.getDocumentHead(i).appendChild(n)}},e.getInnerWidth=function(t){return parseInt(e.computedStyle(t,"paddingLeft"),10)+parseInt(e.computedStyle(t,"paddingRight"),10)+t.clientWidth},e.getInnerHeight=function(t){return parseInt(e.computedStyle(t,"paddingTop"),10)+parseInt(e.computedStyle(t,"paddingBottom"),10)+t.clientHeight},e.scrollbarWidth=function(t){var i=e.createElement("ace_inner");i.style.width="100%",i.style.minWidth="0px",i.style.height="200px",i.style.display="block";var n=e.createElement("ace_outer"),o=n.style;o.position="absolute",o.left="-10000px",o.overflow="hidden",o.width="200px",o.minWidth="0px",o.height="150px",o.display="block",n.appendChild(i);var s=t.documentElement;s.appendChild(n);var r=i.offsetWidth;o.overflow="scroll";var a=i.offsetWidth;return r==a&&(a=n.clientWidth),s.removeChild(n),r-a},"undefined"==typeof document?void(e.importCssString=function(){}):(void 0!==window.pageYOffset?(e.getPageScrollTop=function(){return window.pageYOffset},e.getPageScrollLeft=function(){return window.pageXOffset}):(e.getPageScrollTop=function(){return document.body.scrollTop},e.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?e.computedStyle=function(t,e){return e?(window.getComputedStyle(t,"")||{})[e]||"":window.getComputedStyle(t,"")||{};
}:e.computedStyle=function(t,e){return e?t.currentStyle[e]:t.currentStyle},e.setInnerHtml=function(t,e){var i=t.cloneNode(!1);return i.innerHTML=e,t.parentNode.replaceChild(i,t),i},"textContent"in document.documentElement?(e.setInnerText=function(t,e){t.textContent=e},e.getInnerText=function(t){return t.textContent}):(e.setInnerText=function(t,e){t.innerText=e},e.getInnerText=function(t){return t.innerText}),void(e.getParentWindow=function(t){return t.defaultView||t.parentWindow}))}),ace.define("ace/lib/oop",["require","exports","module"],function(t,e,i){"use strict";e.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.mixin=function(t,e){for(var i in e)t[i]=e[i];return t},e.implement=function(t,i){e.mixin(t,i)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(t,e,i){"use strict";t("./fixoldbrowsers");var n=t("./oop"),o=function(){var t,e,i={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(e in i.FUNCTION_KEYS)t=i.FUNCTION_KEYS[e].toLowerCase(),i[t]=parseInt(e,10);for(e in i.PRINTABLE_KEYS)t=i.PRINTABLE_KEYS[e].toLowerCase(),i[t]=parseInt(e,10);return n.mixin(i,i.MODIFIER_KEYS),n.mixin(i,i.PRINTABLE_KEYS),n.mixin(i,i.FUNCTION_KEYS),i.enter=i["return"],i.escape=i.esc,i.del=i["delete"],i[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)i.KEY_MODS[e]=t.filter(function(t){return e&i.KEY_MODS[t]}).join("-")+"-"}(),i.KEY_MODS[0]="",i.KEY_MODS[-1]="input-",i}();n.mixin(e,o),e.keyCodeToString=function(t){var e=o[t];return"string"!=typeof e&&(e=String.fromCharCode(t)),e.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(t,e,i){"use strict";if(e.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS},"object"==typeof navigator){var n=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),o=navigator.userAgent;e.isWin="win"==n,e.isMac="mac"==n,e.isLinux="linux"==n,e.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&e.isIE<9,e.isGecko=e.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,e.isOldGecko=e.isGecko&&parseInt((o.match(/rv\:(\d+)/)||[])[1],10)<4,e.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,e.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,e.isAIR=o.indexOf("AdobeAIR")>=0,e.isIPad=o.indexOf("iPad")>=0,e.isTouchPad=o.indexOf("TouchPad")>=0,e.isChromeOS=o.indexOf(" CrOS ")>=0}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,e,i){"use strict";function n(t,e,i){var n=l(e);if(!r.isMac&&a){if(a.OSKey&&(n|=8),a.altGr){if(3==(3&n))return;a.altGr=0}if(18===i||17===i){var o="location"in e?e.location:e.keyLocation;if(17===i&&1===o)1==a[i]&&(h=e.timeStamp);else if(18===i&&3===n&&2===o){var d=e.timeStamp-h;50>d&&(a.altGr=!0)}}}if(i in s.MODIFIER_KEYS&&(i=-1),8&n&&i>=91&&93>=i&&(i=-1),!n&&13===i){var o="location"in e?e.location:e.keyLocation;if(3===o&&(t(e,n,-i),e.defaultPrevented))return}if(r.isChromeOS&&8&n){if(t(e,n,i),e.defaultPrevented)return;n&=-9}return!!(n||i in s.FUNCTION_KEYS||i in s.PRINTABLE_KEYS)&&t(e,n,i)}function o(){a=Object.create(null),a.count=0,a.lastT=0}var s=t("./keys"),r=t("./useragent"),a=null,h=0;e.addListener=function(t,e,i){if(t.addEventListener)return t.addEventListener(e,i,!1);if(t.attachEvent){var n=function(){i.call(t,window.event)};i._wrapper=n,t.attachEvent("on"+e,n)}},e.removeListener=function(t,e,i){return t.removeEventListener?t.removeEventListener(e,i,!1):void(t.detachEvent&&t.detachEvent("on"+e,i._wrapper||i))},e.stopEvent=function(t){return e.stopPropagation(t),e.preventDefault(t),!1},e.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},e.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},e.getButton=function(t){return"dblclick"==t.type?0:"contextmenu"==t.type||r.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.preventDefault?t.button:{1:0,2:2,4:1}[t.button]},e.capture=function(t,i,n){function o(t){i&&i(t),n&&n(t),e.removeListener(document,"mousemove",i,!0),e.removeListener(document,"mouseup",o,!0),e.removeListener(document,"dragstart",o,!0)}return e.addListener(document,"mousemove",i,!0),e.addListener(document,"mouseup",o,!0),e.addListener(document,"dragstart",o,!0),o},e.addTouchMoveListener=function(t,i){if("ontouchmove"in t){var n,o;e.addListener(t,"touchstart",function(t){var e=t.changedTouches[0];n=e.clientX,o=e.clientY}),e.addListener(t,"touchmove",function(t){var e=1,s=t.changedTouches[0];t.wheelX=-(s.clientX-n)/e,t.wheelY=-(s.clientY-o)/e,n=s.clientX,o=s.clientY,i(t)})}},e.addMouseWheelListener=function(t,i){"onmousewheel"in t?e.addListener(t,"mousewheel",function(t){var e=8;void 0!==t.wheelDeltaX?(t.wheelX=-t.wheelDeltaX/e,t.wheelY=-t.wheelDeltaY/e):(t.wheelX=0,t.wheelY=-t.wheelDelta/e),i(t)}):"onwheel"in t?e.addListener(t,"wheel",function(t){var e=.35;switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=t.deltaX*e||0,t.wheelY=t.deltaY*e||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0)}i(t)}):e.addListener(t,"DOMMouseScroll",function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),i(t)})},e.addMultiMouseDownListener=function(t,i,n,o){function s(t){if(0!==e.getButton(t)?c=0:t.detail>1?(c++,c>4&&(c=1)):c=1,r.isIE){var s=Math.abs(t.clientX-h)>5||Math.abs(t.clientY-l)>5;d&&!s||(c=1),d&&clearTimeout(d),d=setTimeout(function(){d=null},i[c-1]||600),1==c&&(h=t.clientX,l=t.clientY)}if(t._clicks=c,n[o]("mousedown",t),c>4)c=0;else if(c>1)return n[o](u[c],t)}function a(t){c=2,d&&clearTimeout(d),d=setTimeout(function(){d=null},i[c-1]||600),n[o]("mousedown",t),n[o](u[c],t)}var h,l,d,c=0,u={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(t)||(t=[t]),t.forEach(function(t){e.addListener(t,"mousedown",s),r.isOldIE&&e.addListener(t,"dblclick",a)})};var l=!r.isMac||!r.isOpera||"KeyboardEvent"in window?function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)}:function(t){return 0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0)};if(e.getModifierString=function(t){return s.KEY_MODS[l(t)]},e.addCommandKeyListener=function(t,i){var s=e.addListener;if(r.isOldGecko||r.isOpera&&!("KeyboardEvent"in window)){var h=null;s(t,"keydown",function(t){h=t.keyCode}),s(t,"keypress",function(t){return n(i,t,h)})}else{var l=null;s(t,"keydown",function(t){var e=t.keyCode;a[e]=(a[e]||0)+1,91==e||92==e?a.OSKey=!0:a.OSKey&&t.timeStamp-a.lastT>200&&1==a.count&&o(),1==a[e]&&a.count++,a.lastT=t.timeStamp;var s=n(i,t,e);return l=t.defaultPrevented,s}),s(t,"keypress",function(t){l&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(e.stopEvent(t),l=null)}),s(t,"keyup",function(t){var e=t.keyCode;a[e]?a.count=Math.max(a.count-1,0):o(),91!=e&&92!=e||(a.OSKey=!1),a[e]=null}),a||(o(),s(window,"focus",o))}},"object"==typeof window&&window.postMessage&&!r.isOldIE){var d=1;e.nextTick=function(t,i){i=i||window;var n="zero-timeout-message-"+d;e.addListener(i,"message",function o(s){s.data==n&&(e.stopPropagation(s),e.removeListener(i,"message",o),t())}),i.postMessage(n,"*")}}e.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),e.nextFrame?e.nextFrame=e.nextFrame.bind(window):e.nextFrame=function(t){setTimeout(t,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(t,e,i){"use strict";e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split("").reverse().join("")},e.stringRepeat=function(t,e){for(var i="";e>0;)1&e&&(i+=t),(e>>=1)&&(t+=t);return i};var n=/^\s\s*/,o=/\s\s*$/;e.stringTrimLeft=function(t){return t.replace(n,"")},e.stringTrimRight=function(t){return t.replace(o,"")},e.copyObject=function(t){var e={};for(var i in t)e[i]=t[i];return e},e.copyArray=function(t){for(var e=[],i=0,n=t.length;n>i;i++)t[i]&&"object"==typeof t[i]?e[i]=this.copyObject(t[i]):e[i]=t[i];return e},e.deepCopy=function s(t){if("object"!=typeof t||!t)return t;var e;if(Array.isArray(t)){e=[];for(var i=0;i<t.length;i++)e[i]=s(t[i]);return e}var n=t.constructor;if(n===RegExp)return t;e=n();for(var i in t)e[i]=s(t[i]);return e},e.arrayToMap=function(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=1;return e},e.createMap=function(t){var e=Object.create(null);for(var i in t)e[i]=t[i];return e},e.arrayRemove=function(t,e){for(var i=0;i<=t.length;i++)e===t[i]&&t.splice(i,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},e.escapeHTML=function(t){return t.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},e.getMatchOffsets=function(t,e){var i=[];return t.replace(e,function(t){i.push({offset:arguments[arguments.length-2],length:t.length})}),i},e.deferredCall=function(t){var e=null,i=function(){e=null,t()},n=function(t){return n.cancel(),e=setTimeout(i,t||0),n};return n.schedule=n,n.call=function(){return this.cancel(),t(),n},n.cancel=function(){return clearTimeout(e),e=null,n},n.isPending=function(){return e},n},e.delayedCall=function(t,e){var i=null,n=function(){i=null,t()},o=function(t){null==i&&(i=setTimeout(n,t||e))};return o.delay=function(t){i&&clearTimeout(i),i=setTimeout(n,t||e)},o.schedule=o,o.call=function(){this.cancel(),t()},o.cancel=function(){i&&clearTimeout(i),i=null},o.isPending=function(){return i},o}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(t,e,i){"use strict";var n=t("../lib/event"),o=t("../lib/useragent"),s=t("../lib/dom"),r=t("../lib/lang"),a=o.isChrome<18,h=o.isIE,l=function(t,e){function i(t){if(!p){if(p=!0,B)e=0,i=t?0:c.value.length-1;else var e=t?2:1,i=2;try{c.setSelectionRange(e,i)}catch(n){}p=!1}}function l(){p||(c.value=u,o.isWebKit&&A.schedule())}function d(){clearTimeout(W),W=setTimeout(function(){m&&(c.style.cssText=m,m=""),null==e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=!0,e.renderer.$moveTextAreaToCursor())},o.isOldIE?200:0)}var c=s.createElement("textarea");c.className="ace_text-input",o.isTouchPad&&c.setAttribute("x-palm-disable-auto-cap",!0),c.setAttribute("wrap","off"),c.setAttribute("autocorrect","off"),c.setAttribute("autocapitalize","off"),c.setAttribute("spellcheck",!1),c.style.opacity="0",o.isOldIE&&(c.style.top="-1000px"),t.insertBefore(c,t.firstChild);var u="",g=!1,f=!1,p=!1,m="",v=!0;try{var w=document.activeElement===c}catch(y){}n.addListener(c,"blur",function(t){e.onBlur(t),w=!1}),n.addListener(c,"focus",function(t){w=!0,e.onFocus(t),i()}),this.focus=function(){if(m)return c.focus();var t=c.style.top;c.style.position="fixed",c.style.top="0px",c.focus(),setTimeout(function(){c.style.position="","0px"==c.style.top&&(c.style.top=t)},0)},this.blur=function(){c.blur()},this.isFocused=function(){return w};var R=r.delayedCall(function(){w&&i(v)}),A=r.delayedCall(function(){p||(c.value=u,w&&i())});o.isWebKit||e.addEventListener("changeSelection",function(){e.selection.isEmpty()!=v&&(v=!v,R.schedule())}),l(),w&&e.onFocus();var b=function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length};if(!c.setSelectionRange&&c.createTextRange&&(c.setSelectionRange=function(t,e){var i=this.createTextRange();i.collapse(!0),i.moveStart("character",t),i.moveEnd("character",e),i.select()},b=function(t){try{var e=t.ownerDocument.selection.createRange()}catch(i){}return!(!e||e.parentElement()!=t)&&e.text==t.value}),o.isOldIE){var x=!1,L=function(t){if(!x){var e=c.value;if(!p&&e&&e!=u){if(t&&e==u[0])return C.schedule();S(e),x=!0,l(),x=!1}}},C=r.delayedCall(L);n.addListener(c,"propertychange",L);var k={13:1,27:1};n.addListener(c,"keyup",function(t){return!p||c.value&&!k[t.keyCode]||setTimeout(N,0),(c.value.charCodeAt(0)||0)<129?C.call():void(p?O():$())}),n.addListener(c,"keydown",function(t){C.schedule(50)})}var E=function(t){g?g=!1:b(c)?(e.selectAll(),i()):B&&i(e.selection.isEmpty())},B=null;this.setInputHandler=function(t){B=t},this.getInputHandler=function(){return B};var M=!1,S=function(t){B&&(t=B(t),B=null),f?(i(),t&&e.onPaste(t),f=!1):t==u.charAt(0)?M?e.execCommand("del",{source:"ace"}):e.execCommand("backspace",{source:"ace"}):(t.substring(0,2)==u?t=t.substr(2):t.charAt(0)==u.charAt(0)?t=t.substr(1):t.charAt(t.length-1)==u.charAt(0)&&(t=t.slice(0,-1)),t.charAt(t.length-1)==u.charAt(0)&&(t=t.slice(0,-1)),t&&e.onTextInput(t)),M&&(M=!1)},F=function(t){if(!p){var e=c.value;S(e),l()}},T=function(t,e){var i=t.clipboardData||window.clipboardData;if(i&&!a){var n=h?"Text":"text/plain";return e?i.setData(n,e)!==!1:i.getData(n)}},P=function(t,o){var s=e.getCopyText();return s?void(T(t,s)?(o?e.onCut():e.onCopy(),n.preventDefault(t)):(g=!0,c.value=s,c.select(),setTimeout(function(){g=!1,l(),i(),o?e.onCut():e.onCopy()}))):n.preventDefault(t)},_=function(t){P(t,!0)},D=function(t){P(t,!1)},H=function(t){var s=T(t);"string"==typeof s?(s&&e.onPaste(s,t),o.isIE&&setTimeout(i),n.preventDefault(t)):(c.value="",f=!0)};n.addCommandKeyListener(c,e.onCommandKey.bind(e)),n.addListener(c,"select",E),n.addListener(c,"input",F),n.addListener(c,"cut",_),n.addListener(c,"copy",D),n.addListener(c,"paste",H),"oncut"in c&&"oncopy"in c&&"onpaste"in c||n.addListener(t,"keydown",function(t){if((!o.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:D(t);break;case 86:H(t);break;case 88:_(t)}});var $=function(t){p||!e.onCompositionStart||e.$readOnly||(p={},e.onCompositionStart(),setTimeout(O,0),e.on("mousedown",N),e.selection.isEmpty()||(e.insert(""),e.session.markUndoGroup(),e.selection.clearSelection()),e.session.markUndoGroup())},O=function(){if(p&&e.onCompositionUpdate&&!e.$readOnly){var t=c.value.replace(/\x01/g,"");if(p.lastValue!==t&&(e.onCompositionUpdate(t),p.lastValue&&e.undo(),p.lastValue=t,p.lastValue)){var i=e.selection.getRange();e.insert(p.lastValue),e.session.markUndoGroup(),p.range=e.selection.getRange(),e.selection.setRange(i),e.selection.clearSelection()}}},N=function(t){if(e.onCompositionEnd&&!e.$readOnly){var i=p;p=!1;var n=setTimeout(function(){n=null;var t=c.value.replace(/\x01/g,"");p||(t==i.lastValue?l():!i.lastValue&&t&&(l(),S(t)))});B=function(t){return n&&clearTimeout(n),t=t.replace(/\x01/g,""),t==i.lastValue?"":(i.lastValue&&n&&e.undo(),t)},e.onCompositionEnd(),e.removeListener("mousedown",N),"compositionend"==t.type&&i.range&&e.selection.setRange(i.range)}},I=r.delayedCall(O,50);n.addListener(c,"compositionstart",$),o.isGecko?n.addListener(c,"text",function(){I.schedule()}):(n.addListener(c,"keyup",function(){I.schedule()}),n.addListener(c,"keydown",function(){I.schedule()})),n.addListener(c,"compositionend",N),this.getElement=function(){return c},this.setReadOnly=function(t){c.readOnly=t},this.onContextMenu=function(t){M=!0,i(e.selection.isEmpty()),e._emit("nativecontextmenu",{target:e,domEvent:t}),this.moveToMouse(t,!0)},this.moveToMouse=function(t,i){if(i||!o.isOldIE){m||(m=c.style.cssText),c.style.cssText=(i?"z-index:100000;":"")+"height:"+c.style.height+";"+(o.isIE?"opacity:0.1;":"");var r=e.container.getBoundingClientRect(),a=s.computedStyle(e.container),h=r.top+(parseInt(a.borderTopWidth)||0),l=r.left+(parseInt(r.borderLeftWidth)||0),u=r.bottom-h-c.clientHeight-2,g=function(t){c.style.left=t.clientX-l-2+"px",c.style.top=Math.min(t.clientY-h-2,u)+"px"};g(t),"mousedown"==t.type&&(e.renderer.$keepTextAreaAtCursor&&(e.renderer.$keepTextAreaAtCursor=null),clearTimeout(W),o.isWin&&!o.isOldIE&&n.capture(e.container,g,d))}},this.onContextMenuClose=d;var W,j=function(t){e.textInput.onContextMenu(t),d()};n.addListener(c,"mouseup",j),n.addListener(c,"mousedown",function(t){t.preventDefault(),d()}),n.addListener(e.renderer.scroller,"contextmenu",j),n.addListener(c,"contextmenu",j)};e.TextInput=l}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,e,i){"use strict";function n(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t)),e.setDefaultHandler("touchmove",this.onTouchMove.bind(t));var i=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];i.forEach(function(e){t[e]=this[e]},this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function o(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))}function s(t,e){if(t.start.row==t.end.row)var i=2*e.column-t.start.column-t.end.column;else if(t.start.row!=t.end.row-1||t.start.column||t.end.column)var i=2*e.row-t.start.row-t.end.row;else var i=e.column-4;return 0>i?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}var r=(t("../lib/dom"),t("../lib/event"),t("../lib/useragent"),0);(function(){this.onMouseDown=function(t){var e=t.inSelection(),i=t.getDocumentPosition();this.mousedownEvent=t;var n=this.editor,o=t.getButton();if(0!==o){var s=n.getSelectionRange(),r=s.isEmpty();return n.$blockScrolling++,(r||1==o)&&n.selection.moveToPosition(i),n.$blockScrolling--,void(2==o&&n.textInput.onContextMenu(t.domEvent))}return this.mousedownEvent.time=Date.now(),!e||n.isFocused()||(n.focus(),!this.$focusTimout||this.$clickSelection||n.inMultiSelectMode)?(this.captureMouse(t),this.startSelect(i,t.domEvent._clicks>1),t.preventDefault()):(this.setState("focusWait"),void this.captureMouse(t))},this.startSelect=function(t,e){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var i=this.editor;i.$blockScrolling++,this.mousedownEvent.getShiftKey()?i.selection.selectToPosition(t):e||i.selection.moveToPosition(t),e||this.select(),i.renderer.scroller.setCapture&&i.renderer.scroller.setCapture(),i.setStyle("ace_selecting"),this.setState("select"),i.$blockScrolling--},this.select=function(){var t,e=this.editor,i=e.renderer.screenToTextCoordinates(this.x,this.y);if(e.$blockScrolling++,this.$clickSelection){var n=this.$clickSelection.comparePoint(i);if(-1==n)t=this.$clickSelection.end;else if(1==n)t=this.$clickSelection.start;else{var o=s(this.$clickSelection,i);i=o.cursor,t=o.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(i),e.$blockScrolling--,e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var e,i=this.editor,n=i.renderer.screenToTextCoordinates(this.x,this.y),o=i.selection[t](n.row,n.column);if(i.$blockScrolling++,this.$clickSelection){var r=this.$clickSelection.comparePoint(o.start),a=this.$clickSelection.comparePoint(o.end);if(-1==r&&0>=a)e=this.$clickSelection.end,o.end.row==n.row&&o.end.column==n.column||(n=o.start);else if(1==a&&r>=0)e=this.$clickSelection.start,o.start.row==n.row&&o.start.column==n.column||(n=o.end);else if(-1==r&&1==a)n=o.end,e=o.start;else{var h=s(this.$clickSelection,n);n=h.cursor,e=h.anchor}i.selection.setSelectionAnchor(e.row,e.column)}i.selection.selectToPosition(n),i.$blockScrolling--,i.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var t=o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),e=Date.now();(t>r||e-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var e=t.getDocumentPosition(),i=this.editor,n=i.session,o=n.getBracketRange(e);o?(o.isEmpty()&&(o.start.column--,o.end.column++),this.setState("select")):(o=i.selection.getWordRange(e.row,e.column),this.setState("selectByWords")),this.$clickSelection=o,this.select()},this.onTripleClick=function(t){var e=t.getDocumentPosition(),i=this.editor;this.setState("selectByLines");var n=i.getSelectionRange();n.isMultiLine()&&n.contains(e.row,e.column)?(this.$clickSelection=i.selection.getLineRange(n.start.row),this.$clickSelection.end=i.selection.getLineRange(n.end.row).end):this.$clickSelection=i.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(t){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var e=t.domEvent.timeStamp,i=e-(this.$lastScrollTime||0),n=this.editor,o=n.renderer.isScrollableBy(t.wheelX*t.speed,t.wheelY*t.speed);return o||200>i?(this.$lastScrollTime=e,n.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}},this.onTouchMove=function(t){var e=t.domEvent.timeStamp,i=e-(this.$lastScrollTime||0),n=this.editor,o=n.renderer.isScrollableBy(t.wheelX*t.speed,t.wheelY*t.speed);return o||200>i?(this.$lastScrollTime=e,n.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()):void 0}}).call(n.prototype),e.DefaultHandlers=n}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(t,e,i){"use strict";function n(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}var o=(t("./lib/oop"),t("./lib/dom"));(function(){this.$init=function(){return this.$element=o.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(t){o.setInnerText(this.getElement(),t)},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(t,e){this.getElement().style.left=t+"px",this.getElement().style.top=e+"px"},this.setClassName=function(t){o.addCssClass(this.getElement(),t)},this.show=function(t,e,i){null!=t&&this.setText(t),null!=e&&null!=i&&this.setPosition(e,i),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(n.prototype),e.Tooltip=n}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(t,e,i){"use strict";function n(t){function e(){var e=c.getDocumentPosition().row,o=h.$annotations[e];if(!o)return i();var s=r.session.getLength();if(e==s){var a=r.renderer.pixelToScreenCoordinates(0,c.y).row,d=c.$pos;if(a>r.session.documentToScreenRow(d.row,d.column))return i()}if(u!=o)if(u=o.text.join("<br/>"),l.setHtml(u),l.show(),r.on("mousewheel",i),t.$tooltipFollowsMouse)n(c);else{var g=c.domEvent.target,f=g.getBoundingClientRect(),p=l.getElement().style;p.left=f.right+"px",p.top=f.bottom+"px"}}function i(){d&&(d=clearTimeout(d)),u&&(l.hide(),u=null,r.removeEventListener("mousewheel",i))}function n(t){l.setPosition(t.x,t.y)}var r=t.editor,h=r.renderer.$gutterLayer,l=new o(r.container);t.editor.setDefaultHandler("guttermousedown",function(e){if(r.isFocused()&&0==e.getButton()){var i=h.getRegion(e);if("foldWidgets"!=i){var n=e.getDocumentPosition().row,o=r.session.selection;if(e.getShiftKey())o.selectTo(n,0);else{if(2==e.domEvent.detail)return r.selectAll(),e.preventDefault();t.$clickSelection=r.selection.getLineRange(n)}return t.setState("selectByLines"),t.captureMouse(e),e.preventDefault()}}});var d,c,u;t.editor.setDefaultHandler("guttermousemove",function(o){var r=o.domEvent.target||o.domEvent.srcElement;return s.hasCssClass(r,"ace_fold-widget")?i():(u&&t.$tooltipFollowsMouse&&n(o),c=o,void(d||(d=setTimeout(function(){d=null,c&&!t.isMousePressed?e():i()},50))))}),a.addListener(r.renderer.$gutter,"mouseout",function(t){c=null,u&&!d&&(d=setTimeout(function(){d=null,i()},50))}),r.on("changeSession",i)}function o(t){h.call(this,t)}var s=t("../lib/dom"),r=t("../lib/oop"),a=t("../lib/event"),h=t("../tooltip").Tooltip;r.inherits(o,h),function(){this.setPosition=function(t,e){var i=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,o=this.getWidth(),s=this.getHeight();t+=15,e+=15,t+o>i&&(t-=t+o-i),e+s>n&&(e-=20+s),h.prototype.setPosition.call(this,t,e)}}.call(o.prototype),e.GutterHandler=n}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,e,i){"use strict";var n=t("../lib/event"),o=t("../lib/useragent"),s=e.MouseEvent=function(t,e){this.domEvent=t,this.editor=e,this.x=this.clientX=t.clientX,this.y=this.clientY=t.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){n.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){n.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var t=this.editor,e=t.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=e.contains(i.row,i.column)}return this.$inSelection},this.getButton=function(){return n.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=o.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,e,i){"use strict";function n(t){function e(t,e){var i=Date.now(),n=!e||t.row!=e.row,s=!e||t.column!=e.column;if(!B||n||s)m.$blockScrolling+=1,m.moveCursorToPosition(t),m.$blockScrolling-=1,B=i,M={x:R,y:A};else{var r=o(M.x,M.y,R,A);r>d?B=null:i-B>=l&&(m.renderer.scrollCursorIntoView(),B=null)}}function i(t,e){var i=Date.now(),n=m.renderer.layerConfig.lineHeight,o=m.renderer.layerConfig.characterWidth,s=m.renderer.scroller.getBoundingClientRect(),r={x:{left:R-s.left,right:s.right-R},y:{top:A-s.top,bottom:s.bottom-A}},a=Math.min(r.x.left,r.x.right),l=Math.min(r.y.top,r.y.bottom),d={row:t.row,column:t.column};2>=a/o&&(d.column+=r.x.left<r.x.right?-3:2),1>=l/n&&(d.row+=r.y.top<r.y.bottom?-1:1);var c=t.row!=d.row,u=t.column!=d.column,g=!e||t.row!=e.row;c||u&&!g?E?i-E>=h&&m.renderer.scrollCursorIntoView(d):E=i:E=null}function n(){var t=L;L=m.renderer.screenToTextCoordinates(R,A),e(L,t),i(L,t)}function c(){x=m.selection.toOrientedRange(),y=m.session.addMarker(x,"ace_selection",m.getSelectionStyle()),m.clearSelection(),m.isFocused()&&m.renderer.$cursorLayer.setBlinking(!1),clearInterval(b),n(),b=setInterval(n,20),F=0,r.addListener(document,"mousemove",g)}function u(){clearInterval(b),m.session.removeMarker(y),y=null,m.$blockScrolling+=1,m.selection.fromOrientedRange(x),m.$blockScrolling-=1,m.isFocused()&&!k&&m.renderer.$cursorLayer.setBlinking(!m.getReadOnly()),x=null,L=null,F=0,E=null,B=null,r.removeListener(document,"mousemove",g)}function g(){null==T&&(T=setTimeout(function(){null!=T&&y&&u()},20))}function f(t){var e=t.types;return!e||Array.prototype.some.call(e,function(t){return"text/plain"==t||"Text"==t})}function p(t){var e=["copy","copymove","all","uninitialized"],i=["move","copymove","linkmove","all","uninitialized"],n=a.isMac?t.altKey:t.ctrlKey,o="uninitialized";try{o=t.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var s="none";return n&&e.indexOf(o)>=0?s="copy":i.indexOf(o)>=0?s="move":e.indexOf(o)>=0&&(s="copy"),s}var m=t.editor,v=s.createElement("img");v.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.isOpera&&(v.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var w=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];w.forEach(function(e){t[e]=this[e]},this),m.addEventListener("mousedown",this.onMouseDown.bind(t));var y,R,A,b,x,L,C,k,E,B,M,S=m.container,F=0;this.onDragStart=function(t){if(this.cancelDrag||!S.draggable){var e=this;return setTimeout(function(){e.startSelect(),e.captureMouse(t)},0),t.preventDefault()}x=m.getSelectionRange();var i=t.dataTransfer;i.effectAllowed=m.getReadOnly()?"copy":"copyMove",a.isOpera&&(m.container.appendChild(v),v.scrollTop=0),i.setDragImage&&i.setDragImage(v,0,0),a.isOpera&&m.container.removeChild(v),i.clearData(),i.setData("Text",m.session.getTextRange()),k=!0,this.setState("drag")},this.onDragEnd=function(t){if(S.draggable=!1,k=!1,this.setState(null),!m.getReadOnly()){var e=t.dataTransfer.dropEffect;C||"move"!=e||m.session.remove(m.getSelectionRange()),m.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(t){return!m.getReadOnly()&&f(t.dataTransfer)?(R=t.clientX,A=t.clientY,y||c(),F++,t.dataTransfer.dropEffect=C=p(t),r.preventDefault(t)):void 0},this.onDragOver=function(t){return!m.getReadOnly()&&f(t.dataTransfer)?(R=t.clientX,A=t.clientY,y||(c(),F++),null!==T&&(T=null),t.dataTransfer.dropEffect=C=p(t),r.preventDefault(t)):void 0},this.onDragLeave=function(t){return F--,0>=F&&y?(u(),C=null,r.preventDefault(t)):void 0},this.onDrop=function(t){if(L){var e=t.dataTransfer;if(k)switch(C){case"move":x=x.contains(L.row,L.column)?{start:L,end:L}:m.moveText(x,L);break;case"copy":x=m.moveText(x,L,!0)}else{var i=e.getData("Text");x={start:L,end:m.session.insert(L,i)},m.focus(),C=null}return u(),r.preventDefault(t)}},r.addListener(S,"dragstart",this.onDragStart.bind(t)),r.addListener(S,"dragend",this.onDragEnd.bind(t)),r.addListener(S,"dragenter",this.onDragEnter.bind(t)),r.addListener(S,"dragover",this.onDragOver.bind(t)),r.addListener(S,"dragleave",this.onDragLeave.bind(t)),r.addListener(S,"drop",this.onDrop.bind(t));var T=null}function o(t,e,i,n){return Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2))}var s=t("../lib/dom"),r=t("../lib/event"),a=t("../lib/useragent"),h=200,l=200,d=5;(function(){this.dragWait=function(){var t=Date.now()-this.mousedownEvent.time;t>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){
var t=this.editor.container;t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor,e=t.container;e.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var i=a.isWin?"default":"move";t.renderer.setCursorStyle(i),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;if(a.isIE&&"dragReady"==this.state){var i=o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);i>3&&e.dragDrop()}if("dragWait"===this.state){var i=o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);i>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,i=t.inSelection(),n=t.getButton(),o=t.domEvent.detail||1;if(1===o&&0===n&&i){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var s=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in s&&(s.unselectable="on"),e.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;var r=e.container;r.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(n.prototype),e.DragdropHandler=n}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(t,e,i){"use strict";var n=t("./dom");e.get=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4===i.readyState&&e(i.responseText)},i.send(null)},e.loadScript=function(t,e){var i=n.getDocumentHead(),o=document.createElement("script");o.src=t,i.appendChild(o),o.onload=o.onreadystatechange=function(t,i){!i&&o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(o=o.onload=o.onreadystatechange=null,i||e())}},e.qualifyURL=function(t){var e=document.createElement("a");return e.href=t,e.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(t,e,i){"use strict";var n={},o=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};n._emit=n._dispatchEvent=function(t,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[t]||[],n=this._defaultHandlers[t];if(i.length||n){"object"==typeof e&&e||(e={}),e.type||(e.type=t),e.stopPropagation||(e.stopPropagation=o),e.preventDefault||(e.preventDefault=s),i=i.slice();for(var r=0;r<i.length&&(i[r](e,this),!e.propagationStopped);r++);return n&&!e.defaultPrevented?n(e,this):void 0}},n._signal=function(t,e){var i=(this._eventRegistry||{})[t];if(i){i=i.slice();for(var n=0;n<i.length;n++)i[n](e,this)}},n.once=function(t,e){var i=this;e&&this.addEventListener(t,function n(){i.removeEventListener(t,n),e.apply(null,arguments)})},n.setDefaultHandler=function(t,e){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[t]){var n=i[t],o=i._disabled_[t];o||(i._disabled_[t]=o=[]),o.push(n);var s=o.indexOf(e);-1!=s&&o.splice(s,1)}i[t]=e},n.removeDefaultHandler=function(t,e){var i=this._defaultHandlers;if(i){var n=i._disabled_[t];if(i[t]==e)i[t],n&&this.setDefaultHandler(t,n.pop());else if(n){var o=n.indexOf(e);-1!=o&&n.splice(o,1)}}},n.on=n.addEventListener=function(t,e,i){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[t];return n||(n=this._eventRegistry[t]=[]),-1==n.indexOf(e)&&n[i?"unshift":"push"](e),e},n.off=n.removeListener=n.removeEventListener=function(t,e){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[t];if(i){var n=i.indexOf(e);-1!==n&&i.splice(n,1)}},n.removeAllListeners=function(t){this._eventRegistry&&(this._eventRegistry[t]=[])},e.EventEmitter=n}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,i){"no use strict";function n(t){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function o(t,e){var i=new Error(t);i.data=e,"object"==typeof console&&console.error&&console.error(i),setTimeout(function(){throw i})}var s=t("./oop"),r=t("./event_emitter").EventEmitter,a={setOptions:function(t){Object.keys(t).forEach(function(e){this.setOption(e,t[e])},this)},getOptions:function(t){var e={};return t?Array.isArray(t)||(e=t,t=Object.keys(e)):t=Object.keys(this.$options),t.forEach(function(t){e[t]=this.getOption(t)},this),e},setOption:function(t,e){if(this["$"+t]!==e){var i=this.$options[t];if(!i)return n('misspelled option "'+t+'"');if(i.forwardTo)return this[i.forwardTo]&&this[i.forwardTo].setOption(t,e);i.handlesSet||(this["$"+t]=e),i&&i.set&&i.set.call(this,e)}},getOption:function(t){var e=this.$options[t];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(t):e&&e.get?e.get.call(this):this["$"+t]:n('misspelled option "'+t+'"')}},h=function(){this.$defaultOptions={}};(function(){s.implement(this,r),this.defineOptions=function(t,e,i){return t.$options||(this.$defaultOptions[e]=t.$options={}),Object.keys(i).forEach(function(e){var n=i[e];"string"==typeof n&&(n={forwardTo:n}),n.name||(n.name=e),t.$options[n.name]=n,"initialValue"in n&&(t["$"+n.name]=n.initialValue)}),s.implement(t,a),this},this.resetOptions=function(t){Object.keys(t.$options).forEach(function(e){var i=t.$options[e];"value"in i&&t.setOption(e,i.value)})},this.setDefaultValue=function(t,e,i){var n=this.$defaultOptions[t]||(this.$defaultOptions[t]={});n[e]&&(n.forwardTo?this.setDefaultValue(n.forwardTo,e,i):n[e].value=i)},this.setDefaultValues=function(t,e){Object.keys(e).forEach(function(i){this.setDefaultValue(t,i,e[i])},this)},this.warn=n,this.reportError=o}).call(h.prototype),e.AppConfig=h}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(t,e,n){"no use strict";function o(o){if(l&&l.document){d.packaged=o||t.packaged||n.packaged||l.define&&i(65).packaged;for(var r={},a="",h=document.currentScript||document._currentScript,c=h&&h.ownerDocument||document,u=c.getElementsByTagName("script"),g=0;g<u.length;g++){var f=u[g],p=f.src||f.getAttribute("src");if(p){for(var m=f.attributes,v=0,w=m.length;w>v;v++){var y=m[v];0===y.name.indexOf("data-ace-")&&(r[s(y.name.replace(/^data-ace-/,""))]=y.value)}var R=p.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);R&&(a=R[1])}}a&&(r.base=r.base||a,r.packaged=!0),r.basePath=r.base,r.workerPath=r.workerPath||r.base,r.modePath=r.modePath||r.base,r.themePath=r.themePath||r.base,delete r.base;for(var A in r)"undefined"!=typeof r[A]&&e.set(A,r[A])}}function s(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}var r=t("./lib/lang"),a=(t("./lib/oop"),t("./lib/net")),h=t("./lib/app_config").AppConfig;n.exports=e=new h;var l=function(){return this||"undefined"!=typeof window&&window}(),d={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};e.get=function(t){if(!d.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return d[t]},e.set=function(t,e){if(!d.hasOwnProperty(t))throw new Error("Unknown config key: "+t);d[t]=e},e.all=function(){return r.copyObject(d)},e.moduleUrl=function(t,e){if(d.$moduleUrls[t])return d.$moduleUrls[t];var i=t.split("/");e=e||i[i.length-2]||"";var n="snippets"==e?"/":"-",o=i[i.length-1];if("worker"==e&&"-"==n){var s=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");o=o.replace(s,"")}(!o||o==e)&&i.length>1&&(o=i[i.length-2]);var r=d[e+"Path"];return null==r?r=d.basePath:"/"==n&&(e=n=""),r&&"/"!=r.slice(-1)&&(r+="/"),r+e+n+o+this.get("suffix")},e.setModuleUrl=function(t,e){return d.$moduleUrls[t]=e},e.$loading={},e.loadModule=function(i,n){var o,s;Array.isArray(i)&&(s=i[0],i=i[1]);try{o=t(i)}catch(r){}if(o&&!e.$loading[i])return n&&n(o);if(e.$loading[i]||(e.$loading[i]=[]),e.$loading[i].push(n),!(e.$loading[i].length>1)){var h=function(){t([i],function(t){e._emit("load.module",{name:i,module:t});var n=e.$loading[i];e.$loading[i]=null,n.forEach(function(e){e&&e(t)})})};return e.get("packaged")?void a.loadScript(e.moduleUrl(i,s),h):h()}},o(!0),e.init=o}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(t,e,i){"use strict";var n=t("../lib/event"),o=t("../lib/useragent"),s=t("./default_handlers").DefaultHandlers,r=t("./default_gutter_handler").GutterHandler,a=t("./mouse_event").MouseEvent,h=t("./dragdrop_handler").DragdropHandler,l=t("../config"),d=function(t){var e=this;this.editor=t,new s(this),new r(this),new h(this);var i=function(e){var i=!document.hasFocus||!document.hasFocus()||!t.isFocused()&&document.activeElement==(t.textInput&&t.textInput.getElement());i&&window.focus(),t.focus()},a=t.renderer.getMouseEventTarget();n.addListener(a,"click",this.onMouseEvent.bind(this,"click")),n.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove")),n.addMultiMouseDownListener([a,t.renderer.scrollBarV&&t.renderer.scrollBarV.inner,t.renderer.scrollBarH&&t.renderer.scrollBarH.inner,t.textInput&&t.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),n.addMouseWheelListener(t.container,this.onMouseWheel.bind(this,"mousewheel")),n.addTouchMoveListener(t.container,this.onTouchMove.bind(this,"touchmove"));var l=t.renderer.$gutter;n.addListener(l,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),n.addListener(l,"click",this.onMouseEvent.bind(this,"gutterclick")),n.addListener(l,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),n.addListener(l,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),n.addListener(a,"mousedown",i),n.addListener(l,"mousedown",i),o.isIE&&t.renderer.scrollBarV&&(n.addListener(t.renderer.scrollBarV.element,"mousedown",i),n.addListener(t.renderer.scrollBarH.element,"mousedown",i)),t.on("mousemove",function(i){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var n=t.renderer.screenToTextCoordinates(i.x,i.y),o=t.session.selection.getRange(),s=t.renderer;!o.isEmpty()&&o.insideStart(n.row,n.column)?s.setCursorStyle("default"):s.setCursorStyle("")}})};(function(){this.onMouseEvent=function(t,e){this.editor._emit(t,new a(e,this.editor))},this.onMouseMove=function(t,e){var i=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;i&&i.length&&this.editor._emit(t,new a(e,this.editor))},this.onMouseWheel=function(t,e){var i=new a(e,this.editor);i.speed=2*this.$scrollSpeed,i.wheelX=e.wheelX,i.wheelY=e.wheelY,this.editor._emit(t,i)},this.onTouchMove=function(t,e){var i=new a(e,this.editor);i.speed=1,i.wheelX=e.wheelX,i.wheelY=e.wheelY,this.editor._emit(t,i)},this.setState=function(t){this.state=t},this.captureMouse=function(t,e){this.x=t.x,this.y=t.y,this.isMousePressed=!0;var i=this.editor.renderer;i.$keepTextAreaAtCursor&&(i.$keepTextAreaAtCursor=null);var s=this,r=function(t){if(t){if(o.isWebKit&&!t.which&&s.releaseMouse)return s.releaseMouse();s.x=t.clientX,s.y=t.clientY,e&&e(t),s.mouseEvent=new a(t,s.editor),s.$mouseMoved=!0}},h=function(t){clearInterval(d),l(),s[s.state+"End"]&&s[s.state+"End"](t),s.state="",null==i.$keepTextAreaAtCursor&&(i.$keepTextAreaAtCursor=!0,i.$moveTextAreaToCursor()),s.isMousePressed=!1,s.$onCaptureMouseMove=s.releaseMouse=null,t&&s.onMouseEvent("mouseup",t)},l=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(o.isOldIE&&"dblclick"==t.domEvent.type)return setTimeout(function(){h(t)});s.$onCaptureMouseMove=r,s.releaseMouse=n.capture(this.editor.container,r,h);var d=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&n.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)}}).call(d.prototype),l.defineOptions(d.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:o.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=d}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(t,e,i){"use strict";function n(t){t.on("click",function(e){var i=e.getDocumentPosition(),n=t.session,o=n.getFoldAt(i.row,i.column,1);o&&(e.getAccelKey()?n.removeFold(o):n.expandFold(o),e.stop())}),t.on("gutterclick",function(e){var i=t.renderer.$gutterLayer.getRegion(e);if("foldWidgets"==i){var n=e.getDocumentPosition().row,o=t.session;o.foldWidgets&&o.foldWidgets[n]&&t.session.onFoldWidgetClick(n,e),t.isFocused()||t.focus(),e.stop()}}),t.on("gutterdblclick",function(e){var i=t.renderer.$gutterLayer.getRegion(e);if("foldWidgets"==i){var n=e.getDocumentPosition().row,o=t.session,s=o.getParentFoldRangeData(n,!0),r=s.range||s.firstRange;if(r){n=r.start.row;var a=o.getFoldAt(n,o.getLine(n).length,1);a?o.removeFold(a):(o.addFold("...",r),t.renderer.scrollCursorIntoView({row:r.start.row,column:0}))}e.stop()}})}e.FoldHandler=n}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(t,e,i){"use strict";var n=t("../lib/keys"),o=t("../lib/event"),s=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(t){var e=this.$handlers;if(e[e.length-1]!=t){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(t,1)}},this.addKeyboardHandler=function(t,e){if(t){"function"!=typeof t||t.handleKeyboard||(t.handleKeyboard=t);var i=this.$handlers.indexOf(t);-1!=i&&this.$handlers.splice(i,1),void 0==e?this.$handlers.push(t):this.$handlers.splice(e,0,t),-1==i&&t.attach&&t.attach(this.$editor)}},this.removeKeyboardHandler=function(t){var e=this.$handlers.indexOf(t);return-1!=e&&(this.$handlers.splice(e,1),t.detach&&t.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,e=t.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(e,t)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(t,e,i,n){for(var s,r=!1,a=this.$editor.commands,h=this.$handlers.length;h--&&(s=this.$handlers[h].handleKeyboard(this.$data,t,e,i,n),!(s&&s.command&&(r="null"==s.command||a.exec(s.command,this.$editor,s.args,n),r&&n&&-1!=t&&1!=s.passEvent&&1!=s.command.passEvent&&o.stopEvent(n),r))););return r||-1!=t||(s={command:"insertstring"},r=a.exec("insertstring",this.$editor,e)),r&&this.$editor._signal("keyboardActivity",s),r},this.onCommandKey=function(t,e,i){var o=n.keyCodeToString(i);this.$callKeyboardHandlers(e,o,i,t)},this.onTextInput=function(t){this.$callKeyboardHandlers(-1,t)}}).call(s.prototype),e.KeyBinding=s}),ace.define("ace/range",["require","exports","module"],function(t,e,i){"use strict";var n=function(t,e){return t.row-e.row||t.column-e.column},o=function(t,e,i,n){this.start={row:t,column:e},this.end={row:i,column:n}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(t,e){return 0==this.compare(t,e)},this.compareRange=function(t){var e,i=t.end,n=t.start;return e=this.compare(i.row,i.column),1==e?(e=this.compare(n.row,n.column),1==e?2:0==e?1:0):-1==e?-2:(e=this.compare(n.row,n.column),-1==e?-1:1==e?42:0)},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(t){var e=this.compareRange(t);return-1==e||0==e||1==e},this.isEnd=function(t,e){return this.end.row==t&&this.end.column==e},this.isStart=function(t,e){return this.start.row==t&&this.start.column==e},this.setStart=function(t,e){"object"==typeof t?(this.start.column=t.column,this.start.row=t.row):(this.start.row=t,this.start.column=e)},this.setEnd=function(t,e){"object"==typeof t?(this.end.column=t.column,this.end.row=t.row):(this.end.row=t,this.end.column=e)},this.inside=function(t,e){return 0==this.compare(t,e)&&(!this.isEnd(t,e)&&!this.isStart(t,e))},this.insideStart=function(t,e){return 0==this.compare(t,e)&&!this.isEnd(t,e)},this.insideEnd=function(t,e){return 0==this.compare(t,e)&&!this.isStart(t,e)},this.compare=function(t,e){return this.isMultiLine()||t!==this.start.row?t<this.start.row?-1:t>this.end.row?1:this.start.row===t?e>=this.start.column?0:-1:this.end.row===t?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(t,e){return this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.compareEnd=function(t,e){return this.end.row==t&&this.end.column==e?1:this.compare(t,e)},this.compareInside=function(t,e){return this.end.row==t&&this.end.column==e?1:this.start.row==t&&this.start.column==e?-1:this.compare(t,e)},this.clipRows=function(t,e){if(this.end.row>e)var i={row:e+1,column:0};else if(this.end.row<t)var i={row:t,column:0};if(this.start.row>e)var n={row:e+1,column:0};else if(this.start.row<t)var n={row:t,column:0};return o.fromPoints(n||this.start,i||this.end)},this.extend=function(t,e){var i=this.compare(t,e);if(0==i)return this;if(-1==i)var n={row:t,column:e};else var s={row:t,column:e};return o.fromPoints(n||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return o.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new o(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new o(this.start.row,0,this.end.row,0)},this.toScreenRange=function(t){var e=t.documentToScreenPosition(this.start),i=t.documentToScreenPosition(this.end);return new o(e.row,e.column,i.row,i.column)},this.moveBy=function(t,e){this.start.row+=t,this.start.column+=e,this.end.row+=t,this.end.column+=e}}).call(o.prototype),o.fromPoints=function(t,e){return new o(t.row,t.column,e.row,e.column)},o.comparePoints=n,o.comparePoints=function(t,e){return t.row-e.row||t.column-e.column},e.Range=o}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/lang"),s=t("./lib/event_emitter").EventEmitter,r=t("./range").Range,a=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var e=this;this.lead.on("change",function(t){e._emit("changeCursor"),e.$isEmpty||e._emit("changeSelection"),e.$keepDesiredColumnOnChange||t.old.column==t.value.column||(e.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){e.$isEmpty||e._emit("changeSelection")})};(function(){n.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.anchor.setPosition(t,e),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(t){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+t);var e=this.getSelectionAnchor(),i=this.getSelectionLead(),n=this.isBackwards();n&&0===e.column||this.setSelectionAnchor(e.row,e.column+t),(n||0!==i.column)&&this.$moveSelection(function(){this.moveCursorTo(i.row,i.column+t)})},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.isEmpty()?r.fromPoints(e,e):this.isBackwards()?r.fromPoints(e,t):r.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var t=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(t,this.doc.getLine(t).length)},this.setRange=this.setSelectionRange=function(t,e){e?(this.setSelectionAnchor(t.end.row,t.end.column),this.selectTo(t.start.row,t.start.column)):(this.setSelectionAnchor(t.start.row,t.start.column),this.selectTo(t.end.row,t.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection(function(){this.moveCursorTo(t,e)})},this.selectToPosition=function(t){this.$moveSelection(function(){this.moveCursorToPosition(t)})},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if("undefined"==typeof e){var i=t||this.lead;t=i.row,e=i.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var i,n="number"==typeof t?t:this.lead.row,o=this.session.getFoldLine(n);return o?(n=o.start.row,i=o.end.row):i=n,e===!0?new r(n,0,i,this.session.getLine(i).length):new r(n,0,i+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var i=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-i,e.column).split(" ").length-1==i?this.moveCursorBy(0,-i):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t,e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var i=this.session.getTabSize(),e=this.lead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+i).split(" ").length-1==i?this.moveCursorBy(0,i):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,i=this.session.documentToScreenRow(t,e),n=this.session.screenToDocumentPosition(i,0),o=this.session.getDisplayLine(t,null,n.row,n.column),s=o.match(/^\s*/);s[0].length==e||this.session.$useEmacsStyleLineStart||(n.column+=s[0].length),this.moveCursorToPosition(n)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var i=this.session.getLine(e.row);if(e.column==i.length){var n=i.search(/\s+$/);n>0&&(e.column=n)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t,e=this.lead.row,i=this.lead.column,n=this.doc.getLine(e),o=n.substring(i);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,i,1);return s?void this.moveCursorTo(s.end.row,s.end.column):((t=this.session.nonTokenRe.exec(o))&&(i+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,o=n.substring(i)),i>=n.length?(this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight())):((t=this.session.tokenRe.exec(o))&&(i+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,i)))},this.moveCursorLongWordLeft=function(){var t,e=this.lead.row,i=this.lead.column;if(t=this.session.getFoldAt(e,i,-1))return void this.moveCursorTo(t.start.row,t.start.column);var n=this.session.getFoldStringAt(e,i,-1);null==n&&(n=this.doc.getLine(e).substring(0,i));var s,r=o.stringReverse(n);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(s=this.session.nonTokenRe.exec(r))&&(i-=this.session.nonTokenRe.lastIndex,r=r.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=i?(this.moveCursorTo(e,0),this.moveCursorLeft(),void(e>0&&this.moveCursorWordLeft())):((s=this.session.tokenRe.exec(r))&&(i-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,i))},this.$shortWordEndIndex=function(t){var e,i,n=0,o=/\s/,s=this.session.tokenRe;if(s.lastIndex=0,e=this.session.tokenRe.exec(t))n=this.session.tokenRe.lastIndex;else{for(;(i=t[n])&&o.test(i);)n++;if(1>n)for(s.lastIndex=0;(i=t[n])&&!s.test(i);)if(s.lastIndex=0,n++,o.test(i)){if(n>2){n--;break}for(;(i=t[n])&&o.test(i);)n++;if(n>2)break}}return s.lastIndex=0,n},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,i=this.doc.getLine(t),n=i.substring(e),o=this.session.getFoldAt(t,e,1);if(o)return this.moveCursorTo(o.end.row,o.end.column);if(e==i.length){var s=this.doc.getLength();do t++,n=this.doc.getLine(t);while(s>t&&/^\s*$/.test(n));/^\s+/.test(n)||(n=""),e=0}var r=this.$shortWordEndIndex(n);this.moveCursorTo(t,e+r)},this.moveCursorShortWordLeft=function(){var t,e=this.lead.row,i=this.lead.column;if(t=this.session.getFoldAt(e,i,-1))return this.moveCursorTo(t.start.row,t.start.column);var n=this.session.getLine(e).substring(0,i);if(0===i){do e--,n=this.doc.getLine(e);while(e>0&&/^\s*$/.test(n));i=n.length,/\s+$/.test(n)||(n="")}var s=o.stringReverse(n),r=this.$shortWordEndIndex(s);return this.moveCursorTo(e,i-r)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===e&&(this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column);var n=this.session.screenToDocumentPosition(i.row+t,i.column);0!==t&&0===e&&n.row===this.lead.row&&n.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[n.row]&&(n.row>0||t>0)&&n.row++,this.moveCursorTo(n.row,n.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,i){var n=this.session.getFoldAt(t,e,1);n&&(t=n.start.row,e=n.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,i||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,i){var n=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(n.row,n.column,i)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var i=this.getCursor();return r.fromPoints(e,i)}catch(n){return r.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map(function(t){var e=t.clone();return e.isBackwards=t.cursor==t.start,e});else{var t=this.getRange();t.isBackwards=this.isBackwards()}return t},this.fromJSON=function(t){if(void 0==t.start){if(this.rangeList){this.toSingleRange(t[0]);for(var e=t.length;e--;){var i=r.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(i.cursor=i.start),this.addRange(i,!0)}return}t=t[0]}this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(a.prototype),e.Selection=a}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(t,e,i){"use strict";var n=t("./config"),o=2e3,s=function(t){this.states=t,this.regExps={},this.matchMappings={};for(var e in this.states){for(var i=this.states[e],n=[],o=0,s=this.matchMappings[e]={defaultToken:"text"},r="g",a=[],h=0;h<i.length;h++){var l=i[h];if(l.defaultToken&&(s.defaultToken=l.defaultToken),l.caseInsensitive&&(r="gi"),null!=l.regex){l.regex instanceof RegExp&&(l.regex=l.regex.toString().slice(1,-1));var d=l.regex,c=new RegExp("(?:("+d+")|(.))").exec("a").length-2;Array.isArray(l.token)?1==l.token.length||1==c?l.token=l.token[0]:c-1!=l.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:l,groupCount:c-1}),l.token=l.token[0]):(l.tokenArray=l.token,l.token=null,l.onMatch=this.$arrayTokens):"function"!=typeof l.token||l.onMatch||(c>1?l.onMatch=this.$applyToken:l.onMatch=l.token),c>1&&(/\\\d/.test(l.regex)?d=l.regex.replace(/\\([0-9]+)/g,function(t,e){return"\\"+(parseInt(e,10)+o+1)}):(c=1,d=this.removeCapturingGroups(l.regex)),l.splitRegex||"string"==typeof l.token||a.push(l)),s[o]=h,o+=c,n.push(d),l.onMatch||(l.onMatch=null)}}n.length||(s[0]=0,n.push("$")),a.forEach(function(t){t.splitRegex=this.createSplitterRegexp(t.regex,r)},this),this.regExps[e]=new RegExp("("+n.join(")|(")+")|($)",r)}};(function(){this.$setMaxTokenCount=function(t){o=0|t},this.$applyToken=function(t){var e=this.splitRegex.exec(t).slice(1),i=this.token.apply(this,e);if("string"==typeof i)return[{type:i,value:t}];for(var n=[],o=0,s=i.length;s>o;o++)e[o]&&(n[n.length]={type:i[o],value:e[o]});return n},this.$arrayTokens=function(t){if(!t)return[];var e=this.splitRegex.exec(t);if(!e)return"text";for(var i=[],n=this.tokenArray,o=0,s=n.length;s>o;o++)e[o+1]&&(i[i.length]={type:n[o],value:e[o+1]});return i},this.removeCapturingGroups=function(t){var e=t.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(t,e){return e?"(?:":t});return e},this.createSplitterRegexp=function(t,e){if(-1!=t.indexOf("(?=")){
var i=0,n=!1,o={};t.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(t,e,s,r,a,h){return n?n="]"!=a:a?n=!0:r?(i==o.stack&&(o.end=h+1,o.stack=-1),i--):s&&(i++,1!=s.length&&(o.stack=i,o.start=h)),t}),null!=o.end&&/^\)*$/.test(t.substr(o.end))&&(t=t.substring(0,o.start)+t.substr(o.end))}return"^"!=t.charAt(0)&&(t="^"+t),"$"!=t.charAt(t.length-1)&&(t+="$"),new RegExp(t,(e||"").replace("g",""))},this.getLineTokens=function(t,e){if(e&&"string"!=typeof e){var i=e.slice(0);e=i[0],"#tmp"===e&&(i.shift(),e=i.shift())}else var i=[];var n=e||"start",s=this.states[n];s||(n="start",s=this.states[n]);var r=this.matchMappings[n],a=this.regExps[n];a.lastIndex=0;for(var h,l=[],d=0,c=0,u={type:null,value:""};h=a.exec(t);){var g=r.defaultToken,f=null,p=h[0],m=a.lastIndex;if(m-p.length>d){var v=t.substring(d,m-p.length);u.type==g?u.value+=v:(u.type&&l.push(u),u={type:g,value:v})}for(var w=0;w<h.length-2;w++)if(void 0!==h[w+1]){f=s[r[w]],g=f.onMatch?f.onMatch(p,n,i):f.token,f.next&&(n="string"==typeof f.next?f.next:f.next(n,i),s=this.states[n],s||(this.reportError("state doesn't exist",n),n="start",s=this.states[n]),r=this.matchMappings[n],d=m,a=this.regExps[n],a.lastIndex=m);break}if(p)if("string"==typeof g)f&&f.merge===!1||u.type!==g?(u.type&&l.push(u),u={type:g,value:p}):u.value+=p;else if(g){u.type&&l.push(u),u={type:null,value:""};for(var w=0;w<g.length;w++)l.push(g[w])}if(d==t.length)break;if(d=m,c++>o){for(c>2*t.length&&this.reportError("infinite loop with in ace tokenizer",{startState:e,line:t});d<t.length;)u.type&&l.push(u),u={value:t.substring(d,d+=2e3),type:"overflow"};n="start",i=[];break}}return u.type&&l.push(u),i.length>1&&i[0]!==n&&i.unshift("#tmp",n),{tokens:l,state:i.length?i:n}},this.reportError=n.reportError}).call(s.prototype),e.Tokenizer=s}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(t,e,i){"use strict";var n=t("../lib/lang"),o=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,e){if(e)for(var i in t){for(var n=t[i],o=0;o<n.length;o++){var s=n[o];(s.next||s.onMatch)&&("string"==typeof s.next&&0!==s.next.indexOf(e)&&(s.next=e+s.next),s.nextState&&0!==s.nextState.indexOf(e)&&(s.nextState=e+s.nextState))}this.$rules[e+i]=n}else for(var i in t)this.$rules[i]=t[i]},this.getRules=function(){return this.$rules},this.embedRules=function(t,e,i,o,s){var r="function"==typeof t?(new t).getRules():t;if(o)for(var a=0;a<o.length;a++)o[a]=e+o[a];else{o=[];for(var h in r)o.push(e+h)}if(this.addRules(r,e),i)for(var l=Array.prototype[s?"push":"unshift"],a=0;a<o.length;a++)l.apply(this.$rules[o[a]],n.deepCopy(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(e)},this.getEmbeds=function(){return this.$embeds};var t=function(t,e){return("start"!=t||e.length)&&e.unshift(this.nextState,t),this.nextState},e=function(t,e){return e.shift(),e.shift()||"start"};this.normalizeRules=function(){function i(s){var r=o[s];r.processed=!0;for(var a=0;a<r.length;a++){var h=r[a];!h.regex&&h.start&&(h.regex=h.start,h.next||(h.next=[]),h.next.push({defaultToken:h.token},{token:h.token+".end",regex:h.end||h.start,next:"pop"}),h.token=h.token+".start",h.push=!0);var l=h.next||h.push;if(l&&Array.isArray(l)){var d=h.stateName;d||(d=h.token,"string"!=typeof d&&(d=d[0]||""),o[d]&&(d+=n++)),o[d]=l,h.next=d,i(d)}else"pop"==l&&(h.next=e);if(h.push&&(h.nextState=h.next||h.push,h.next=t,delete h.push),h.rules)for(var c in h.rules)o[c]?o[c].push&&o[c].push.apply(o[c],h.rules[c]):o[c]=h.rules[c];if(h.include||"string"==typeof h)var u=h.include||h,g=o[u];else Array.isArray(h)&&(g=h);if(g){var f=[a,1].concat(g);h.noEscape&&(f=f.filter(function(t){return!t.next})),r.splice.apply(r,f),a--,g=null}h.keywordMap&&(h.token=this.createKeywordMapper(h.keywordMap,h.defaultToken||"text",h.caseInsensitive),delete h.defaultToken)}}var n=0,o=this.$rules;Object.keys(o).forEach(i,this)},this.createKeywordMapper=function(t,e,i,n){var o=Object.create(null);return Object.keys(t).forEach(function(e){var s=t[e];i&&(s=s.toLowerCase());for(var r=s.split(n||"|"),a=r.length;a--;)o[r[a]]=e}),Object.getPrototypeOf(o)&&(o.__proto__=null),this.$keywordList=Object.keys(o),t=null,i?function(t){return o[t.toLowerCase()]||e}:function(t){return o[t]||e}},this.getKeywords=function(){return this.$keywords}}).call(o.prototype),e.TextHighlightRules=o}),ace.define("ace/mode/behaviour",["require","exports","module"],function(t,e,i){"use strict";var n=function(){this.$behaviours={}};(function(){this.add=function(t,e,i){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[t]:this.$behaviours[t]={}}this.$behaviours[t][e]=i},this.addBehaviours=function(t){for(var e in t)for(var i in t[e])this.add(e,i,t[e][i])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(t,e){if("function"==typeof t)var i=(new t).getBehaviours(e);else var i=t.getBehaviours(e);this.addBehaviours(i)},this.getBehaviours=function(t){if(t){for(var e={},i=0;i<t.length;i++)this.$behaviours[t[i]]&&(e[t[i]]=this.$behaviours[t[i]]);return e}return this.$behaviours}}).call(n.prototype),e.Behaviour=n}),ace.define("ace/unicode",["require","exports","module"],function(t,e,i){"use strict";function n(t){var i=/\w{4}/g;for(var n in t)e.packages[n]=t[n].replace(i,"\\u$&")}e.packages={},n({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/token_iterator",["require","exports","module"],function(t,e,i){"use strict";var n=function(t,e,i){this.$session=t,this.$row=e,this.$rowTokens=t.getTokens(e);var n=t.getTokenAt(e,i);this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var t;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var t=this.$rowTokens,e=this.$tokenIndex,i=t[e].start;if(void 0!==i)return i;for(i=0;e>0;)e-=1,i+=t[e].value.length;return i},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()
}}}).call(n.prototype),e.TokenIterator=n}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(t,e,i){"use strict";var n=t("../tokenizer").Tokenizer,o=t("./text_highlight_rules").TextHighlightRules,s=t("./behaviour").Behaviour,r=t("../unicode"),a=t("../lib/lang"),h=t("../token_iterator").TokenIterator,l=t("../range").Range,d=function(){this.HighlightRules=o,this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+r.packages.L+r.packages.Mn+r.packages.Mc+r.packages.Nd+r.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+r.packages.L+r.packages.Mn+r.packages.Mc+r.packages.Nd+r.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new n(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(t,e,i,n){function o(t){for(var e=i;n>=e;e++)t(s.getLine(e),e)}var s=e.doc,r=!0,h=!0,l=1/0,d=e.getTabSize(),c=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var u=this.lineCommentStart.map(a.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var u=a.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;u=new RegExp("^(\\s*)(?:"+u+") ?"),c=e.getUseSoftTabs();var f=function(t,e){var i=t.match(u);if(i){var n=i[1].length,o=i[0].length;w(t,n,o)||" "!=i[0][o-1]||o--,s.removeInLine(e,n,o)}},p=g+" ",m=function(t,e){r&&!/\S/.test(t)||(w(t,l,l)?s.insertInLine({row:e,column:l},p):s.insertInLine({row:e,column:l},g))},v=function(t,e){return u.test(t)},w=function(t,e,i){for(var n=0;e--&&" "==t.charAt(e);)n++;if(n%d!=0)return!1;for(var n=0;" "==t.charAt(i++);)n++;return d>2?n%d!=d-1:n%d==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,y=this.blockComment.end,u=new RegExp("^(\\s*)(?:"+a.escapeRegExp(g)+")"),R=new RegExp("(?:"+a.escapeRegExp(y)+")\\s*$"),m=function(t,e){v(t,e)||r&&!/\S/.test(t)||(s.insertInLine({row:e,column:t.length},y),s.insertInLine({row:e,column:l},g))},f=function(t,e){var i;(i=t.match(R))&&s.removeInLine(e,t.length-i[0].length,t.length),(i=t.match(u))&&s.removeInLine(e,i[1].length,i[0].length)},v=function(t,i){if(u.test(t))return!0;for(var n=e.getTokens(i),o=0;o<n.length;o++)if("comment"===n[o].type)return!0}}var A=1/0;o(function(t,e){var i=t.search(/\S/);-1!==i?(l>i&&(l=i),h&&!v(t,e)&&(h=!1)):A>t.length&&(A=t.length)}),l==1/0&&(l=A,r=!1,h=!1),c&&l%d!=0&&(l=Math.floor(l/d)*d),o(h?f:m)},this.toggleBlockComment=function(t,e,i,n){var o=this.blockComment;if(o){!o.start&&o[0]&&(o=o[0]);var s,r,a=new h(e,n.row,n.column),d=a.getCurrentToken(),c=(e.selection,e.selection.toOrientedRange());if(d&&/comment/.test(d.type)){for(var u,g;d&&/comment/.test(d.type);){var f=d.value.indexOf(o.start);if(-1!=f){var p=a.getCurrentTokenRow(),m=a.getCurrentTokenColumn()+f;u=new l(p,m,p,m+o.start.length);break}d=a.stepBackward()}for(var a=new h(e,n.row,n.column),d=a.getCurrentToken();d&&/comment/.test(d.type);){var f=d.value.indexOf(o.end);if(-1!=f){var p=a.getCurrentTokenRow(),m=a.getCurrentTokenColumn()+f;g=new l(p,m,p,m+o.end.length);break}d=a.stepForward()}g&&e.remove(g),u&&(e.remove(u),s=u.start.row,r=-o.start.length)}else r=o.start.length,s=i.start.row,e.insert(i.end,o.end),e.insert(i.start,o.start);c.start.row==s&&(c.start.column+=r),c.end.row==s&&(c.end.column+=r),e.selection.fromOrientedRange(c)}},this.getNextLineIndent=function(t,e,i){return this.$getIndent(e)},this.checkOutdent=function(t,e,i){return!1},this.autoOutdent=function(t,e,i){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(t){return null},this.createModeDelegates=function(t){this.$embeds=[],this.$modes={};for(var e in t)t[e]&&(this.$embeds.push(e),this.$modes[e]=new t[e]);for(var i=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],e=0;e<i.length;e++)!function(t){var n=i[e],o=t[n];t[i[e]]=function(){return this.$delegator(n,arguments,o)}}(this)},this.$delegator=function(t,e,i){var n=e[0];"string"!=typeof n&&(n=n[0]);for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var s=n.split(this.$embeds[o]);if(!s[0]&&s[1]){e[0]=s[1];var r=this.$modes[this.$embeds[o]];return r[t].apply(r,e)}}var a=i.apply(this,e);return i?a:void 0},this.transformAction=function(t,e,i,n,o){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var r in s)if(s[r][e]){var a=s[r][e].apply(this,arguments);if(a)return a}}},this.getKeywords=function(t){if(!this.completionKeywords){var e=this.$tokenizer.rules,i=[];for(var n in e)for(var o=e[n],s=0,r=o.length;r>s;s++)if("string"==typeof o[s].token)/keyword|support|storage/.test(o[s].token)&&i.push(o[s].regex);else if("object"==typeof o[s].token)for(var a=0,h=o[s].token.length;h>a;a++)if(/keyword|support|storage/.test(o[s].token[a])){var n=o[s].regex.match(/\(.+?\)/g)[a];i.push(n.substr(1,n.length-2))}this.completionKeywords=i}return t?i.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(t,e,i,n){var o=this.$keywordList||this.$createKeywordList();return o.map(function(t){return{name:t,value:t,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(d.prototype),e.Mode=d}),ace.define("ace/apply_delta",["require","exports","module"],function(t,e,i){"use strict";e.applyDelta=function(t,e,i){var n=e.start.row,o=e.start.column,s=t[n]||"";switch(e.action){case"insert":var r=e.lines;if(1===r.length)t[n]=s.substring(0,o)+e.lines[0]+s.substring(o);else{var a=[n,1].concat(e.lines);t.splice.apply(t,a),t[n]=s.substring(0,o)+t[n],t[n+e.lines.length-1]+=s.substring(o)}break;case"remove":var h=e.end.column,l=e.end.row;n===l?t[n]=s.substring(0,o)+s.substring(h):t.splice(n,l-n+1,s.substring(0,o)+t[l].substring(h))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/event_emitter").EventEmitter,s=e.Anchor=function(t,e,i){this.$onChange=this.onChange.bind(this),this.attach(t),"undefined"==typeof i?this.setPosition(e.row,e.column):this.setPosition(e,i)};(function(){function t(t,e,i){var n=i?t.column<=e.column:t.column<e.column;return t.row<e.row||t.row==e.row&&n}function e(e,i,n){var o="insert"==e.action,s=(o?1:-1)*(e.end.row-e.start.row),r=(o?1:-1)*(e.end.column-e.start.column),a=e.start,h=o?a:e.end;return t(i,a,n)?{row:i.row,column:i.column}:t(h,i,!n)?{row:i.row+s,column:i.column+(i.row==h.row?r:0)}:{row:a.row,column:a.column}}n.implement(this,o),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row||t.start.row>this.row)){var i=e(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(i.row,i.column,!0)}},this.setPosition=function(t,e,i){var n;if(n=i?{row:t,column:e}:this.$clipPositionToDocument(t,e),this.row!=n.row||this.column!=n.column){var o={row:this.row,column:this.column};this.row=n.row,this.column=n.column,this._signal("change",{old:o,value:n})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var i={};return t>=this.document.getLength()?(i.row=Math.max(0,this.document.getLength()-1),i.column=this.document.getLine(i.row).length):0>t?(i.row=0,i.column=0):(i.row=t,i.column=Math.min(this.document.getLine(i.row).length,Math.max(0,e))),0>e&&(i.column=0),i}}).call(s.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./apply_delta").applyDelta,s=t("./lib/event_emitter").EventEmitter,r=t("./range").Range,a=t("./anchor").Anchor,h=function(t){this.$lines=[""],0===t.length?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){n.implement(this,s),this.setValue=function(t){var e=this.getLength()-1;this.remove(new r(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},t)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,e){return new a(this,t,e)},0==="aaa".split(/a/).length?this.$split=function(t){return t.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return"\r\n"==t||"\r"==t||"\n"==t},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,e){return this.$lines.slice(t,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var e;if(t.start.row===t.end.row)e=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{e=this.getLines(t.start.row,t.end.row),e[0]=(e[0]||"").substring(t.start.column);var i=e.length-1;t.end.row-t.start.row==i&&(e[i]=e[i].substring(0,t.end.column))}return e},this.insertLines=function(t,e){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,e)},this.removeLines=function(t,e){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,e)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,e){return this.getLength()<=1&&this.$detectNewLine(e),this.insertMergedLines(t,this.$split(e))},this.insertInLine=function(t,e){var i=this.clippedPos(t.row,t.column),n=this.pos(t.row,t.column+e.length);return this.applyDelta({start:i,end:n,action:"insert",lines:[e]},!0),this.clonePos(n)},this.clippedPos=function(t,e){var i=this.getLength();void 0===t?t=i:0>t?t=0:t>=i&&(t=i-1,e=void 0);var n=this.getLine(t);return void 0==e&&(e=n.length),e=Math.min(Math.max(e,0),n.length),{row:t,column:e}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,e){return{row:t,column:e}},this.$clipPosition=function(t){var e=this.getLength();return t.row>=e?(t.row=Math.max(0,e-1),t.column=this.getLine(e-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,e){t=Math.min(Math.max(t,0),this.getLength());var i=0;t<this.getLength()?(e=e.concat([""]),i=0):(e=[""].concat(e),t--,i=this.$lines[t].length),this.insertMergedLines({row:t,column:i},e)},this.insertMergedLines=function(t,e){var i=this.clippedPos(t.row,t.column),n={row:i.row+e.length-1,column:(1==e.length?i.column:0)+e[e.length-1].length};return this.applyDelta({start:i,end:n,action:"insert",lines:e}),this.clonePos(n)},this.remove=function(t){var e=this.clippedPos(t.start.row,t.start.column),i=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:e,end:i,action:"remove",lines:this.getLinesForRange({start:e,end:i})}),this.clonePos(e)},this.removeInLine=function(t,e,i){var n=this.clippedPos(t,e),o=this.clippedPos(t,i);return this.applyDelta({start:n,end:o,action:"remove",lines:this.getLinesForRange({start:n,end:o})},!0),this.clonePos(n)},this.removeFullLines=function(t,e){t=Math.min(Math.max(0,t),this.getLength()-1),e=Math.min(Math.max(0,e),this.getLength()-1);var i=e==this.getLength()-1&&t>0,n=e<this.getLength()-1,o=i?t-1:t,s=i?this.getLine(o).length:0,a=n?e+1:e,h=n?0:this.getLine(a).length,l=new r(o,s,a,h),d=this.$lines.slice(t,e+1);return this.applyDelta({start:l.start,end:l.end,action:"remove",lines:this.getLinesForRange(l)}),d},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,e){if(t instanceof r||(t=r.fromPoints(t.start,t.end)),0===e.length&&t.isEmpty())return t.start;if(e==this.getTextRange(t))return t.end;this.remove(t);var i;return i=e?this.insert(t.start,e):t.start},this.applyDeltas=function(t){for(var e=0;e<t.length;e++)this.applyDelta(t[e])},this.revertDeltas=function(t){for(var e=t.length-1;e>=0;e--)this.revertDelta(t[e])},this.applyDelta=function(t,e){var i="insert"==t.action;(i?t.lines.length<=1&&!t.lines[0]:!r.comparePoints(t.start,t.end))||(i&&t.lines.length>2e4&&this.$splitAndapplyLargeDelta(t,2e4),o(this.$lines,t,e),this._signal("change",t))},this.$splitAndapplyLargeDelta=function(t,e){for(var i=t.lines,n=i.length,o=t.start.row,s=t.start.column,r=0,a=0;;){r=a,a+=e-1;var h=i.slice(r,a);if(a>n){t.lines=h,t.start.row=o+r,t.start.column=s;break}h.push(""),this.applyDelta({start:this.pos(o+r,s),end:this.pos(o+a,s=0),action:t.action,lines:h},!0)}},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:"insert"==t.action?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,e){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,o=e||0,s=i.length;s>o;o++)if(t-=i[o].length+n,0>t)return{row:o,column:t+i[o].length+n};return{row:s-1,column:i[s-1].length}},this.positionToIndex=function(t,e){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,o=0,s=Math.min(t.row,i.length),r=e||0;s>r;++r)o+=i[r].length+n;return o+t.column}}).call(h.prototype),e.Document=h}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/event_emitter").EventEmitter,s=function(t,e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var i=this;this.$worker=function(){if(i.running){for(var t=new Date,e=i.currentLine,n=-1,o=i.doc,s=e;i.lines[e];)e++;var r=o.getLength(),a=0;for(i.running=!1;r>e;){i.$tokenizeRow(e),n=e;do e++;while(i.lines[e]);if(a++,a%5===0&&new Date-t>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=e,n>=s&&i.fireUpdateEvent(s,n)}}};(function(){n.implement(this,o),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(t,e){var i={first:t,last:e};this._signal("update",{data:i})},this.start=function(t){this.currentLine=Math.min(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(t){var e=t.start.row,i=t.end.row-e;if(0===i)this.lines[e]=null;else if("remove"==t.action)this.lines.splice(e,i+1,null),this.states.splice(e,i+1,null);else{var n=Array(i+1);n.unshift(e,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=Math.min(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||"start"},this.$tokenizeRow=function(t){var e=this.doc.getLine(t),i=this.states[t-1],n=this.tokenizer.getLineTokens(e,i,t);return this.states[t]+""!=n.state+""?(this.states[t]=n.state,this.lines[t+1]=null,this.currentLine>t+1&&(this.currentLine=t+1)):this.currentLine==t&&(this.currentLine=t+1),this.lines[t]=n.tokens}}).call(s.prototype),e.BackgroundTokenizer=s}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,e,i){"use strict";var n=t("./lib/lang"),o=(t("./lib/oop"),t("./range").Range),s=function(t,e,i){this.setRegexp(t),this.clazz=e,this.type=i||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+""!=t+""&&(this.regExp=t,this.cache=[])},this.update=function(t,e,i,s){if(this.regExp)for(var r=s.firstRow,a=s.lastRow,h=r;a>=h;h++){var l=this.cache[h];null==l&&(l=n.getMatchOffsets(i.getLine(h),this.regExp),l.length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES)),l=l.map(function(t){return new o(h,t.offset,h,t.offset+t.length)}),this.cache[h]=l.length?l:"");for(var d=l.length;d--;)e.drawSingleLineMarker(t,l[d].toScreenRange(i),this.clazz,s)}}}).call(s.prototype),e.SearchHighlight=s}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(t,e,i){"use strict";function n(t,e){this.foldData=t,Array.isArray(e)?this.folds=e:e=this.folds=[e];var i=e[e.length-1];this.range=new o(e[0].start.row,e[0].start.column,i.end.row,i.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(t){t.setFoldLine(this)},this)}var o=t("../range").Range;(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach(function(e){e.start.row+=t,e.end.row+=t})},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(t),this.folds.sort(function(t,e){return-t.range.compareEnd(e.start.row,e.start.column)}),this.range.compareEnd(t.start.row,t.start.column)>0?(this.end.row=t.end.row,this.end.column=t.end.column):this.range.compareStart(t.end.row,t.end.column)<0&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(t,e,i){var n,o,s,r=0,a=this.folds,h=!0;null==e&&(e=this.end.row,i=this.end.column);for(var l=0;l<a.length;l++){if(n=a[l],o=n.range.compareStart(e,i),-1==o)return void t(null,e,i,r,h);if(s=t(null,n.start.row,n.start.column,r,h),s=!s&&t(n.placeholder,n.start.row,n.start.column,r),s||0===o)return;h=!n.sameRow,r=n.end.column}t(null,e,i,r,h)},this.getNextFoldTo=function(t,e){for(var i,n,o=0;o<this.folds.length;o++){if(i=this.folds[o],n=i.range.compareEnd(t,e),-1==n)return{fold:i,kind:"after"};if(0===n)return{fold:i,kind:"inside"}}return null},this.addRemoveChars=function(t,e,i){var n,o,s=this.getNextFoldTo(t,e);if(s)if(n=s.fold,"inside"==s.kind&&n.start.column!=e&&n.start.row!=t)window.console&&window.console.log(t,e,n);else if(n.start.row==t){o=this.folds;var r=o.indexOf(n);for(0===r&&(this.start.column+=i),r;r<o.length;r++){if(n=o[r],n.start.column+=i,!n.sameRow)return;n.end.column+=i}this.end.column+=i}},this.split=function(t,e){var i=this.getNextFoldTo(t,e);if(!i||"inside"==i.kind)return null;var o=i.fold,s=this.folds,r=this.foldData,a=s.indexOf(o),h=s[a-1];this.end.row=h.end.row,this.end.column=h.end.column,s=s.splice(a,s.length-a);var l=new n(r,s);return r.splice(r.indexOf(this)+1,0,l),l},this.merge=function(t){for(var e=t.folds,i=0;i<e.length;i++)this.addFold(e[i]);var n=this.foldData;n.splice(n.indexOf(t),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach(function(e){t.push("  "+e.toString())}),t.push("]"),t.join("\n")},this.idxToPosition=function(t){for(var e=0,i=0;i<this.folds.length;i++){var n=this.folds[i];if(t-=n.start.column-e,0>t)return{row:n.start.row,column:n.start.column+t};if(t-=n.placeholder.length,0>t)return n.start;e=n.end.column}return{row:this.end.row,column:this.end.column+t}}}).call(n.prototype),e.FoldLine=n}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(t,e,i){"use strict";var n=t("./range").Range,o=n.comparePoints,s=function(){this.ranges=[]};(function(){this.comparePoints=o,this.pointIndex=function(t,e,i){for(var n=this.ranges,s=i||0;s<n.length;s++){var r=n[s],a=o(t,r.end);if(!(a>0)){var h=o(t,r.start);return 0===a?e&&0!==h?-s-2:s:h>0||0===h&&!e?s:-s-1}}return-s-1},this.add=function(t){var e=!t.isEmpty(),i=this.pointIndex(t.start,e);0>i&&(i=-i-1);var n=this.pointIndex(t.end,e,i);return 0>n?n=-n-1:n++,this.ranges.splice(i,n-i,t)},this.addList=function(t){for(var e=[],i=t.length;i--;)e.push.apply(e,this.add(t[i]));return e},this.substractPoint=function(t){var e=this.pointIndex(t);return e>=0?this.ranges.splice(e,1):void 0},this.merge=function(){var t=[],e=this.ranges;e=e.sort(function(t,e){return o(t.start,e.start)});for(var i,n=e[0],s=1;s<e.length;s++){i=n,n=e[s];var r=o(i.end,n.start);0>r||(0!=r||i.isEmpty()||n.isEmpty())&&(o(i.end,n.end)<0&&(i.end.row=n.end.row,i.end.column=n.end.column),e.splice(s,1),t.push(n),n=i,s--)}return this.ranges=e,t},this.contains=function(t,e){return this.pointIndex({row:t,column:e})>=0},this.containsPoint=function(t){return this.pointIndex(t)>=0},this.rangeAtPoint=function(t){var e=this.pointIndex(t);return e>=0?this.ranges[e]:void 0},this.clipRows=function(t,e){var i=this.ranges;if(i[0].start.row>e||i[i.length-1].start.row<t)return[];var n=this.pointIndex({row:t,column:0});0>n&&(n=-n-1);var o=this.pointIndex({row:e,column:0},n);0>o&&(o=-o-1);for(var s=[],r=n;o>r;r++)s.push(i[r]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(t){if("insert"==t.action)var e=t.start,i=t.end;else var i=t.start,e=t.end;for(var n=e.row,o=i.row,s=o-n,r=-e.column+i.column,a=this.ranges,h=0,l=a.length;l>h;h++){var d=a[h];if(!(d.end.row<n)){if(d.start.row>n)break;if(d.start.row==n&&d.start.column>=e.column&&(d.start.column==e.column&&this.$insertRight||(d.start.column+=r,d.start.row+=s)),d.end.row==n&&d.end.column>=e.column){if(d.end.column==e.column&&this.$insertRight)continue;d.end.column==e.column&&r>0&&l-1>h&&d.end.column>d.start.column&&d.end.column==a[h+1].start.column&&(d.end.column-=r),d.end.column+=r,d.end.row+=s}}}if(0!=s&&l>h)for(;l>h;h++){var d=a[h];d.start.row+=s,d.end.row+=s}}}).call(s.prototype),e.RangeList=s}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(t,e,i){"use strict";function n(t,e){t.row-=e.row,0==t.row&&(t.column-=e.column)}function o(t,e){n(t.start,e),n(t.end,e)}function s(t,e){0==t.row&&(t.column+=e.column),t.row+=e.row}function r(t,e){s(t.start,e),s(t.end,e)}var a=(t("../range").Range,t("../range_list").RangeList),h=t("../lib/oop"),l=e.Fold=function(t,e){this.foldLine=null,this.placeholder=e,this.range=t,this.start=t.start,this.end=t.end,this.sameRow=t.start.row==t.end.row,this.subFolds=this.ranges=[]};h.inherits(l,a),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach(function(e){e.setFoldLine(t)})},this.clone=function(){var t=this.range.clone(),e=new l(t,this.placeholder);return this.subFolds.forEach(function(t){e.subFolds.push(t.clone())}),e.collapseChildren=this.collapseChildren,e},this.addSubFold=function(t){if(!this.range.isEqual(t)){if(!this.range.containsRange(t))throw new Error("A fold can't intersect already existing fold"+t.range+this.range);o(t,this.start);for(var e=t.start.row,i=t.start.column,n=0,s=-1;n<this.subFolds.length&&(s=this.subFolds[n].range.compare(e,i),1==s);n++);var r=this.subFolds[n];if(0==s)return r.addSubFold(t);for(var e=t.range.end.row,i=t.range.end.column,a=n,s=-1;a<this.subFolds.length&&(s=this.subFolds[a].range.compare(e,i),1==s);a++);if(this.subFolds[a],0==s)throw new Error("A fold can't intersect already existing fold"+t.range+this.range);return this.subFolds.splice(n,a-n,t),t.setFoldLine(this.foldLine),t}},this.restoreRange=function(t){return r(t,this.start)}}.call(l.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(t,e,i){"use strict";function n(){this.getFoldAt=function(t,e,i){var n=this.getFoldLine(t);if(!n)return null;for(var o=n.folds,s=0;s<o.length;s++){var r=o[s];if(r.range.contains(t,e)){if(1==i&&r.range.isEnd(t,e))continue;if(-1==i&&r.range.isStart(t,e))continue;return r}}},this.getFoldsInRange=function(t){var e=t.start,i=t.end,n=this.$foldData,o=[];e.column+=1,i.column-=1;for(var s=0;s<n.length;s++){var r=n[s].range.compareRange(t);if(2!=r){if(-2==r)break;for(var a=n[s].folds,h=0;h<a.length;h++){var l=a[h];if(r=l.range.compareRange(t),-2==r)break;if(2!=r){if(42==r)break;o.push(l)}}}}return e.column-=1,i.column+=1,o},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach(function(t){e=e.concat(this.getFoldsInRange(t))},this)}else var e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,i=0;i<e.length;i++)for(var n=0;n<e[i].folds.length;n++)t.push(e[i].folds[n]);return t},this.getFoldStringAt=function(t,e,i,n){if(n=n||this.getFoldLine(t),!n)return null;for(var o,s,r={end:{column:0}},a=0;a<n.folds.length;a++){s=n.folds[a];var h=s.range.compareEnd(t,e);if(-1==h){o=this.getLine(s.start.row).substring(r.end.column,s.start.column);break}if(0===h)return null;r=s}return o||(o=this.getLine(s.start.row).substring(r.end.column)),-1==i?o.substring(0,e-r.end.column):1==i?o.substring(e-r.end.column):o},this.getFoldLine=function(t,e){var i=this.$foldData,n=0;for(e&&(n=i.indexOf(e)),-1==n&&(n=0),n;n<i.length;n++){var o=i[n];if(o.start.row<=t&&o.end.row>=t)return o;if(o.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var i=this.$foldData,n=0;for(e&&(n=i.indexOf(e)),-1==n&&(n=0),n;n<i.length;n++){var o=i[n];if(o.end.row>=t)return o}return null},this.getFoldedRowCount=function(t,e){for(var i=this.$foldData,n=e-t+1,o=0;o<i.length;o++){var s=i[o],r=s.end.row,a=s.start.row;if(r>=e){e>a&&(a>=t?n-=e-a:n=0);break}r>=t&&(n-=a>=t?r-a:r-t+1)}return n},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort(function(t,e){return t.start.row-e.start.row}),t},this.addFold=function(t,e){var i,n=this.$foldData,o=!1;t instanceof r?i=t:(i=new r(e,t),i.collapseChildren=e.collapseChildren),this.$clipRangeToDocument(i.range);var a=i.start.row,h=i.start.column,l=i.end.row,d=i.end.column;if(!(l>a||a==l&&d-2>=h))throw new Error("The range has to be at least 2 characters width");var c=this.getFoldAt(a,h,1),u=this.getFoldAt(l,d,-1);if(c&&u==c)return c.addSubFold(i);c&&!c.range.isStart(a,h)&&this.removeFold(c),u&&!u.range.isEnd(l,d)&&this.removeFold(u);var g=this.getFoldsInRange(i.range);g.length>0&&(this.removeFolds(g),g.forEach(function(t){i.addSubFold(t)}));for(var f=0;f<n.length;f++){var p=n[f];if(l==p.start.row){p.addFold(i),o=!0;break}if(a==p.end.row){if(p.addFold(i),o=!0,!i.sameRow){var m=n[f+1];if(m&&m.start.row==l){p.merge(m);break}}break}if(l<=p.start.row)break}return o||(p=this.$addFoldLine(new s(this.$foldData,i))),this.$useWrapMode?this.$updateWrapData(p.start.row,p.start.row):this.$updateRowLengthCache(p.start.row,p.start.row),this.$modified=!0,this._signal("changeFold",{data:i,action:"add"}),i},this.addFolds=function(t){t.forEach(function(t){this.addFold(t)},this)},this.removeFold=function(t){var e=t.foldLine,i=e.start.row,n=e.end.row,o=this.$foldData,s=e.folds;if(1==s.length)o.splice(o.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))s.pop(),e.end.row=s[s.length-1].end.row,e.end.column=s[s.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))s.shift(),e.start.row=s[0].start.row,e.start.column=s[0].start.column;else if(t.sameRow)s.splice(s.indexOf(t),1);else{var r=e.split(t.start.row,t.start.column);s=r.folds,s.shift(),r.start.row=s[0].start.row,r.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(i,n):this.$updateRowLengthCache(i,n)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);e.forEach(function(t){this.removeFold(t)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(e){t.restoreRange(e),this.addFold(e)},this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach(function(t){this.expandFold(t)},this)},this.unfold=function(t,e){var i,n;if(null==t?(i=new o(0,0,this.getLength(),0),e=!0):i="number"==typeof t?new o(t,0,t,this.getLine(t).length):"row"in t?o.fromPoints(t,t):t,n=this.getFoldsInRangeList(i),e)this.removeFolds(n);else for(var s=n;s.length;)this.expandFolds(s),s=this.getFoldsInRangeList(i);return n.length?n:void 0},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var i=this.getFoldLine(t,e);return i?i.end.row:t},this.getRowFoldStart=function(t,e){var i=this.getFoldLine(t,e);return i?i.start.row:t},this.getFoldDisplayLine=function(t,e,i,n,o){null==n&&(n=t.start.row),null==o&&(o=0),null==e&&(e=t.end.row),null==i&&(i=this.getLine(e).length);var s=this.doc,r="";return t.walk(function(t,e,i,a){if(!(n>e)){if(e==n){if(o>i)return;a=Math.max(o,a)}r+=null!=t?t:s.getLine(e).substring(a,i)}},e,i),r},this.getDisplayLine=function(t,e,i,n){var o=this.getFoldLine(t);if(o)return this.getFoldDisplayLine(o,t,e,i,n);var s;return s=this.doc.getLine(t),s.substring(n||0,e||s.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(e){var i=e.folds.map(function(t){return t.clone()});return new s(t,i)})},this.toggleFold=function(t){var e,i,n=this.selection,o=n.getRange();if(o.isEmpty()){var s=o.start;if(e=this.getFoldAt(s.row,s.column))return void this.expandFold(e);(i=this.findMatchingBracket(s))?1==o.comparePoint(i)?o.end=i:(o.start=i,o.start.column++,o.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(1==o.comparePoint(i)?o.end=i:o.start=i,o.start.column++):o=this.getCommentFoldRange(s.row,s.column)||o}else{var r=this.getFoldsInRange(o);if(t&&r.length)return void this.expandFolds(r);1==r.length&&(e=r[0])}if(e||(e=this.getFoldAt(o.start.row,o.start.column)),e&&e.range.toString()==o.toString())return void this.expandFold(e);var a="...";if(!o.isMultiLine()){if(a=this.getTextRange(o),a.length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,o)},this.getCommentFoldRange=function(t,e,i){var n=new a(this,t,e),s=n.getCurrentToken();if(s&&/^comment|string/.test(s.type)){var r=new o,h=new RegExp(s.type.replace(/\..*/,"\\."));if(1!=i){do s=n.stepBackward();while(s&&h.test(s.type));n.stepForward()}if(r.start.row=n.getCurrentTokenRow(),r.start.column=n.getCurrentTokenColumn()+2,n=new a(this,t,e),-1!=i){do s=n.stepForward();while(s&&h.test(s.type));
s=n.stepBackward()}else s=n.getCurrentToken();return r.end.row=n.getCurrentTokenRow(),r.end.column=n.getCurrentTokenColumn()+s.value.length-2,r}},this.foldAll=function(t,e,i){void 0==i&&(i=1e5);var n=this.foldWidgets;if(n){e=e||this.getLength(),t=t||0;for(var o=t;e>o;o++)if(null==n[o]&&(n[o]=this.getFoldWidget(o)),"start"==n[o]){var s=this.getFoldWidgetRange(o);if(s&&s.isMultiLine()&&s.end.row<=e&&s.start.row>=t){o=s.end.row;try{var r=this.addFold("...",s);r&&(r.collapseChildren=i)}catch(a){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,"manual"==t&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){if(this.$foldMode!=t){if(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!t||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(t,e){var i=this.foldWidgets;if(!i||e&&i[t])return{};for(var n,o=t-1;o>=0;){var s=i[o];if(null==s&&(s=i[o]=this.getFoldWidget(o)),"start"==s){var r=this.getFoldWidgetRange(o);if(n||(n=r),r&&r.end.row>=t)break}o--}return{range:-1!==o&&r,firstRange:n}},this.onFoldWidgetClick=function(t,e){e=e.domEvent;var i={children:e.shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey},n=this.$toggleFoldWidget(t,i);if(!n){var o=e.target||e.srcElement;o&&/ace_fold-widget/.test(o.className)&&(o.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var i=this.getFoldWidget(t),n=this.getLine(t),o="end"===i?-1:1,s=this.getFoldAt(t,-1===o?0:n.length,o);if(s)return void(e.children||e.all?this.removeFold(s):this.expandFold(s));var r=this.getFoldWidgetRange(t,!0);if(r&&!r.isMultiLine()&&(s=this.getFoldAt(r.start.row,r.start.column,1),s&&r.isEqual(s.range)))return void this.removeFold(s);if(e.siblings){var a=this.getParentFoldRangeData(t);if(a.range)var h=a.range.start.row+1,l=a.range.end.row;this.foldAll(h,l,e.all?1e4:0)}else e.children?(l=r?r.end.row:this.getLength(),this.foldAll(t+1,l,e.all?1e4:0)):r&&(e.all&&(r.collapseChildren=1e4),this.addFold("...",r));return r}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var i=this.$toggleFoldWidget(e,{});if(!i){var n=this.getParentFoldRangeData(e,!0);if(i=n.range||n.firstRange){e=i.start.row;var o=this.getFoldAt(e,this.getLine(e).length,1);o?this.removeFold(o):this.addFold("...",i)}}},this.updateFoldWidgets=function(t){var e=t.start.row,i=t.end.row-e;if(0===i)this.foldWidgets[e]=null;else if("remove"==t.action)this.foldWidgets.splice(e,i+1,null);else{var n=Array(i+1);n.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,n)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}var o=t("../range").Range,s=t("./fold_line").FoldLine,r=t("./fold").Fold,a=t("../token_iterator").TokenIterator;e.Folding=n}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(t,e,i){"use strict";function n(){this.findMatchingBracket=function(t,e){if(0==t.column)return null;var i=e||this.getLine(t.row).charAt(t.column-1);if(""==i)return null;var n=i.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],t):this.$findOpeningBracket(n[2],t):null},this.getBracketRange=function(t){var e,i=this.getLine(t.row),n=!0,o=i.charAt(t.column-1),r=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(r||(o=i.charAt(t.column),t={row:t.row,column:t.column+1},r=o&&o.match(/([\(\[\{])|([\)\]\}])/),n=!1),!r)return null;if(r[1]){var a=this.$findClosingBracket(r[1],t);if(!a)return null;e=s.fromPoints(t,a),n||(e.end.column++,e.start.column--),e.cursor=e.end}else{var a=this.$findOpeningBracket(r[2],t);if(!a)return null;e=s.fromPoints(a,t),n||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(t,e,i){var n=this.$brackets[t],s=1,r=new o(this,e.row,e.column),a=r.getCurrentToken();if(a||(a=r.stepForward()),a){i||(i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var h=e.column-r.getCurrentTokenColumn()-2,l=a.value;;){for(;h>=0;){var d=l.charAt(h);if(d==n){if(s-=1,0==s)return{row:r.getCurrentTokenRow(),column:h+r.getCurrentTokenColumn()}}else d==t&&(s+=1);h-=1}do a=r.stepBackward();while(a&&!i.test(a.type));if(null==a)break;l=a.value,h=l.length-1}return null}},this.$findClosingBracket=function(t,e,i){var n=this.$brackets[t],s=1,r=new o(this,e.row,e.column),a=r.getCurrentToken();if(a||(a=r.stepForward()),a){i||(i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var h=e.column-r.getCurrentTokenColumn();;){for(var l=a.value,d=l.length;d>h;){var c=l.charAt(h);if(c==n){if(s-=1,0==s)return{row:r.getCurrentTokenRow(),column:h+r.getCurrentTokenColumn()}}else c==t&&(s+=1);h+=1}do a=r.stepForward();while(a&&!i.test(a.type));if(null==a)break;h=0}return null}}}var o=t("../token_iterator").TokenIterator,s=t("../range").Range;e.BracketMatch=n}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/lang"),s=t("./config"),r=t("./lib/event_emitter").EventEmitter,a=t("./selection").Selection,h=t("./mode/text").Mode,l=t("./range").Range,d=t("./document").Document,c=t("./background_tokenizer").BackgroundTokenizer,u=t("./search_highlight").SearchHighlight,g=function(t,e){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof t&&t.getLine||(t=new d(t)),this.setDocument(t),this.selection=new a(this),s.resetOptions(this),this.setMode(e),s._signal("session",this)};(function(){function t(t){return!(4352>t)&&(t>=4352&&4447>=t||t>=4515&&4519>=t||t>=4602&&4607>=t||t>=9001&&9002>=t||t>=11904&&11929>=t||t>=11931&&12019>=t||t>=12032&&12245>=t||t>=12272&&12283>=t||t>=12288&&12350>=t||t>=12353&&12438>=t||t>=12441&&12543>=t||t>=12549&&12589>=t||t>=12593&&12686>=t||t>=12688&&12730>=t||t>=12736&&12771>=t||t>=12784&&12830>=t||t>=12832&&12871>=t||t>=12880&&13054>=t||t>=13056&&19903>=t||t>=19968&&42124>=t||t>=42128&&42182>=t||t>=43360&&43388>=t||t>=44032&&55203>=t||t>=55216&&55238>=t||t>=55243&&55291>=t||t>=63744&&64255>=t||t>=65040&&65049>=t||t>=65072&&65106>=t||t>=65108&&65126>=t||t>=65128&&65131>=t||t>=65281&&65376>=t||t>=65504&&65510>=t)}n.implement(this,r),this.setDocument=function(t){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=t,t.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(t){if(!t)return this.$docRowCache=[],void(this.$screenRowCache=[]);var e=this.$docRowCache.length,i=this.$getRowCacheIndex(this.$docRowCache,t)+1;e>i&&(this.$docRowCache.splice(i,e),this.$screenRowCache.splice(i,e))},this.$getRowCacheIndex=function(t,e){for(var i=0,n=t.length-1;n>=i;){var o=i+n>>1,s=t[o];if(e>s)i=o+1;else{if(!(s>e))return o;n=o-1}}return i-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(t){var e=t.data;this.$resetRowCache(e.start.row)},this.onChange=function(t){this.$modified=!0,this.$resetRowCache(t.start.row);var e=this.$updateInternalDataOnChange(t);this.$fromUndo||!this.$undoManager||t.ignore||(this.$deltasDoc.push(t),e&&0!=e.length&&this.$deltasFold.push({action:"removeFolds",folds:e}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",t)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(t,e){var i,n=this.bgTokenizer.getTokens(t),o=0;if(null==e)s=n.length-1,o=this.getLine(t).length;else for(var s=0;s<n.length&&(o+=n[s].value.length,!(o>=e));s++);return(i=n[s])?(i.index=s,i.start=o-i.value.length,i):null},this.setUndoManager=function(t){if(this.$undoManager=t,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),t){var e=this;this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.$deltasFold.length&&(e.$deltas.push({group:"fold",deltas:e.$deltasFold}),e.$deltasFold=[]),e.$deltasDoc.length&&(e.$deltas.push({group:"doc",deltas:e.$deltasDoc}),e.$deltasDoc=[]),e.$deltas.length>0&&t.execute({action:"aceupdate",args:[e.$deltas,e],merge:e.mergeUndoDeltas}),e.mergeUndoDeltas=!1,e.$deltas=[]},this.$informUndoManager=o.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?o.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(t){this.setOption("useSoftTabs",t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption("tabSize",t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&t.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption("overwrite",t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(t,e){this.$decorations[t]||(this.$decorations[t]=""),this.$decorations[t]+=" "+e,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(t,e){this.$decorations[t]=(this.$decorations[t]||"").replace(" "+e,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(t){this.$breakpoints=[];for(var e=0;e<t.length;e++)this.$breakpoints[t[e]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(t,e){void 0===e&&(e="ace_breakpoint"),e?this.$breakpoints[t]=e:delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal("changeBreakpoint",{})},this.addMarker=function(t,e,i,n){var o=this.$markerId++,s={range:t,type:i||"line",renderer:"function"==typeof i?i:null,clazz:e,inFront:!!n,id:o};return n?(this.$frontMarkers[o]=s,this._signal("changeFrontMarker")):(this.$backMarkers[o]=s,this._signal("changeBackMarker")),o},this.addDynamicMarker=function(t,e){if(t.update){var i=this.$markerId++;return t.id=i,t.inFront=!!e,e?(this.$frontMarkers[i]=t,this._signal("changeFrontMarker")):(this.$backMarkers[i]=t,this._signal("changeBackMarker")),t}},this.removeMarker=function(t){var e=this.$frontMarkers[t]||this.$backMarkers[t];if(e){var i=e.inFront?this.$frontMarkers:this.$backMarkers;e&&(delete i[t],this._signal(e.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(t){if(!this.$searchHighlight){var e=new u(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(t)},this.highlightLines=function(t,e,i,n){"number"!=typeof e&&(i=e,e=t),i||(i="ace_step");var o=new l(t,0,e,1/0);return o.id=this.addMarker(o,i,"fullLine",n),o},this.setAnnotations=function(t){this.$annotations=t,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(t){var e=t.match(/^.*?(\r?\n)/m);e?this.$autoNewLine=e[1]:this.$autoNewLine="\n"},this.getWordRange=function(t,e){var i=this.getLine(t),n=!1;if(e>0&&(n=!!i.charAt(e-1).match(this.tokenRe)),n||(n=!!i.charAt(e).match(this.tokenRe)),n)var o=this.tokenRe;else if(/^\s+$/.test(i.slice(e-1,e+1)))var o=/\s/;else var o=this.nonTokenRe;var s=e;if(s>0){do s--;while(s>=0&&i.charAt(s).match(o));s++}for(var r=e;r<i.length&&i.charAt(r).match(o);)r++;return new l(t,s,t,r)},this.getAWordRange=function(t,e){for(var i=this.getWordRange(t,e),n=this.getLine(i.end.row);n.charAt(i.end.column).match(/[ \t]/);)i.end.column+=1;return i},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption("useWorker",t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(t){var e=t.data;this.bgTokenizer.start(e.first),this._signal("tokenizerUpdate",t)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(t,e){if(t&&"object"==typeof t){if(t.getTokenizer)return this.$onChangeMode(t);var i=t,n=i.path}else n=t||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new h),this.$modes[n]&&!i?(this.$onChangeMode(this.$modes[n]),void(e&&e())):(this.$modeId=n,s.loadModule(["mode",n],function(t){return this.$modeId!==n?e&&e():(this.$modes[n]&&!i?this.$onChangeMode(this.$modes[n]):t&&t.Mode&&(t=new t.Mode(i),i||(this.$modes[n]=t,t.$id=n),this.$onChangeMode(t)),void(e&&e()))}.bind(this)),void(this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)))},this.$onChangeMode=function(t,e){if(e||(this.$modeId=t.$id),this.$mode!==t){this.$mode=t,this.$stopWorker(),this.$useWorker&&this.$startWorker();var i=t.getTokenizer();if(void 0!==i.addEventListener){var n=this.onReloadTokenizer.bind(this);i.addEventListener("update",n)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(i);else{this.bgTokenizer=new c(i);var o=this;this.bgTokenizer.addEventListener("update",function(t){o._signal("tokenizerUpdate",t)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=t.tokenRe,this.nonTokenRe=t.nonTokenRe,e||(t.attachToSession&&t.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(t.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){s.warn("Could not load worker",t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal("changeScrollTop",t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal("changeScrollLeft",t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>t&&(t=e.screenWidth)}),this.lineWidgetWidth=t},this.$computeWidth=function(t){if(this.$modified||t){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),i=this.$rowLengthCache,n=0,o=0,s=this.$foldData[o],r=s?s.start.row:1/0,a=e.length,h=0;a>h;h++){if(h>r){if(h=s.end.row+1,h>=a)break;s=this.$foldData[o++],r=s?s.start.row:1/0}null==i[h]&&(i[h]=this.$getStringScreenWidth(e[h])[0]),i[h]>n&&(n=i[h])}this.screenWidth=n}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(t,e){return this.doc.getLines(t,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(t,e){return this.doc.insert(t,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(t,e){return this.doc.removeFullLines(t,e)},this.undoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var i=null,n=t.length-1;-1!=n;n--){var o=t[n];"doc"==o.group?(this.doc.revertDeltas(o.deltas),i=this.$getUndoSelection(o.deltas,!0,i)):o.deltas.forEach(function(t){this.addFolds(t.folds)},this)}return this.$fromUndo=!1,i&&this.$undoSelect&&!e&&this.selection.setSelectionRange(i),i}},this.redoChanges=function(t,e){if(t.length){this.$fromUndo=!0;for(var i=null,n=0;n<t.length;n++){var o=t[n];"doc"==o.group&&(this.doc.applyDeltas(o.deltas),i=this.$getUndoSelection(o.deltas,!1,i))}return this.$fromUndo=!1,i&&this.$undoSelect&&!e&&this.selection.setSelectionRange(i),i}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(t,e,i){function n(t){return e?"insert"!==t.action:"insert"===t.action}var o,s,r=t[0],a=!1;n(r)?(o=l.fromPoints(r.start,r.end),a=!0):(o=l.fromPoints(r.start,r.start),a=!1);for(var h=1;h<t.length;h++)r=t[h],n(r)?(s=r.start,-1==o.compare(s.row,s.column)&&o.setStart(s),s=r.end,1==o.compare(s.row,s.column)&&o.setEnd(s),a=!0):(s=r.start,-1==o.compare(s.row,s.column)&&(o=l.fromPoints(r.start,r.start)),a=!1);if(null!=i){0===l.comparePoints(i.start,o.start)&&(i.start.column+=o.end.column-o.start.column,i.end.column+=o.end.column-o.start.column);var d=i.compareRange(o);1==d?o.setStart(i.start):-1==d&&o.setEnd(i.end)}return o},this.replace=function(t,e){return this.doc.replace(t,e)},this.moveText=function(t,e,i){var n=this.getTextRange(t),o=this.getFoldsInRange(t),s=l.fromPoints(e,e);if(!i){this.remove(t);var r=t.start.row-t.end.row,a=r?-t.end.column:t.start.column-t.end.column;a&&(s.start.row==t.end.row&&s.start.column>t.end.column&&(s.start.column+=a),s.end.row==t.end.row&&s.end.column>t.end.column&&(s.end.column+=a)),r&&s.start.row>=t.end.row&&(s.start.row+=r,s.end.row+=r)}if(s.end=this.insert(s.start,n),o.length){var h=t.start,d=s.start,r=d.row-h.row,a=d.column-h.column;this.addFolds(o.map(function(t){return t=t.clone(),t.start.row==h.row&&(t.start.column+=a),t.end.row==h.row&&(t.end.column+=a),t.start.row+=r,t.end.row+=r,t}))}return s},this.indentRows=function(t,e,i){i=i.replace(/\t/g,this.getTabString());for(var n=t;e>=n;n++)this.doc.insertInLine({row:n,column:0},i)},this.outdentRows=function(t){for(var e=t.collapseRows(),i=new l(0,0,0,0),n=this.getTabSize(),o=e.start.row;o<=e.end.row;++o){var s=this.getLine(o);i.start.row=o,i.end.row=o;for(var r=0;n>r&&" "==s.charAt(r);++r);n>r&&"\t"==s.charAt(r)?(i.start.column=r,i.end.column=r+1):(i.start.column=0,i.end.column=r),this.remove(i)}},this.$moveLines=function(t,e,i){if(t=this.getRowFoldStart(t),e=this.getRowFoldEnd(e),0>i){var n=this.getRowFoldStart(t+i);if(0>n)return 0;var o=n-t}else if(i>0){var n=this.getRowFoldEnd(e+i);if(n>this.doc.getLength()-1)return 0;var o=n-e}else{t=this.$clipRowToDocument(t),e=this.$clipRowToDocument(e);var o=e-t+1}var s=new l(t,0,e,Number.MAX_VALUE),r=this.getFoldsInRange(s).map(function(t){return t=t.clone(),t.start.row+=o,t.end.row+=o,t}),a=0==i?this.doc.getLines(t,e):this.doc.removeFullLines(t,e);return this.doc.insertFullLines(t+o,a),r.length&&this.addFolds(r),o},this.moveLinesUp=function(t,e){return this.$moveLines(t,e,-1)},this.moveLinesDown=function(t,e){return this.$moveLines(t,e,1)},this.duplicateLines=function(t,e){return this.$moveLines(t,e,0)},this.$clipRowToDocument=function(t){return Math.max(0,Math.min(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(t,e){return 0>e?0:Math.min(this.doc.getLine(t).length,e)},this.$clipPositionToDocument=function(t,e){if(e=Math.max(0,e),0>t)t=0,e=0;else{var i=this.doc.getLength();t>=i?(t=i-1,e=this.doc.getLine(i-1).length):e=Math.min(this.doc.getLine(t).length,e)}return{row:t,column:e}},this.$clipRangeToDocument=function(t){t.start.row<0?(t.start.row=0,t.start.column=0):t.start.column=this.$clipColumnToRow(t.start.row,t.start.column);var e=this.doc.getLength()-1;return t.end.row>e?(t.end.row=e,t.end.column=this.doc.getLine(e).length):t.end.column=this.$clipColumnToRow(t.end.row,t.end.column),t},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(t){if(t!=this.$useWrapMode){if(this.$useWrapMode=t,this.$modified=!0,this.$resetRowCache(0),t){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(t,e){this.$wrapLimitRange.min===t&&this.$wrapLimitRange.max===e||(this.$wrapLimitRange={min:t,max:e},this.$modified=!0,this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(t,e){var i=this.$wrapLimitRange;i.max<0&&(i={min:e,max:e});var n=this.$constrainWrapLimit(t,i.min,i.max);return n!=this.$wrapLimit&&n>1&&(this.$wrapLimit=n,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(t,e,i){return e&&(t=Math.max(e,t)),i&&(t=Math.min(i,t)),t},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(t){var e=this.$useWrapMode,i=t.action,n=t.start,o=t.end,s=n.row,r=o.row,a=r-s,h=null;if(this.$updating=!0,0!=a)if("remove"===i){this[e?"$wrapData":"$rowLengthCache"].splice(s,a);var l=this.$foldData;h=this.getFoldsInRange(t),this.removeFolds(h);var d=this.getFoldLine(o.row),c=0;if(d){d.addRemoveChars(o.row,o.column,n.column-o.column),d.shiftRow(-a);var u=this.getFoldLine(s);u&&u!==d&&(u.merge(d),d=u),c=l.indexOf(d)+1}for(c;c<l.length;c++){var d=l[c];d.start.row>=o.row&&d.shiftRow(-a)}r=s}else{var g=Array(a);g.unshift(s,0);var f=e?this.$wrapData:this.$rowLengthCache;f.splice.apply(f,g);var l=this.$foldData,d=this.getFoldLine(s),c=0;if(d){var p=d.range.compareInside(n.row,n.column);0==p?(d=d.split(n.row,n.column),d&&(d.shiftRow(a),d.addRemoveChars(r,0,o.column-n.column))):-1==p&&(d.addRemoveChars(s,0,o.column-n.column),d.shiftRow(a)),c=l.indexOf(d)+1}for(c;c<l.length;c++){var d=l[c];d.start.row>=s&&d.shiftRow(a)}}else{a=Math.abs(t.start.column-t.end.column),"remove"===i&&(h=this.getFoldsInRange(t),this.removeFolds(h),a=-a);var d=this.getFoldLine(s);d&&d.addRemoveChars(s,n.column,a)}return e&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,e?this.$updateWrapData(s,r):this.$updateRowLengthCache(s,r),h},this.$updateRowLengthCache=function(t,e,i){this.$rowLengthCache[t]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(t,e){var i,n,o=this.doc.getAllLines(),s=this.getTabSize(),r=this.$wrapData,h=this.$wrapLimit,l=t;for(e=Math.min(e,o.length-1);e>=l;)n=this.getFoldLine(l,n),n?(i=[],n.walk(function(t,e,n,s){var r;if(null!=t){r=this.$getDisplayTokens(t,i.length),r[0]=a;for(var h=1;h<r.length;h++)r[h]=d}else r=this.$getDisplayTokens(o[e].substring(s,n),i.length);i=i.concat(r)}.bind(this),n.end.row,o[n.end.row].length+1),r[n.start.row]=this.$computeWrapSplits(i,h,s),l=n.end.row+1):(i=this.$getDisplayTokens(o[l]),r[l]=this.$computeWrapSplits(i,h,s),l++)};var e=1,i=2,a=3,d=4,g=9,f=10,p=11,m=12;this.$computeWrapSplits=function(t,e,n){function o(){var e=0;if(0===w)return e;if(v)for(var i=0;i<t.length;i++){var o=t[i];if(o==f)e+=1;else{if(o!=p){if(o==m)continue;break}e+=n}}return u&&v!==!1&&(e+=n),Math.min(e,w)}function s(e){var i=t.slice(l,e),n=i.length;i.join("").replace(/12/g,function(){n-=1}).replace(/2/g,function(){n-=1}),r.length||(y=o(),r.indent=y),c+=n,r.push(c),l=e}if(0==t.length)return[];for(var r=[],h=t.length,l=0,c=0,u=this.$wrapAsCode,v=this.$indentedSoftWrap,w=e<=Math.max(2*n,8)||v===!1?0:Math.floor(e/2),y=0;h-l>e-y;){var R=l+e-y;if(t[R-1]>=f&&t[R]>=f)s(R);else if(t[R]!=a&&t[R]!=d){for(var A=Math.max(R-(e-(e>>2)),l-1);R>A&&t[R]<a;)R--;if(u){for(;R>A&&t[R]<a;)R--;for(;R>A&&t[R]==g;)R--}else for(;R>A&&t[R]<f;)R--;R>A?s(++R):(R=l+e,t[R]==i&&R--,s(R-y))}else{for(R;R!=l-1&&t[R]!=a;R--);if(R>l){s(R);continue}for(R=l+e;R<t.length&&t[R]==d;R++);if(R==t.length)break;s(R)}}return r},this.$getDisplayTokens=function(n,o){var s,r=[];o=o||0;for(var a=0;a<n.length;a++){var h=n.charCodeAt(a);if(9==h){s=this.getScreenTabSize(r.length+o),r.push(p);for(var l=1;s>l;l++)r.push(m)}else 32==h?r.push(f):h>39&&48>h||h>57&&64>h?r.push(g):h>=4352&&t(h)?r.push(e,i):r.push(e)}return r},this.$getStringScreenWidth=function(e,i,n){if(0==i)return[0,0];null==i&&(i=1/0),n=n||0;var o,s;for(s=0;s<e.length&&(o=e.charCodeAt(s),n+=9==o?this.getScreenTabSize(n):o>=4352&&t(o)?2:1,!(n>i));s++);return[n,s]},this.lineWidgets=null,this.getRowLength=function(t){if(this.lineWidgets)var e=this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0;else e=0;return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(t){if(this.$useWrapMode){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE),i=this.$wrapData[e.row];return i.length&&i[0]<e.column?i.indent:0}return 0},this.getScreenLastRowColumn=function(t){var e=this.screenToDocumentPosition(t,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(t,e){var i=this.documentToScreenRow(t,e);return this.getScreenLastRowColumn(i)},this.getDocumentLastRowColumnPosition=function(t,e){var i=this.documentToScreenRow(t,e);return this.screenToDocumentPosition(i,Number.MAX_VALUE/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-t%this.$tabSize},this.screenToDocumentRow=function(t,e){return this.screenToDocumentPosition(t,e).row},this.screenToDocumentColumn=function(t,e){return this.screenToDocumentPosition(t,e).column},this.screenToDocumentPosition=function(t,e){if(0>t)return{row:0,column:0};var i,n,o=0,s=0,r=0,a=0,h=this.$screenRowCache,l=this.$getRowCacheIndex(h,t),d=h.length;if(d&&l>=0)var r=h[l],o=this.$docRowCache[l],c=t>h[d-1];else var c=!d;for(var u=this.getLength()-1,g=this.getNextFoldLine(o),f=g?g.start.row:1/0;t>=r&&(a=this.getRowLength(o),!(r+a>t||o>=u));)r+=a,o++,o>f&&(o=g.end.row+1,g=this.getNextFoldLine(o,g),f=g?g.start.row:1/0),c&&(this.$docRowCache.push(o),this.$screenRowCache.push(r));if(g&&g.start.row<=o)i=this.getFoldDisplayLine(g),o=g.start.row;else{if(t>=r+a||o>u)return{row:u,column:this.getLine(u).length};i=this.getLine(o),g=null}var p=0;if(this.$useWrapMode){var m=this.$wrapData[o];if(m){var v=Math.floor(t-r);n=m[v],v>0&&m.length&&(p=m.indent,s=m[v-1]||m[m.length-1],i=i.substring(s))}}return s+=this.$getStringScreenWidth(i,e-p)[1],this.$useWrapMode&&s>=n&&(s=n-1),g?g.idxToPosition(s):{row:o,column:s}},this.documentToScreenPosition=function(t,e){if("undefined"==typeof e)var i=this.$clipPositionToDocument(t.row,t.column);else i=this.$clipPositionToDocument(t,e);t=i.row,e=i.column;var n=0,o=null,s=null;s=this.getFoldAt(t,e,1),s&&(t=s.start.row,e=s.start.column);var r,a=0,h=this.$docRowCache,l=this.$getRowCacheIndex(h,t),d=h.length;if(d&&l>=0)var a=h[l],n=this.$screenRowCache[l],c=t>h[d-1];else var c=!d;for(var u=this.getNextFoldLine(a),g=u?u.start.row:1/0;t>a;){if(a>=g){if(r=u.end.row+1,r>t)break;u=this.getNextFoldLine(r,u),g=u?u.start.row:1/0}else r=a+1;n+=this.getRowLength(a),a=r,c&&(this.$docRowCache.push(a),this.$screenRowCache.push(n))}var f="";u&&a>=g?(f=this.getFoldDisplayLine(u,t,e),o=u.start.row):(f=this.getLine(t).substring(0,e),o=t);var p=0;if(this.$useWrapMode){var m=this.$wrapData[o];if(m){for(var v=0;f.length>=m[v];)n++,v++;f=f.substring(m[v-1]||0,f.length),p=v>0?m.indent:0}}return{row:n,column:p+this.$getStringScreenWidth(f)[0]}},this.documentToScreenColumn=function(t,e){return this.documentToScreenPosition(t,e).column},this.documentToScreenRow=function(t,e){return this.documentToScreenPosition(t,e).row},this.getScreenLength=function(){var t=0,e=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,n=0,o=0,e=this.$foldData[o++],s=e?e.start.row:1/0;i>n;){var r=this.$wrapData[n];t+=r?r.length+1:1,n++,n>s&&(n=e.end.row+1,e=this.$foldData[o++],s=e?e.start.row:1/0)}else{t=this.getLength();for(var a=this.$foldData,o=0;o<a.length;o++)e=a[o],t-=e.end.row-e.start.row}return this.lineWidgets&&(t+=this.$getWidgetScreenLength()),t},this.$setFontMetrics=function(t){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,i,n){if(0===i)return[0,0];i||(i=1/0),n=n||0;var o,s;for(s=0;s<e.length&&(o=e.charAt(s),n+="\t"===o?this.getScreenTabSize(n):t.getCharacterWidth(o),!(n>i));s++);return[n,s]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}).call(g.prototype),t("./edit_session/folding").Folding.call(g.prototype),t("./edit_session/bracket_match").BracketMatch.call(g.prototype),s.defineOptions(g.prototype,"session",{wrap:{set:function(t){if(t&&"off"!=t?"free"==t?t=!0:"printMargin"==t?t=-1:"string"==typeof t&&(t=parseInt(t,10)||!1):t=!1,this.$wrap!=t)if(this.$wrap=t,t){var e="number"==typeof t?t:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(t){t="auto"==t?"text"!=this.$mode.type:"text"!=t,t!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){isNaN(t)||this.$tabSize===t||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(t){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId}}}),e.EditSession=g;
}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,e,i){"use strict";var n=t("./lib/lang"),o=t("./lib/oop"),s=t("./range").Range,r=function(){this.$options={}};(function(){this.set=function(t){return o.mixin(this.$options,t),this},this.getOptions=function(){return n.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,i=this.$matchIterator(t,e);if(!i)return!1;var n=null;return i.forEach(function(t,i,o){if(t.start)n=t;else{var r=t.offset+(o||0);if(n=new s(i,r,i,r+t.length),!t.length&&e.start&&e.start.start&&0!=e.skipCurrent&&n.isEqual(e.start))return n=null,!1}return!0}),n},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var i=e.range,o=i?t.getLines(i.start.row,i.end.row):t.doc.getAllLines(),r=[],a=e.re;if(e.$isMultiLine){var h,l=a.length,d=o.length-l;t:for(var c=a.offset||0;d>=c;c++){for(var u=0;l>u;u++)if(-1==o[c+u].search(a[u]))continue t;var g=o[c],f=o[c+l-1],p=g.length-g.match(a[0])[0].length,m=f.match(a[l-1])[0].length;h&&h.end.row===c&&h.end.column>p||(r.push(h=new s(c,p,c+l-1,m)),l>2&&(c=c+l-2))}}else for(var v=0;v<o.length;v++)for(var w=n.getMatchOffsets(o[v],a),u=0;u<w.length;u++){var y=w[u];r.push(new s(v,y.offset,v,y.offset+y.length))}if(i){for(var R=i.start.column,A=i.start.column,v=0,u=r.length-1;u>v&&r[v].start.column<R&&r[v].start.row==i.start.row;)v++;for(;u>v&&r[u].end.column>A&&r[u].end.row==i.end.row;)u--;for(r=r.slice(v,u+1),v=0,u=r.length;u>v;v++)r[v].start.row+=i.start.row,r[v].end.row+=i.start.row}return r},this.replace=function(t,e){var i=this.$options,n=this.$assembleRegExp(i);if(i.$isMultiLine)return e;if(n){var o=n.exec(t);if(!o||o[0].length!=t.length)return null;if(e=t.replace(n,e),i.preserveCase){e=e.split("");for(var s=Math.min(t.length,t.length);s--;){var r=t[s];r&&r.toLowerCase()!=r?e[s]=e[s].toUpperCase():e[s]=e[s].toLowerCase()}e=e.join("")}return e}},this.$matchIterator=function(t,e){var i=this.$assembleRegExp(e);if(!i)return!1;var o;if(e.$isMultiLine)var r=i.length,a=function(e,n,a){var h=e.search(i[0]);if(-1!=h){for(var l=1;r>l;l++)if(e=t.getLine(n+l),-1==e.search(i[l]))return;var d=e.match(i[r-1])[0].length,c=new s(n,h,n+r-1,d);return 1==i.offset?(c.start.row--,c.start.column=Number.MAX_VALUE):a&&(c.start.column+=a),!!o(c)||void 0}};else if(e.backwards)var a=function(t,e,s){for(var r=n.getMatchOffsets(t,i),a=r.length-1;a>=0;a--)if(o(r[a],e,s))return!0};else var a=function(t,e,s){for(var r=n.getMatchOffsets(t,i),a=0;a<r.length;a++)if(o(r[a],e,s))return!0};var h=this.$lineIterator(t,e);return{forEach:function(t){o=t,h.forEach(a)}}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var i=t.needle;if(!t.needle)return t.re=!1;t.regExp||(i=n.escapeRegExp(i)),t.wholeWord&&(i="\\b"+i+"\\b");var o=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(i),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(i,o);try{var s=new RegExp(i,o)}catch(r){s=!1}return t.re=s},this.$assembleMultilineRegExp=function(t,e){for(var i=t.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),n=[],o=0;o<i.length;o++)try{n.push(new RegExp(i[o],e))}catch(s){return!1}return""==i[0]?(n.shift(),n.offset=1):n.offset=0,n},this.$lineIterator=function(t,e){var i=1==e.backwards,n=0!=e.skipCurrent,o=e.range,s=e.start;s||(s=o?o[i?"end":"start"]:t.selection.getRange()),s.start&&(s=s[n!=i?"end":"start"]);var r=o?o.start.row:0,a=o?o.end.row:t.getLength()-1,h=i?function(i){var n=s.row,o=t.getLine(n).substring(0,s.column);if(!i(o,n)){for(n--;n>=r;n--)if(i(t.getLine(n),n))return;if(0!=e.wrap)for(n=a,r=s.row;n>=r;n--)if(i(t.getLine(n),n))return}}:function(i){var n=s.row,o=t.getLine(n).substr(s.column);if(!i(o,n,s.column)){for(n+=1;a>=n;n++)if(i(t.getLine(n),n))return;if(0!=e.wrap)for(n=r,a=s.row;a>=n;n++)if(i(t.getLine(n),n))return}};return{forEach:h}}}).call(r.prototype),e.Search=r}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,e,i){"use strict";function n(t,e){this.platform=e||(r.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function o(t,e){n.call(this,t,e),this.$singleCommand=!1}var s=t("../lib/keys"),r=t("../lib/useragent"),a=s.KEY_MODS;o.prototype=n.prototype,function(){function t(t){return"object"==typeof t&&t.bindKey&&t.bindKey.position||0}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,e){var i=t&&("string"==typeof t?t:t.name);t=this.commands[i],e||delete this.commands[i];var n=this.commandKeyBinding;for(var o in n){var s=n[o];if(s==t)delete n[o];else if(Array.isArray(s)){var r=s.indexOf(t);-1!=r&&(s.splice(r,1),1==s.length&&(n[o]=s[0]))}}},this.bindKey=function(t,e,i){return"object"==typeof t&&t&&(void 0==i&&(i=t.position),t=t[this.platform]),t?"function"==typeof e?this.addCommand({exec:e,bindKey:t,name:e.name||t}):void t.split("|").forEach(function(t){var n="";if(-1!=t.indexOf(" ")){var o=t.split(/\s+/);t=o.pop(),o.forEach(function(t){var e=this.parseKeys(t),i=a[e.hashId]+e.key;n+=(n?" ":"")+i,this._addCommandToBinding(n,"chainKeys")},this),n+=" "}var s=this.parseKeys(t),r=a[s.hashId]+s.key;this._addCommandToBinding(n+r,e,i)},this):void 0},this._addCommandToBinding=function(e,i,n){var o,s=this.commandKeyBinding;if(i)if(!s[e]||this.$singleCommand)s[e]=i;else{Array.isArray(s[e])?-1!=(o=s[e].indexOf(i))&&s[e].splice(o,1):s[e]=[s[e]],"number"!=typeof n&&(n=n||i.isDefault?-100:t(i));var r=s[e];for(o=0;o<r.length;o++){var a=r[o],h=t(a);if(h>n)break}r.splice(o,0,i)}else delete s[e]},this.addCommands=function(t){t&&Object.keys(t).forEach(function(e){var i=t[e];if(i){if("string"==typeof i)return this.bindKey(i,e);"function"==typeof i&&(i={exec:i}),"object"==typeof i&&(i.name||(i.name=e),this.addCommand(i))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(t){return t}),i=e.pop(),n=s[i];if(s.FUNCTION_KEYS[n])i=s.FUNCTION_KEYS[n].toLowerCase();else{if(!e.length)return{key:i,hashId:-1};if(1==e.length&&"shift"==e[0])return{key:i.toUpperCase(),hashId:-1}}for(var o=0,r=e.length;r--;){var a=s.KEY_MODS[e[r]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+e[r]+" in "+t),!1;o|=a}return{key:i,hashId:o}},this.findKeyCommand=function(t,e){var i=a[t]+e;return this.commandKeyBinding[i]},this.handleKeyboard=function(t,e,i,n){if(!(0>n)){var o=a[e]+i,s=this.commandKeyBinding[o];return t.$keyChain&&(t.$keyChain+=" "+o,s=this.commandKeyBinding[t.$keyChain]||s),!s||"chainKeys"!=s&&"chainKeys"!=s[s.length-1]?(t.$keyChain&&(e&&4!=e||1!=i.length?(-1==e||n>0)&&(t.$keyChain=""):t.$keyChain=t.$keyChain.slice(0,-o.length-1)),{command:s}):(t.$keyChain=t.$keyChain||o,{command:"null"})}},this.getStatusText=function(t,e){return e.$keyChain||""}}.call(n.prototype),e.HashHandler=n,e.MultiHashHandler=o}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(t,e,i){"use strict";var n=t("../lib/oop"),o=t("../keyboard/hash_handler").MultiHashHandler,s=t("../lib/event_emitter").EventEmitter,r=function(t,e){o.call(this,e,t),this.byName=this.commands,this.setDefaultHandler("exec",function(t){return t.command.exec(t.editor,t.args||{})})};n.inherits(r,o),function(){n.implement(this,s),this.exec=function(t,e,i){if(Array.isArray(t)){for(var n=t.length;n--;)if(this.exec(t[n],e,i))return!0;return!1}if("string"==typeof t&&(t=this.commands[t]),!t)return!1;if(e&&e.$readOnly&&!t.readOnly)return!1;var o={editor:e,command:t,args:i};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),o.returnValue!==!1},this.toggleRecording=function(t){return this.$inReplay?void 0:(t&&t._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0))},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach(function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map(function(t){return"string"!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t})}}.call(r.prototype),e.CommandManager=r}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(t,e,i){"use strict";function n(t,e){return{win:t,mac:e}}var o=t("../lib/lang"),s=t("../config"),r=t("../range").Range;e.commands=[{name:"showSettingsMenu",bindKey:n("Ctrl-,","Command-,"),exec:function(t){s.loadModule("ace/ext/settings_menu",function(e){e.init(t),t.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:n("Alt-E","Ctrl-E"),exec:function(t){s.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:n("Alt-Shift-E","Ctrl-Shift-E"),exec:function(t){s.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:n("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",bindKey:n(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:n("Ctrl-L","Command-L"),exec:function(t){var e=parseInt(prompt("Enter line number:"),10);isNaN(e)||t.gotoLine(e)},readOnly:!0},{name:"fold",bindKey:n("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:n("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:n("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:n("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:n(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:n("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:n("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:n("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:n("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:n("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:n("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",bindKey:n("Ctrl-F","Command-F"),exec:function(t){s.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:n("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:n("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:n("Shift-Up","Shift-Up"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:n("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:n("Ctrl-Shift-End","Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:n("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:n("Shift-Down","Shift-Down"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:n("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:n("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:n("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:n("Alt-Shift-Left","Command-Shift-Left"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:n("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:n("Shift-Left","Shift-Left"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:n("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:n("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:n("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:n("Alt-Shift-Right","Command-Shift-Right"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:n("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:n("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:n("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:n(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:n("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:n(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:n("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:n("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:n("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",bindKey:n("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",bindKey:n("Ctrl-P","Ctrl-P"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:n("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:n("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:n(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(t){},readOnly:!0},{name:"cut",exec:function(t){var e=t.getSelectionRange();t._emit("cut",e),t.selection.isEmpty()||(t.session.remove(e),t.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",bindKey:n("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:n("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:n("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:n("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:n("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:n("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:n("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:n("Ctrl-H","Command-Option-F"),exec:function(t){s.loadModule("ace/ext/searchbox",function(e){e.Search(t,!0)})}},{name:"undo",bindKey:n("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",bindKey:n("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",bindKey:n("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:n("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:n("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:n("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:n("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:n("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:n("Shift-Delete",null),exec:function(t){return!!t.selection.isEmpty()&&void t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:n("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:n("Alt-Delete","Ctrl-K"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:n("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:n("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:n("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:n("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:n("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:n("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(t,e){t.insert(o.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:n(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:n("Ctrl-T","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:n("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:n("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:n("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:n(null,null),exec:function(t){for(var e=t.selection.isBackwards(),i=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),n=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),s=t.session.doc.getLine(i.row).length,a=t.session.doc.getTextRange(t.selection.getRange()),h=a.replace(/\n\s*/," ").length,l=t.session.doc.getLine(i.row),d=i.row+1;d<=n.row+1;d++){var c=o.stringTrimLeft(o.stringTrimRight(t.session.doc.getLine(d)));0!==c.length&&(c=" "+c),l+=c}n.row+1<t.session.doc.getLength()-1&&(l+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new r(i.row,0,n.row+2,0),l),h>0?(t.selection.moveCursorTo(i.row,i.column),t.selection.selectTo(i.row,i.column+h)):(s=t.session.doc.getLine(i.row).length>s?s+1:s,t.selection.moveCursorTo(i.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:n(null,null),exec:function(t){var e=t.session.doc.getLength()-1,i=t.session.doc.getLine(e).length,n=t.selection.rangeList.ranges,o=[];n.length<1&&(n=[t.selection.getRange()]);for(var s=0;s<n.length;s++)s==n.length-1&&(n[s].end.row===e&&n[s].end.column===i||o.push(new r(n[s].end.row,n[s].end.column,e,i))),0===s?0===n[s].start.row&&0===n[s].start.column||o.push(new r(0,0,n[s].start.row,n[s].start.column)):o.push(new r(n[s-1].end.row,n[s-1].end.column,n[s].start.row,n[s].start.column));t.exitMultiSelectMode(),t.clearSelection();for(var s=0;s<o.length;s++)t.selection.addRange(o[s],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(t,e,i){"use strict";t("./lib/fixoldbrowsers");var n=t("./lib/oop"),o=t("./lib/dom"),s=t("./lib/lang"),r=t("./lib/useragent"),a=t("./keyboard/textinput").TextInput,h=t("./mouse/mouse_handler").MouseHandler,l=t("./mouse/fold_handler").FoldHandler,d=t("./keyboard/keybinding").KeyBinding,c=t("./edit_session").EditSession,u=t("./search").Search,g=t("./range").Range,f=t("./lib/event_emitter").EventEmitter,p=t("./commands/command_manager").CommandManager,m=t("./commands/default_commands").commands,v=t("./config"),w=t("./token_iterator").TokenIterator,y=function(t,e){var i=t.getContainerElement();this.container=i,this.renderer=t,this.commands=new p(r.isMac?"mac":"win",m),this.textInput=new a(t.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new d(this),this.$mouseHandler=new h(this),new l(this),this.$blockScrolling=0,this.$search=(new u).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(t,e){e._$emitInputEvent.schedule(31)}),this.setSession(e||new c("")),v.resetOptions(this),v._signal("editor",this)};(function(){n.implement(this,f),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(t){if(this.curOp){if(t&&t.returnValue===!1)return this.curOp=null;this._signal("beforeEndOperation");var e=this.curOp.command;e.name&&this.$blockScrolling>0&&this.$blockScrolling--;var i=e&&e.scrollIntoView;if(i){switch(i){case"center-animate":i="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var n=this.selection.getRange(),o=this.renderer.layerConfig;(n.start.row>=o.lastRow||n.end.row<=o.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==i&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(t){if(this.$mergeUndoDeltas){var e=this.prevOp,i=this.$mergeableCommands,n=e.command&&t.command.name==e.command.name;if("insertstring"==t.command.name){var o=t.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),n=n&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(e.args)),this.mergeNextCommand=!0}else n=n&&-1!==i.indexOf(t.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(n=!1),n?this.session.mergeUndoDeltas=!0:-1!==i.indexOf(t.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,e){if(t&&"string"==typeof t){this.$keybindingId=t;var i=this;v.loadModule(["keybinding",t],function(n){i.$keybindingId==t&&i.keyBinding.setKeyboardHandler(n&&n.handler),e&&e()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),e&&e()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(t){if(this.session!=t){this.curOp&&this.endOperation(),this.curOp={};var e=this.session;if(e){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var i=this.session.getSelection();i.off("changeCursor",this.$onCursorChange),i.off("changeSelection",this.$onSelectionChange)}this.session=t,t?(this.$onDocumentChange=this.onDocumentChange.bind(this),t.on("change",this.$onDocumentChange),this.renderer.setSession(t),this.$onChangeMode=this.onChangeMode.bind(this),t.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),t.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),t.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),t.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),t.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),t.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=t.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(t)),this._signal("changeSession",{session:t,oldSession:e}),this.curOp=null,e&&e._signal("changeEditor",{oldEditor:this}),t&&t._signal("changeEditor",{editor:this})}},this.getSession=function(){
return this.session},this.setValue=function(t,e){return this.session.doc.setValue(t),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),t},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(t,e){this.renderer.setTheme(t,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container,"fontSize")},this.setFontSize=function(t){this.setOption("fontSize",t)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var t=this;this.$highlightPending=!0,setTimeout(function(){t.$highlightPending=!1;var e=t.session;if(e&&e.bgTokenizer){var i=e.findMatchingBracket(t.getCursorPosition());if(i)var n=new g(i.row,i.column,i.row,i.column+1);else if(e.$mode.getMatching)var n=e.$mode.getMatching(t.session);n&&(e.$bracketHighlight=e.addMarker(n,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var t=this;this.$highlightTagPending=!0,setTimeout(function(){t.$highlightTagPending=!1;var e=t.session;if(e&&e.bgTokenizer){var i=t.getCursorPosition(),n=new w(t.session,i.row,i.column),o=n.getCurrentToken();if(!o||!/\b(?:tag-open|tag-name)/.test(o.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1==o.type.indexOf("tag-open")||(o=n.stepForward())){var s=o.value,r=0,a=n.stepBackward();if("<"==a.value){do a=o,o=n.stepForward(),o&&o.value===s&&-1!==o.type.indexOf("tag-name")&&("<"===a.value?r++:"</"===a.value&&r--);while(o&&r>=0)}else{do o=a,a=n.stepBackward(),o&&o.value===s&&-1!==o.type.indexOf("tag-name")&&("<"===a.value?r++:"</"===a.value&&r--);while(a&&0>=r);n.stepForward()}if(!o)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var h=n.getCurrentTokenRow(),l=n.getCurrentTokenColumn(),d=new g(h,l,h,l+o.value.length);e.$tagHighlight&&0!==d.compareRange(e.$backMarkers[e.$tagHighlight].range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),d&&!e.$tagHighlight&&(e.$tagHighlight=e.addMarker(d,"ace_bracket","text"))}}},50)}},this.focus=function(){var t=this;setTimeout(function(){t.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",t))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(t){var e=this.session.$useWrapMode,i=t.start.row==t.end.row?t.end.row:1/0;this.renderer.updateLines(t.start.row,i,e),this._signal("change",t),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(t){var e=t.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(v.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var t,e=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var i=new g(t.row,t.column,t.row,1/0);i.id=e.addMarker(i,"ace_active-line","screenLine"),e.$highlightLineMarker=i}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(t){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var i=this.selection.getRange(),n=this.getSelectionStyle();e.$selectionMarker=e.addMarker(i,"ace_selection",n)}var o=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(o),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var t=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var i=e.start.column-1,n=e.end.column+1,o=t.getLine(e.start.row),s=o.length,r=o.substring(Math.max(i,0),Math.min(n,s));if(!(i>=0&&/^[\w\d]/.test(r)||s>=n&&/[\w\d]$/.test(r))&&(r=o.substring(e.start.column,e.end.column),/^[\w\d]+$/.test(r))){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:r});return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit("changeMode",t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText();return this._signal("copy",t),t},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(t,e){var i={text:t,event:e};this.commands.exec("paste",this,i)},this.$handlePaste=function(t){"string"==typeof t&&(t={text:t}),this._signal("paste",t);var e=t.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(e);else{var i=e.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges;if(i.length>n.length||i.length<2||!i[1])return this.commands.exec("insertstring",this,e);for(var o=n.length;o--;){var s=n[o];s.isEmpty()||this.session.remove(s),this.session.insert(s.start,i[o])}}},this.execCommand=function(t,e){return this.commands.exec(t,this,e)},this.insert=function(t,e){var i=this.session,n=i.getMode(),o=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var s=n.transformAction(i.getState(o.row),"insertion",this,i,t);s&&(t!==s.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),t=s.text)}if("\t"==t&&(t=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var r=new g.fromPoints(o,o);r.end.column+=t.length,this.session.remove(r)}}else{var r=this.getSelectionRange();o=this.session.remove(r),this.clearSelection()}if("\n"==t||"\r\n"==t){var a=i.getLine(o.row);if(o.column>a.search(/\S|$/)){var h=a.substr(o.column).search(/\S|$/);i.doc.removeInLine(o.row,o.column,o.column+h)}}this.clearSelection();var l=o.column,d=i.getState(o.row),a=i.getLine(o.row),c=n.checkOutdent(d,a,t);if(i.insert(o,t),s&&s.selection&&(2==s.selection.length?this.selection.setSelectionRange(new g(o.row,l+s.selection[0],o.row,l+s.selection[1])):this.selection.setSelectionRange(new g(o.row+s.selection[0],s.selection[1],o.row+s.selection[2],s.selection[3]))),i.getDocument().isNewLine(t)){var u=n.getNextLineIndent(d,a.slice(0,o.column),i.getTabString());i.insert({row:o.row+1,column:0},u)}c&&n.autoOutdent(d,i,o.row)},this.onTextInput=function(t){this.keyBinding.onTextInput(t)},this.onCommandKey=function(t,e,i){this.keyBinding.onCommandKey(t,e,i)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption("scrollSpeed",t)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(t){this.setOption("dragDelay",t)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(t){this.setOption("selectionStyle",t)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(t){this.setOption("highlightActiveLine",t)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(t){this.setOption("highlightSelectedWord",t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption("readOnly",t)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(t){this.setOption("behavioursEnabled",t)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(t){this.setOption("wrapBehavioursEnabled",t)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(t){this.setOption("showFoldWidgets",t)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(t){this.selection.isEmpty()&&("left"==t?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var i=this.session,n=i.getState(e.start.row),o=i.getMode().transformAction(n,"deletion",this,i,e);if(0===e.end.column){var s=i.getTextRange(e);if("\n"==s[s.length-1]){var r=i.getLine(e.end.row);/^\s+$/.test(r)&&(e.end.column=r.length)}}o&&(e=o)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var t=this.getCursorPosition(),e=t.column;if(0!==e){var i,n,o=this.session.getLine(t.row);e<o.length?(i=o.charAt(e)+o.charAt(e-1),n=new g(t.row,e-1,t.row,e+1)):(i=o.charAt(e-1)+o.charAt(e-2),n=new g(t.row,e-2,t.row,e)),this.session.replace(n,i)}}},this.toLowerCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),i=this.session.getTextRange(e);this.session.replace(e,i.toLowerCase()),this.selection.setSelectionRange(t)},this.toUpperCase=function(){var t=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),i=this.session.getTextRange(e);this.session.replace(e,i.toUpperCase()),this.selection.setSelectionRange(t)},this.indent=function(){var t=this.session,e=this.getSelectionRange();if(e.start.row<e.end.row){var i=this.$getSelectedRows();return void t.indentRows(i.first,i.last,"\t")}if(e.start.column<e.end.column){var n=t.getTextRange(e);if(!/^\s+$/.test(n)){var i=this.$getSelectedRows();return void t.indentRows(i.first,i.last,"\t")}}var o=t.getLine(e.start.row),r=e.start,a=t.getTabSize(),h=t.documentToScreenColumn(r.row,r.column);if(this.session.getUseSoftTabs())var l=a-h%a,d=s.stringRepeat(" ",l);else{for(var l=h%a;" "==o[e.start.column]&&l;)e.start.column--,l--;this.selection.setSelectionRange(e),d="\t"}return this.insert(d)},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,"\t")},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){var t=this.$getSelectedRows(),e=this.session,i=[];for(o=t.first;o<=t.last;o++)i.push(e.getLine(o));i.sort(function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0});for(var n=new g(0,0,0,0),o=t.first;o<=t.last;o++){var s=e.getLine(o);n.start.row=o,n.end.row=o,n.end.column=s.length,e.replace(n,i[o-t.first])}},this.toggleCommentLines=function(){var t=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(t,this.session,e.first,e.last)},this.toggleBlockComment=function(){var t=this.getCursorPosition(),e=this.session.getState(t.row),i=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,i,t)},this.getNumberAt=function(t,e){var i=/[\-]?[0-9]+(?:\.[0-9]+)?/g;i.lastIndex=0;for(var n=this.session.getLine(t);i.lastIndex<e;){var o=i.exec(n);if(o.index<=e&&o.index+o[0].length>=e){var s={value:o[0],start:o.index,end:o.index+o[0].length};return s}}return null},this.modifyNumber=function(t){var e=this.selection.getCursor().row,i=this.selection.getCursor().column,n=new g(e,i-1,e,i),o=this.session.getTextRange(n);if(!isNaN(parseFloat(o))&&isFinite(o)){var s=this.getNumberAt(e,i);if(s){var r=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,a=s.start+s.value.length-r,h=parseFloat(s.value);h*=Math.pow(10,a),t*=r!==s.end&&r>i?Math.pow(10,s.end-i-1):Math.pow(10,s.end-i),h+=t,h/=Math.pow(10,a);var l=h.toFixed(a),d=new g(e,s.start,e,s.end);this.session.replace(d,l),this.moveCursorTo(e,Math.max(s.start+1,i+l.length-s.value.length))}}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var t=this.selection,e=this.session,i=t.getRange(),n=t.isBackwards();if(i.isEmpty()){var o=i.start.row;e.duplicateLines(o,o)}else{var s=n?i.start:i.end,r=e.insert(s,e.getTextRange(i),!1);i.start=s,i.end=r,t.setSelectionRange(i,n)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(t,e,i){return this.session.moveText(t,e,i)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(t,e){var i,n,o=this.selection;if(!o.inMultiSelectMode||this.inVirtualSelectionMode){var s=o.toOrientedRange();i=this.$getSelectedRows(s),n=this.session.$moveLines(i.first,i.last,e?0:t),e&&-1==t&&(n=0),s.moveBy(n,0),o.fromOrientedRange(s)}else{var r=o.rangeList.ranges;o.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,h=0,l=r.length,d=0;l>d;d++){var c=d;r[d].moveBy(a,0),i=this.$getSelectedRows(r[d]);for(var u=i.first,g=i.last;++d<l;){h&&r[d].moveBy(h,0);var f=this.$getSelectedRows(r[d]);if(e&&f.first!=g)break;if(!e&&f.first>g+1)break;g=f.last}for(d--,a=this.session.$moveLines(u,g,e?0:t),e&&-1==t&&(c=d+1);d>=c;)r[c].moveBy(a,0),c++;e||(a=0),h+=a}o.fromOrientedRange(o.ranges[0]),o.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(t){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(t,e){var i=this.renderer,n=this.renderer.layerConfig,o=t*Math.floor(n.height/n.lineHeight);this.$blockScrolling++,e===!0?this.selection.$moveSelection(function(){this.moveCursorBy(o,0)}):e===!1&&(this.selection.moveCursorBy(o,0),this.selection.clearSelection()),this.$blockScrolling--;var s=i.scrollTop;i.scrollBy(0,o*n.lineHeight),null!=e&&i.scrollCursorIntoView(null,.5),i.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(t,e,i,n){this.renderer.scrollToLine(t,e,i,n)},this.centerSelection=function(){var t=this.getSelectionRange(),e={row:Math.floor(t.start.row+(t.end.row-t.start.row)/2),column:Math.floor(t.start.column+(t.end.column-t.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(t,e){this.selection.moveCursorTo(t,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(t,e){var i=this.getCursorPosition(),n=new w(this.session,i.row,i.column),o=n.getCurrentToken(),s=o||n.stepForward();if(s){var r,a,h=!1,l={},d=i.column-s.start,c={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(s.value.match(/[{}()\[\]]/g)){for(;d<s.value.length&&!h;d++)if(c[s.value[d]])switch(a=c[s.value[d]]+"."+s.type.replace("rparen","lparen"),isNaN(l[a])&&(l[a]=0),s.value[d]){case"(":case"[":case"{":l[a]++;break;case")":case"]":case"}":l[a]--,-1===l[a]&&(r="bracket",h=!0)}}else s&&-1!==s.type.indexOf("tag-name")&&(isNaN(l[s.value])&&(l[s.value]=0),"<"===o.value?l[s.value]++:"</"===o.value&&l[s.value]--,-1===l[s.value]&&(r="tag",h=!0));h||(o=s,s=n.stepForward(),d=0)}while(s&&!h);if(r){var u,f;if("bracket"===r)u=this.session.getBracketRange(i),u||(u=new g(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+d-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+d-1),f=u.start,(e||f.row===i.row&&Math.abs(f.column-i.column)<2)&&(u=this.session.getBracketRange(f)));else if("tag"===r){if(!s||-1===s.type.indexOf("tag-name"))return;var p=s.value;if(u=new g(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2),0===u.compare(i.row,i.column)){h=!1;do s=o,o=n.stepBackward(),o&&(-1!==o.type.indexOf("tag-close")&&u.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1),s.value===p&&-1!==s.type.indexOf("tag-name")&&("<"===o.value?l[p]++:"</"===o.value&&l[p]--,0===l[p]&&(h=!0)));while(o&&!h)}s&&s.type.indexOf("tag-name")&&(f=u.start,f.row==i.row&&Math.abs(f.column-i.column)<2&&(f=u.end))}f=u&&u.cursor||f,f&&(t?u&&e?this.selection.setRange(u):u&&u.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(f.row,f.column):this.selection.moveTo(f.row,f.column))}}},this.gotoLine=function(t,e,i){this.selection.clearSelection(),this.session.unfold({row:t-1,column:e||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(t-1,e||0),this.$blockScrolling-=1,this.isRowFullyVisible(t-1)||this.scrollToLine(t-1,!0,i)},this.navigateTo=function(t,e){this.selection.moveTo(t,e)},this.navigateUp=function(t){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(-t||-1,0)},this.navigateDown=function(t){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(t||1,0)},this.navigateLeft=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(t){if(this.selection.isEmpty())for(t=t||1;t--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(t,e){e&&this.$search.set(e);var i=this.$search.find(this.session),n=0;return i?(this.$tryReplace(i,t)&&(n=1),null!==i&&(this.selection.setSelectionRange(i),this.renderer.scrollSelectionIntoView(i.start,i.end)),n):n},this.replaceAll=function(t,e){e&&this.$search.set(e);var i=this.$search.findAll(this.session),n=0;if(!i.length)return n;this.$blockScrolling+=1;var o=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=i.length-1;s>=0;--s)this.$tryReplace(i[s],t)&&n++;return this.selection.setSelectionRange(o),this.$blockScrolling-=1,n},this.$tryReplace=function(t,e){var i=this.session.getTextRange(t);return e=this.$search.replace(i,e),null!==e?(t.end=this.session.replace(t,e),t):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(t,e,i){e||(e={}),"string"==typeof t||t instanceof RegExp?e.needle=t:"object"==typeof t&&n.mixin(e,t);var o=this.selection.getRange();null==e.needle&&(t=this.session.getTextRange(o)||this.$search.$options.needle,t||(o=this.session.getWordRange(o.start.row,o.start.column),t=this.session.getTextRange(o)),this.$search.set({needle:t})),this.$search.set(e),e.start||this.$search.set({start:o});var s=this.$search.find(this.session);return e.preventScroll?s:s?(this.revealRange(s,i),s):(e.backwards?o.start=o.end:o.end=o.start,void this.selection.setRange(o))},this.findNext=function(t,e){this.find({skipCurrent:!0,backwards:!1},t,e)},this.findPrevious=function(t,e){this.find(t,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(t,e){this.$blockScrolling+=1,this.session.unfold(t),this.selection.setSelectionRange(t),this.$blockScrolling-=1;var i=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(t.start,t.end,.5),e!==!1&&this.renderer.animateScrolling(i)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(t){if(t){var e,i=this,n=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var o=this.$scrollAnchor;o.style.cssText="position:absolute",this.container.insertBefore(o,this.container.firstChild);var s=this.on("changeSelection",function(){n=!0}),r=this.renderer.on("beforeRender",function(){n&&(e=i.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(n&&e&&(i.isFocused()||i.searchBox&&i.searchBox.isFocused())){var t=i.renderer,s=t.$cursorLayer.$pixelPos,r=t.layerConfig,a=s.top-r.offset;n=s.top>=0&&a+e.top<0||!(s.top<r.height&&s.top+e.top+r.lineHeight>window.innerHeight)&&null,null!=n&&(o.style.top=a+"px",o.style.left=s.left+"px",o.style.height=r.lineHeight+"px",o.scrollIntoView(n)),n=e=null}});this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",s),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",r))}}},this.$resetCursorStyle=function(){var t=this.$cursorStyle||"ace",e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(t)),e.isBlinking=!this.$readOnly&&"wide"!=t,o.setCssClass(e.element,"ace_slim-cursors",/slim/.test(t)))}}).call(y.prototype),v.defineOptions(y.prototype,"editor",{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:t})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(t){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(t){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(t){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.keybindingId},handlesSet:!0},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),e.Editor=y}),ace.define("ace/undomanager",["require","exports","module"],function(t,e,i){"use strict";var n=function(){this.reset()};(function(){function t(t){return{action:t.action,start:t.start,end:t.end,lines:1==t.lines.length?null:t.lines,text:1==t.lines.length?t.lines[0]:null}}function e(t){return{action:t.action,start:t.start,end:t.end,lines:t.lines||[t.text]}}function i(t,e){for(var i=new Array(t.length),n=0;n<t.length;n++){for(var o=t[n],s={group:o.group,deltas:new Array(o.length)},r=0;r<o.deltas.length;r++){var a=o.deltas[r];s.deltas[r]=e(a)}i[n]=s}return i}this.execute=function(t){var e=t.args[0];this.$doc=t.args[1],t.merge&&this.hasUndo()&&(this.dirtyCounter--,e=this.$undoStack.pop().concat(e)),this.$undoStack.push(e),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(t){var e=this.$undoStack.pop(),i=null;return e&&(i=this.$doc.undoChanges(e,t),this.$redoStack.push(e),this.dirtyCounter--),i},this.redo=function(t){var e=this.$redoStack.pop(),i=null;return e&&(i=this.$doc.redoChanges(this.$deserializeDeltas(e),t),this.$undoStack.push(e),this.dirtyCounter++),i},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(e){return i(e,t)},this.$deserializeDeltas=function(t){return i(t,e)}}).call(n.prototype),e.UndoManager=n}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(t,e,i){"use strict";var n=t("../lib/dom"),o=t("../lib/oop"),s=t("../lib/lang"),r=t("../lib/event_emitter").EventEmitter,a=function(t){this.element=n.createElement("div"),this.element.className="ace_layer ace_gutter-layer",t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){o.implement(this,r),this.setSession=function(t){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=t,t&&t.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(t,e)},this.setAnnotations=function(t){this.$annotations=[];for(var e=0;e<t.length;e++){var i=t[e],n=i.row,o=this.$annotations[n];o||(o=this.$annotations[n]={text:[]});var r=i.text;r=r?s.escapeHTML(r):i.html||"",-1===o.text.indexOf(r)&&o.text.push(r);var a=i.type;"error"==a?o.className=" ace_error":"warning"==a&&" ace_error"!=o.className?o.className=" ace_warning":"info"!=a||o.className||(o.className=" ace_info")}},this.$updateAnnotations=function(t){if(this.$annotations.length){var e=t.start.row,i=t.end.row-e;if(0===i);else if("remove"==t.action)this.$annotations.splice(e,i+1,null);else{var n=new Array(i+1);n.unshift(e,1),this.$annotations.splice.apply(this.$annotations,n)}}},this.update=function(t){for(var e=this.session,i=t.firstRow,o=Math.min(t.lastRow+t.gutterOffset,e.getLength()-1),s=e.getNextFoldLine(i),r=s?s.start.row:1/0,a=this.$showFoldWidgets&&e.foldWidgets,h=e.$breakpoints,l=e.$decorations,d=e.$firstLineNumber,c=0,u=e.gutterRenderer||this.$renderer,g=null,f=-1,p=i;;){if(p>r&&(p=s.end.row+1,s=e.getNextFoldLine(p,s),
r=s?s.start.row:1/0),p>o){for(;this.$cells.length>f+1;)g=this.$cells.pop(),this.element.removeChild(g.element);break}g=this.$cells[++f],g||(g={element:null,textNode:null,foldWidget:null},g.element=n.createElement("div"),g.textNode=document.createTextNode(""),g.element.appendChild(g.textNode),this.element.appendChild(g.element),this.$cells[f]=g);var m="ace_gutter-cell ";h[p]&&(m+=h[p]),l[p]&&(m+=l[p]),this.$annotations[p]&&(m+=this.$annotations[p].className),g.element.className!=m&&(g.element.className=m);var v=e.getRowLength(p)*t.lineHeight+"px";if(v!=g.element.style.height&&(g.element.style.height=v),a){var w=a[p];null==w&&(w=a[p]=e.getFoldWidget(p))}if(w){g.foldWidget||(g.foldWidget=n.createElement("span"),g.element.appendChild(g.foldWidget));var m="ace_fold-widget ace_"+w;m+="start"==w&&p==r&&p<s.end.row?" ace_closed":" ace_open",g.foldWidget.className!=m&&(g.foldWidget.className=m);var v=t.lineHeight+"px";g.foldWidget.style.height!=v&&(g.foldWidget.style.height=v)}else g.foldWidget&&(g.element.removeChild(g.foldWidget),g.foldWidget=null);var y=c=u?u.getText(e,p):p+d;y!=g.textNode.data&&(g.textNode.data=y),p++}this.element.style.height=t.minHeight+"px",(this.$fixedWidth||e.$useWrapMode)&&(c=e.getLength()+d);var R=u?u.getWidth(e,c,t):c.toString().length*t.characterWidth,A=this.$padding||this.$computePadding();R+=A.left+A.right,R===this.gutterWidth||isNaN(R)||(this.gutterWidth=R,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",R))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?n.addCssClass(this.element,"ace_folding-enabled"):n.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=n.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(t.paddingLeft)+1||0,this.$padding.right=parseInt(t.paddingRight)||0,this.$padding},this.getRegion=function(t){var e=this.$padding||this.$computePadding(),i=this.element.getBoundingClientRect();return t.x<e.left+i.left?"markers":this.$showFoldWidgets&&t.x>i.right-e.right?"foldWidgets":void 0}}).call(a.prototype),e.Gutter=a}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(t,e,i){"use strict";var n=t("../range").Range,o=t("../lib/dom"),s=function(t){this.element=o.createElement("div"),this.element.className="ace_layer ace_marker-layer",t.appendChild(this.element)};(function(){function t(t,e,i,n){return(t?1:0)|(e?2:0)|(i?4:0)|(n?8:0)}this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.update=function(t){var t=t||this.config;if(t){this.config=t;var e=[];for(var i in this.markers){var n=this.markers[i];if(n.range){var o=n.range.clipRows(t.firstRow,t.lastRow);if(!o.isEmpty())if(o=o.toScreenRange(this.session),n.renderer){var s=this.$getTop(o.start.row,t),r=this.$padding+o.start.column*t.characterWidth;n.renderer(e,o,r,s,t)}else"fullLine"==n.type?this.drawFullLineMarker(e,o,n.clazz,t):"screenLine"==n.type?this.drawScreenLineMarker(e,o,n.clazz,t):o.isMultiLine()?"text"==n.type?this.drawTextMarker(e,o,n.clazz,t):this.drawMultiLineMarker(e,o,n.clazz,t):this.drawSingleLineMarker(e,o,n.clazz+" ace_start ace_br15",t)}else n.update(e,this,this.session,t)}this.element.innerHTML=e.join("")}},this.$getTop=function(t,e){return(t-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(e,i,o,s,r){for(var a=this.session,h=i.start.row,l=i.end.row,d=h,c=0,u=0,g=a.getScreenLastRowColumn(d),f=new n(d,i.start.column,d,u);l>=d;d++)f.start.row=f.end.row=d,f.start.column=d==h?i.start.column:a.getRowWrapIndent(d),f.end.column=g,c=u,u=g,g=l>d+1?a.getScreenLastRowColumn(d+1):d==l?0:i.end.column,this.drawSingleLineMarker(e,f,o+(d==h?" ace_start":"")+" ace_br"+t(d==h||d==h+1&&i.start.column,u>c,u>g,d==l),s,d==l?0:1,r)},this.drawMultiLineMarker=function(t,e,i,n,o){var s=this.$padding,r=n.lineHeight,a=this.$getTop(e.start.row,n),h=s+e.start.column*n.characterWidth;o=o||"",t.push("<div class='",i," ace_br1 ace_start' style='","height:",r,"px;","right:0;","top:",a,"px;","left:",h,"px;",o,"'></div>"),a=this.$getTop(e.end.row,n);var l=e.end.column*n.characterWidth;if(t.push("<div class='",i," ace_br12' style='","height:",r,"px;","width:",l,"px;","top:",a,"px;","left:",s,"px;",o,"'></div>"),r=(e.end.row-e.start.row-1)*n.lineHeight,!(0>=r)){a=this.$getTop(e.start.row+1,n);var d=(e.start.column?1:0)|(e.end.column?0:8);t.push("<div class='",i,d?" ace_br"+d:"","' style='","height:",r,"px;","right:0;","top:",a,"px;","left:",s,"px;",o,"'></div>")}},this.drawSingleLineMarker=function(t,e,i,n,o,s){var r=n.lineHeight,a=(e.end.column+(o||0)-e.start.column)*n.characterWidth,h=this.$getTop(e.start.row,n),l=this.$padding+e.start.column*n.characterWidth;t.push("<div class='",i,"' style='","height:",r,"px;","width:",a,"px;","top:",h,"px;","left:",l,"px;",s||"","'></div>")},this.drawFullLineMarker=function(t,e,i,n,o){var s=this.$getTop(e.start.row,n),r=n.lineHeight;e.start.row!=e.end.row&&(r+=this.$getTop(e.end.row,n)-s),t.push("<div class='",i,"' style='","height:",r,"px;","top:",s,"px;","left:0;right:0;",o||"","'></div>")},this.drawScreenLineMarker=function(t,e,i,n,o){var s=this.$getTop(e.start.row,n),r=n.lineHeight;t.push("<div class='",i,"' style='","height:",r,"px;","top:",s,"px;","left:0;right:0;",o||"","'></div>")}}).call(s.prototype),e.Marker=s}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(t,e,i){"use strict";var n=t("../lib/oop"),o=t("../lib/dom"),s=t("../lib/lang"),r=(t("../lib/useragent"),t("../lib/event_emitter").EventEmitter),a=function(t){this.element=o.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){n.implement(this,r),this.EOF_CHAR="",this.EOL_CHAR_LF="",this.EOL_CHAR_CRLF="",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="",this.SPACE_CHAR="",this.$padding=0,this.$updateEolChar=function(){var t="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;return this.EOL_CHAR!=t?(this.EOL_CHAR=t,!0):void 0},this.setPadding=function(t){this.$padding=t,this.element.style.padding="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(t){this._signal("changeCharacterSize",t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var e=this.$tabStrings=[0],i=1;t+1>i;i++)this.showInvisibles?e.push("<span class='ace_invisible ace_invisible_tab'>"+s.stringRepeat(this.TAB_CHAR,i)+"</span>"):e.push(s.stringRepeat(" ",i));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var n="ace_indent-guide",o="",r="";if(this.showInvisibles){n+=" ace_invisible",o=" ace_invisible_space",r=" ace_invisible_tab";var a=s.stringRepeat(this.SPACE_CHAR,this.tabSize),h=s.stringRepeat(this.TAB_CHAR,this.tabSize)}else var a=s.stringRepeat(" ",this.tabSize),h=a;this.$tabStrings[" "]="<span class='"+n+o+"'>"+a+"</span>",this.$tabStrings["\t"]="<span class='"+n+r+"'>"+h+"</span>"}},this.updateLines=function(t,e,i){this.config.lastRow==t.lastRow&&this.config.firstRow==t.firstRow||this.scrollLines(t),this.config=t;for(var n=Math.max(e,t.firstRow),o=Math.min(i,t.lastRow),s=this.element.childNodes,r=0,a=t.firstRow;n>a;a++){var h=this.session.getFoldLine(a);if(h){if(h.containsRow(n)){n=h.start.row;break}a=h.end.row}r++}for(var a=n,h=this.session.getNextFoldLine(a),l=h?h.start.row:1/0;a>l&&(a=h.end.row+1,h=this.session.getNextFoldLine(a,h),l=h?h.start.row:1/0),!(a>o);){var d=s[r++];if(d){var c=[];this.$renderLine(c,a,!this.$useLineGroups(),a==l&&h),d.style.height=t.lineHeight*this.session.getRowLength(a)+"px",d.innerHTML=c.join("")}a++}},this.scrollLines=function(t){var e=this.config;if(this.config=t,!e||e.lastRow<t.firstRow)return this.update(t);if(t.lastRow<e.firstRow)return this.update(t);var i=this.element;if(e.firstRow<t.firstRow)for(var n=this.session.getFoldedRowCount(e.firstRow,t.firstRow-1);n>0;n--)i.removeChild(i.firstChild);if(e.lastRow>t.lastRow)for(var n=this.session.getFoldedRowCount(t.lastRow+1,e.lastRow);n>0;n--)i.removeChild(i.lastChild);if(t.firstRow<e.firstRow){var o=this.$renderLinesFragment(t,t.firstRow,e.firstRow-1);i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)}if(t.lastRow>e.lastRow){var o=this.$renderLinesFragment(t,e.lastRow+1,t.lastRow);i.appendChild(o)}},this.$renderLinesFragment=function(t,e,i){for(var n=this.element.ownerDocument.createDocumentFragment(),s=e,r=this.session.getNextFoldLine(s),a=r?r.start.row:1/0;s>a&&(s=r.end.row+1,r=this.session.getNextFoldLine(s,r),a=r?r.start.row:1/0),!(s>i);){var h=o.createElement("div"),l=[];if(this.$renderLine(l,s,!1,s==a&&r),h.innerHTML=l.join(""),this.$useLineGroups())h.className="ace_line_group",n.appendChild(h),h.style.height=t.lineHeight*this.session.getRowLength(s)+"px";else for(;h.firstChild;)n.appendChild(h.firstChild);s++}return n},this.update=function(t){this.config=t;for(var e=[],i=t.firstRow,n=t.lastRow,o=i,s=this.session.getNextFoldLine(o),r=s?s.start.row:1/0;o>r&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),r=s?s.start.row:1/0),!(o>n);)this.$useLineGroups()&&e.push("<div class='ace_line_group' style='height:",t.lineHeight*this.session.getRowLength(o),"px'>"),this.$renderLine(e,o,!1,o==r&&s),this.$useLineGroups()&&e.push("</div>"),o++;this.element.innerHTML=e.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,e,i,n){var o=this,r=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,a=function(t,i,n,r,a){if(i)return o.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+s.stringRepeat(o.SPACE_CHAR,t.length)+"</span>":t;if("&"==t)return"&#38;";if("<"==t)return"&#60;";if(">"==t)return"&#62;";if("\t"==t){var h=o.session.getScreenTabSize(e+r);return e+=h-1,o.$tabStrings[h]}if(""==t){var l=o.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",d=o.showInvisibles?o.SPACE_CHAR:"";return e+=1,"<span class='"+l+"' style='width:"+2*o.config.characterWidth+"px'>"+d+"</span>"}return n?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+o.SPACE_CHAR+"</span>":(e+=1,"<span class='ace_cjk' style='width:"+2*o.config.characterWidth+"px'>"+t+"</span>")},h=n.replace(r,a);if(this.$textToken[i.type])t.push(h);else{var l="ace_"+i.type.replace(/\./g," ace_"),d="";"fold"==i.type&&(d=" style='width:"+i.value.length*this.config.characterWidth+"px;' "),t.push("<span class='",l,"'",d,">",h,"</span>")}return e+n.length},this.renderIndentGuide=function(t,e,i){var n=e.search(this.$indentGuideRe);return 0>=n||n>=i?e:" "==e[0]?(n-=n%this.tabSize,t.push(s.stringRepeat(this.$tabStrings[" "],n/this.tabSize)),e.substr(n)):"\t"==e[0]?(t.push(s.stringRepeat(this.$tabStrings["\t"],n)),e.substr(n)):e},this.$renderWrappedLine=function(t,e,i,n){for(var o=0,r=0,a=i[0],h=0,l=0;l<e.length;l++){var d=e[l],c=d.value;if(0==l&&this.displayIndentGuides){if(o=c.length,c=this.renderIndentGuide(t,c,a),!c)continue;o-=c.length}if(o+c.length<a)h=this.$renderToken(t,h,d,c),o+=c.length;else{for(;o+c.length>=a;)h=this.$renderToken(t,h,d,c.substring(0,a-o)),c=c.substring(a-o),o=a,n||t.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),t.push(s.stringRepeat("",i.indent)),r++,h=0,a=i[r]||Number.MAX_VALUE;0!=c.length&&(o+=c.length,h=this.$renderToken(t,h,d,c))}}},this.$renderSimpleLine=function(t,e){var i=0,n=e[0],o=n.value;this.displayIndentGuides&&(o=this.renderIndentGuide(t,o)),o&&(i=this.$renderToken(t,i,n,o));for(var s=1;s<e.length;s++)n=e[s],o=n.value,i=this.$renderToken(t,i,n,o)},this.$renderLine=function(t,e,i,n){if(n||0==n||(n=this.session.getFoldLine(e)),n)var o=this.$getFoldLineTokens(e,n);else var o=this.session.getTokens(e);if(i||t.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(e)),"px'>"),o.length){var s=this.session.getRowSplitData(e);s&&s.length?this.$renderWrappedLine(t,o,s,i):this.$renderSimpleLine(t,o)}this.showInvisibles&&(n&&(e=n.end.row),t.push("<span class='ace_invisible ace_invisible_eol'>",e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),i||t.push("</div>")},this.$getFoldLineTokens=function(t,e){function i(t,e,i){for(var n=0,s=0;s+t[n].value.length<e;)if(s+=t[n].value.length,n++,n==t.length)return;if(s!=e){var r=t[n].value.substring(e-s);r.length>i-e&&(r=r.substring(0,i-e)),o.push({type:t[n].type,value:r}),s=e+r.length,n+=1}for(;i>s&&n<t.length;){var r=t[n].value;r.length+s>i?o.push({type:t[n].type,value:r.substring(0,i-s)}):o.push(t[n]),s+=r.length,n+=1}}var n=this.session,o=[],s=n.getTokens(t);return e.walk(function(t,e,r,a,h){null!=t?o.push({type:"fold",value:t}):(h&&(s=n.getTokens(e)),s.length&&i(s,a,r))},e.end.row,this.session.getLine(e.end.row).length),o},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),e.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(t,e,i){"use strict";var n,o=t("../lib/dom"),s=function(t){this.element=o.createElement("div"),this.element.className="ace_layer ace_cursor-layer",t.appendChild(this.element),void 0===n&&(n=!("opacity"in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),o.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(n?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(t){for(var e=this.cursors,i=e.length;i--;)e[i].style.visibility=t?"":"hidden"},this.$updateOpacity=function(t){for(var e=this.cursors,i=e.length;i--;)e[i].style.opacity=t?"":"0"},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t==this.smoothBlinking||n||(this.smoothBlinking=t,o.setCssClass(this.element,"ace_smooth-blinking",t),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var t=o.createElement("div");return t.className="ace_cursor",this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(this.cursors.length>1){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,o.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,o.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var t=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&o.removeCssClass(this.element,"ace_smooth-blinking"),t(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){o.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var e=function(){this.timeoutId=setTimeout(function(){t(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){t(!0),e()},this.blinkInterval),e()}},this.getPixelPosition=function(t,e){if(!this.config||!this.session)return{left:0,top:0};t||(t=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(t),n=this.$padding+i.column*this.config.characterWidth,o=(i.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:n,top:o}},this.update=function(t){this.config=t;var e=this.session.$selectionMarkers,i=0,n=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]);for(var i=0,o=e.length;o>i;i++){var s=this.getPixelPosition(e[i].cursor,!0);if(!((s.top>t.height+t.offset||s.top<0)&&i>1)){var r=(this.cursors[n++]||this.addCursor()).style;this.drawCursor?this.drawCursor(r,s,t,e[i],this.session):(r.left=s.left+"px",r.top=s.top+"px",r.width=t.characterWidth+"px",r.height=t.lineHeight+"px")}}for(;this.cursors.length>n;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?o.addCssClass(this.element,"ace_overwrite-cursors"):o.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(s.prototype),e.Cursor=s}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/dom"),s=t("./lib/event"),r=t("./lib/event_emitter").EventEmitter,a=function(t){this.element=o.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=o.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){n.implement(this,r),this.setVisible=function(t){this.element.style.display=t?"":"none",this.isVisible=t}}).call(a.prototype);var h=function(t,e){a.call(this,t),this.scrollTop=0,e.$scrollbarWidth=this.width=o.scrollbarWidth(t.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};n.inherits(h,a),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(t){this.element.style.height=t+"px"},this.setInnerHeight=function(t){this.inner.style.height=t+"px"},this.setScrollHeight=function(t){this.inner.style.height=t+"px"},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=t)}}.call(h.prototype);var l=function(t,e){a.call(this,t),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};n.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+"px"},this.setInnerWidth=function(t){this.inner.style.width=t+"px"},this.setScrollWidth=function(t){this.inner.style.width=t+"px"},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(l.prototype),e.ScrollBar=h,e.ScrollBarV=h,e.ScrollBarH=l,e.VScrollBar=h,e.HScrollBar=l}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(t,e,i){"use strict";var n=t("./lib/event"),o=function(t,e){this.onRender=t,this.pending=!1,this.changes=0,this.window=e||window};(function(){this.schedule=function(t){if(this.changes=this.changes|t,!this.pending&&this.changes){this.pending=!0;var e=this;n.nextFrame(function(){e.pending=!1;for(var t;t=e.changes;)e.changes=0,e.onRender(t)},this.window)}}}).call(o.prototype),e.RenderLoop=o}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(t,e,i){var n=t("../lib/oop"),o=t("../lib/dom"),s=t("../lib/lang"),r=t("../lib/useragent"),a=t("../lib/event_emitter").EventEmitter,h=0,l=e.FontMetrics=function(t){this.el=o.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=o.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=o.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),h||this.$testFractionalRect(),this.$measureNode.innerHTML=s.stringRepeat("X",h),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){n.implement(this,a),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var t=o.createElement("div");this.$setMeasureNodeStyles(t.style),t.style.width="0.2px",document.documentElement.appendChild(t);var e=t.getBoundingClientRect().width;h=e>0&&1>e?50:100,t.parentNode.removeChild(t)},this.$setMeasureNodeStyles=function(t,e){t.width=t.height="auto",t.left=t.top="0px",t.visibility="hidden",t.position="absolute",t.whiteSpace="pre",r.isIE<8?t["font-family"]="inherit":t.font="inherit",t.overflow=e?"hidden":"visible"},this.checkForSizeChanges=function(){var t=this.$measureSizes();if(t&&(this.$characterSize.width!==t.width||this.$characterSize.height!==t.height)){this.$measureNode.style.fontWeight="bold";var e=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=t,this.charSizes=Object.create(null),this.allowBoldFonts=e&&e.width===t.width&&e.height===t.height,this._emit("changeCharacterSize",{data:t})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=setInterval(function(){t.checkForSizeChanges()},500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50===h){var t=null;try{t=this.$measureNode.getBoundingClientRect()}catch(e){t={width:0,height:0}}var i={height:t.height,width:t.width/h}}else var i={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/h};return 0===i.width||0===i.height?null:i},this.$measureCharWidth=function(t){this.$main.innerHTML=s.stringRepeat(t,h);var e=this.$main.getBoundingClientRect();return e.width/h},this.getCharacterWidth=function(t){var e=this.charSizes[t];return void 0===e&&(e=this.charSizes[t]=this.$measureCharWidth(t)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(l.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(t,e,i){"use strict";var n=t("./lib/oop"),o=t("./lib/dom"),s=t("./config"),r=t("./lib/useragent"),a=t("./layer/gutter").Gutter,h=t("./layer/marker").Marker,l=t("./layer/text").Text,d=t("./layer/cursor").Cursor,c=t("./scrollbar").HScrollBar,u=t("./scrollbar").VScrollBar,g=t("./renderloop").RenderLoop,f=t("./layer/font_metrics").FontMetrics,p=t("./lib/event_emitter").EventEmitter,m='.ace_editor {\tposition: relative;\toverflow: hidden;\tfont: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;\tdirection: ltr;\t}\t.ace_scroller {\tposition: absolute;\toverflow: hidden;\ttop: 0;\tbottom: 0;\tbackground-color: inherit;\t-ms-user-select: none;\t-moz-user-select: none;\t-webkit-user-select: none;\tuser-select: none;\tcursor: text;\t}\t.ace_content {\tposition: absolute;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tmin-width: 100%;\t}\t.ace_dragging .ace_scroller:before{\tposition: absolute;\ttop: 0;\tleft: 0;\tright: 0;\tbottom: 0;\tcontent: \'\';\tbackground: rgba(250, 250, 250, 0.01);\tz-index: 1000;\t}\t.ace_dragging.ace_dark .ace_scroller:before{\tbackground: rgba(0, 0, 0, 0.01);\t}\t.ace_selecting, .ace_selecting * {\tcursor: text !important;\t}\t.ace_gutter {\tposition: absolute;\toverflow : hidden;\twidth: auto;\ttop: 0;\tbottom: 0;\tleft: 0;\tcursor: default;\tz-index: 4;\t-ms-user-select: none;\t-moz-user-select: none;\t-webkit-user-select: none;\tuser-select: none;\t}\t.ace_gutter-active-line {\tposition: absolute;\tleft: 0;\tright: 0;\t}\t.ace_scroller.ace_scroll-left {\tbox-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\t}\t.ace_gutter-cell {\tpadding-left: 19px;\tpadding-right: 6px;\tbackground-repeat: no-repeat;\t}\t.ace_gutter-cell.ace_error {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");\tbackground-repeat: no-repeat;\tbackground-position: 2px center;\t}\t.ace_gutter-cell.ace_warning {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");\tbackground-position: 2px center;\t}\t.ace_gutter-cell.ace_info {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");\tbackground-position: 2px center;\t}\t.ace_dark .ace_gutter-cell.ace_info {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");\t}\t.ace_scrollbar {\tposition: absolute;\tright: 0;\tbottom: 0;\tz-index: 6;\t}\t.ace_scrollbar-inner {\tposition: absolute;\tcursor: text;\tleft: 0;\ttop: 0;\t}\t.ace_scrollbar-v{\toverflow-x: hidden;\toverflow-y: scroll;\ttop: 0;\t}\t.ace_scrollbar-h {\toverflow-x: scroll;\toverflow-y: hidden;\tleft: 0;\t}\t.ace_print-margin {\tposition: absolute;\theight: 100%;\t}\t.ace_text-input {\tposition: absolute;\tz-index: 0;\twidth: 0.5em;\theight: 1em;\topacity: 0;\tbackground: transparent;\t-moz-appearance: none;\tappearance: none;\tborder: none;\tresize: none;\toutline: none;\toverflow: hidden;\tfont: inherit;\tpadding: 0 1px;\tmargin: 0 -1px;\ttext-indent: -1em;\t-ms-user-select: text;\t-moz-user-select: text;\t-webkit-user-select: text;\tuser-select: text;\twhite-space: pre!important;\t}\t.ace_text-input.ace_composition {\tbackground: inherit;\tcolor: inherit;\tz-index: 1000;\topacity: 1;\ttext-indent: 0;\t}\t.ace_layer {\tz-index: 1;\tposition: absolute;\toverflow: hidden;\tword-wrap: normal;\twhite-space: pre;\theight: 100%;\twidth: 100%;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tpointer-events: none;\t}\t.ace_gutter-layer {\tposition: relative;\twidth: auto;\ttext-align: right;\tpointer-events: auto;\t}\t.ace_text-layer {\tfont: inherit !important;\t}\t.ace_cjk {\tdisplay: inline-block;\ttext-align: center;\t}\t.ace_cursor-layer {\tz-index: 4;\t}\t.ace_cursor {\tz-index: 4;\tposition: absolute;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tborder-left: 2px solid;\ttransform: translatez(0);\t}\t.ace_slim-cursors .ace_cursor {\tborder-left-width: 1px;\t}\t.ace_overwrite-cursors .ace_cursor {\tborder-left-width: 0;\tborder-bottom: 1px solid;\t}\t.ace_hidden-cursors .ace_cursor {\topacity: 0.2;\t}\t.ace_smooth-blinking .ace_cursor {\t-webkit-transition: opacity 0.18s;\ttransition: opacity 0.18s;\t}\t.ace_editor.ace_multiselect .ace_cursor {\tborder-left-width: 1px;\t}\t.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\tposition: absolute;\tz-index: 3;\t}\t.ace_marker-layer .ace_selection {\tposition: absolute;\tz-index: 5;\t}\t.ace_marker-layer .ace_bracket {\tposition: absolute;\tz-index: 6;\t}\t.ace_marker-layer .ace_active-line {\tposition: absolute;\tz-index: 2;\t}\t.ace_marker-layer .ace_selected-word {\tposition: absolute;\tz-index: 4;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\t}\t.ace_line .ace_fold {\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tdisplay: inline-block;\theight: 11px;\tmargin-top: -2px;\tvertical-align: middle;\tbackground-image:\turl("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\turl("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");\tbackground-repeat: no-repeat, repeat-x;\tbackground-position: center center, top left;\tcolor: transparent;\tborder: 1px solid black;\tborder-radius: 2px;\tcursor: pointer;\tpointer-events: auto;\t}\t.ace_dark .ace_fold {\t}\t.ace_fold:hover{\tbackground-image:\turl("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\turl("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");\t}\t.ace_tooltip {\tbackground-color: #FFF;\tbackground-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));\tbackground-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\tborder: 1px solid gray;\tborder-radius: 1px;\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\tcolor: black;\tmax-width: 100%;\tpadding: 3px 4px;\tposition: fixed;\tz-index: 999999;\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tcursor: default;\twhite-space: pre;\tword-wrap: break-word;\tline-height: normal;\tfont-style: normal;\tfont-weight: normal;\tletter-spacing: normal;\tpointer-events: none;\t}\t.ace_folding-enabled > .ace_gutter-cell {\tpadding-right: 13px;\t}\t.ace_fold-widget {\t-moz-box-sizing: border-box;\t-webkit-box-sizing: border-box;\tbox-sizing: border-box;\tmargin: 0 -12px 0 1px;\tdisplay: none;\twidth: 11px;\tvertical-align: top;\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");\tbackground-repeat: no-repeat;\tbackground-position: center;\tborder-radius: 3px;\tborder: 1px solid transparent;\tcursor: pointer;\t}\t.ace_folding-enabled .ace_fold-widget {\tdisplay: inline-block;   \t}\t.ace_fold-widget.ace_end {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");\t}\t.ace_fold-widget.ace_closed {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");\t}\t.ace_fold-widget:hover {\tborder: 1px solid rgba(0, 0, 0, 0.3);\tbackground-color: rgba(255, 255, 255, 0.2);\tbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\t}\t.ace_fold-widget:active {\tborder: 1px solid rgba(0, 0, 0, 0.4);\tbackground-color: rgba(0, 0, 0, 0.05);\tbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\t}\t.ace_dark .ace_fold-widget {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");\t}\t.ace_dark .ace_fold-widget.ace_end {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");\t}\t.ace_dark .ace_fold-widget.ace_closed {\tbackground-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");\t}\t.ace_dark .ace_fold-widget:hover {\tbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\tbackground-color: rgba(255, 255, 255, 0.1);\t}\t.ace_dark .ace_fold-widget:active {\tbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\t}\t.ace_fold-widget.ace_invalid {\tbackground-color: #FFB4B4;\tborder-color: #DE5555;\t}\t.ace_fade-fold-widgets .ace_fold-widget {\t-webkit-transition: opacity 0.4s ease 0.05s;\ttransition: opacity 0.4s ease 0.05s;\topacity: 0;\t}\t.ace_fade-fold-widgets:hover .ace_fold-widget {\t-webkit-transition: opacity 0.05s ease 0.05s;\ttransition: opacity 0.05s ease 0.05s;\topacity:1;\t}\t.ace_underline {\ttext-decoration: underline;\t}\t.ace_bold {\tfont-weight: bold;\t}\t.ace_nobold .ace_bold {\tfont-weight: normal;\t}\t.ace_italic {\tfont-style: italic;\t}\t.ace_error-marker {\tbackground-color: rgba(255, 0, 0,0.2);\tposition: absolute;\tz-index: 9;\t}\t.ace_highlight-marker {\tbackground-color: rgba(255, 255, 0,0.2);\tposition: absolute;\tz-index: 8;\t}\t.ace_br1 {border-top-left-radius    : 3px;}\t.ace_br2 {border-top-right-radius   : 3px;}\t.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\t.ace_br4 {border-bottom-right-radius: 3px;}\t.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\t.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\t.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\t.ace_br8 {border-bottom-left-radius : 3px;}\t.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\t.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\t.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\t.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\t.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\t.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\t.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\t';
o.importCssString(m,"ace_editor.css");var v=function(t,e){var i=this;this.container=t||o.createElement("div"),this.$keepTextAreaAtCursor=!r.isOldIE,o.addCssClass(this.container,"ace_editor"),this.setTheme(e),this.$gutter=o.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=o.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=o.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new h(this.content);var n=this.$textLayer=new l(this.content);this.canvas=n.element,this.$markerFront=new h(this.content),this.$cursorLayer=new d(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new u(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(t){i.$scrollAnimation||i.session.setScrollTop(t.data-i.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(t){i.$scrollAnimation||i.session.setScrollLeft(t.data-i.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new f(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(t){i.updateCharacterSize(),i.onResize(!0,i.gutterWidth,i.$size.width,i.$size.height),i._signal("changeCharacterSize",t)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new g(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,n.implement(this,p),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(t){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&t.getScrollTop()<=0&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(t,e,i){if(void 0===e&&(e=1/0),this.$changedLines?(this.$changedLines.firstRow>t&&(this.$changedLines.firstRow=t),this.$changedLines.lastRow<e&&(this.$changedLines.lastRow=e)):this.$changedLines={firstRow:t,lastRow:e},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!i)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(t,e,i,n){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=t?1:0;var o=this.container;n||(n=o.clientHeight||o.scrollHeight),i||(i=o.clientWidth||o.scrollWidth);var s=this.$updateCachedSize(t,e,i,n);if(!this.$size.scrollerHeight||!i&&!n)return this.resizing=0;t&&(this.$gutterLayer.$padding=null),t?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(t,e,i,n){n-=this.$extraHeight||0;var o=0,s=this.$size,r={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};return n&&(t||s.height!=n)&&(s.height=n,o|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),i&&(t||s.width!=i)&&(o|=this.CHANGE_SIZE,s.width=i,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,this.scrollBarH.element.style.left=this.scroller.style.left=e+"px",s.scrollerWidth=Math.max(0,i-e-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||t)&&(o|=this.CHANGE_FULL)),s.$dirty=!i||!n,o&&this._signal("resize",r),o},this.onGutterResize=function(){var t=this.$showGutter?this.$gutter.offsetWidth:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var t=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(t/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption("animatedScroll",t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption("showInvisibles",t)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(t){this.setOption("displayIndentGuides",t)},this.setShowPrintMargin=function(t){this.setOption("showPrintMargin",t)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(t){this.setOption("printMarginColumn",t)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(t){return this.setOption("showGutter",t)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(t){this.setOption("fadeFoldWidgets",t)},this.setHighlightGutterLine=function(t){this.setOption("highlightGutterLine",t)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var t=this.$cursorLayer.$pixelPos,e=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var i=this.session.selection.getCursor();i.column=0,t=this.$cursorLayer.getPixelPosition(i,!0),e*=this.session.getRowLength(i.row)}this.$gutterLineHighlight.style.top=t.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=e+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var t=o.createElement("div");t.className="ace_layer ace_print-margin-layer",this.$printMarginEl=o.createElement("div"),this.$printMarginEl.className="ace_print-margin",t.appendChild(this.$printMarginEl),this.content.insertBefore(t,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var t=this.layerConfig,e=this.$cursorLayer.$pixelPos.top,i=this.$cursorLayer.$pixelPos.left;e-=t.offset;var n=this.textarea.style,o=this.lineHeight;if(0>e||e>t.height-o)return void(n.top=n.left="0");var s=this.characterWidth;if(this.$composition){var r=this.textarea.value.replace(/^\x01+/,"");s*=this.session.$getStringScreenWidth(r)[0]+2,o+=2}i-=this.scrollLeft,i>this.$size.scrollerWidth-s&&(i=this.$size.scrollerWidth-s),i+=this.gutterWidth,n.height=o+"px",n.width=s+"px",n.left=Math.min(i,this.$size.scrollerWidth-s)+"px",n.top=Math.min(e,this.$size.height-o)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var t=this.layerConfig,e=t.lastRow,i=this.session.documentToScreenRow(e,0)*t.lineHeight;return i-this.session.getScrollTop()>t.height-t.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(t,e,i,n){var o=this.scrollMargin;o.top=0|t,o.bottom=0|e,o.right=0|n,o.left=0|i,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption("hScrollBarAlwaysVisible",t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption("vScrollBarAlwaysVisible",t)},this.$updateScrollBarV=function(){var t=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(t-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>t-e&&(t=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(t+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(t,e){if(this.$changes&&(t|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!t&&!e)return void(this.$changes|=t);if(this.$size.$dirty)return this.$changes|=t,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var i=this.layerConfig;if(t&this.CHANGE_FULL||t&this.CHANGE_SIZE||t&this.CHANGE_TEXT||t&this.CHANGE_LINES||t&this.CHANGE_SCROLL||t&this.CHANGE_H_SCROLL){if(t|=this.$computeLayerConfig(),i.firstRow!=this.layerConfig.firstRow&&i.firstRowScreen==this.layerConfig.firstRowScreen){var n=this.scrollTop+(i.firstRow-this.layerConfig.firstRow)*this.lineHeight;n>0&&(this.scrollTop=n,t|=this.CHANGE_SCROLL,t|=this.$computeLayerConfig())}i=this.layerConfig,this.$updateScrollBarV(),t&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-i.offset+"px",this.content.style.marginTop=-i.offset+"px",this.content.style.width=i.width+2*this.$padding+"px",this.content.style.height=i.minHeight+"px"}return t&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),t&this.CHANGE_FULL?(this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):t&this.CHANGE_SCROLL?(t&this.CHANGE_TEXT||t&this.CHANGE_LINES?this.$textLayer.update(i):this.$textLayer.scrollLines(i),this.$showGutter&&this.$gutterLayer.update(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(t&this.CHANGE_TEXT?(this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i)):t&this.CHANGE_LINES?(this.$updateLines()||t&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(i):(t&this.CHANGE_TEXT||t&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(i),t&this.CHANGE_CURSOR&&(this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(i),t&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(i),void this._signal("afterRender"))},this.$autosize=function(){var t=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,i=Math.max((this.$minLines||1)*this.lineHeight,Math.min(e,t))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(i+=this.scrollBarH.getHeight());var n=t>e;if(i!=this.desiredHeight||this.$size.height!=this.desiredHeight||n!=this.$vScroll){n!=this.$vScroll&&(this.$vScroll=n,this.scrollBarV.setVisible(n));var o=this.container.clientWidth;this.container.style.height=i+"px",this.$updateCachedSize(!0,this.$gutterWidth,o,i),this.desiredHeight=i,this._signal("autosize")}},this.$computeLayerConfig=function(){var t=this.session,e=this.$size,i=e.height<=2*this.lineHeight,n=this.session.getScreenLength(),o=n*this.lineHeight,s=this.$getLongestLine(),r=!i&&(this.$hScrollBarAlwaysVisible||e.scrollerWidth-s-2*this.$padding<0),a=this.$horizScroll!==r;a&&(this.$horizScroll=r,this.scrollBarH.setVisible(r));var h=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=this.scrollTop%this.lineHeight,d=e.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;o+=c;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,o-e.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,s+2*this.$padding-e.scrollerWidth+u.right)));var g=!i&&(this.$vScrollBarAlwaysVisible||e.scrollerHeight-o+c<0||this.scrollTop>u.top),f=h!==g;f&&(this.$vScroll=g,this.scrollBarV.setVisible(g));var p,m,v=Math.ceil(d/this.lineHeight)-1,w=Math.max(0,Math.round((this.scrollTop-l)/this.lineHeight)),y=w+v,R=this.lineHeight;w=t.screenToDocumentRow(w,0);var A=t.getFoldLine(w);A&&(w=A.start.row),p=t.documentToScreenRow(w,0),m=t.getRowLength(w)*R,y=Math.min(t.screenToDocumentRow(y,0),t.getLength()-1),d=e.scrollerHeight+t.getRowLength(y)*R+m,l=this.scrollTop-p*R;var b=0;return this.layerConfig.width!=s&&(b=this.CHANGE_H_SCROLL),(a||f)&&(b=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal("scrollbarVisibilityChanged"),f&&(s=this.$getLongestLine())),this.layerConfig={width:s,padding:this.$padding,firstRow:w,firstRowScreen:p,lastRow:y,lineHeight:R,characterWidth:this.characterWidth,minHeight:d,maxHeight:o,offset:l,gutterOffset:Math.max(0,Math.ceil((l+e.height-e.scrollerHeight)/R)),height:this.$size.scrollerHeight},b},this.$updateLines=function(){var t=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var i=this.layerConfig;return t>i.lastRow+1||e<i.firstRow?void 0:e===1/0?(this.$showGutter&&this.$gutterLayer.update(i),void this.$textLayer.update(i)):(this.$textLayer.updateLines(i,t,e),!0)},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(t,e){this.$gutterLayer.addGutterDecoration(t,e)},this.removeGutterDecoration=function(t,e){this.$gutterLayer.removeGutterDecoration(t,e)},this.updateBreakpoints=function(t){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(t,e,i){this.scrollCursorIntoView(t,i),this.scrollCursorIntoView(e,i)},this.scrollCursorIntoView=function(t,e,i){if(0!==this.$size.scrollerHeight){var n=this.$cursorLayer.getPixelPosition(t),o=n.left,s=n.top,r=i&&i.top||0,a=i&&i.bottom||0,h=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;h+r>s?(e&&h+r>s+this.lineHeight&&(s-=e*this.$size.scrollerHeight),0===s&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):h+this.$size.scrollerHeight-a<s+this.lineHeight&&(e&&h+this.$size.scrollerHeight-a<s-this.lineHeight&&(s+=e*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight-this.$size.scrollerHeight));var l=this.scrollLeft;l>o?(o<this.$padding+2*this.layerConfig.characterWidth&&(o=-this.scrollMargin.left),this.session.setScrollLeft(o)):l+this.$size.scrollerWidth<o+this.characterWidth?this.session.setScrollLeft(Math.round(o+this.characterWidth-this.$size.scrollerWidth)):l<=this.$padding&&o-l<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(t,e){"number"==typeof t&&(t={row:t,column:0});var i=this.$cursorLayer.getPixelPosition(t),n=this.$size.scrollerHeight-this.lineHeight,o=i.top-n*(e||0);return this.session.setScrollTop(o),o},this.STEPS=8,this.$calcSteps=function(t,e){var i=0,n=this.STEPS,o=[],s=function(t,e,i){return i*(Math.pow(t-1,3)+1)+e};for(i=0;n>i;++i)o.push(s(i/this.STEPS,t,e-t));return o},this.scrollToLine=function(t,e,i,n){var o=this.$cursorLayer.getPixelPosition({row:t,column:0}),s=o.top;e&&(s-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(s),i!==!1&&this.animateScrolling(r,n)},this.animateScrolling=function(t,e){var i=this.scrollTop;if(this.$animatedScroll){var n=this;if(t!=i){if(this.$scrollAnimation){var o=this.$scrollAnimation.steps;if(o.length&&(t=o[0],t==i))return}var s=n.$calcSteps(t,i);this.$scrollAnimation={from:t,to:i,steps:s},clearInterval(this.$timer),n.session.setScrollTop(s.shift()),n.session.$scrollTop=i,this.$timer=setInterval(function(){s.length?(n.session.setScrollTop(s.shift()),n.session.$scrollTop=i):null!=i?(n.session.$scrollTop=-1,n.session.setScrollTop(i),i=null):(n.$timer=clearInterval(n.$timer),n.$scrollAnimation=null,e&&e())},10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(t,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(t,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),t&&this.session.setScrollLeft(this.session.getScrollLeft()+t)},this.isScrollableBy=function(t,e){return 0>e&&this.session.getScrollTop()>=1-this.scrollMargin.top||(e>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(0>t&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(t>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(t,e){var i=this.scroller.getBoundingClientRect(),n=(t+this.scrollLeft-i.left-this.$padding)/this.characterWidth,o=Math.floor((e+this.scrollTop-i.top)/this.lineHeight),s=Math.round(n);return{row:o,column:s,side:n-s>0?1:-1}},this.screenToTextCoordinates=function(t,e){var i=this.scroller.getBoundingClientRect(),n=Math.round((t+this.scrollLeft-i.left-this.$padding)/this.characterWidth),o=(e+this.scrollTop-i.top)/this.lineHeight;return this.session.screenToDocumentPosition(o,Math.max(n,0))},this.textToScreenCoordinates=function(t,e){var i=this.scroller.getBoundingClientRect(),n=this.session.documentToScreenPosition(t,e),o=this.$padding+Math.round(n.column*this.characterWidth),s=n.row*this.lineHeight;return{pageX:i.left+o-this.scrollLeft,pageY:i.top+s-this.scrollTop}},this.visualizeFocus=function(){o.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){o.removeCssClass(this.container,"ace_focus")},this.showComposition=function(t){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,o.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(t){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(o.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(t,e){function i(i){if(n.$themeId!=t)return e&&e();if(i.cssClass){o.importCssString(i.cssText,i.cssClass,n.container.ownerDocument),n.theme&&o.removeCssClass(n.container,n.theme.cssClass);var s="padding"in i?i.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=i.cssClass,n.theme=i,o.addCssClass(n.container,i.cssClass),o.setCssClass(n.container,"ace_dark",i.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:i}),e&&e()}}var n=this;if(this.$themeId=t,n._dispatchEvent("themeChange",{theme:t}),t&&"string"!=typeof t)i(t);else{var r=t||this.$options.theme.initialValue;s.loadModule(["theme",r],i)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(t,e){o.setCssClass(this.container,t,e!==!1)},this.unsetStyle=function(t){o.removeCssClass(this.container,t)},this.setCursorStyle=function(t){this.scroller.style.cursor!=t&&(this.scroller.style.cursor=t)},this.setMouseCursor=function(t){this.scroller.style.cursor=t},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(v.prototype),s.defineOptions(v.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){"number"==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){o.setCssClass(this.$gutter,"ace_fade-fold-widgets",t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t)},initialValue:!0},showLineNumbers:{set:function(t){this.$gutterLayer.setShowLineNumbers(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=t?"":"none",void(this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight())):(this.$gutterLineHighlight=o.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight))},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(t){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(t){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){"number"==typeof t&&(t+="px"),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(t){this.updateFull()}},minLines:{set:function(t){this.updateFull()}},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),e.VirtualRenderer=v}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(t,e,n){"use strict";var o=t("../lib/oop"),s=t("../lib/net"),r=t("../lib/event_emitter").EventEmitter,a=t("../config"),h=function(e,n,o,s){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),a.get("packaged")||!t.toUrl)s=s||a.moduleUrl(n.id,"worker");else{var r=this.$normalizePath;s=s||r(t.toUrl("ace/worker/worker.js",null,"_"));var h={};e.forEach(function(e){h[e]=r(t.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{var l=n.src,d=i(66),c=new d([l],{type:"application/javascript"}),u=(window.URL||window.webkitURL).createObjectURL(c);this.$worker=new Worker(u)}catch(g){if(!(g instanceof window.DOMException))throw g;var c=this.$workerBlob(s),f=window.URL||window.webkitURL,p=f.createObjectURL(c);this.$worker=new Worker(p),f.revokeObjectURL(p)}this.$worker.postMessage({init:!0,tlns:h,module:n.id,classname:o}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,r),this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var i=this.callbacks[e.id];i&&(i(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data)}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return s.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,i){if(i){var n=this.callbackId++;this.callbacks[n]=i,e.push(n)}this.send(t,e)},this.emit=function(t,e){try{this.$worker.postMessage({event:t,data:{data:e.data}})}catch(i){console.error(i.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))},this.$workerBlob=function(t){var e="importScripts('"+s.qualifyURL(t)+"');";try{return new Blob([e],{type:"application/javascript"})}catch(i){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,o=new n;return o.append(e),o.getBlob("application/javascript")}}}).call(h.prototype);var l=function(t,e,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var n=null,o=!1,s=Object.create(r),h=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(t){h.messageBuffer.push(t),n&&(o?setTimeout(l):l())},this.setEmitSync=function(t){o=t};var l=function(){var t=h.messageBuffer.shift();t.command?n[t.command].apply(n,t.args):t.event&&s._signal(t.event,t.data)};s.postMessage=function(t){h.onMessage({data:t})},s.callback=function(t,e){this.postMessage({type:"call",id:e,data:t})},s.emit=function(t,e){this.postMessage({type:"event",name:t,data:e})},a.loadModule(["worker",e],function(t){for(n=new t[i](s);h.messageBuffer.length;)l()})};l.prototype=h.prototype,e.UIWorkerClient=l,e.WorkerClient=h}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(t,e,i){"use strict";var n=t("./range").Range,o=t("./lib/event_emitter").EventEmitter,s=t("./lib/oop"),r=function(t,e,i,n,o,s){var r=this;this.length=e,this.session=t,this.doc=t.getDocument(),this.mainClass=o,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout(function(){r.onCursorChange()})},this.$pos=i;var a=t.getUndoManager().$undoStack||t.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),t.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,o),this.setup=function(){var t=this,e=this.doc,i=this.session;this.selectionBefore=i.selection.toJSON(),i.selection.inMultiSelectMode&&i.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var o=this.pos;o.$insertRight=!0,o.detach(),o.markerId=i.addMarker(new n(o.row,o.column,o.row,o.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(i){var n=e.createAnchor(i.row,i.column);n.$insertRight=!0,n.detach(),t.others.push(n)}),i.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,e=this;this.othersActive=!0,this.others.forEach(function(i){i.markerId=t.addMarker(new n(i.row,i.column,i.row,i.column+e.length),e.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(t){
if(this.$updating)return this.updateAnchors(t);var e=t;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var i="insert"===t.action?e.end.column-e.start.column:e.start.column-e.end.column,o=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,s=e.start.column-this.pos.column;if(this.updateAnchors(t),o&&(this.length+=i),o&&!this.session.$fromUndo)if("insert"===t.action)for(var r=this.others.length-1;r>=0;r--){var a=this.others[r],h={row:a.row,column:a.column+s};this.doc.insertMergedLines(h,t.lines)}else if("remove"===t.action)for(var r=this.others.length-1;r>=0;r--){var a=this.others[r],h={row:a.row,column:a.column+s};this.doc.remove(new n(h.row,h.column,h.row,h.column-i))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(t){this.pos.onChange(t);for(var e=this.others.length;e--;)this.others[e].onChange(t);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var t=this,e=this.session,i=function(i,o){e.removeMarker(i.markerId),i.markerId=e.addMarker(new n(i.row,i.column,i.row,i.column+t.length),o,null,!1)};i(this.pos,this.mainClass);for(var o=this.others.length;o--;)i(this.others[o],this.othersClass)}},this.onCursorChange=function(t){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",t)):(this.hideOtherMarkers(),this._emit("cursorLeave",t))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var t=this.session.getUndoManager(),e=(t.$undoStack||t.$undostack).length-this.$undoStackDepth,i=0;e>i;i++)t.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(r.prototype),e.PlaceHolder=r}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,e,i){function n(t,e){return t.row==e.row&&t.column==e.column}function o(t){var e=t.domEvent,i=e.altKey,o=e.shiftKey,a=e.ctrlKey,h=t.getAccelKey(),l=t.getButton();if(a&&r.isMac&&(l=e.button),t.editor.inMultiSelectMode&&2==l)return void t.editor.textInput.onContextMenu(t.domEvent);if(!a&&!i&&!h)return void(0===l&&t.editor.inMultiSelectMode&&t.editor.exitMultiSelectMode());if(0===l){var d,c=t.editor,u=c.selection,g=c.inMultiSelectMode,f=t.getDocumentPosition(),p=u.getCursor(),m=t.inSelection()||u.isEmpty()&&n(f,p),v=t.x,w=t.y,y=function(t){v=t.clientX,w=t.clientY},R=c.session,A=c.renderer.pixelToScreenCoordinates(v,w),b=A;if(c.$mouseHandler.$enableJumpToDef)a&&i||h&&i?d=o?"block":"add":i&&c.$blockSelectEnabled&&(d="block");else if(h&&!i){if(d="add",!g&&o)return}else i&&c.$blockSelectEnabled&&(d="block");if(d&&r.isMac&&e.ctrlKey&&c.$mouseHandler.cancelContextMenu(),"add"==d){if(!g&&m)return;if(!g){var x=u.toOrientedRange();c.addSelectionMarker(x)}var L=u.rangeList.rangeAtPoint(f);c.$blockScrolling++,c.inVirtualSelectionMode=!0,o&&(L=null,x=u.ranges[0]||x,c.removeSelectionMarker(x)),c.once("mouseup",function(){var t=u.toOrientedRange();L&&t.isEmpty()&&n(L.cursor,t.cursor)?u.substractPoint(t.cursor):(o?u.substractPoint(x.cursor):x&&(c.removeSelectionMarker(x),u.addRange(x)),u.addRange(t)),c.$blockScrolling--,c.inVirtualSelectionMode=!1})}else if("block"==d){t.stop(),c.inVirtualSelectionMode=!0;var C,k=[],E=function(){var t=c.renderer.pixelToScreenCoordinates(v,w),e=R.screenToDocumentPosition(t.row,t.column);n(b,t)&&n(e,u.lead)||(b=t,c.$blockScrolling++,c.selection.moveToPosition(e),c.renderer.scrollCursorIntoView(),c.removeSelectionMarkers(k),k=u.rectangularRangeBlock(b,A),c.$mouseHandler.$clickSelection&&1==k.length&&k[0].isEmpty()&&(k[0]=c.$mouseHandler.$clickSelection.clone()),k.forEach(c.addSelectionMarker,c),c.updateSelectionMarkers(),c.$blockScrolling--)};c.$blockScrolling++,g&&!h?u.toSingleRange():!g&&h&&(C=u.toOrientedRange(),c.addSelectionMarker(C)),o?A=R.documentToScreenPosition(u.lead):u.moveToPosition(f),c.$blockScrolling--,b={row:-1,column:-1};var B=function(t){clearInterval(S),c.removeSelectionMarkers(k),k.length||(k=[u.toOrientedRange()]),c.$blockScrolling++,C&&(c.removeSelectionMarker(C),u.toSingleRange(C));for(var e=0;e<k.length;e++)u.addRange(k[e]);c.inVirtualSelectionMode=!1,c.$mouseHandler.$clickSelection=null,c.$blockScrolling--},M=E;s.capture(c.container,y,B);var S=setInterval(function(){M()},20);return t.preventDefault()}}}var s=t("../lib/event"),r=t("../lib/useragent");e.onMouseDown=o}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(t,e,i){e.defaultCommands=[{name:"addCursorAbove",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(t){t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],e.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var n=t("../keyboard/hash_handler").HashHandler;e.keyboardHandler=new n(e.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(t,e,i){function n(t,e,i){return p.$options.wrap=!0,p.$options.needle=e,p.$options.backwards=-1==i,p.find(t)}function o(t,e){return t.row==e.row&&t.column==e.column}function s(t){t.$multiselectOnSessionChange||(t.$onAddRange=t.$onAddRange.bind(t),t.$onRemoveRange=t.$onRemoveRange.bind(t),t.$onMultiSelect=t.$onMultiSelect.bind(t),t.$onSingleSelect=t.$onSingleSelect.bind(t),t.$multiselectOnSessionChange=e.onSessionChange.bind(t),t.$checkMultiselectChange=t.$checkMultiselectChange.bind(t),t.$multiselectOnSessionChange(t),t.on("changeSession",t.$multiselectOnSessionChange),t.on("mousedown",d),t.commands.addCommands(g.defaultCommands),r(t))}function r(t){function e(e){n&&(t.renderer.setMouseCursor(""),n=!1)}var i=t.textInput.getElement(),n=!1;c.addListener(i,"keydown",function(i){var o=18==i.keyCode&&!(i.ctrlKey||i.shiftKey||i.metaKey);t.$blockSelectEnabled&&o?n||(t.renderer.setMouseCursor("crosshair"),n=!0):n&&e()}),c.addListener(i,"keyup",e),c.addListener(i,"blur",e)}var a=t("./range_list").RangeList,h=t("./range").Range,l=t("./selection").Selection,d=t("./mouse/multi_select_handler").onMouseDown,c=t("./lib/event"),u=t("./lib/lang"),g=t("./commands/multi_select_commands");e.commands=g.defaultCommands.concat(g.multiSelectCommands);var f=t("./search").Search,p=new f,m=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(m.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(t,e){if(t){if(!this.inMultiSelectMode&&0===this.rangeCount){var i=this.toOrientedRange();if(this.rangeList.add(i),this.rangeList.add(t),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(t);this.rangeList.removeAll(),this.rangeList.add(i),this.$onAddRange(i)}t.cursor||(t.cursor=t.end);var n=this.rangeList.add(t);return this.$onAddRange(t),n.length&&this.$onRemoveRange(n),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(t)}},this.toSingleRange=function(t){t=t||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),t&&this.fromOrientedRange(t)},this.substractPoint=function(t){var e=this.rangeList.substractPoint(t);return e?(this.$onRemoveRange(e),e[0]):void 0},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length?this.$onRemoveRange(t):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal("addRange",{range:t})},this.$onRemoveRange=function(t){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var e=this.rangeList.ranges.pop();t.push(e),this.rangeCount=0}for(var i=t.length;i--;){var n=this.ranges.indexOf(t[i]);this.ranges.splice(n,1)}this._signal("removeRange",{ranges:t}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),e=e||this.ranges[0],e&&!e.isEqual(this.getRange())&&this.fromOrientedRange(e)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],i=h.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(i,e.cursor==e.start)}else{var i=this.getRange(),n=this.isBackwards(),o=i.start.row,s=i.end.row;if(o==s){if(n)var r=i.end,a=i.start;else var r=i.start,a=i.end;return this.addRange(h.fromPoints(a,a)),void this.addRange(h.fromPoints(r,r))}var l=[],d=this.getLineRange(o,!0);d.start.column=i.start.column,l.push(d);for(var c=o+1;s>c;c++)l.push(this.getLineRange(c,!0));d=this.getLineRange(s,!0),d.end.column=i.end.column,l.push(d),l.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var t=this.rangeList.ranges,e=t[t.length-1],i=h.fromPoints(t[0].start,e.end);this.toSingleRange(),this.setSelectionRange(i,e.cursor==e.start)}else{var n=this.session.documentToScreenPosition(this.selectionLead),o=this.session.documentToScreenPosition(this.selectionAnchor),s=this.rectangularRangeBlock(n,o);s.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(t,e,i){var n=[],s=t.column<e.column;if(s)var r=t.column,a=e.column;else var r=e.column,a=t.column;var l=t.row<e.row;if(l)var d=t.row,c=e.row;else var d=e.row,c=t.row;0>r&&(r=0),0>d&&(d=0),d==c&&(i=!0);for(var u=d;c>=u;u++){var g=h.fromPoints(this.session.screenToDocumentPosition(u,r),this.session.screenToDocumentPosition(u,a));if(g.isEmpty()){if(f&&o(g.end,f))break;var f=g.end}g.cursor=s?g.start:g.end,n.push(g)}if(l&&n.reverse(),!i){for(var p=n.length-1;n[p].isEmpty()&&p>0;)p--;if(p>0)for(var m=0;n[m].isEmpty();)m++;for(var v=p;v>=m;v--)n[v].isEmpty()&&n.splice(v,1)}return n}}.call(l.prototype);var v=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(t){t.cursor||(t.cursor=t.end);var e=this.getSelectionStyle();return t.marker=this.session.addMarker(t,"ace_selection",e),this.session.$selectionMarkers.push(t),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,t},this.removeSelectionMarker=function(t){if(t.marker){this.session.removeMarker(t.marker);var e=this.session.$selectionMarkers.indexOf(t);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(t){for(var e=this.session.$selectionMarkers,i=t.length;i--;){var n=t[i];if(n.marker){this.session.removeMarker(n.marker);var o=e.indexOf(n);-1!=o&&e.splice(o,1)}}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(t){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(g.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(t){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(g.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(t){var e=t.command,i=t.editor;if(i.multiSelect){if(e.multiSelectAction)"forEach"==e.multiSelectAction?n=i.forEachSelection(e,t.args):"forEachLine"==e.multiSelectAction?n=i.forEachSelection(e,t.args,!0):"single"==e.multiSelectAction?(i.exitMultiSelectMode(),n=e.exec(i,t.args||{})):n=e.multiSelectAction(i,t.args||{});else{var n=e.exec(i,t.args||{});i.multiSelect.addRange(i.multiSelect.toOrientedRange()),i.multiSelect.mergeOverlappingRanges()}return n}},this.forEachSelection=function(t,e,i){if(!this.inVirtualSelectionMode){var n,o=i&&i.keepOrder,s=1==i||i&&i.$byLines,r=this.session,a=this.selection,h=a.rangeList,d=(o?a:h).ranges;if(!d.length)return t.exec?t.exec(this,e||{}):t(this,e||{});var c=a._eventRegistry;a._eventRegistry={};var u=new l(r);this.inVirtualSelectionMode=!0;for(var g=d.length;g--;){if(s)for(;g>0&&d[g].start.row==d[g-1].end.row;)g--;u.fromOrientedRange(d[g]),u.index=g,this.selection=r.selection=u;var f=t.exec?t.exec(this,e||{}):t(this,e||{});n||void 0===f||(n=f),u.toOrientedRange(d[g])}u.detach(),this.selection=r.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=c,a.mergeOverlappingRanges();var p=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),p&&p.from==p.to&&this.renderer.animateScrolling(p.from),n}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var t="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,i=[],n=0;n<e.length;n++)i.push(this.session.getTextRange(e[n]));var o=this.session.getDocument().getNewLineCharacter();t=i.join(o),t.length==(i.length-1)*o.length&&(t="")}else this.selection.isEmpty()||(t=this.session.getTextRange(this.getSelectionRange()));return t},this.$checkMultiselectChange=function(t,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var i=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var n=e==this.multiSelect.anchor?i.cursor==i.start?i.end:i.start:i.cursor;n.row==e.row&&this.session.$clipPositionToDocument(n.row,n.column).column==e.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(t,e,i){if(e=e||{},e.needle=t||e.needle,void 0==e.needle){var n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(n)}this.$search.set(e);var o=this.$search.findAll(this.session);if(!o.length)return 0;this.$blockScrolling+=1;var s=this.multiSelect;i||s.toSingleRange(o[0]);for(var r=o.length;r--;)s.addRange(o[r],!0);return n&&s.rangeList.rangeAtPoint(n.start)&&s.addRange(n,!0),this.$blockScrolling-=1,o.length},this.selectMoreLines=function(t,e){var i=this.selection.toOrientedRange(),n=i.cursor==i.end,o=this.session.documentToScreenPosition(i.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var s=this.session.screenToDocumentPosition(o.row+t,o.column);if(i.isEmpty())var r=s;else var a=this.session.documentToScreenPosition(n?i.end:i.start),r=this.session.screenToDocumentPosition(a.row+t,a.column);if(n){var l=h.fromPoints(s,r);l.cursor=l.start}else{var l=h.fromPoints(r,s);l.cursor=l.end}if(l.desiredColumn=o.column,this.selection.inMultiSelectMode){if(e)var d=i.cursor}else this.selection.addRange(i);this.selection.addRange(l),d&&this.selection.substractPoint(d)},this.transposeSelections=function(t){for(var e=this.session,i=e.multiSelect,n=i.ranges,o=n.length;o--;){var s=n[o];if(s.isEmpty()){var r=e.getWordRange(s.start.row,s.start.column);s.start.row=r.start.row,s.start.column=r.start.column,s.end.row=r.end.row,s.end.column=r.end.column}}i.mergeOverlappingRanges();for(var a=[],o=n.length;o--;){var s=n[o];a.unshift(e.getTextRange(s))}0>t?a.unshift(a.pop()):a.push(a.shift());for(var o=n.length;o--;){var s=n[o],r=s.clone();e.replace(s,a[o]),s.start.row=r.start.row,s.start.column=r.start.column}},this.selectMore=function(t,e,i){var o=this.session,s=o.multiSelect,r=s.toOrientedRange();if(!r.isEmpty()||(r=o.getWordRange(r.start.row,r.start.column),r.cursor=-1==t?r.start:r.end,this.multiSelect.addRange(r),!i)){var a=o.getTextRange(r),h=n(o,a,t);h&&(h.cursor=-1==t?h.start:h.end,this.$blockScrolling+=1,this.session.unfold(h),this.multiSelect.addRange(h),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(r.cursor)}},this.alignCursors=function(){var t=this.session,e=t.multiSelect,i=e.ranges,n=-1,o=i.filter(function(t){return t.cursor.row==n||void(n=t.cursor.row)});if(i.length&&o.length!=i.length-1){o.forEach(function(t){e.substractPoint(t.cursor)});var s=0,r=1/0,a=i.map(function(e){var i=e.cursor,n=t.getLine(i.row),o=n.substr(i.column).search(/\S/g);return-1==o&&(o=0),i.column>s&&(s=i.column),r>o&&(r=o),o});i.forEach(function(e,i){var n=e.cursor,o=s-n.column,l=a[i]-r;o>l?t.insert(n,u.stringRepeat(" ",o-l)):t.remove(new h(n.row,n.column,n.row,n.column-o+l)),e.start.column=e.end.column=s,e.start.row=e.end.row=n.row,e.cursor=e.end}),e.fromOrientedRange(i[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var l=this.selection.getRange(),d=l.start.row,c=l.end.row,g=d==c;if(g){var f,p=this.session.getLength();do f=this.session.getLine(c);while(/[=:]/.test(f)&&++c<p);do f=this.session.getLine(d);while(/[=:]/.test(f)&&--d>0);0>d&&(d=0),c>=p&&(c=p-1)}var m=this.session.removeFullLines(d,c);m=this.$reAlignText(m,g),this.session.insert({row:d,column:0},m.join("\n")+"\n"),g||(l.start.column=0,l.end.column=m[m.length-1].length),this.selection.setRange(l)}},this.$reAlignText=function(t,e){function i(t){return u.stringRepeat(" ",t)}function n(t){return t[2]?i(r)+t[2]+i(a-t[2].length+h)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}function o(t){return t[2]?i(r+a-t[2].length)+t[2]+i(h," ")+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}function s(t){return t[2]?i(r)+t[2]+i(h)+t[4].replace(/^([=:])\s+/,"$1 "):t[0]}var r,a,h,l=!0,d=!0;return t.map(function(t){var e=t.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==r?(r=e[1].length,a=e[2].length,h=e[3].length,e):(r+a+h!=e[1].length+e[2].length+e[3].length&&(d=!1),r!=e[1].length&&(l=!1),r>e[1].length&&(r=e[1].length),a<e[2].length&&(a=e[2].length),h>e[3].length&&(h=e[3].length),e):[t]}).map(e?n:l?d?o:n:s)}}).call(v.prototype),e.onSessionChange=function(t){var e=t.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var i=t.oldSession;i&&(i.multiSelect.off("addRange",this.$onAddRange),i.multiSelect.off("removeRange",this.$onRemoveRange),i.multiSelect.off("multiSelect",this.$onMultiSelect),i.multiSelect.off("singleSelect",this.$onSingleSelect),i.multiSelect.lead.off("change",this.$checkMultiselectChange),i.multiSelect.anchor.off("change",this.$checkMultiselectChange)),e&&(e.multiSelect.on("addRange",this.$onAddRange),e.multiSelect.on("removeRange",this.$onRemoveRange),e.multiSelect.on("multiSelect",this.$onMultiSelect),e.multiSelect.on("singleSelect",this.$onSingleSelect),e.multiSelect.lead.on("change",this.$checkMultiselectChange),e.multiSelect.anchor.on("change",this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},e.MultiSelect=s,t("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(t){s(this),t?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",d)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",d))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(t,e,i){"use strict";var n=t("../../range").Range,o=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(t,e,i){var n=t.getLine(i);return this.foldingStartMarker.test(n)?"start":"markbeginend"==e&&this.foldingStopMarker&&this.foldingStopMarker.test(n)?"end":""},this.getFoldWidgetRange=function(t,e,i){return null},this.indentationBlock=function(t,e,i){var o=/\S/,s=t.getLine(e),r=s.search(o);if(-1!=r){for(var a=i||s.length,h=t.getLength(),l=e,d=e;++e<h;){var c=t.getLine(e).search(o);if(-1!=c){if(r>=c)break;d=e}}if(d>l){var u=t.getLine(d).length;return new n(l,a,d,u)}}},this.openingBracketBlock=function(t,e,i,o,s){var r={row:i,column:o+1},a=t.$findClosingBracket(e,r,s);if(a){var h=t.foldWidgets[a.row];return null==h&&(h=t.getFoldWidget(a.row)),"start"==h&&a.row>r.row&&(a.row--,a.column=t.getLine(a.row).length),n.fromPoints(r,a)}},this.closingBracketBlock=function(t,e,i,o,s){var r={row:i,column:o},a=t.$findOpeningBracket(e,r);return a?(a.column++,r.column--,n.fromPoints(a,r)):void 0}}).call(o.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(t,e,i){"use strict";e.isDark=!1,e.cssClass="ace-tm",e.cssText='.ace-tm .ace_gutter {\tbackground: #f0f0f0;\tcolor: #333;\t}\t.ace-tm .ace_print-margin {\twidth: 1px;\tbackground: #e8e8e8;\t}\t.ace-tm .ace_fold {\tbackground-color: #6B72E6;\t}\t.ace-tm {\tbackground-color: #FFFFFF;\tcolor: black;\t}\t.ace-tm .ace_cursor {\tcolor: black;\t}\t.ace-tm .ace_invisible {\tcolor: rgb(191, 191, 191);\t}\t.ace-tm .ace_storage,\t.ace-tm .ace_keyword {\tcolor: blue;\t}\t.ace-tm .ace_constant {\tcolor: rgb(197, 6, 11);\t}\t.ace-tm .ace_constant.ace_buildin {\tcolor: rgb(88, 72, 246);\t}\t.ace-tm .ace_constant.ace_language {\tcolor: rgb(88, 92, 246);\t}\t.ace-tm .ace_constant.ace_library {\tcolor: rgb(6, 150, 14);\t}\t.ace-tm .ace_invalid {\tbackground-color: rgba(255, 0, 0, 0.1);\tcolor: red;\t}\t.ace-tm .ace_support.ace_function {\tcolor: rgb(60, 76, 114);\t}\t.ace-tm .ace_support.ace_constant {\tcolor: rgb(6, 150, 14);\t}\t.ace-tm .ace_support.ace_type,\t.ace-tm .ace_support.ace_class {\tcolor: rgb(109, 121, 222);\t}\t.ace-tm .ace_keyword.ace_operator {\tcolor: rgb(104, 118, 135);\t}\t.ace-tm .ace_string {\tcolor: rgb(3, 106, 7);\t}\t.ace-tm .ace_comment {\tcolor: rgb(76, 136, 107);\t}\t.ace-tm .ace_comment.ace_doc {\tcolor: rgb(0, 102, 255);\t}\t.ace-tm .ace_comment.ace_doc.ace_tag {\tcolor: rgb(128, 159, 191);\t}\t.ace-tm .ace_constant.ace_numeric {\tcolor: rgb(0, 0, 205);\t}\t.ace-tm .ace_variable {\tcolor: rgb(49, 132, 149);\t}\t.ace-tm .ace_xml-pe {\tcolor: rgb(104, 104, 91);\t}\t.ace-tm .ace_entity.ace_name.ace_function {\tcolor: #0000A2;\t}\t.ace-tm .ace_heading {\tcolor: rgb(12, 7, 255);\t}\t.ace-tm .ace_list {\tcolor:rgb(185, 6, 144);\t}\t.ace-tm .ace_meta.ace_tag {\tcolor:rgb(0, 22, 142);\t}\t.ace-tm .ace_string.ace_regex {\tcolor: rgb(255, 0, 0)\t}\t.ace-tm .ace_marker-layer .ace_selection {\tbackground: rgb(181, 213, 255);\t}\t.ace-tm.ace_multiselect .ace_selection.ace_start {\tbox-shadow: 0 0 3px 0px white;\t}\t.ace-tm .ace_marker-layer .ace_step {\tbackground: rgb(252, 255, 0);\t}\t.ace-tm .ace_marker-layer .ace_stack {\tbackground: rgb(164, 229, 101);\t}\t.ace-tm .ace_marker-layer .ace_bracket {\tmargin: -1px 0 0 -1px;\tborder: 1px solid rgb(192, 192, 192);\t}\t.ace-tm .ace_marker-layer .ace_active-line {\tbackground: rgba(0, 0, 0, 0.07);\t}\t.ace-tm .ace_gutter-active-line {\tbackground-color : #dcdcdc;\t}\t.ace-tm .ace_marker-layer .ace_selected-word {\tbackground: rgb(250, 250, 255);\tborder: 1px solid rgb(200, 200, 250);\t}\t.ace-tm .ace_indent-guide {\tbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\t}\t';var n=t("../lib/dom");n.importCssString(e.cssText,e.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(t,e,i){"use strict";function n(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var o=(t("./lib/oop"),t("./lib/dom"));t("./range").Range,function(){this.getRowLength=function(t){var e;return e=this.lineWidgets?this.lineWidgets[t]&&this.lineWidgets[t].rowCount||0:0,this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1+e:1+e},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)}),t},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on("beforeRender",this.measureWidgets),t.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(t){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var i=this.session.lineWidgets;i&&i.forEach(function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})}},this.updateOnFold=function(t,e){var i=e.lineWidgets;if(i&&t.action){for(var n=t.data,o=n.start.row,s=n.end.row,r="add"==t.action,a=o+1;s>a;a++)i[a]&&(i[a].hidden=r);i[s]&&(r?i[o]?i[s].hidden=r:i[o]=i[s]:(i[o]==i[s]&&(i[o]=void 0),i[s].hidden=r))}},this.updateOnChange=function(t){var e=this.session.lineWidgets;if(e){var i=t.start.row,n=t.end.row-i;if(0===n);else if("remove"==t.action){var o=e.splice(i+1,n);o.forEach(function(t){t&&this.removeLineWidget(t)},this),this.$updateRows()}else{var s=new Array(n);s.unshift(i,0),e.splice.apply(e,s),this.$updateRows()}}},this.$updateRows=function(){var t=this.session.lineWidgets;if(t){var e=!0;t.forEach(function(t,i){if(t)for(e=!1,t.row=i;t.$oldWidget;)t.$oldWidget.row=i,t=t.$oldWidget}),e&&(this.session.lineWidgets=null)}},this.addLineWidget=function(t){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var e=this.session.lineWidgets[t.row];e&&(t.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[t.row]=t,t.session=this.session;var i=this.editor.renderer;t.html&&!t.el&&(t.el=o.createElement("div"),t.el.innerHTML=t.html),t.el&&(o.addCssClass(t.el,"ace_lineWidgetContainer"),t.el.style.position="absolute",t.el.style.zIndex=5,i.container.appendChild(t.el),t._inDocument=!0),t.coverGutter||(t.el.style.zIndex=3),t.pixelHeight||(t.pixelHeight=t.el.offsetHeight),null==t.rowCount&&(t.rowCount=t.pixelHeight/i.layerConfig.lineHeight);var n=this.session.getFoldAt(t.row,0);if(t.$fold=n,n){var s=this.session.lineWidgets;t.row!=n.end.row||s[n.start.row]?t.hidden=!0:s[n.start.row]=t}return this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows(),this.renderWidgets(null,i),this.onWidgetChanged(t),t},this.removeLineWidget=function(t){if(t._inDocument=!1,t.session=null,t.el&&t.el.parentNode&&t.el.parentNode.removeChild(t.el),t.editor&&t.editor.destroy)try{t.editor.destroy()}catch(e){}if(this.session.lineWidgets){var i=this.session.lineWidgets[t.row];if(i==t)this.session.lineWidgets[t.row]=t.$oldWidget,t.$oldWidget&&this.onWidgetChanged(t.$oldWidget);else for(;i;){if(i.$oldWidget==t){i.$oldWidget=t.$oldWidget;break}i=i.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:t.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(t){for(var e=this.session.lineWidgets,i=e&&e[t],n=[];i;)n.push(i),i=i.$oldWidget;return n},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(t,e){var i=this.session._changedWidgets,n=e.layerConfig;if(i&&i.length){for(var o=1/0,s=0;s<i.length;s++){var r=i[s];if(r&&r.el&&r.session==this.session){if(!r._inDocument){if(this.session.lineWidgets[r.row]!=r)continue;r._inDocument=!0,e.container.appendChild(r.el)}r.h=r.el.offsetHeight,r.fixedWidth||(r.w=r.el.offsetWidth,r.screenWidth=Math.ceil(r.w/n.characterWidth));var a=r.h/n.lineHeight;r.coverLine&&(a-=this.session.getRowLineCount(r.row),0>a&&(a=0)),r.rowCount!=a&&(r.rowCount=a,r.row<o&&(o=r.row))}}o!=1/0&&(this.session._emit("changeFold",{data:{start:{row:o}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(t,e){var i=e.layerConfig,n=this.session.lineWidgets;if(n){for(var o=Math.min(this.firstRow,i.firstRow),s=Math.max(this.lastRow,i.lastRow,n.length);o>0&&!n[o];)o--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,e.$cursorLayer.config=i;for(var r=o;s>=r;r++){var a=n[r];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,e.container.appendChild(a.el));var h=e.$cursorLayer.getPixelPosition({row:r,column:0},!0).top;a.coverLine||(h+=i.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=h-i.offset+"px";var l=a.coverGutter?0:e.gutterWidth;a.fixedWidth||(l-=e.scrollLeft),a.el.style.left=l+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=i.width+2*i.padding+"px"),a.fixedWidth?a.el.style.right=e.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}.call(n.prototype),e.LineWidgets=n}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(t,e,i){"use strict";function n(t,e,i){for(var n=0,o=t.length-1;o>=n;){var s=n+o>>1,r=i(e,t[s]);if(r>0)n=s+1;else{if(!(0>r))return s;o=s-1}}return-(n+1)}function o(t,e,i){var o=t.getAnnotations().sort(a.comparePoints);if(o.length){var s=n(o,{row:e,column:-1},a.comparePoints);0>s&&(s=-s-1),s>=o.length?s=i>0?0:o.length-1:0===s&&0>i&&(s=o.length-1);
var r=o[s];if(r&&i){if(r.row===e){do r=o[s+=i];while(r&&r.row===e);if(!r)return o.slice()}var h=[];e=r.row;do h[0>i?"unshift":"push"](r),r=o[s+=i];while(r&&r.row==e);return h.length&&h}}}var s=t("../line_widgets").LineWidgets,r=t("../lib/dom"),a=t("../range").Range;e.showErrorMarker=function(t,e){var i=t.session;i.widgetManager||(i.widgetManager=new s(i),i.widgetManager.attach(t));var n=t.getCursorPosition(),a=n.row,h=i.widgetManager.getWidgetsAtRow(a).filter(function(t){return"errorMarker"==t.type})[0];h?h.destroy():a-=e;var l,d=o(i,a,e);if(d){var c=d[0];n.column=(c.pos&&"number"!=typeof c.column?c.pos.sc:c.column)||0,n.row=c.row,l=t.renderer.$gutterLayer.$annotations[n.row]}else{if(h)return;l={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(n.row),t.selection.moveToPosition(n);var u={row:n.row,fixedWidth:!0,coverGutter:!0,el:r.createElement("div"),type:"errorMarker"},g=u.el.appendChild(r.createElement("div")),f=u.el.appendChild(r.createElement("div"));f.className="error_widget_arrow "+l.className;var p=t.renderer.$cursorLayer.getPixelPosition(n).left;f.style.left=p+t.renderer.gutterWidth-5+"px",u.el.className="error_widget_wrapper",g.className="error_widget "+l.className,g.innerHTML=l.text.join("<br>"),g.appendChild(r.createElement("div"));var m=function(t,e,i){return 0!==e||"esc"!==i&&"return"!==i?void 0:(u.destroy(),{command:"null"})};u.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(m),i.widgetManager.removeLineWidget(u),t.off("changeSelection",u.destroy),t.off("changeSession",u.destroy),t.off("mouseup",u.destroy),t.off("change",u.destroy))},t.keyBinding.addKeyboardHandler(m),t.on("changeSelection",u.destroy),t.on("changeSession",u.destroy),t.on("mouseup",u.destroy),t.on("change",u.destroy),t.session.widgetManager.addLineWidget(u),u.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:u.el.offsetHeight})},r.importCssString("\t    .error_widget_wrapper {\t        background: inherit;\t        color: inherit;\t        border:none\t    }\t    .error_widget {\t        border-top: solid 2px;\t        border-bottom: solid 2px;\t        margin: 5px 0;\t        padding: 10px 40px;\t        white-space: pre-wrap;\t    }\t    .error_widget.ace_error, .error_widget_arrow.ace_error{\t        border-color: #ff5a5a\t    }\t    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\t        border-color: #F1D817\t    }\t    .error_widget.ace_info, .error_widget_arrow.ace_info{\t        border-color: #5a5a5a\t    }\t    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\t        border-color: #5aaa5a\t    }\t    .error_widget_arrow {\t        position: absolute;\t        border: solid 5px;\t        border-top-color: transparent!important;\t        border-right-color: transparent!important;\t        border-left-color: transparent!important;\t        top: -5px;\t    }\t","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(t,e,i){"use strict";t("./lib/fixoldbrowsers");var n=t("./lib/dom"),o=t("./lib/event"),s=t("./editor").Editor,r=t("./edit_session").EditSession,a=t("./undomanager").UndoManager,h=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),e.config=t("./config"),e.acequire=t,e.edit=function(t){if("string"==typeof t){var i=t;if(t=document.getElementById(i),!t)throw new Error("ace.edit can't find div #"+i)}if(t&&t.env&&t.env.editor instanceof s)return t.env.editor;var r="";if(t&&/input|textarea/i.test(t.tagName)){var a=t;r=a.value,t=n.createElement("pre"),a.parentNode.replaceChild(t,a)}else t&&(r=n.getInnerText(t),t.innerHTML="");var l=e.createEditSession(r),d=new s(new h(t));d.setSession(l);var c={document:l,editor:d,onResize:d.resize.bind(d,null)};return a&&(c.textarea=a),o.addListener(window,"resize",c.onResize),d.on("destroy",function(){o.removeListener(window,"resize",c.onResize),c.editor.container.env=null}),d.container.env=d.env=c,d},e.createEditSession=function(t,e){var i=new r(t,e);return i.setUndoManager(new a),i},e.EditSession=r,e.UndoManager=a,e.version="1.2.3"}),function(){ace.acequire(["ace/ace"],function(t){t&&t.config.init(!0),window.ace||(window.ace=t);for(var e in t)t.hasOwnProperty(e)&&(window.ace[e]=t[e])})}(),t.exports=window.ace.acequire("ace/ace")},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){function i(){if(e.Blob)try{return new Blob(["asdf"],{type:"text/plain"}),Blob}catch(t){}var i=e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder;return function(t,e){var n=new i,o=e.endings,s=e.type;if(o)for(var r=0,a=t.length;a>r;++r)n.append(t[r],o);else for(var r=0,a=t.length;a>r;++r)n.append(t[r]);return s?n.getBlob(s):n.getBlob()}}t.exports=i()}).call(e,function(){return this}())},function(t,e,i){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,e,i){"use strict";var n=t("../lib/oop"),o=t("./text_highlight_rules").TextHighlightRules,s=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'[^"\\\\]+'},{token:"string",regex:'"',next:"start"},{token:"string",regex:"",next:"start"}]}};n.inherits(s,o),e.JsonHighlightRules=s}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,e,i){"use strict";var n=t("../range").Range,o=function(){};(function(){this.checkOutdent=function(t,e){return!!/^\s+$/.test(t)&&/^\s*\}/.test(e)},this.autoOutdent=function(t,e){var i=t.getLine(e),o=i.match(/^(\s*\})/);if(!o)return 0;var s=o[1].length,r=t.findMatchingBracket({row:e,column:s});if(!r||r.row==e)return 0;var a=this.$getIndent(t.getLine(r.row));t.replace(new n(e,0,e,s-1),a)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(o.prototype),e.MatchingBraceOutdent=o}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,e,i){"use strict";var n,o=t("../../lib/oop"),s=t("../behaviour").Behaviour,r=t("../../token_iterator").TokenIterator,a=t("../../lib/lang"),h=["text","paren.rparen","punctuation.operator"],l=["text","paren.rparen","punctuation.operator","comment"],d={},c=function(t){var e=-1;return t.multiSelect&&(e=t.selection.index,d.rangeCount!=t.multiSelect.rangeCount&&(d={rangeCount:t.multiSelect.rangeCount})),d[e]?n=d[e]:void(n=d[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""})},u=function(t,e,i,n){var o=t.end.row-t.start.row;return{text:i+e+n,selection:[0,t.start.column+1,o,t.end.column+(o?0:1)]}},g=function(){this.add("braces","insertion",function(t,e,i,o,s){var r=i.getCursorPosition(),h=o.doc.getLine(r.row);if("{"==s){c(i);var l=i.getSelectionRange(),d=o.doc.getTextRange(l);if(""!==d&&"{"!==d&&i.getWrapBehavioursEnabled())return u(l,d,"{","}");if(g.isSaneInsertion(i,o))return/[\]\}\)]/.test(h[r.column])||i.inMultiSelectMode?(g.recordAutoInsert(i,o,"}"),{text:"{}",selection:[1,1]}):(g.recordMaybeInsert(i,o,"{"),{text:"{",selection:[1,1]})}else if("}"==s){c(i);var f=h.substring(r.column,r.column+1);if("}"==f){var p=o.$findOpeningBracket("}",{column:r.column+1,row:r.row});if(null!==p&&g.isAutoInsertedClosing(r,h,s))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==s||"\r\n"==s){c(i);var m="";g.isMaybeInsertedClosing(r,h)&&(m=a.stringRepeat("}",n.maybeInsertedBrackets),g.clearMaybeInsertedClosing());var f=h.substring(r.column,r.column+1);if("}"===f){var v=o.findMatchingBracket({row:r.row,column:r.column+1},"}");if(!v)return null;var w=this.$getIndent(o.getLine(v.row))}else{if(!m)return void g.clearMaybeInsertedClosing();var w=this.$getIndent(h)}var y=w+o.getTabString();return{text:"\n"+y+"\n"+w+m,selection:[1,y.length,1,y.length]}}g.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(t,e,i,o,s){var r=o.doc.getTextRange(s);if(!s.isMultiLine()&&"{"==r){c(i);var a=o.doc.getLine(s.start.row),h=a.substring(s.end.column,s.end.column+1);if("}"==h)return s.end.column++,s;n.maybeInsertedBrackets--}}),this.add("parens","insertion",function(t,e,i,n,o){if("("==o){c(i);var s=i.getSelectionRange(),r=n.doc.getTextRange(s);if(""!==r&&i.getWrapBehavioursEnabled())return u(s,r,"(",")");if(g.isSaneInsertion(i,n))return g.recordAutoInsert(i,n,")"),{text:"()",selection:[1,1]}}else if(")"==o){c(i);var a=i.getCursorPosition(),h=n.doc.getLine(a.row),l=h.substring(a.column,a.column+1);if(")"==l){var d=n.$findOpeningBracket(")",{column:a.column+1,row:a.row});if(null!==d&&g.isAutoInsertedClosing(a,h,o))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(t,e,i,n,o){var s=n.doc.getTextRange(o);if(!o.isMultiLine()&&"("==s){c(i);var r=n.doc.getLine(o.start.row),a=r.substring(o.start.column+1,o.start.column+2);if(")"==a)return o.end.column++,o}}),this.add("brackets","insertion",function(t,e,i,n,o){if("["==o){c(i);var s=i.getSelectionRange(),r=n.doc.getTextRange(s);if(""!==r&&i.getWrapBehavioursEnabled())return u(s,r,"[","]");if(g.isSaneInsertion(i,n))return g.recordAutoInsert(i,n,"]"),{text:"[]",selection:[1,1]}}else if("]"==o){c(i);var a=i.getCursorPosition(),h=n.doc.getLine(a.row),l=h.substring(a.column,a.column+1);if("]"==l){var d=n.$findOpeningBracket("]",{column:a.column+1,row:a.row});if(null!==d&&g.isAutoInsertedClosing(a,h,o))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(t,e,i,n,o){var s=n.doc.getTextRange(o);if(!o.isMultiLine()&&"["==s){c(i);var r=n.doc.getLine(o.start.row),a=r.substring(o.start.column+1,o.start.column+2);if("]"==a)return o.end.column++,o}}),this.add("string_dquotes","insertion",function(t,e,i,n,o){if('"'==o||"'"==o){c(i);var s=o,r=i.getSelectionRange(),a=n.doc.getTextRange(r);if(""!==a&&"'"!==a&&'"'!=a&&i.getWrapBehavioursEnabled())return u(r,a,s,s);if(!a){var h=i.getCursorPosition(),l=n.doc.getLine(h.row),d=l.substring(h.column-1,h.column),g=l.substring(h.column,h.column+1),f=n.getTokenAt(h.row,h.column),p=n.getTokenAt(h.row,h.column+1);if("\\"==d&&f&&/escape/.test(f.type))return null;var m,v=f&&/string|escape/.test(f.type),w=!p||/string|escape/.test(p.type);if(g==s)m=v!==w;else{if(v&&!w)return null;if(v&&w)return null;var y=n.$mode.tokenRe;y.lastIndex=0;var R=y.test(d);y.lastIndex=0;var A=y.test(d);if(R||A)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;m=!0}return{text:m?s+s:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(t,e,i,n,o){var s=n.doc.getTextRange(o);if(!o.isMultiLine()&&('"'==s||"'"==s)){c(i);var r=n.doc.getLine(o.start.row),a=r.substring(o.start.column+1,o.start.column+2);if(a==s)return o.end.column++,o}})};g.isSaneInsertion=function(t,e){var i=t.getCursorPosition(),n=new r(e,i.row,i.column);if(!this.$matchTokenType(n.getCurrentToken()||"text",h)){var o=new r(e,i.row,i.column+1);if(!this.$matchTokenType(o.getCurrentToken()||"text",h))return!1}return n.stepForward(),n.getCurrentTokenRow()!==i.row||this.$matchTokenType(n.getCurrentToken()||"text",l)},g.$matchTokenType=function(t,e){return e.indexOf(t.type||t)>-1},g.recordAutoInsert=function(t,e,i){var o=t.getCursorPosition(),s=e.doc.getLine(o.row);this.isAutoInsertedClosing(o,s,n.autoInsertedLineEnd[0])||(n.autoInsertedBrackets=0),n.autoInsertedRow=o.row,n.autoInsertedLineEnd=i+s.substr(o.column),n.autoInsertedBrackets++},g.recordMaybeInsert=function(t,e,i){var o=t.getCursorPosition(),s=e.doc.getLine(o.row);this.isMaybeInsertedClosing(o,s)||(n.maybeInsertedBrackets=0),n.maybeInsertedRow=o.row,n.maybeInsertedLineStart=s.substr(0,o.column)+i,n.maybeInsertedLineEnd=s.substr(o.column),n.maybeInsertedBrackets++},g.isAutoInsertedClosing=function(t,e,i){return n.autoInsertedBrackets>0&&t.row===n.autoInsertedRow&&i===n.autoInsertedLineEnd[0]&&e.substr(t.column)===n.autoInsertedLineEnd},g.isMaybeInsertedClosing=function(t,e){return n.maybeInsertedBrackets>0&&t.row===n.maybeInsertedRow&&e.substr(t.column)===n.maybeInsertedLineEnd&&e.substr(0,t.column)==n.maybeInsertedLineStart},g.popAutoInsertedClosing=function(){n.autoInsertedLineEnd=n.autoInsertedLineEnd.substr(1),n.autoInsertedBrackets--},g.clearMaybeInsertedClosing=function(){n&&(n.maybeInsertedBrackets=0,n.maybeInsertedRow=-1)},o.inherits(g,s),e.CstyleBehaviour=g}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,e,i){"use strict";var n=t("../../lib/oop"),o=t("../../range").Range,s=t("./fold_mode").FoldMode,r=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+t.end)))};n.inherits(r,s),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(t,e,i){var n=t.getLine(i);if(this.singleLineBlockCommentRe.test(n)&&!this.startRegionRe.test(n)&&!this.tripleStarBlockCommentRe.test(n))return"";var o=this._getFoldWidgetBase(t,e,i);return!o&&this.startRegionRe.test(n)?"start":o},this.getFoldWidgetRange=function(t,e,i,n){var o=t.getLine(i);if(this.startRegionRe.test(o))return this.getCommentRegionBlock(t,o,i);var s=o.match(this.foldingStartMarker);if(s){var r=s.index;if(s[1])return this.openingBracketBlock(t,s[1],i,r);var a=t.getCommentFoldRange(i,r+s[0].length,1);return a&&!a.isMultiLine()&&(n?a=this.getSectionRange(t,i):"all"!=e&&(a=null)),a}if("markbegin"!==e){var s=o.match(this.foldingStopMarker);if(s){var r=s.index+s[0].length;return s[1]?this.closingBracketBlock(t,s[1],i,r):t.getCommentFoldRange(i,r,-1)}}},this.getSectionRange=function(t,e){var i=t.getLine(e),n=i.search(/\S/),s=e,r=i.length;e+=1;for(var a=e,h=t.getLength();++e<h;){i=t.getLine(e);var l=i.search(/\S/);if(-1!==l){if(n>l)break;var d=this.getFoldWidgetRange(t,"all",e);if(d){if(d.start.row<=s)break;if(d.isMultiLine())e=d.end.row;else if(n==l)break}a=e}}return new o(s,r,a,t.getLine(a).length)},this.getCommentRegionBlock=function(t,e,i){for(var n=e.search(/\s*$/),s=t.getLength(),r=i,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,h=1;++i<s;){e=t.getLine(i);var l=a.exec(e);if(l&&(l[1]?h--:h++,!h))break}var d=i;return d>r?new o(r,n,d,e.length):void 0}}.call(r.prototype)}),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],function(t,e,n){"use strict";var o=t("../lib/oop"),s=t("./text").Mode,r=t("./json_highlight_rules").JsonHighlightRules,a=t("./matching_brace_outdent").MatchingBraceOutdent,h=t("./behaviour/cstyle").CstyleBehaviour,l=t("./folding/cstyle").FoldMode,d=t("../worker/worker_client").WorkerClient,c=function(){this.HighlightRules=r,this.$outdent=new a,this.$behaviour=new h,this.foldingRules=new l};o.inherits(c,s),function(){this.getNextLineIndent=function(t,e,i){var n=this.$getIndent(e);if("start"==t){var o=e.match(/^.*[\{\(\[]\s*$/);o&&(n+=i)}return n},this.checkOutdent=function(t,e,i){return this.$outdent.checkOutdent(e,i)},this.autoOutdent=function(t,e,i){this.$outdent.autoOutdent(e,i)},this.createWorker=function(t){var e=new d(["ace"],i(68),"JsonWorker");return e.attachToDocument(t.getDocument()),e.on("annotate",function(e){t.setAnnotations(e.data)}),e.on("terminate",function(){t.clearAnnotations()}),e},this.$id="ace/mode/json"}.call(c.prototype),e.Mode=c})},function(t,e){t.exports.id="ace/mode/json_worker",t.exports.src='"no use strict";(function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}})(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}var cons=obj.constructor;if(cons===RegExp)return obj;copy=cons();for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/</g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\x0B\\f\\r \\u2028\\u2029\ufeff";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});';
},function(t,e){ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],function(t,e,i){"use strict";var n=t("../lib/dom"),o=t("../lib/lang"),s=t("../lib/event"),r="\t.ace_search {\tbackground-color: #ddd;\tborder: 1px solid #cbcbcb;\tborder-top: 0 none;\tmax-width: 325px;\toverflow: hidden;\tmargin: 0;\tpadding: 4px;\tpadding-right: 6px;\tpadding-bottom: 0;\tposition: absolute;\ttop: 0px;\tz-index: 99;\twhite-space: normal;\t}\t.ace_search.left {\tborder-left: 0 none;\tborder-radius: 0px 0px 5px 0px;\tleft: 0;\t}\t.ace_search.right {\tborder-radius: 0px 0px 0px 5px;\tborder-right: 0 none;\tright: 0;\t}\t.ace_search_form, .ace_replace_form {\tborder-radius: 3px;\tborder: 1px solid #cbcbcb;\tfloat: left;\tmargin-bottom: 4px;\toverflow: hidden;\t}\t.ace_search_form.ace_nomatch {\toutline: 1px solid red;\t}\t.ace_search_field {\tbackground-color: white;\tborder-right: 1px solid #cbcbcb;\tborder: 0 none;\t-webkit-box-sizing: border-box;\t-moz-box-sizing: border-box;\tbox-sizing: border-box;\tfloat: left;\theight: 22px;\toutline: 0;\tpadding: 0 7px;\twidth: 214px;\tmargin: 0;\t}\t.ace_searchbtn,\t.ace_replacebtn {\tbackground: #fff;\tborder: 0 none;\tborder-left: 1px solid #dcdcdc;\tcursor: pointer;\tfloat: left;\theight: 22px;\tmargin: 0;\tposition: relative;\t}\t.ace_searchbtn:last-child,\t.ace_replacebtn:last-child {\tborder-top-right-radius: 3px;\tborder-bottom-right-radius: 3px;\t}\t.ace_searchbtn:disabled {\tbackground: none;\tcursor: default;\t}\t.ace_searchbtn {\tbackground-position: 50% 50%;\tbackground-repeat: no-repeat;\twidth: 27px;\t}\t.ace_searchbtn.prev {\tbackground-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiSU1NZUAC/6E0I0yACYskCpsJiySKIiY0SUZk40FyTEgCjGgKwTRAgAEAQJUIPCE+qfkAAAAASUVORK5CYII=);    \t}\t.ace_searchbtn.next {\tbackground-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNpiTE1NZQCC/0DMyIAKwGJMUAYDEo3M/s+EpvM/mkKwCQxYjIeLMaELoLMBAgwAU7UJObTKsvAAAAAASUVORK5CYII=);    \t}\t.ace_searchbtn_close {\tbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\tborder-radius: 50%;\tborder: 0 none;\tcolor: #656565;\tcursor: pointer;\tfloat: right;\tfont: 16px/16px Arial;\theight: 14px;\tmargin: 5px 1px 9px 5px;\tpadding: 0;\ttext-align: center;\twidth: 14px;\t}\t.ace_searchbtn_close:hover {\tbackground-color: #656565;\tbackground-position: 50% 100%;\tcolor: white;\t}\t.ace_replacebtn.prev {\twidth: 54px\t}\t.ace_replacebtn.next {\twidth: 27px\t}\t.ace_button {\tmargin-left: 2px;\tcursor: pointer;\t-webkit-user-select: none;\t-moz-user-select: none;\t-o-user-select: none;\t-ms-user-select: none;\tuser-select: none;\toverflow: hidden;\topacity: 0.7;\tborder: 1px solid rgba(100,100,100,0.23);\tpadding: 1px;\t-moz-box-sizing: border-box;\tbox-sizing:    border-box;\tcolor: black;\t}\t.ace_button:hover {\tbackground-color: #eee;\topacity:1;\t}\t.ace_button:active {\tbackground-color: #ddd;\t}\t.ace_button.checked {\tborder-color: #3399ff;\topacity:1;\t}\t.ace_search_options{\tmargin-bottom: 3px;\ttext-align: right;\t-webkit-user-select: none;\t-moz-user-select: none;\t-o-user-select: none;\t-ms-user-select: none;\tuser-select: none;\t}",a=t("../keyboard/hash_handler").HashHandler,h=t("../lib/keys");n.importCssString(r,"ace_searchbox");var l='<div class="ace_search right">\t    <button type="button" action="hide" class="ace_searchbtn_close"></button>\t    <div class="ace_search_form">\t        <input class="ace_search_field" placeholder="Search for" spellcheck="false"></input>\t        <button type="button" action="findNext" class="ace_searchbtn next"></button>\t        <button type="button" action="findPrev" class="ace_searchbtn prev"></button>\t        <button type="button" action="findAll" class="ace_searchbtn" title="Alt-Enter">All</button>\t    </div>\t    <div class="ace_replace_form">\t        <input class="ace_search_field" placeholder="Replace with" spellcheck="false"></input>\t        <button type="button" action="replaceAndFindNext" class="ace_replacebtn">Replace</button>\t        <button type="button" action="replaceAll" class="ace_replacebtn">All</button>\t    </div>\t    <div class="ace_search_options">\t        <span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*</span>\t        <span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa</span>\t        <span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b</span>\t    </div>\t</div>'.replace(/>\s+/g,">"),d=function(t,e,i){var o=n.createElement("div");o.innerHTML=l,this.element=o.firstChild,this.$init(),this.setEditor(t)};(function(){this.setEditor=function(t){t.searchBox=this,t.container.appendChild(this.element),this.editor=t},this.$initElements=function(t){this.searchBox=t.querySelector(".ace_search_form"),this.replaceBox=t.querySelector(".ace_replace_form"),this.searchOptions=t.querySelector(".ace_search_options"),this.regExpOption=t.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=t.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=t.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field")},this.$init=function(){var t=this.element;this.$initElements(t);var e=this;s.addListener(t,"mousedown",function(t){setTimeout(function(){e.activeInput.focus()},0),s.stopPropagation(t)}),s.addListener(t,"click",function(t){var i=t.target||t.srcElement,n=i.getAttribute("action");n&&e[n]?e[n]():e.$searchBarKb.commands[n]&&e.$searchBarKb.commands[n].exec(e),s.stopPropagation(t)}),s.addCommandKeyListener(t,function(t,i,n){var o=h.keyCodeToString(n),r=e.$searchBarKb.findKeyCommand(i,o);r&&r.exec&&(r.exec(e),s.stopEvent(t))}),this.$onChange=o.delayedCall(function(){e.find(!1,!1)}),s.addListener(this.searchInput,"input",function(){e.$onChange.schedule(20)}),s.addListener(this.searchInput,"focus",function(){e.activeInput=e.searchInput,e.searchInput.value&&e.highlight()}),s.addListener(this.replaceInput,"focus",function(){e.activeInput=e.replaceInput,e.searchInput.value&&e.highlight()})},this.$closeSearchBarKb=new a([{bindKey:"Esc",name:"closeSearchBar",exec:function(t){t.searchBox.hide()}}]),this.$searchBarKb=new a,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(t){var e=t.isReplace=!t.isReplace;t.replaceBox.style.display=e?"":"none",t.searchInput.focus()},"Ctrl-H|Command-Option-F":function(t){t.replaceBox.style.display="",t.replaceInput.focus()},"Ctrl-G|Command-G":function(t){t.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(t){t.findPrev()},esc:function(t){setTimeout(function(){t.hide()})},Return:function(t){t.activeInput==t.replaceInput&&t.replace(),t.findNext()},"Shift-Return":function(t){t.activeInput==t.replaceInput&&t.replace(),t.findPrev()},"Alt-Return":function(t){t.activeInput==t.replaceInput&&t.replaceAll(),t.findAll()},Tab:function(t){(t.activeInput==t.replaceInput?t.searchInput:t.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(t){t.regExpOption.checked=!t.regExpOption.checked,t.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(t){t.caseSensitiveOption.checked=!t.caseSensitiveOption.checked,t.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(t){t.wholeWordOption.checked=!t.wholeWordOption.checked,t.$syncOptions()}}]),this.$syncOptions=function(){n.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),n.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),n.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked),this.find(!1,!1)},this.highlight=function(t){this.editor.session.highlight(t||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(t,e,i){var o=this.editor.find(this.searchInput.value,{skipCurrent:t,backwards:e,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:i}),s=!o&&this.searchInput.value;n.setCssClass(this.searchBox,"ace_nomatch",s),this.editor._emit("findSearchBox",{match:!s}),this.highlight()},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var t=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),e=!t&&this.searchInput.value;n.setCssClass(this.searchBox,"ace_nomatch",e),this.editor._emit("findSearchBox",{match:!e}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(t,e){this.element.style.display="",this.replaceBox.style.display=e?"":"none",this.isReplace=e,t&&(this.searchInput.value=t),this.find(!1,!1,!0),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb)},this.isFocused=function(){var t=document.activeElement;return t==this.searchInput||t==this.replaceInput}}).call(d.prototype),e.SearchBox=d,e.Search=function(t,e){var i=t.searchBox||new d(t);i.show(t.session.getTextRange(),e)}}),function(){ace.acequire(["ace/ext/searchbox"],function(){})}()},function(t,e){ace.define("ace/theme/jsoneditor",["require","exports","module","ace/lib/dom"],function(t,e,i){e.isDark=!1,e.cssClass="ace-jsoneditor",e.cssText='.ace-jsoneditor .ace_gutter {\tbackground: #ebebeb;\tcolor: #333\t}\t\t.ace-jsoneditor.ace_editor {\tfont-family: droid sans mono, consolas, monospace, courier new, courier, sans-serif;\tline-height: 1.3;\t}\t.ace-jsoneditor .ace_print-margin {\twidth: 1px;\tbackground: #e8e8e8\t}\t.ace-jsoneditor .ace_scroller {\tbackground-color: #FFFFFF\t}\t.ace-jsoneditor .ace_text-layer {\tcolor: gray\t}\t.ace-jsoneditor .ace_variable {\tcolor: #1a1a1a\t}\t.ace-jsoneditor .ace_cursor {\tborder-left: 2px solid #000000\t}\t.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\tborder-left: 0px;\tborder-bottom: 1px solid #000000\t}\t.ace-jsoneditor .ace_marker-layer .ace_selection {\tbackground: lightgray\t}\t.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\tbox-shadow: 0 0 3px 0px #FFFFFF;\tborder-radius: 2px\t}\t.ace-jsoneditor .ace_marker-layer .ace_step {\tbackground: rgb(255, 255, 0)\t}\t.ace-jsoneditor .ace_marker-layer .ace_bracket {\tmargin: -1px 0 0 -1px;\tborder: 1px solid #BFBFBF\t}\t.ace-jsoneditor .ace_marker-layer .ace_active-line {\tbackground: #FFFBD1\t}\t.ace-jsoneditor .ace_gutter-active-line {\tbackground-color : #dcdcdc\t}\t.ace-jsoneditor .ace_marker-layer .ace_selected-word {\tborder: 1px solid lightgray\t}\t.ace-jsoneditor .ace_invisible {\tcolor: #BFBFBF\t}\t.ace-jsoneditor .ace_keyword,\t.ace-jsoneditor .ace_meta,\t.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\tcolor: #AF956F\t}\t.ace-jsoneditor .ace_keyword.ace_operator {\tcolor: #484848\t}\t.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\tcolor: #96DC5F\t}\t.ace-jsoneditor .ace_constant.ace_language {\tcolor: darkorange\t}\t.ace-jsoneditor .ace_constant.ace_numeric {\tcolor: red\t}\t.ace-jsoneditor .ace_constant.ace_character.ace_entity {\tcolor: #BF78CC\t}\t.ace-jsoneditor .ace_invalid {\tcolor: #FFFFFF;\tbackground-color: #FF002A;\t}\t.ace-jsoneditor .ace_fold {\tbackground-color: #AF956F;\tborder-color: #000000\t}\t.ace-jsoneditor .ace_storage,\t.ace-jsoneditor .ace_support.ace_class,\t.ace-jsoneditor .ace_support.ace_function,\t.ace-jsoneditor .ace_support.ace_other,\t.ace-jsoneditor .ace_support.ace_type {\tcolor: #C52727\t}\t.ace-jsoneditor .ace_string {\tcolor: green\t}\t.ace-jsoneditor .ace_comment {\tcolor: #BCC8BA\t}\t.ace-jsoneditor .ace_entity.ace_name.ace_tag,\t.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\tcolor: #606060\t}\t.ace-jsoneditor .ace_markup.ace_underline {\ttext-decoration: underline\t}\t.ace-jsoneditor .ace_indent-guide {\tbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y\t}';var n=t("../lib/dom");n.importCssString(e.cssText,e.cssClass)})}])}),function(t){if("function"==typeof bootstrap)bootstrap("jade",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeJade=t}else"undefined"!=typeof window?window.jade=t():global.jade=t()}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return o(i?i:t)},l,l.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){function n(t){return null!=t&&""!==t}function o(t){return Array.isArray(t)?t.map(o).filter(n).join(" "):t}Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),i.merge=function(t,e){var i=t["class"],o=e["class"];(i||o)&&(i=i||[],o=o||[],Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]),t["class"]=i.concat(o).filter(n));for(var s in e)"class"!=s&&(t[s]=e[s]);return t},i.attrs=function(t,e){var n=[],s=t.terse;delete t.terse;var r=Object.keys(t),a=r.length;if(a){n.push("");for(var h=0;h<a;++h){var l=r[h],d=t[l];"boolean"==typeof d||null==d?d&&(s?n.push(l):n.push(l+'="'+l+'"')):0==l.indexOf("data")&&"string"!=typeof d?n.push(l+"='"+JSON.stringify(d)+"'"):"class"==l?e&&e[l]?(d=i.escape(o(d)))&&n.push(l+'="'+d+'"'):(d=o(d))&&n.push(l+'="'+d+'"'):e&&e[l]?n.push(l+'="'+i.escape(d)+'"'):n.push(l+'="'+d+'"')}}return n.join(" ")},i.escape=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},i.rethrow=function s(e,i,n,o){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&i||o))throw e.message+=" on line "+n,e;try{o=o||t("fs").readFileSync(i,"utf8")}catch(r){s(e,null,n)}var a=3,h=o.split("\n"),l=Math.max(n-a,0),d=Math.min(h.length,n+a),a=h.slice(l,d).map(function(t,e){var i=e+l+1;return(i==n?"  > ":"    ")+i+"| "+t}).join("\n");throw e.path=i,e.message=(i||"Jade")+":"+n+"\n"+a+"\n\n"+e.message,e}},{fs:2}],2:[function(t,e,i){},{}]},{},[1])(1)});var TreemaNode,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__indexOf=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},__slice=[].slice;TreemaNode=function(){function t(i,n,o){this.$el=i,this.parent=o,this.onSelectType=__bind(this.onSelectType,this),this.onSelectSchema=__bind(this.onSelectSchema,this),this.orderDataFromUI=__bind(this.orderDataFromUI,this),this.onMouseLeave=__bind(this.onMouseLeave,this),this.onMouseEnter=__bind(this.onMouseEnter,this),this.onEditInputBlur=__bind(this.onEditInputBlur,this),this.setWorkingSchema(n.workingSchema,n.workingSchemas),delete n.workingSchema,delete n.workingSchemas,this.$el=this.$el||$("<div></div>"),this.settings=$.extend({},e,n),this.schema=$.extend({},this.settings.schema),this.schema.id||this.parent||(this.schema.id="__base__"),this.data=n.data,this.defaultData=n.defaultData,this.patches=[],this.trackedActions=[],this.currentStateIndex=0,this.trackingDisabled=!1,this.callbacks=this.settings.callbacks,this._defaults=e,this._name=t.pluginName,this.setUpValidator(),this.populateData(),this.previousState=this.copyData(),this.unloadNodeSpecificSettings()}var e;return t.prototype.schema={},t.prototype.$el=null,t.prototype.data=null,t.prototype.options=null,t.prototype.parent=null,t.prototype.lastSelectedTreema=null,t.prototype.treemaFilterHiddenClass="treema-filter-hidden",t.prototype.nodeTemplate='<div class="treema-row treema-clearfix"><div class="treema-value"></div></div>',t.prototype.childrenTemplate='<div class="treema-children"></div>',t.prototype.addChildTemplate='<div class="treema-add-child btn btn-default" tabindex="9009"><span class="glyphicon glyphicon-plus"></span></div>',t.prototype.tempErrorTemplate='<span class="treema-temp-error"></span>',t.prototype.toggleTemplate='<span class="treema-toggle-hit-area"><span class="treema-toggle"></span></span>',t.prototype.keyTemplate='<span class="treema-key"></span>',t.prototype.errorTemplate='<div class="treema-error"></div>',t.prototype.newPropertyTemplate='<input class="treema-new-prop" />',t.prototype.collection=!1,t.prototype.ordered=!1,t.prototype.keyed=!1,t.prototype.editable=!0,t.prototype.directlyEditable=!0,t.prototype.skipTab=!1,t.prototype.valueClass=null,t.prototype.removeOnEmptyDelete=!0,t.prototype.keyForParent=null,t.prototype.childrenTreemas=null,t.prototype.integrated=!1,t.prototype.workingSchema=null,t.prototype.nodeDescription="Node",t.prototype.isValid=function(){var t;return t=this.getErrors(),0===t.length},t.prototype.getErrors=function(){var t,e,i,n,o,s,r;if(!this.tv4)return[];if(this.isRoot())return this.cachedErrors?this.cachedErrors:(this.cachedErrors=this.tv4.validateMultiple(this.data,this.schema).errors,this.cachedErrors);for(o=this.getRoot(),e=o.getErrors(),n=this.getPath(),e=function(){var i,o,s;for(s=[],i=0,o=e.length;i<o;i++)t=e[i],t.dataPath.slice(0,+n.length+1||9e9)===n&&s.push(t);return s}(),s=0,r=e.length;s<r;s++)t=e[s],t.dataPath===n?t.subDataPath="":t.subDataPath=t.dataPath.slice(0,+n.length+1||9e9);return this.workingSchema&&(i=this.tv4.validateMultiple(this.data,this.workingSchema).errors,e=e.concat(i)),e},t.prototype.setUpValidator=function(){var t,e;return this.parent?(t=this.getRoot(),this.tv4=t.tv4):(this.tv4=null!=(e=window.tv4)?e.freshApi():void 0,this.tv4.addSchema("#",this.schema),this.schema.id?this.tv4.addSchema(this.schema.id,this.schema):void 0)},t.prototype.saveChanges=function(t){if(t!==this.data)return this.addTrackedAction({oldData:t,newData:this.data,path:this.getPath(),action:"edit"})},t.prototype.getChildSchema=function(e){return t.utils.getChildSchema(e,this.workingSchema)},t.prototype.buildValueForDisplay=function(){return console.error('"buildValueForDisplay" has not been overridden.')},t.prototype.buildValueForEditing=function(){if(this.editable&&this.directlyEditable)return console.error('"buildValueForEditing" has not been overridden.')},t.prototype.getChildren=function(){return console.error('"getChildren" has not been overridden.')},t.prototype.canAddChild=function(){return this.collection&&this.editable&&!this.settings.readOnly},t.prototype.canAddProperty=function(){return!0},t.prototype.addingNewProperty=function(){return!1},t.prototype.addNewChild=function(){return!1},t.prototype.buildValueForDisplaySimply=function(t,e){return e.length>200&&(e=e.slice(0,200)+"..."),t.append($("<div></div>").addClass("treema-shortened").text(e))},t.prototype.buildValueForEditingSimply=function(t,e,i){var n;return null==i&&(i=null),n=$("<input />"),i&&n.attr("type",i),null!==e&&n.val(e),t.append(n),n.focus().select(),n.blur(this.onEditInputBlur),n},t.prototype.onEditInputBlur=function(t){var e,i,n;return n=this.shouldTryToRemoveFromParent(),e=$(t.relatedTarget).closest(".treema-node")[0],e===this.$el[0]&&(n=!1),this.markAsChanged(),this.saveChanges(this.getValEl()),i=this.getValEl().find("input, textarea, select"),this.isValid()?this.isEditing()&&this.display():i.focus().select(),n?this.remove():this.flushChanges(),this.broadcastChanges()},t.prototype.shouldTryToRemoveFromParent=function(){var t,e,i,n,o;if(i=this.getValEl(),!i.find("select").length){for(e=i.find("input, textarea"),n=0,o=e.length;n<o;n++)if(t=e[n],t=$(t),"checkbox"===t.attr("type")||t.val())return!1;return!!this.getErrors().length}},t.prototype.limitChoices=function(e){var i=this;return this["enum"]=e,this.buildValueForEditing=function(t,e){var n,o,s,r,a,h;for(o=$("<select></select>"),h=i["enum"],r=0,a=h.length;r<a;r++)s=h[r],o.append($("<option></option>").text(s));return n=i["enum"].indexOf(e),n>=0&&o.prop("selectedIndex",n),t.append(o),o.focus(),o.blur(i.onEditInputBlur),o},this.saveChanges=function(e){var n;return n=e.find("select").prop("selectedIndex"),i.addTrackedAction({oldData:i.data,newData:i["enum"][n],path:i.getPath(),action:"edit"}),i.data=i["enum"][n],t.changedTreemas.push(i),i.broadcastChanges()}},t.pluginName="treema",e={schema:{},callbacks:{}},t.prototype.unloadNodeSpecificSettings=function(){var t,e,i,n,o;for(n=["data","defaultData","schema","type"],o=[],e=0,i=n.length;e<i;e++)t=n[e],null!=this.settings[t]&&(this[t]=this.settings[t]),o.push(delete this.settings[t]);return o},t.prototype.build=function(){var t,e,i;return this.$el.addClass("treema-node").addClass("treema-clearfix"),this.$el.empty().append($(this.nodeTemplate)),this.$el.data("instance",this),this.parent||this.$el.addClass("treema-root"),this.parent||this.$el.attr("tabindex",9001),this.collection&&this.$el.append($(this.childrenTemplate)).addClass("treema-closed"),e=this.getValEl(),this.valueClass&&e.addClass(this.valueClass),this.directlyEditable&&e.addClass("treema-display"),this.buildValueForDisplay(e,this.getData()),this.collection&&!this.parent&&this.open(1),this.parent||this.setUpGlobalEvents(),this.parent&&this.setUpLocalEvents(),this.collection&&this.updateMyAddButton(),this.createTypeSelector(),(null!=(i=this.workingSchemas)?i.length:void 0)>1&&this.createSchemaSelector(),t=this.workingSchema||this.schema,t["enum"]&&this.limitChoices(t["enum"]),this.updateDefaultClass(),this.$el},t.prototype.populateData=function(){},t.prototype.setWorkingSchema=function(t,e){this.workingSchema=t,this.workingSchemas=e},t.prototype.createSchemaSelector=function(){var t,e,i,n,o,s,r,a;for(o=$("<select></select>").addClass("treema-schema-select"),a=this.workingSchemas,t=s=0,r=a.length;s<r;t=++s)n=a[t],e=this.makeWorkingSchemaLabel(n),i=$("<option></option>").attr("value",t).text(e),n===this.workingSchema&&i.attr("selected",!0),o.append(i);return o.change(this.onSelectSchema),this.$el.find("> .treema-row").prepend(o)},t.prototype.makeWorkingSchemaLabel=function(t){return null!=t.title?t.title:null!=t.type?t.type:"???"},t.prototype.getTypes=function(){var t,e;return t=this.workingSchema||this.schema,e=t.type||["string","number","integer","boolean","null","array","object"],$.isArray(e)||(e=[e]),e},t.prototype.createTypeSelector=function(){var t,e,i,n,o,s,r,a;if(s=this.getTypes(),s.length>1&&(i=this.workingSchema||this.schema,!i["enum"])){for(n=$("<select></select>").addClass("treema-type-select"),t=$.type(this.getData()),"treema-integer"===this.valueClass&&(t="integer"),r=0,a=s.length;r<a;r++)o=s[r],e=$("<option></option>").attr("value",o).text(this.getTypeName(o)),o===t&&e.attr("selected",!0),n.append(e);return n.change(this.onSelectType),this.$el.find("> .treema-row").prepend(n)}},t.prototype.getTypeName=function(t){return{"null":"null",array:"arr",number:"num",string:"str",integer:"int","boolean":"bool",object:"obj"}[t]},t.prototype.setUpGlobalEvents=function(){var t=this;return this.$el.unbind(),this.$el.dblclick(function(t){var e;return null!=(e=$(t.target).closest(".treema-node").data("instance"))?e.onDoubleClick(t):void 0}),this.$el.click(function(e){var i;return null!=(i=$(e.target).closest(".treema-node").data("instance"))&&i.onClick(e),t.broadcastChanges(e)}),this.keysPreviouslyDown={},this.$el.keydown(function(e){var i,n,o;if(e.heldDown=t.keysPreviouslyDown[e.which]||!1,i=$(e.target).closest(".treema-node").data("instance"),n=t.getLastSelectedTreema(),null!=(o=n||i)&&o.onKeyDown(e),t.broadcastChanges(e),t.keysPreviouslyDown[e.which]=!0,e.ctrlKey||e.metaKey)return t.manageCopyAndPaste(e)}),this.$el.keyup(function(e){return delete t.keysPreviouslyDown[e.which]})},t.prototype.manageCopyAndPaste=function(t){var e,i,n,o,s,r=this;if(e=document.activeElement,!(null!=e&&"input"===e.tagName.toLowerCase()&&"text"===e.type||"textarea"===e.tagName.toLowerCase()&&!$(e).hasClass("treema-clipboard"))){if(i=null!=(n=this.getLastSelectedTreema())?n:this,86===t.which&&$(t.target).hasClass("treema-clipboard"))return t.shiftKey&&$(t.target).hasClass("treema-clipboard")?(this.saveScrolls(),setTimeout(function(){var e,n;if(r.loadScrolls(),e=r.$clipboard.val()){try{e=JSON.parse(e)}catch(o){return void(t=o)}return n=i.tv4.validateMultiple(e,i.schema),n.valid?i.set("/",e):console.log("not pasting",e,"because it's not valid:",n)}},5)):t.preventDefault();if(t.shiftKey){if(!this.$clipboardContainer)return;return this.saveScrolls(),this.$clipboardContainer.find(".treema-clipboard").focus().select(),this.loadScrolls()}return(null!=(o=window.getSelection())?o.toString():void 0)||(null!=(s=document.selection)?s.createRange().text:void 0)?void 0:(this.saveScrolls(),null==this.$clipboardContainer&&(this.$clipboardContainer=$('<div class="treema-clipboard-container"></div>').appendTo(this.$el)),this.$clipboardContainer.empty().show(),this.$clipboard=$('<textarea class="treema-clipboard"></textarea>').val(JSON.stringify(i.data)).appendTo(this.$clipboardContainer).focus().select(),this.loadScrolls())}},t.prototype.broadcastChanges=function(e){var i,n,o;if(this.callbacks.select&&t.didSelect&&(t.didSelect=!1,this.callbacks.select(e,this.getSelectedTreemas())),t.changedTreemas.length)return i=function(){var e,i,o,s;for(o=t.changedTreemas,s=[],e=0,i=o.length;e<i;e++)n=o[e],!n.integrated&&n.parent||s.push(n);return s}(),"function"==typeof(o=this.callbacks).change&&o.change(e,jQuery.unique(i)),t.changedTreemas=[]},t.prototype.markAsChanged=function(){return t.changedTreemas.push(this)},t.prototype.setUpLocalEvents=function(){var t;if(t=this.$el.find("> .treema-row"),null!=this.callbacks.mouseenter&&t.mouseenter(this.onMouseEnter),null!=this.callbacks.mouseleave)return t.mouseleave(this.onMouseLeave)},t.prototype.onMouseEnter=function(t){return this.callbacks.mouseenter(t,this)},t.prototype.onMouseLeave=function(t){return this.callbacks.mouseleave(t,this)},t.prototype.onClick=function(t){var e,i,n,o;if("INPUT"!==(o=t.target.nodeName)&&"TEXTAREA"!==o&&"SELECT"!==o){if(i=$(t.target).closest(".treema-value").length,e=$(t.target).hasClass("treema-toggle")||$(t.target).hasClass("treema-toggle-hit-area"),n=t.shiftKey||t.ctrlKey||t.metaKey,i&&!this.collection||this.keepFocus(),this.isDisplaying()&&i&&this.canEdit()&&!n)return this.toggleEdit();if(!n&&(e||i&&this.collection))return e||(this.deselectAll(),this.select()),this.toggleOpen();if($(t.target).closest(".treema-add-child").length&&this.collection)return this.addNewChild();if(!this.isRoot()&&!this.isEditing())return t.shiftKey?this.shiftSelect():t.ctrlKey||t.metaKey?this.toggleSelect():this.select()}},t.prototype.onDoubleClick=function(t){var e,i,n,o;return this.collection?(e=$(t.target).hasClass("treema-key"))?(this.isClosed()&&this.open(),this.addNewChild(),"function"==typeof(o=this.callbacks).dblclick?o.dblclick(t,this):void 0):"function"==typeof(n=this.callbacks).dblclick?n.dblclick(t,this):void 0:"function"==typeof(i=this.callbacks).dblclick?i.dblclick(t,this):void 0},t.prototype.onKeyDown=function(t){var e;if(27===t.which&&this.onEscapePressed(t),9===t.which&&this.onTabPressed(t),37===t.which&&this.onLeftArrowPressed(t),38===t.which&&this.onUpArrowPressed(t),39===t.which&&this.onRightArrowPressed(t),40===t.which&&this.onDownArrowPressed(t),13===t.which&&this.onEnterPressed(t),78===t.which&&this.onNPressed(t),32===t.which&&this.onSpacePressed(t),84===t.which&&this.onTPressed(t),70===t.which&&this.onFPressed(t),90===t.which&&this.onZPressed(t),(8===(e=t.which)||46===e)&&!t.heldDown)return this.onDeletePressed(t)},t.prototype.onLeftArrowPressed=function(t){if(!this.inputFocused())return this.navigateOut(),t.preventDefault()},t.prototype.onRightArrowPressed=function(t){if(!this.inputFocused())return this.navigateIn(),t.preventDefault()},t.prototype.onUpArrowPressed=function(t){if(!this.inputFocused())return this.navigateSelection(-1),t.preventDefault()},t.prototype.onDownArrowPressed=function(t){if(!this.inputFocused())return this.navigateSelection(1),t.preventDefault()},t.prototype.inputFocused=function(){var t;if(("INPUT"===(t=document.activeElement.nodeName)||"TEXTAREA"===t||"SELECT"===t)&&!$(document.activeElement).hasClass("treema-clipboard"))return!0},t.prototype.onSpacePressed=function(){},t.prototype.onTPressed=function(){},t.prototype.onFPressed=function(){},t.prototype.onDeletePressed=function(t){var e;if(e=this.editingIsHappening(),e&&!$(t.target).val()&&this.removeOnEmptyDelete&&(this.display(),this.select(),this.removeSelectedNodes(),t.preventDefault()),!e)return t.preventDefault(),this.removeSelectedNodes()},t.prototype.onEscapePressed=function(){if(this.isEditing())return this.parent&&!this.integrated&&void 0===this.defaultData?this.remove():(this.isEditing()&&this.display(),this.isRoot()||this.select(),this.keepFocus())},t.prototype.onEnterPressed=function(t){var e;return e=t.shiftKey?-1:1,1===e&&$(t.target).hasClass("treema-add-child")?this.addNewChild():this.traverseWhileEditing(e,!0)},t.prototype.onTabPressed=function(t){var e;if(e=t.shiftKey?-1:1,!this.hasMoreInputs(e))return t.preventDefault(),this.traverseWhileEditing(e,!1)},t.prototype.hasMoreInputs=function(t){var e,i,n,o,s;for(i=this.getInputs().toArray(),t<0&&(i=i.reverse()),n=!1,o=0,s=i.length;o<s;o++)if(e=i[o],e!==document.activeElement){if(n)return!0}else n=!0;return!1},t.prototype.onNPressed=function(t){var e,i,n;if(!this.editingIsHappening()&&(e=this.getLastSelectedTreema(),n=(null!=e?e.collection:void 0)?e:null!=e?e.parent:void 0))return i=n.addNewChild(),i&&this.deselectAll(),t.preventDefault()},t.prototype.onZPressed=function(t){if(t.ctrlKey||t.metaKey)return t.shiftKey?this.getRoot().redo():this.getRoot().undo()},t.prototype.traverseWhileEditing=function(t,e){var i,n,o,s,r,a;if(s=!1,o=this.getLastSelectedTreema(),n=this.isEditing(),!n&&(null!=o?o.canEdit():void 0))return o.edit();if(n){if(s=this.shouldTryToRemoveFromParent(),this.saveChanges(this.getValEl()),s||this.flushChanges(),!e&&!this.isValid())return void this.refreshErrors();s&&(null!=(a=$(this.$el[0].nextSibling))?a.hasClass("treema-add-child"):void 0)&&1===t&&(t=2),this.endExistingEdits(),this.select()}return i=this.traversalContext(t),(null!=i?i.origin:void 0)&&(o=$(i.origin).data("instance"))?t>0&&e&&o.collection&&o.isClosed()?o.open():(r=t>0?i.next:i.prev,r||(r=t>0?i.first:i.last),this.selectOrActivateElement(r),s?this.remove():this.refreshErrors()):void 0},t.prototype.selectOrActivateElement=function(t){var e;return t=$(t),(e=t.data("instance"))?e.canEdit()?e.edit():e.select():(this.deselectAll(),t.focus())},t.prototype.navigateSelection=function(t){var e,i;if(e=this.navigationContext())return e.origin?(i=t>0?e.next:e.prev,i||(i=t>0?e.first:e.last),null!=i?i.select():void 0):(i=t>0?e.first:e.last,i.select())},t.prototype.navigateOut=function(){var t;if(t=this.getLastSelectedTreema()){if(t.isOpen())return t.close();if(t.parent&&!t.parent.isRoot())return t.parent.select()}},t.prototype.navigateIn=function(){
var t,e,i,n,o;for(n=this.getSelectedTreemas(),o=[],e=0,i=n.length;e<i;e++)t=n[e],t.collection&&(t.isClosed()?o.push(t.open()):o.push(void 0));return o},t.prototype.traversalContext=function(t){var e,i,n;return e=this.getNavigableElements(t),i=null!=(n=this.getLastSelectedTreema())?n.$el[0]:void 0,i||(i=this.getRootEl().find(".treema-add-child:focus")[0]),i||(i=this.getRootEl().find(".treema-new-prop")[0]),this.wrapContext(e,i,t)},t.prototype.navigationContext=function(){var t,e;return t=this.getFilterVisibleTreemas(),e=this.getLastSelectedTreema(),this.wrapContext(t,e)},t.prototype.wrapContext=function(t,e,i){var n,o;if(null==i&&(i=1),t.length)return n={first:t[0],last:t[t.length-1],origin:e},e&&(i=Math.abs(i),o=t.indexOf(e),n.next=t[o+i],n.prev=t[o-i]),n},t.prototype.canEdit=function(){var t;return!(this.workingSchema.readOnly||(null!=(t=this.parent)?t.schema.readOnly:void 0))&&(!this.settings.readOnly&&(!!this.editable&&(!!this.directlyEditable&&(!this.collection||!this.isOpen()))))},t.prototype.display=function(){return this.toggleEdit("treema-display")},t.prototype.edit=function(t){if(null==t&&(t={}),this.toggleEdit("treema-edit"),null!=t.offset&&t.offset<0)return this.focusLastInput()},t.prototype.toggleEdit=function(t){var e;if(null==t&&(t=null),this.editable&&(e=this.getValEl(),!t||!e.hasClass(t)))return t=t||(e.hasClass("treema-display")?"treema-edit":"treema-display"),"treema-edit"===t&&this.endExistingEdits(),e.removeClass("treema-display").removeClass("treema-edit").addClass(t),e.empty(),this.isDisplaying()&&this.buildValueForDisplay(e,this.getData()),this.isEditing()?(this.buildValueForEditing(e,this.getData()),this.deselectAll()):void 0},t.prototype.endExistingEdits=function(){var t,e,i,n,o,s;for(t=this.getRootEl().find(".treema-edit").closest(".treema-node"),s=[],n=0,o=t.length;n<o;n++)e=t[n],i=$(e).data("instance"),i.saveChanges(i.getValEl()),i.display(),s.push(this.markAsChanged());return s},t.prototype.flushChanges=function(){var t,e;if(this.parent&&!this.integrated&&void 0!==this.data&&this.parent.integrateChildTreema(this),this.getRoot().cachedErrors=null,this.markAsChanged(),!this.parent)return this.refreshErrors();for(this.updateDefaultClass(),void 0!==this.data&&(this.parent.data[this.keyForParent]=this.data),this.parent.refreshErrors(),t=this.parent,e=[];t;)t.buildValueForDisplay(t.getValEl().empty(),t.getData()),e.push(t=t.parent);return e},t.prototype.focusLastInput=function(){var t,e;return t=this.getInputs(),e=t[t.length-1],$(e).focus().select()},t.prototype.removeSelectedNodes=function(t){var e,i,n,o,s,r,a,h,l,d,c,u,g;for(null==t&&(t=[]),r=t,t.length||(r=this.getSelectedTreemas()),a=null,1===r.length&&(i=r[0].$el.next(".treema-node").data("instance"),s=r[0].$el.prev(".treema-node").data("instance"),a=i||s||r[0].parent),e=[],o=[],n=[],l=0,c=r.length;l<c;l++)h=r[l],e.push(h.data),o.push(h.getPath()),n.push(null!=(g=h.parent)?g.getPath():void 0);for(this.addTrackedAction({data:e,path:o,parentPath:n,action:"delete"}),d=0,u=r.length;d<u;d++)h=r[d],h.remove();if(a&&!this.getSelectedTreemas().length)return a.select()},t.prototype.remove=function(){var e,i,n,o,s,r,a;return(o=this.parent&&null!=this.parent.schema.required&&(r=this.keyForParent,__indexOf.call(this.parent.schema.required,r)>=0))?(s=this.createTemporaryError("required"),this.$el.prepend(s),!1):(n=this.workingSchema.readOnly||(null!=(a=this.parent)?a.schema.readOnly:void 0))?(s=this.createTemporaryError("read only"),this.$el.prepend(s),!1):void 0!==this.defaultData?(i=$.extend({},this.settings,{defaultData:this.defaultData,schema:this.workingSchema}),e=t.make(null,i,this.parent,this.keyForParent),this.parent&&this.parent.segregateChildTreema(this),this.replaceNode(e),!0):(this.$el.remove(),document.activeElement===$("body")[0]&&this.keepFocus(),this.parent&&this.parent.segregateChildTreema(this),!0)},t.prototype.updateDefaultClass=function(){var t,e,i,n;this.$el.removeClass("treema-default-stub"),this.isDefaultStub()&&!this.parent.isDefaultStub()&&this.$el.addClass("treema-default-stub"),i=this.childrenTreemas,n=[];for(e in i)t=i[e],n.push(t.updateDefaultClass());return n},t.prototype.toggleOpen=function(){return this.isClosed()?this.open():this.close(),this},t.prototype.open=function(e){var i,n,o,s,r,a,h,l,d,c,u;if(null==e&&(e=1),this.isClosed()){for(s=this.$el.find(".treema-children").detach(),s.empty(),this.childrenTreemas={},l=this.getChildren(),a=0,h=l.length;a<h;a++)i=l[a],"hidden"!==i.schema.format&&(r=t.make(null,{schema:i.schema,data:i.value,defaultData:i.defaultData},this,i.key),void 0===r.data||void 0===this.data&&!this.integrated||this.integrateChildTreema(r),this.childrenTreemas[r.keyForParent]=r,o=this.createChildNode(r),s.append(o));this.$el.append(s).removeClass("treema-closed").addClass("treema-open"),this.schema.hideAdd||s.append($(this.addChildTemplate)),this.ordered&&s.sortable&&!this.settings.noSortable&&"function"==typeof s.sortable&&s.sortable({deactivate:this.orderDataFromUI}),this.refreshErrors()}if(e-=1){c=null!=(d=this.childrenTreemas)?d:{},u=[];for(n in c)i=c[n],u.push(i.open(e));return u}},t.prototype.orderDataFromUI=function(){var t,e,i,n,o,s;for(e=this.$el.find("> .treema-children > .treema-node"),i=0,this.childrenTreemas={},this.data=$.isArray(this.data)?[]:{},o=0,s=e.length;o<s;o++)t=e[o],n=$(t).data("instance"),(null!=n?n.data:void 0)&&(n.keyForParent=i,this.childrenTreemas[i]=n,this.data[i]=n.data,i+=1);return this.flushChanges()},t.prototype.close=function(t){var e,i,n;if(null==t&&(t=!0),this.isOpen()){if(t){n=this.childrenTreemas;for(e in n)i=n[e],i.integrated&&(this.data[e]=i.data)}return this.$el.find(".treema-children").empty(),this.$el.addClass("treema-closed").removeClass("treema-open"),this.childrenTreemas=null,this.refreshErrors(),this.buildValueForDisplay(this.getValEl().empty(),this.getData())}},t.prototype.select=function(){var e,i;return i=this.getSelectedTreemas().length,e=1===i,this.deselectAll(e),this.toggleSelect(),this.keepFocus(),t.didSelect=!0,t.lastTreemaWithFocus=this.getRoot()},t.prototype.deselectAll=function(e){var i,n,o,s;for(null==e&&(e=!1),s=this.getSelectedTreemas(),n=0,o=s.length;n<o;n++)i=s[n],e&&i===this||i.$el.removeClass("treema-selected");return this.clearLastSelected(),t.didSelect=!0},t.prototype.toggleSelect=function(){return this.clearLastSelected(),this.isRoot()||this.$el.toggleClass("treema-selected"),this.isSelected()&&this.setLastSelectedTreema(this),t.didSelect=!0},t.prototype.clearLastSelected=function(){var t;return null!=(t=this.getLastSelectedTreema())&&t.$el.removeClass("treema-last-selected"),this.setLastSelectedTreema(null)},t.prototype.shiftSelect=function(){var e,i,n,o,s,r,a;if(n=this.getRootEl().find(".treema-last-selected"),this.select(),n.length){for(this.deselectAll(),e=this.getRootEl().find(".treema-node"),i=[this,n.data("instance")],s=!1,r=0,a=e.length;r<a;r++)if(o=e[r],o=$(o).data("instance"),s){if(o.$el.addClass("treema-selected"),s&&__indexOf.call(i,o)>=0)break}else __indexOf.call(i,o)>=0&&(o.$el.addClass("treema-selected"),s=!0);return n.removeClass("treema-last-selected"),this.$el.addClass("treema-last-selected"),t.didSelect=!0}},t.prototype.addTrackedAction=function(t){var e;if(e=this.getRoot(),!e.trackingDisabled)return e.trackedActions.splice(e.currentStateIndex,e.trackedActions.length-e.currentStateIndex),e.trackedActions.push(t),e.currentStateIndex++},t.prototype.disableTracking=function(){return this.getRoot().trackingDisabled=!0},t.prototype.enableTracking=function(){return this.getRoot().trackingDisabled=!1},t.prototype.canUndo=function(){return 0!==this.getCurrentStateIndex()},t.prototype.undo=function(){var t,e,i,n,o,s,r,a,h,l,d,c,u;if(this.canUndo()){switch(a=this.getTrackedActions(),t=this.getCurrentStateIndex(),r=this.getRoot(),this.disableTracking(),s=a[t-1],s.action){case"delete":for($.isArray(s.path)||(s.data=[s.data],s.path=[s.path],s.parentPath=[s.parentPath]),u=s.data,i=d=0,c=u.length;d<c;i=++d)switch(h=u[i],o=s.parentPath[i],l=s.path[i],n=this.get(o),$.isArray(n)){case!1:this.set(l,h);break;case!0:e=parseInt(l.substring(l.lastIndexOf("/")+1)),e<n.length?(n.splice(e,0,h),this.set(o,n)):this.insert(o,h)}break;case"edit":void 0===s.oldData?this["delete"](s.path):this.set(s.path,s.oldData);break;case"replace":s.newNode.replaceNode(s.oldNode),this.set(s.path,s.oldNode.data);break;case"insert":this["delete"](s.path)}return r.currentStateIndex--,this.enableTracking()}},t.prototype.canRedo=function(){return this.getCurrentStateIndex()!==this.getTrackedActions().length},t.prototype.redo=function(){var t,e,i,n,o,s,r,a,h;if(this.canRedo()){switch(s=this.getTrackedActions(),t=this.getCurrentStateIndex(),o=this.getRoot(),this.disableTracking(),n=s[t],n.action){case"delete":for($.isArray(n.path)||(n.path=[n.path]),h=n.path,r=0,a=h.length;r<a;r++)i=h[r],this["delete"](i);break;case"edit":this.set(n.path,n.newData);break;case"replace":n.oldNode.replaceNode(n.newNode),this.set(n.path,n.newNode.data);break;case"insert":switch(e=this.get(n.parentPath),$.isArray(e)){case!0:this.insert(n.parentPath,n.data);break;case!1:this.set(n.path,n.data)}}return o.currentStateIndex++,this.enableTracking()}},t.prototype.getUndoDescription=function(){var t,e;return this.canUndo()?(e=this.getTrackedActions(),t=this.getCurrentStateIndex(),this.getTrackedActionDescription(e[t-1])):""},t.prototype.getRedoDescription=function(){var t,e;return this.canRedo()?(e=this.getTrackedActions(),t=this.getCurrentStateIndex(),this.getTrackedActionDescription(e[t])):""},t.prototype.getTrackedActionDescription=function(t){var e,i;switch(t.action){case"insert":i="Add New "+this.nodeDescription;break;case"delete":i="Delete "+this.nodeDescription;break;case"edit":e=t.path.split("/"),i="pos"===e[e.length-1]?"Move "+this.nodeDescription:"Edit "+this.nodeDescription;break;default:i=""}return i},t.prototype.getTrackedActions=function(){return this.getRoot().trackedActions},t.prototype.getCurrentStateIndex=function(){return this.getRoot().currentStateIndex},t.prototype.onSelectSchema=function(e){var i,n,o,s;return i=parseInt($(e.target).val()),s=this.workingSchemas[i],o=$.extend(!0,{},this.settings),o=$.extend(o,{workingSchemas:this.workingSchemas,workingSchema:s,data:this.data,defaultData:this.defaultData,schema:this.schema}),n=t.make(null,o,this.parent,this.keyForParent),this.replaceNode(n)},t.prototype.onSelectType=function(e){var i,n,o;return n=$(e.target).val(),o=$.extend(!0,{},this.settings,{workingSchemas:this.workingSchemas,workingSchema:this.workingSchema,type:n,data:this.data,defaultData:this.defaultData,schema:this.schema}),$.type(this.data)!==n&&(o.data=t.defaultForType(n)),i=t.make(null,o,this.parent,this.keyForParent),this.replaceNode(i)},t.prototype.replaceNode=function(t){return t.tv4=this.tv4,null!=this.keyForParent&&(t.keyForParent=this.keyForParent),this.parent&&(this.parent.childrenTreemas[this.keyForParent]=t),this.parent.createChildNode(t),this.$el.replaceWith(t.$el),t.flushChanges(),this.addTrackedAction({oldNode:this,newNode:t,path:this.getPath(),action:"replace"})},t.prototype.integrateChildTreema=function(t){var e;return this.parent&&!this.integrated?(this.data=$.isArray(this.defaultData)?[]:{},this.parent.integrateChildTreema(this)):t.updateDefaultClass(),e=this.data[t.keyForParent]!==t.data,t.integrated=!0,this.childrenTreemas[t.keyForParent]=t,this.data[t.keyForParent]=t.data,e&&(this.ordered&&this.orderDataFromUI(),this.refreshErrors(),this.updateMyAddButton(),this.markAsChanged(),this.buildValueForDisplay(this.getValEl().empty(),this.getData()),this.broadcastChanges()),t},t.prototype.segregateChildTreema=function(t){return t.integrated=!1,delete this.childrenTreemas[t.keyForParent],delete this.data[t.keyForParent],this.ordered&&this.orderDataFromUI(),this.refreshErrors(),this.updateMyAddButton(),this.markAsChanged(),this.buildValueForDisplay(this.getValEl().empty(),this.getData()),this.broadcastChanges(),t},t.prototype.createChildNode=function(t){var e,i,n,o,s,r,a,h;return e=t.build(),r=e.find(".treema-row"),this.collection&&this.keyed&&(o=t.schema.title||t.keyForParent,s=this.workingSchema.required||[],a=": ",h=t.keyForParent,__indexOf.call(s,h)>=0&&(a="*"+a),n=$(this.keyTemplate).text(o+a),r.prepend(n),i=$("<span></span>").addClass("treema-description").text(t.schema.description||""),r.append(i)),t.collection&&e.prepend($(this.toggleTemplate)),e},t.prototype.refreshErrors=function(){return this.clearErrors(),this.showErrors()},t.prototype.showErrors=function(){var t,e,i,n,o,s,r,a,h,l,d,c,u,g,f,p,m,v,w,y,R;if(!this.parent||this.integrated){for(s=this.getErrors(),o=[],u=0,p=s.length;u<p;u++){for(n=s[u],l=(null!=(w=n.subDataPath)?w:n.dataPath).slice(1),l=l?l.split("/"):[],e=this,g=0,m=l.length;g<m;g++){if(d=l[g],!e.childrenTreemas){n.forChild=!0;break}if(e.ordered&&(d=parseInt(d)),e=e.childrenTreemas[d],!e)return void console.error("could not find treema down path",l,this,"so couldn't show error",n)}e._errors&&__indexOf.call(o,e)>=0||(e._errors=[]),e._errors.push(n),o.push(e)}for(y=$.unique(o),R=[],f=0,v=y.length;f<v;f++)c=y[f],t=function(){var t,e,n,o;for(n=c._errors,o=[],t=0,e=n.length;t<e;t++)i=n[t],i.forChild&&o.push(i);return o}(),h=function(){var t,e,n,o;for(n=c._errors,o=[],t=0,e=n.length;t<e;t++)i=n[t],i.forChild||o.push(i);return o}(),a=function(){var t,e,n;for(n=[],t=0,e=h.length;t<e;t++)i=h[t],n.push(i.message);return n}(),t.length>0&&(r="["+t.length+"] error",t.length>1&&(r+="s"),a.push(r)),R.push(c.showError(a.join("<br />")));return R}},t.prototype.showError=function(t){return this.$el.prepend($(this.errorTemplate)),this.$el.find("> .treema-error").html(t).show(),this.$el.addClass("treema-has-error")},t.prototype.clearErrors=function(){return this.$el.find(".treema-error").remove(),this.$el.find(".treema-has-error").removeClass("treema-has-error"),this.$el.removeClass("treema-has-error")},t.prototype.createTemporaryError=function(t,e){return null==e&&(e=null),e||(e=this.$el.prepend),this.clearTemporaryErrors(),$(this.tempErrorTemplate).text(t).delay(3e3).fadeOut(1e3,function(){return $(this).remove()})},t.prototype.clearTemporaryErrors=function(){return this.getRootEl().find(".treema-temp-error").remove()},t.prototype.get=function(t){var e,i,n,o;if(null==t&&(t="/"),t=this.normalizePath(t),0===t.length)return this.data;if(null!=this.childrenTreemas)return this.digDeeper(t,"get",void 0,[]);for(e=this.data,n=0,o=t.length;n<o&&(i=t[n],e=e[this.normalizeKey(i,e)],void 0!==e);n++);return e},t.prototype.set=function(t,e){var i;return i=this.get(t),!!this.setRecursive(t,e)&&(JSON.stringify(e)!==JSON.stringify(i)&&this.addTrackedAction({oldData:i,newData:e,path:t,action:"edit"}),!0)},t.prototype.setRecursive=function(t,e){var i,n,o,s,r,a,h,l;if(t=this.normalizePath(t),0===t.length)return this.data=e,this.refreshDisplay(),!0;if(null!=this.childrenTreemas)return r=this.digDeeper(t,"setRecursive",!1,[e]),r===!1&&1===t.length&&$.isPlainObject(this.data)?(this.data[t[0]]=e,this.refreshDisplay(),!0):r;for(i=this.data,o=this.getPath(),n=h=0,l=t.length;h<l;n=++h){if(a=t[n],a=this.normalizeKey(a,i),t.length===n+1)return s=i[a],i[a]=e,this.refreshDisplay(),!0;if(i=i[a],void 0===i)return!1}},t.prototype["delete"]=function(t){var e,i;return e=this.get(t),!!this.deleteRecursive(t)&&(i=t.substring(0,t.lastIndexOf("/")),this.addTrackedAction({data:e,path:t,parentPath:i,action:"delete"}),!0)},t.prototype.deleteRecursive=function(t){var e,i,n,o,s,r;if(t=this.normalizePath(t),0===t.length)return this.remove();if(null!=this.childrenTreemas)return this.digDeeper(t,"deleteRecursive",!1,[]);for(e=this.data,n=this.getPath(),i=s=0,r=t.length;s<r;i=++s){if(o=t[i],o=this.normalizeKey(o,e),t.length===i+1)return $.isArray(e)?e.splice(o,1):delete e[o],this.refreshDisplay(),!0;if(e=e[o],void 0===e)return!1;n+="/"+o}},t.prototype.insert=function(t,e){var i,n,o,s,r,a;if(this.insertRecursive(t,e)){if(r=t,s=this.get(r),i=r,"/"!==r&&(i+="/"),s[s.length-1]!==e){for(o in s)if(a=s[o],JSON.stringify(a)===JSON.stringify(e)){n=o;break}}else n=s.length-1;return i+=n.toString(),this.addTrackedAction({data:e,path:i,parentPath:r,action:"insert"}),!0}return!1},t.prototype.insertRecursive=function(t,e){var i,n,o,s,r,a;if(t=this.normalizePath(t),0===t.length)return!!$.isArray(this.data)&&(this.data.push(e),this.refreshDisplay(),this.flushChanges(),!0);if(null!=this.childrenTreemas)return this.digDeeper(t,"insertRecursive",!1,[e]);for(i=this.data,o=this.getPath(),n=r=0,a=t.length;r<a;n=++r)if(s=t[n],o+="/"+s,s=this.normalizeKey(s,i),i=i[s],void 0===i)return!1;return!!$.isArray(i)&&(i.push(e),this.refreshDisplay(),!0)},t.prototype.normalizeKey=function(t,e){var i,n,o,s,r;if($.isArray(e)){if(!(__indexOf.call(t,"=")>=0))return parseInt(t);for(n=t.split("="),i=s=0,r=e.length;s<r;i=++s)if(o=e[i],o[n[0]]===n[1])return i}return t},t.prototype.normalizePath=function(t){var e;return"string"===$.type(t)&&(t=t.split("/"),t=function(){var i,n,o;for(o=[],i=0,n=t.length;i<n;i++)e=t[i],e.length&&o.push(e);return o}()),t},t.prototype.digDeeper=function(t,e,i,n){var o,s;return s=this.normalizeKey(t[0],this.data),o=this.childrenTreemas[s],void 0!==o&&o.integrated?o[e].apply(o,[t.slice(1)].concat(__slice.call(n))):i},t.prototype.refreshDisplay=function(){return this.isDisplaying()?this.buildValueForDisplay(this.getValEl().empty(),this.getData()):this.display(),this.collection&&this.isOpen()&&(this.close(!1),this.open()),this.flushChanges(),this.broadcastChanges()},t.prototype.getNodeEl=function(){return this.$el},t.prototype.getValEl=function(){return this.$el.find("> .treema-row .treema-value")},t.prototype.getRootEl=function(){return this.$el.closest(".treema-root")},t.prototype.getRoot=function(){var t;for(t=this;null!=t.parent;)t=t.parent;return t},t.prototype.getInputs=function(){return this.getValEl().find("input, textarea")},t.prototype.getSelectedTreemas=function(){var t,e,i,n,o;for(n=this.getRootEl().find(".treema-selected"),o=[],e=0,i=n.length;e<i;e++)t=n[e],o.push($(t).data("instance"));return o},t.prototype.getLastSelectedTreema=function(){return this.getRoot().lastSelectedTreema},t.prototype.setLastSelectedTreema=function(t){return this.getRoot().lastSelectedTreema=t,null!=t?t.$el.addClass("treema-last-selected"):void 0},t.prototype.getAddButtonEl=function(){return this.$el.find("> .treema-children > .treema-add-child")},t.prototype.getVisibleTreemas=function(){var t,e,i,n,o;for(n=this.getRootEl().find(".treema-node"),o=[],e=0,i=n.length;e<i;e++)t=n[e],o.push($(t).data("instance"));return o},t.prototype.getNavigableElements=function(){return this.getRootEl().find(".treema-node, .treema-add-child:visible").toArray()},t.prototype.getPath=function(){var t,e;for(t=[],e=this;e&&null!=e.keyForParent;)t.push(e.keyForParent+""),e=e.parent;return t.reverse(),"/"+t.join("/")},t.prototype.getData=function(){return"undefined"===$.type(this.data)?this.defaultData:this.data},t.prototype.isDefaultStub=function(){return void 0===this.data},t.getLastTreemaWithFocus=function(){return this.lastTreemaWithFocus},t.prototype.isRoot=function(){return!this.parent},t.prototype.isEditing=function(){return this.getValEl().hasClass("treema-edit")},t.prototype.isDisplaying=function(){return this.getValEl().hasClass("treema-display")},t.prototype.isOpen=function(){return this.$el.hasClass("treema-open")},t.prototype.isClosed=function(){return this.$el.hasClass("treema-closed")},t.prototype.isSelected=function(){return this.$el.hasClass("treema-selected")},t.prototype.wasSelectedLast=function(){return this.$el.hasClass("treema-last-selected")},t.prototype.editingIsHappening=function(){return this.getRootEl().find(".treema-edit").length},t.prototype.rootSelected=function(){return $(document.activeElement).hasClass("treema-root")},t.prototype.setFilterVisible=function(t){return t?this.$el.find(".treema-node").andSelf().removeClass(this.treemaFilterHiddenClass):this.$el.find(".treema-node").andSelf().addClass(this.treemaFilterHiddenClass)},t.prototype.getFilterVisibleTreemas=function(){var t,e,i,n,o;for(n=this.getRootEl().find(".treema-node").not("."+this.treemaFilterHiddenClass),o=[],e=0,i=n.length;e<i;e++)t=n[e],o.push($(t).data("instance"));return o},t.prototype.isFilterVisible=function(){return!this.$el.hasClass(this.treemaFilterHiddenClass)},t.prototype.saveScrolls=function(){var t,e,i;for(this.scrolls=[],e=this.getRootEl(),t=e,i=[];t[0]&&(this.scrolls.push({el:t,scrollTop:t.scrollTop(),scrollLeft:t.scrollLeft()}),"body"!==t.prop("tagName").toLowerCase());)i.push(t=t.parent());return i},t.prototype.loadScrolls=function(){var t,e,i,n;if(this.scrolls){for(n=this.scrolls,e=0,i=n.length;e<i;e++)t=n[e],t.el.scrollTop(t.scrollTop),t.el.scrollLeft(t.scrollLeft);return this.scrolls=null}},t.prototype.keepFocus=function(){return this.saveScrolls(),this.getRootEl().focus(),this.loadScrolls()},t.prototype.copyData=function(){return $.extend(null,{},{d:this.data}).d},t.prototype.updateMyAddButton=function(){if(this.$el.removeClass("treema-full"),!this.canAddChild())return this.$el.addClass("treema-full")},t.nodeMap={},t.setNodeSubclass=function(t,e){return this.nodeMap[t]=e},t.make=function(t,e,i,n){var o,s,r,a,h,l,d,c,u,g,f,p,m;if(h=e.schema||{},h.$ref&&(l=e.tv4||(null!=i?i.tv4:void 0),l||(l=TreemaUtils.getGlobalTv4().freshApi(),l.addSchema("#",h)),h=this.utils.resolveReference(h,l)),null!=h["default"]&&null==e.data&&null==e.defaultData&&("object"===$.type(h["default"])?e.data={}:e.data=this.utils.cloneDeep(h["default"])),u=e.data||e.defaultData,f=e.workingSchemas||this.utils.buildWorkingSchemas(h,null!=i?i.tv4:void 0),g=e.workingSchema||this.utils.chooseWorkingSchema(u,f,e.tv4),this.massageData(e,g),d=e.type||$.type(null!=(p=e.data)?p:e.defaultData),"undefined"===d&&(d="null"),r=i?i.settings.nodeClasses:e.nodeClasses,o=this.getNodeClassForSchema(g,d,r),i){m=i.settings;for(s in m)c=m[s],"data"!==s&&"defaultData"!==s&&"schema"!==s&&(e[s]=c)}return e.workingSchema=g,e.workingSchemas=f,a=new o(t,e,i),null!=n&&(a.keyForParent=n),a},t.massageData=function(t,e){var i,n,o;if(o=e.type||["string","number","integer","object","array","boolean","null"],"array"!==$.type(o)&&(o=[o]),i=$.type(t.data),n=$.type(t.defaultData),"undefined"!==i&&__indexOf.call(o,i)<0&&(t.data=this.defaultForType(o[0])),"undefined"===i&&("undefined"===n||__indexOf.call(o,n)<0))return t.data=this.defaultForType(o[0])},t.defaultForType=function(e){return t.utils.defaultForType(e)},t.getNodeClassForSchema=function(t,e,i){var n,o,s,r;return null==e&&(e="string"),null==i&&(i=null),s=!1,t.type&&($.isArray(t.type)?(r=!e,__indexOf.call(t.type,r)>=0&&(s=!0)):s=e!==t.type),n=null,i=i||{},t.format&&(n=i[t.format]||this.nodeMap[t.format]),n&&!s?n:(o=t.type||e,($.isArray(o)||s)&&(o=e),n=i[o]||this.nodeMap[o],n?n:this.nodeMap.any)},t.extend=function(t){var e;return e=function(){},e.prototype=this.prototype,t.prototype=new e,t.prototype.constructor=t,t.__super__=this.prototype,t.prototype["super"]=function(t){return this.constructor.__super__[t]},t},t.didSelect=!1,t.changedTreemas=[],t.prototype.filterChildren=function(t){var e,i,n,o;n=this.childrenTreemas,o=[];for(e in n)i=n[e],o.push(i.setFilterVisible(!t||t(i,e)));return o},t.prototype.clearFilter=function(){var t,e,i,n;i=this.childrenTreemas,n=[];for(t in i)e=i[t],n.push(e.setFilterVisible(!0));return n},t}();var __init,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},__indexOf=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},__bind=function(t,e){return function(){return t.apply(e,arguments)}};(__init=function(){var t,e,i,n,o,s,r,a,h,l,d,c,u,g;return TreemaNode.setNodeSubclass("string",r=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-string",e.inputTypes=["color","date","datetime","datetime-local","email","month","range","search","tel","text","time","url","week"],e.prototype.buildValueForDisplay=function(t,e){return this.buildValueForDisplaySimply(t,'"'+e+'"')},e.prototype.buildValueForEditing=function(t,i){var n,o;if(n=this.buildValueForEditingSimply(t,i),this.workingSchema.maxLength&&n.attr("maxlength",this.workingSchema.maxLength),o=this.workingSchema.format,__indexOf.call(e.inputTypes,o)>=0)return n.attr("type",this.workingSchema.format)},e.prototype.saveChanges=function(t){var i;return i=this.data,this.data=$("input",t).val(),e.__super__.saveChanges.call(this,i)},e}(TreemaNode)),TreemaNode.setNodeSubclass("number",o=function(t){function e(){return h=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-number",e.prototype.buildValueForDisplay=function(t,e){return this.buildValueForDisplaySimply(t,JSON.stringify(e))},e.prototype.buildValueForEditing=function(t,e){var i;if(i=this.buildValueForEditingSimply(t,JSON.stringify(e),"number"),this.workingSchema.maximum&&i.attr("max",this.workingSchema.maximum),this.workingSchema.minimum)return i.attr("min",this.workingSchema.minimum)},e.prototype.saveChanges=function(t){var i;return i=this.data,this.data=parseFloat($("input",t).val()),e.__super__.saveChanges.call(this,i)},e}(TreemaNode)),TreemaNode.setNodeSubclass("integer",i=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-integer",e.prototype.buildValueForDisplay=function(t,e){return this.buildValueForDisplaySimply(t,JSON.stringify(e))},e.prototype.buildValueForEditing=function(t,e){var i;if(i=this.buildValueForEditingSimply(t,JSON.stringify(e),"number"),this.workingSchema.maximum&&i.attr("max",this.workingSchema.maximum),this.workingSchema.minimum)return i.attr("min",this.workingSchema.minimum)},e.prototype.saveChanges=function(t){var i;return i=this.data,this.data=parseInt($("input",t).val()),e.__super__.saveChanges.call(this,i)},e}(TreemaNode)),TreemaNode.setNodeSubclass("null",n=n=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-null",e.prototype.editable=!1,e.prototype.buildValueForDisplay=function(t){return this.buildValueForDisplaySimply(t,"null")},e}(TreemaNode)),TreemaNode.setNodeSubclass("boolean",e=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-boolean",e.prototype.buildValueForDisplay=function(t,e){return this.buildValueForDisplaySimply(t,JSON.stringify(e)),this.keepFocus()},e.prototype.buildValueForEditing=function(t,e){var i;return i=this.buildValueForEditingSimply(t,JSON.stringify(e)),$("<span></span>").text(JSON.stringify(this.data)).insertBefore(i),i.focus()},e.prototype.toggleValue=function(t){var e,i;return null==t&&(t=null),e=this.getData(),this.data=!this.data,null!=t&&(this.data=t),i=this.getValEl().empty(),this.isDisplaying()?this.buildValueForDisplay(i,this.getData()):this.buildValueForEditing(i,this.getData()),this.addTrackedAction({oldData:e,newData:this.data,path:this.getPath(),action:"edit"}),this.keepFocus(),this.flushChanges()},e.prototype.onSpacePressed=function(){return this.toggleValue()},e.prototype.onFPressed=function(){return this.toggleValue(!1)},e.prototype.onTPressed=function(){return this.toggleValue(!0)},e.prototype.saveChanges=function(){},e.prototype.onClick=function(t){var i;return i=$(t.target).closest(".treema-value"),i.length?this.canEdit()?this.toggleValue():void 0:e.__super__.onClick.call(this,t)},e}(TreemaNode)),TreemaNode.setNodeSubclass("array",t=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-array",e.prototype.collection=!0,e.prototype.ordered=!0,e.prototype.directlyEditable=!1,e.prototype.sort=!1,e.prototype.getChildren=function(){var t,e,i,n,o,s;for(o=this.getData(),s=[],t=i=0,n=o.length;i<n;t=++i)e=o[t],s.push({key:t,value:e,schema:this.getChildSchema(t)});return s},e.prototype.buildValueForDisplay=function(t,e){var i,n,o,s,r,a,h,l,d;if(r=[],e){for(d=e.slice(0,3),s=h=0,l=d.length;h<l;s=++h)i=d[s],o=TreemaNode.make(null,{schema:TreemaNode.utils.getChildSchema(s,this.workingSchema),data:i},this),a=$("<div></div>"),o.buildValueForDisplay(a,o.getData()),r.push(a.text());return e.length>3&&r.push("..."),n=null!=this.workingSchema.title?"(empty "+this.workingSchema.title+")":"(empty)",r=r.length?r.join(" | "):n,this.buildValueForDisplaySimply(t,r)}},e.prototype.buildValueForEditing=function(t,e){return this.buildValueForEditingSimply(t,JSON.stringify(e))},e.prototype.canAddChild=function(){return!this.settings.readOnly&&!this.workingSchema.readOnly&&(!(this.workingSchema.additionalItems===!1&&this.getData().length>=this.workingSchema.items.length)&&!(null!=this.workingSchema.maxItems&&this.getData().length>=this.workingSchema.maxItems))},e.prototype.addNewChild=function(){var t,e,i,n;if(this.canAddChild())return this.isClosed()&&this.open(),i=Object.keys(this.childrenTreemas).length,n=TreemaNode.utils.getChildSchema(i,this.workingSchema),e=TreemaNode.make(void 0,{schema:n},this,i),e.tv4=this.tv4,t=this.createChildNode(e),this.addTrackedAction({data:e.data,path:e.getPath(),parentPath:this.getPath(),action:"insert"}),this.getAddButtonEl().before(t),e.canEdit()?e.edit():(e.select(),this.integrateChildTreema(e),e.flushChanges()),e},e.prototype.open=function(){return this.data&&this.sort&&this.data.sort(this.sortFunction),e.__super__.open.apply(this,arguments)},e.prototype.close=function(){var t;return e.__super__.close.apply(this,arguments),t=this.getValEl().empty(),this.buildValueForDisplay(t,this.getData())},e.prototype.sortFunction=function(t,e){return t>e?1:t<e?-1:0},e}(TreemaNode)),window.TreemaArrayNode=t,TreemaNode.setNodeSubclass("object",s=function(t){function e(){return this.cleanupAddNewChild=__bind(this.cleanupAddNewChild,this),this.onAutocompleteSelect=__bind(this.onAutocompleteSelect,this),g=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-object",e.prototype.collection=!0,e.prototype.keyed=!0,e.prototype.directlyEditable=!1,e.prototype.getChildren=function(){var t,e,i,n,o,s,r;if(t=[],n=[],this.workingSchema.properties)for(i in this.workingSchema.properties)e=this.getDefaultDataForKey(i),"undefined"!==$.type(this.getData()[i])?(n.push(i),o=this.getChildSchema(i),t.push({key:i,value:this.getData()[i],schema:o,defaultData:e})):null!=e&&(n.push(i),t.push({key:i,schema:this.getChildSchema(i),defaultData:e}));r=this.getData();for(i in r)s=r[i],__indexOf.call(n,i)>=0||(n.push(i),t.push({key:i,value:s,schema:this.getChildSchema(i),defaultData:this.getDefaultDataForKey(i)}));if($.isPlainObject(this.defaultData))for(i in this.defaultData)__indexOf.call(n,i)>=0||(n.push(i),t.push({key:i,schema:this.getChildSchema(i),defaultData:this.getDefaultDataForKey(i)}));if($.isPlainObject(this.workingSchema["default"]))for(i in this.workingSchema["default"])__indexOf.call(n,i)>=0||(n.push(i),t.push({key:i,schema:this.getChildSchema(i),defaultData:this.getDefaultDataForKey(i)}));return t},e.prototype.getDefaultDataForKey=function(t){var e,i,n,o;return e=null!=(i=null!=(n=this.defaultData)?n[t]:void 0)?i:null!=(o=this.workingSchema["default"])?o[t]:void 0,$.isArray(e)&&(e=$.extend(!0,[],e)),$.isPlainObject(e)&&(e=$.extend(!0,{},e)),e},e.prototype.buildValueForDisplay=function(t,e){var i,n,o,s,r,a,h,l,d,c;if(l=[],e){if(n=e[this.workingSchema.displayProperty])return l=n,this.buildValueForDisplaySimply(t,l);s=0,h=this.workingSchema||this.schema;for(r in e)if(d=e[r],void 0!==d){if(3===s){l.push("...");break}s+=1,i=this.getChildSchema(r),a=i.title||r,$.isPlainObject(d)||$.isArray(d)?l.push(""+a):(c=d,"string"!==$.type(d)&&(c=JSON.stringify(d)),"undefined"==typeof d&&(c="undefined"),c.length>20&&(c=c.slice(0,21)+" ..."),l.push(""+a+"="+c))}return o=null!=this.workingSchema.title?"(empty "+this.workingSchema.title+")":"(empty)",l=l.length?l.join(", "):o,
this.buildValueForDisplaySimply(t,l)}},e.prototype.populateData=function(){return e.__super__.populateData.call(this),TreemaNode.utils.populateRequireds(this.data,this.workingSchema,this.tv4)},e.prototype.close=function(){return e.__super__.close.apply(this,arguments),this.buildValueForDisplay(this.getValEl().empty(),this.getData())},e.prototype.addNewChild=function(){var t,e,i=this;if(this.canAddChild())return this.isRoot()||this.open(),this.deselectAll(),e=this.childPropertiesAvailable(),t=$(this.newPropertyTemplate),t.blur(this.cleanupAddNewChild),t.keydown(function(t){return i.originalTargetValue=$(t.target).val()}),"function"==typeof t.autocomplete&&t.autocomplete({source:e,minLength:0,delay:0,autoFocus:!0,select:this.onAutocompleteSelect}),this.getAddButtonEl().before(t).hide(),t.focus(),t.autocomplete("search"),!0},e.prototype.onAutocompleteSelect=function(t,e){return $(t.target).val(e.item.value),this.tryToAddNewChild(t,!0)},e.prototype.canAddChild=function(){return!this.settings.readOnly&&!this.workingSchema.readOnly&&(!(null!=this.workingSchema.maxProperties&&Object.keys(this.getData()).length>=this.workingSchema.maxProperties)&&(this.workingSchema.additionalProperties!==!1||(null!=this.workingSchema.patternProperties||!!this.childPropertiesAvailable().length)))},e.prototype.childPropertiesAvailable=function(){var t,e,i,n,o,s;if(o=this.workingSchema||this.schema,!o.properties)return[];i=[],e=this.getData(),s=o.properties;for(n in s)t=s[n],null==(null!=e?e[n]:void 0)&&"hidden"!==t.format&&(t.readOnly||i.push(t.title||n));return i.sort()},e.prototype.onDeletePressed=function(t){return this.addingNewProperty()?$(t.target).val()?void 0:(this.cleanupAddNewChild(),t.preventDefault(),this.$el.find(".treema-add-child").focus()):e.__super__.onDeletePressed.call(this,t)},e.prototype.onEscapePressed=function(){return this.cleanupAddNewChild()},e.prototype.onTabPressed=function(t){return this.addingNewProperty()?(t.preventDefault(),this.tryToAddNewChild(t,!1)):e.__super__.onTabPressed.call(this,t)},e.prototype.onEnterPressed=function(t){return this.addingNewProperty()?this.tryToAddNewChild(t,!0):e.__super__.onEnterPressed.call(this,t)},e.prototype.tryToAddNewChild=function(t,e){var i,n,o,s;return this.originalTargetValue||e?(n=$(t.target),i=this.getPropertyKey($(t.target)),i.length&&!this.canAddProperty(i)?(this.clearTemporaryErrors(),void this.showBadPropertyError(n)):null!=this.childrenTreemas[i]?(this.cleanupAddNewChild(),s=this.childrenTreemas[i],s.canEdit()?s.toggleEdit():s.select()):(this.cleanupAddNewChild(),this.addNewChildForKey(i))):(o=t.shiftKey?-1:1,this.cleanupAddNewChild(),this.$el.find(".treema-add-child").focus(),void this.traverseWhileEditing(o))},e.prototype.getPropertyKey=function(t){var e,i,n,o;if(n=t.val(),this.workingSchema.properties){o=this.workingSchema.properties;for(e in o)i=o[e],i.title===n&&(n=e)}return n},e.prototype.canAddProperty=function(t){var e;return this.workingSchema.additionalProperties!==!1||(null!=this.workingSchema.properties[t]||!(null==this.workingSchema.patternProperties||!function(){var i;i=[];for(e in this.workingSchema.patternProperties)i.push(RegExp(e).test(t));return i}.call(this)))},e.prototype.showBadPropertyError=function(t){var e;t.focus(),e=this.createTemporaryError("Invalid property name."),e.insertAfter(t)},e.prototype.addNewChildForKey=function(t){var e,i,n,o,s;return s=this.getChildSchema(t),o=TreemaNode.make(null,{schema:s},this,t),i=this.createChildNode(o),this.findObjectInsertionPoint(t).before(i),o.canEdit()?o.edit():(this.integrateChildTreema(o),o.collection&&(n=o.getChildren(),n.length?(o.open(),e=o.childrenTreemas[n[0][0]],e&&e.select()):o.addNewChild())),this.addTrackedAction({data:o.data,path:o.getPath(),parentPath:this.getPath(),action:"insert"}),this.updateMyAddButton()},e.prototype.findObjectInsertionPoint=function(t){var e,i,n,o,s,r,a,h;if(!(null!=(a=this.workingSchema.properties)?a[t]:void 0))return this.getAddButtonEl();for(n=Object.keys(this.workingSchema.properties),e=n.slice(n.indexOf(t)+1),i=this.$el.find("> .treema-children > .treema-node"),s=0,r=i.length;s<r;s++)if(o=i[s],h=$(o).data("instance").keyForParent,__indexOf.call(e,h)>=0)return $(o);return this.getAddButtonEl()},e.prototype.cleanupAddNewChild=function(){return this.$el.find(".treema-new-prop").remove(),this.getAddButtonEl().show(),this.clearTemporaryErrors()},e.prototype.addingNewProperty=function(){return document.activeElement===this.$el.find(".treema-new-prop")[0]},e}(TreemaNode)),window.TreemaObjectNode=s})();var __hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},__bind=function(t,e){return function(){return t.apply(e,arguments)}},__slice=[].slice;!function(){var t,e,i,n,o,s,r,a,h,l,d;return TreemaNode.setNodeSubclass("point2d",n=function(t){function e(){return r=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-point2d",e.prototype.buildValueForDisplay=function(t,e){return this.buildValueForDisplaySimply(t,"("+e.x+", "+e.y+")")},e.prototype.buildValueForEditing=function(t,e){var i,n;return i=$("<input />").val(e.x).attr("placeholder","x"),n=$("<input />").val(e.y).attr("placeholder","y"),t.append("(").append(i).append(", ").append(n).append(")"),t.find("input:first").focus().select()},e.prototype.saveChanges=function(t){return null==this.data&&(this.data={}),this.data.x=parseFloat(t.find("input:first").val()),this.data.y=parseFloat(t.find("input:last").val())},e}(TreemaNode)),TreemaNode.setNodeSubclass("point3d",o=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-point3d",e.prototype.buildValueForDisplay=function(t,e){return this.buildValueForDisplaySimply(t,"("+e.x+", "+e.y+", "+e.z+")")},e.prototype.buildValueForEditing=function(t,e){var i,n,o;return i=$("<input />").val(e.x).attr("placeholder","x"),n=$("<input />").val(e.y).attr("placeholder","y"),o=$("<input />").val(e.z).attr("placeholder","z"),t.append("(").append(i).append(", ").append(n).append(", ").append(o).append(")"),t.find("input:first").focus().select()},e.prototype.saveChanges=function(){var t;return t=this.getInputs(),null==this.data&&(this.data={}),this.data.x=parseFloat($(t[0]).val()),this.data.y=parseFloat($(t[1]).val()),this.data.z=parseFloat($(t[2]).val())},e}(TreemaNode)),e=function(t){function e(){return this.searchCallback=__bind(this.searchCallback,this),this.search=__bind(this.search,this),h=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-search",e.prototype.searchValueTemplate='<input placeholder="Search" /><div class="treema-search-results"></div>',e.prototype.url=null,e.prototype.lastTerm=null,e.prototype.buildValueForDisplay=function(t,e){var i;return i=e?this.formatDocument(e):"None",this.buildValueForDisplaySimply(t,i)},e.prototype.formatDocument=function(t){return $.isString(t)?t:JSON.stringify(t)},e.prototype.buildValueForEditing=function(t,e){var i;if(t.html(this.searchValueTemplate),i=t.find("input"),i.focus().keyup(this.search),e)return i.attr("placeholder",this.formatDocument(e))},e.prototype.search=function(){var t;if(t=this.getValEl().find("input").val(),t!==this.lastTerm&&(this.lastTerm&&!t&&this.getSearchResultsEl().empty(),t))return this.lastTerm=t,this.getSearchResultsEl().empty().append("Searching"),$.ajax(this.url+"?term="+t,{dataType:"json",success:this.searchCallback})},e.prototype.searchCallback=function(t){var e,i,n,o,s,r,a,h;for(e=this.getSearchResultsEl().detach().empty(),i=!0,n=a=0,h=t.length;a<h;n=++a)o=t[n],s=$("<div></div>").addClass("treema-search-result-row"),r=this.formatDocument(o),null!=r&&(i&&s.addClass("treema-search-selected"),i=!1,s.text(r),s.data("value",o),e.append(s));return t.length||e.append($("<div>No results</div>")),this.getValEl().append(e)},e.prototype.getSearchResultsEl=function(){return this.getValEl().find(".treema-search-results")},e.prototype.getSelectedResultEl=function(){return this.getValEl().find(".treema-search-selected")},e.prototype.saveChanges=function(){var t;if(t=this.getSelectedResultEl(),t.length)return this.data=t.data("value")},e.prototype.onDownArrowPressed=function(t){return this.navigateSearch(1),t.preventDefault()},e.prototype.onUpArrowPressed=function(t){return t.preventDefault(),this.navigateSearch(-1)},e.prototype.navigateSearch=function(t){var e,i,n;if(n=this.getSelectedResultEl(),e=t>0?"next":"prev",i=n[e](".treema-search-result-row"),i.length)return n.removeClass("treema-search-selected"),i.addClass("treema-search-selected")},e.prototype.onClick=function(t){var i;return i=$(t.target).closest(".treema-search-result-row"),i.length?(this.getSelectedResultEl().removeClass("treema-search-selected"),i.addClass("treema-search-selected"),this.saveChanges(),this.display()):e.__super__.onClick.call(this,t)},e.prototype.shouldTryToRemoveFromParent=function(){var t;if(null==this.getData())return t=this.getSelectedResultEl(),!t.length},e}(TreemaNode),s=function(t,e,i){var n;return n=null,function(){var o,s,r;return o=1<=arguments.length?__slice.call(arguments,0):[],r=this,s=function(){return i||t.apply(r,o),n=null},n?clearTimeout(n):i&&t.apply(r,o),n=setTimeout(s,e||100)}},e.prototype.search=s(e.prototype.search,200),window.DatabaseSearchTreemaNode=e,TreemaNode.setNodeSubclass("ace",t=function(t){function e(){return this.saveChanges=__bind(this.saveChanges,this),l=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-ace treema-multiline",e.prototype.initEditor=function(t){var e,i;if(e=$("<div></div>").text(this.getData()),t.append(e),this.editor=ace.edit(e[0]),i=this.editor.getSession(),null!=this.schema.aceMode&&i.setMode(this.schema.aceMode),null!=this.schema.aceTabSize&&i.setTabSize(this.schema.aceTabSize),null!=this.schema.aceUseWrapMode&&i.setUseWrapMode(this.schema.aceUseWrapMode),i.setNewLineMode("unix"),i.setUseSoftTabs(!0),i.on("change",this.saveChanges),this.editor.setOptions({maxLines:1/0}),null!=this.schema.aceTheme)return this.editor.setTheme(this.schema.aceTheme)},e.prototype.toggleEdit=function(){return this.editor||this.initEditor(this.getValEl()),this.deselectAll()},e.prototype.buildValueForDisplay=function(t){if(!this.editor)return this.initEditor(t)},e.prototype.buildValueForEditing=function(){},e.prototype.saveChanges=function(){return this.data=this.editor.getValue(),this.flushChanges(),this.broadcastChanges()},e.prototype.onTabPressed=function(){},e.prototype.onEnterPressed=function(){},e}(TreemaNode)),TreemaNode.setNodeSubclass("long-string",i=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.valueClass="treema-long-string treema-multiline",e.prototype.buildValueForDisplay=function(t,e){var i;return i=e.replace(/\n/g,"<br />"),t.append($("<div></div>").html(i))},e.prototype.buildValueForEditing=function(t,e){var i;return i=$("<textarea />"),null!==e&&i.val(e),t.append(i),i.focus().select(),i.blur(this.onEditInputBlur),i},e.prototype.saveChanges=function(t){var e;return e=t.find("textarea"),this.data=e.val()},e}(TreemaNode))}(),function(t){return t.fn[TreemaNode.pluginName]=function(e){var i;return 0===this.length?null:(i=t(this[0]),TreemaNode.make(i,e))}}(jQuery);var TreemaUtils;TreemaUtils=function(){var t;return t={},t.populateDefaults=function(t,e,i){var n=this;return e["default"]&&!t&&(t=this.cloneDeep(e["default"])),this.walk(t,e,i,function(t,e,i){var o,s,r,a;if(o=i["default"],"object"===n.type(o)&&"object"===n.type(e)){a=[];for(s in o)r=o[s],void 0===e[s]?a.push(e[s]=n.cloneDeep(r)):a.push(void 0);return a}}),t},t.populateRequireds=function(t,e,i){var n=this;return null==t&&(t={}),this.walk(t,e,i,function(t,e,o){var s,r,a,h,l,d,c,u,g,f;if(o.required&&"object"===n.type(e)){for(u=o.required,f=[],d=0,c=u.length;d<c;d++)r=u[d],null==e[r]&&((a=null!=(g=o["default"])?g[r]:void 0)?f.push(e[r]=n.cloneDeep(a)):(s=n.getChildSchema(r,o),l=n.buildWorkingSchemas(s,i)[0],a=l["default"],null!=a?f.push(e[r]=n.cloneDeep(a)):(h=l.type,"array"===n.type(h)&&(h=h[0]),h||(h="string"),f.push(e[r]=n.defaultForType(h)))));return f}}),t},t.walk=function(t,e,i,n,o){var s,r,a,h,l,d,c,u;if(null==o&&(o=""),i||(i=this.getGlobalTv4().freshApi(),i.addSchema("#",e),e.id&&i.addSchema(e.id,e)),d=this.buildWorkingSchemas(e,i),l=this.chooseWorkingSchema(t,d,i),n(o,t,l),"array"===(c=this.type(t))||"object"===c){u=[];for(a in t)h=t[a],s=o.slice(),s&&(s+="."),s+=a,r=this.getChildSchema(a,l),u.push(this.walk(h,r,i,n,s));return u}},t.getChildSchema=function(t,e){var i,n,o,s,r;if("string"===this.type(t)){s=e.properties;for(i in s)if(n=s[i],i===t)return n;r=e.patternProperties;for(i in r)if(n=r[i],t.match(new RegExp(i)))return n;if("object"==typeof e.additionalProperties)return e.additionalProperties}if("number"===this.type(t)&&(o=t,e.items))if(Array.isArray(e.items)){if(o<e.items.length)return e.items[o];if(e.additionalItems)return e.additionalItems}else if(e.items)return e.items;return{}},t.buildWorkingSchemas=function(t,e){var i,n,o,s,r,a,h,l,d,c,u,g;if(null==t&&(t={}),o=this.resolveReference(t,e),!(t.allOf||t.anyOf||t.oneOf))return[t];if(o=this.cloneSchema(o),i=o.allOf,n=o.anyOf,r=o.oneOf,null!=o.allOf&&delete o.allOf,null!=o.anyOf&&delete o.anyOf,null!=o.oneOf&&delete o.oneOf,null!=i)for(d=0,u=i.length;d<u;d++)t=i[d],this.combineSchemas(o,this.resolveReference(t,e));for(l=[],h=[],null!=n&&(h=h.concat(n)),null!=r&&(h=h.concat(r)),c=0,g=h.length;c<g;c++)a=h[c],a=this.resolveReference(a,e),s=this.cloneSchema(o),this.combineSchemas(s,a),l.push(s);return 0===l.length&&(l=[o]),l},t.chooseWorkingSchema=function(t,e,i){var n,o,s,r;if(1===e.length)return e[0];for(null==i&&(i=this.getGlobalTv4()),s=0,r=e.length;s<r;s++)if(o=e[s],n=i.validateMultiple(t,o),n.valid)return o;return e[0]},t.resolveReference=function(t,e,i){var n;return null==i&&(i=!1),null==t.$ref?t:(null==e&&(e=this.getGlobalTv4()),n=e.getSchema(t.$ref),n||console.warn("could not resolve reference",t.$ref,e.getMissingUris()),null==n&&(n={}),i&&null!=n.title&&delete n.title,n)},t.getGlobalTv4=function(){return"undefined"!=typeof window?window.tv4:"undefined"!=typeof global?global.tv4:"undefined"!=typeof tv4?tv4:void 0},t.cloneSchema=function(t){var e,i,n;e={};for(i in t)n=t[i],e[i]=n;return e},t.combineSchemas=function(t,e){var i,n;for(i in e)n=e[i],t[i]=n;return t},t.cloneDeep=function(t){var e,i,n,o;if(e=t,n=this.type(t),"object"===n&&(e={}),"array"===n&&(e=[]),"object"===n||"array"===n)for(i in t)o=t[i],e[i]=this.cloneDeep(o);return e},t.type=function(){var t,e,i,n,o;for(t={},o="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),i=0,n=o.length;i<n;i++)e=o[i],t["[object "+e+"]"]=e.toLowerCase();return function(e){var i;return i=Object.prototype.toString.call(e),t[i]||"object"}}(),t.defaultForType=function(t){return{string:"",number:0,"null":null,object:{},integer:0,"boolean":!1,array:[]}[t]},"undefined"!=typeof TreemaNode?TreemaNode.utils=t:"undefined"!=typeof module&&module.exports?module.exports=t:t}(),function(t,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&module.exports?module.exports=e():t.tv4=e()}(this,function(){function t(t){return encodeURI(t).replace(/%25[0-9][0-9]/g,function(t){return"%"+t.substring(3)})}function e(e){var i="";u[e.charAt(0)]&&(i=e.charAt(0),e=e.substring(1));var n="",o="",s=!0,r=!1,a=!1;"+"===i?s=!1:"."===i?(o=".",n="."):"/"===i?(o="/",n="/"):"#"===i?(o="#",s=!1):";"===i?(o=";",n=";",r=!0,a=!0):"?"===i?(o="?",n="&",r=!0):"&"===i&&(o="&",n="&",r=!0);for(var h=[],l=e.split(","),d=[],c={},f=0;f<l.length;f++){var p=l[f],m=null;if(p.indexOf(":")!==-1){var v=p.split(":");p=v[0],m=parseInt(v[1],10)}for(var w={};g[p.charAt(p.length-1)];)w[p.charAt(p.length-1)]=!0,p=p.substring(0,p.length-1);var y={truncate:m,name:p,suffices:w};d.push(y),c[p]=y,h.push(p)}var R=function(e){for(var i="",h=0,l=0;l<d.length;l++){var c=d[l],u=e(c.name);if(null===u||void 0===u||Array.isArray(u)&&0===u.length||"object"==typeof u&&0===Object.keys(u).length)h++;else if(i+=l===h?o:n||",",Array.isArray(u)){r&&(i+=c.name+"=");for(var g=0;g<u.length;g++)g>0&&(i+=c.suffices["*"]?n||",":",",c.suffices["*"]&&r&&(i+=c.name+"=")),i+=s?encodeURIComponent(u[g]).replace(/!/g,"%21"):t(u[g])}else if("object"==typeof u){r&&!c.suffices["*"]&&(i+=c.name+"=");var f=!0;for(var p in u)f||(i+=c.suffices["*"]?n||",":","),f=!1,i+=s?encodeURIComponent(p).replace(/!/g,"%21"):t(p),i+=c.suffices["*"]?"=":",",i+=s?encodeURIComponent(u[p]).replace(/!/g,"%21"):t(u[p])}else r&&(i+=c.name,a&&""===u||(i+="=")),null!=c.truncate&&(u=u.substring(0,c.truncate)),i+=s?encodeURIComponent(u).replace(/!/g,"%21"):t(u)}return i};return R.varNames=h,{prefix:o,substitution:R}}function i(t){if(!(this instanceof i))return new i(t);for(var n=t.split("{"),o=[n.shift()],s=[],r=[],a=[];n.length>0;){var h=n.shift(),l=h.split("}")[0],d=h.substring(l.length+1),c=e(l);r.push(c.substitution),s.push(c.prefix),o.push(d),a=a.concat(c.substitution.varNames)}this.fill=function(t){for(var e=o[0],i=0;i<r.length;i++){var n=r[i];e+=n(t),e+=o[i+1]}return e},this.varNames=a,this.template=t}function n(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)!==Array.isArray(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1}else{var o;for(o in t)if(void 0===e[o]&&void 0!==t[o])return!1;for(o in e)if(void 0===t[o]&&void 0!==e[o])return!1;for(o in t)if(!n(t[o],e[o]))return!1}return!0}return!1}function o(t){var e=String(t).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return e?{href:e[0]||"",protocol:e[1]||"",authority:e[2]||"",host:e[3]||"",hostname:e[4]||"",port:e[5]||"",pathname:e[6]||"",search:e[7]||"",hash:e[8]||""}:null}function s(t,e){function i(t){var e=[];return t.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(t){"/.."===t?e.pop():e.push(t)}),e.join("").replace(/^\//,"/"===t.charAt(0)?"/":"")}return e=o(e||""),t=o(t||""),e&&t?(e.protocol||t.protocol)+(e.protocol||e.authority?e.authority:t.authority)+i(e.protocol||e.authority||"/"===e.pathname.charAt(0)?e.pathname:e.pathname?(t.authority&&!t.pathname?"/":"")+t.pathname.slice(0,t.pathname.lastIndexOf("/")+1)+e.pathname:t.pathname)+(e.protocol||e.authority||e.pathname?e.search:e.search||t.search)+e.hash:null}function r(t){return t.split("#")[0]}function a(t,e){if(t&&"object"==typeof t)if(void 0===e?e=t.id:"string"==typeof t.id&&(e=s(e,t.id),t.id=e),Array.isArray(t))for(var i=0;i<t.length;i++)a(t[i],e);else{"string"==typeof t.$ref&&(t.$ref=s(e,t.$ref));for(var n in t)"enum"!==n&&a(t[n],e)}}function h(t){t=t||"en";var e=A[t];return function(t){var i=e[t.code]||R[t.code];if("string"!=typeof i)return"Unknown error code "+t.code+": "+JSON.stringify(t.messageParams);var n=t.params;return i.replace(/\{([^{}]*)\}/g,function(t,e){var i=n[e];return"string"==typeof i||"number"==typeof i?i:t})}}function l(t,e,i,n,o){if(Error.call(this),void 0===t)throw new Error("No error code supplied: "+n);this.message="",this.params=e,this.code=t,this.dataPath=i||"",this.schemaPath=n||"",this.subErrors=o||null;var s=new Error(this.message);if(this.stack=s.stack||s.stacktrace,!this.stack)try{throw s}catch(s){this.stack=s.stack||s.stacktrace}}function d(t,e){if(e.substring(0,t.length)===t){var i=e.substring(t.length);if(e.length>0&&"/"===e.charAt(t.length-1)||"#"===i.charAt(0)||"?"===i.charAt(0))return!0}return!1}function c(t){var e,i,n=new f,o={setErrorReporter:function(t){return"string"==typeof t?this.language(t):(i=t,!0)},addFormat:function(){n.addFormat.apply(n,arguments)},language:function(t){return t?(A[t]||(t=t.split("-")[0]),!!A[t]&&(e=t,t)):e},addLanguage:function(t,e){var i;for(i in v)e[i]&&!e[v[i]]&&(e[v[i]]=e[i]);var n=t.split("-")[0];if(A[n]){A[t]=Object.create(A[n]);for(i in e)"undefined"==typeof A[n][i]&&(A[n][i]=e[i]),A[t][i]=e[i]}else A[t]=e,A[n]=e;return this},freshApi:function(t){var e=c();return t&&e.language(t),e},validate:function(t,o,s,r){var a=h(e),l=i?function(t,e,n){return i(t,e,n)||a(t,e,n)}:a,d=new f(n,(!1),l,s,r);"string"==typeof o&&(o={$ref:o}),d.addSchema("",o);var c=d.validateAll(t,o,null,null,"");return!c&&r&&(c=d.banUnknownProperties(t,o)),this.error=c,this.missing=d.missing,this.valid=null===c,this.valid},validateResult:function(){var t={};return this.validate.apply(t,arguments),t},validateMultiple:function(t,o,s,r){var a=h(e),l=i?function(t,e,n){return i(t,e,n)||a(t,e,n)}:a,d=new f(n,(!0),l,s,r);"string"==typeof o&&(o={$ref:o}),d.addSchema("",o),d.validateAll(t,o,null,null,""),r&&d.banUnknownProperties(t,o);var c={};return c.errors=d.errors,c.missing=d.missing,c.valid=0===c.errors.length,c},addSchema:function(){return n.addSchema.apply(n,arguments)},getSchema:function(){return n.getSchema.apply(n,arguments)},getSchemaMap:function(){return n.getSchemaMap.apply(n,arguments)},getSchemaUris:function(){return n.getSchemaUris.apply(n,arguments)},getMissingUris:function(){return n.getMissingUris.apply(n,arguments)},dropSchemas:function(){n.dropSchemas.apply(n,arguments)},defineKeyword:function(){n.defineKeyword.apply(n,arguments)},defineError:function(t,e,i){if("string"!=typeof t||!/^[A-Z]+(_[A-Z]+)*$/.test(t))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof e||e%1!==0||e<1e4)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof v[t])throw new Error("Error already defined: "+t+" as "+v[t]);if("undefined"!=typeof w[e])throw new Error("Error code already used: "+w[e]+" as "+e);v[t]=e,w[e]=t,R[t]=R[e]=i;for(var n in A){var o=A[n];o[t]&&(o[e]=o[e]||o[t])}},reset:function(){n.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:a,resolveUrl:s,getDocumentUri:r,errorCodes:v};return o.language(t||"en"),o}Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var s=[];for(var r in o)t.call(o,r)&&s.push(r);if(e)for(var a=0;a<n;a++)t.call(o,i[a])&&s.push(i[a]);return s}}()),Object.create||(Object.create=function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return t.prototype=e,new t}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var o=n>=0?n:Math.max(i-Math.abs(n),0);o<i;o++)if(o in e&&e[o]===t)return o;return-1}),Object.isFrozen||(Object.isFrozen=function(t){for(var e="tv4_test_frozen_key";t.hasOwnProperty(e);)e+=Math.random();try{return t[e]=!0,delete t[e],!1}catch(i){return!0}});var u={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},g={"*":!0};i.prototype={toString:function(){return this.template},fillFromObject:function(t){return this.fill(function(e){return t[e]})}};var f=function(t,e,i,n,o){if(this.missing=[],this.missingMap={},this.formatValidators=t?Object.create(t.formatValidators):{},this.schemas=t?Object.create(t.schemas):{},this.collectMultiple=e,this.errors=[],this.handleError=e?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),o&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=i||h("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},t)for(var s in t.definedKeywords)this.definedKeywords[s]=t.definedKeywords[s].slice(0)};f.prototype.defineKeyword=function(t,e){this.definedKeywords[t]=this.definedKeywords[t]||[],this.definedKeywords[t].push(e)},f.prototype.createError=function(t,e,i,n,o,s,r){var a=new l(t,e,i,n,o);return a.message=this.errorReporter(a,s,r),a},f.prototype.returnError=function(t){return t},f.prototype.collectError=function(t){return t&&this.errors.push(t),null},f.prototype.prefixErrors=function(t,e,i){for(var n=t;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(e,i);return this},f.prototype.banUnknownProperties=function(t,e){for(var i in this.unknownPropertyPaths){var n=this.createError(v.UNKNOWN_PROPERTY,{path:i},i,"",null,t,e),o=this.handleError(n);if(o)return o}return null},f.prototype.addFormat=function(t,e){if("object"==typeof t){for(var i in t)this.addFormat(i,t[i]);return this}this.formatValidators[t]=e},f.prototype.resolveRefs=function(t,e){if(void 0!==t.$ref){if(e=e||{},e[t.$ref])return this.createError(v.CIRCULAR_REFERENCE,{urls:Object.keys(e).join(", ")},"","",null,void 0,t);e[t.$ref]=!0,t=this.getSchema(t.$ref,e)}return t},f.prototype.getSchema=function(t,e){var i;if(void 0!==this.schemas[t])return i=this.schemas[t],this.resolveRefs(i,e);var n=t,o="";if(t.indexOf("#")!==-1&&(o=t.substring(t.indexOf("#")+1),n=t.substring(0,t.indexOf("#"))),"object"==typeof this.schemas[n]){i=this.schemas[n];var s=decodeURIComponent(o);if(""===s)return this.resolveRefs(i,e);if("/"!==s.charAt(0))return;for(var r=s.split("/").slice(1),a=0;a<r.length;a++){var h=r[a].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===i[h]){i=void 0;break}i=i[h]}if(void 0!==i)return this.resolveRefs(i,e)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},f.prototype.searchSchemas=function(t,e){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.searchSchemas(t[i],e);else if(t&&"object"==typeof t){"string"==typeof t.id&&d(e,t.id)&&void 0===this.schemas[t.id]&&(this.schemas[t.id]=t);for(var n in t)if("enum"!==n)if("object"==typeof t[n])this.searchSchemas(t[n],e);else if("$ref"===n){var o=r(t[n]);o&&void 0===this.schemas[o]&&void 0===this.missingMap[o]&&(this.missingMap[o]=o)}}},f.prototype.addSchema=function(t,e){if("string"!=typeof t||"undefined"==typeof e){if("object"!=typeof t||"string"!=typeof t.id)return;e=t,t=e.id}t===r(t)+"#"&&(t=r(t)),this.schemas[t]=e,delete this.missingMap[t],a(e,t),this.searchSchemas(e,t)},f.prototype.getSchemaMap=function(){var t={};for(var e in this.schemas)t[e]=this.schemas[e];return t},f.prototype.getSchemaUris=function(t){var e=[];for(var i in this.schemas)t&&!t.test(i)||e.push(i);return e},f.prototype.getMissingUris=function(t){var e=[];for(var i in this.missingMap)t&&!t.test(i)||e.push(i);return e},f.prototype.dropSchemas=function(){this.schemas={},this.reset()},f.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},f.prototype.validateAll=function(t,e,i,n,o){var s;if(e=this.resolveRefs(e),!e)return null;if(e instanceof l)return this.errors.push(e),e;var r,a=this.errors.length,h=null,d=null;if(this.checkRecursive&&t&&"object"==typeof t){if(s=!this.scanned.length,t[this.validatedSchemasKey]){var c=t[this.validatedSchemasKey].indexOf(e);if(c!==-1)return this.errors=this.errors.concat(t[this.validationErrorsKey][c]),null}if(Object.isFrozen(t)&&(r=this.scannedFrozen.indexOf(t),r!==-1)){var u=this.scannedFrozenSchemas[r].indexOf(e);if(u!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[r][u]),null}if(this.scanned.push(t),Object.isFrozen(t))r===-1&&(r=this.scannedFrozen.length,this.scannedFrozen.push(t),this.scannedFrozenSchemas.push([])),h=this.scannedFrozenSchemas[r].length,this.scannedFrozenSchemas[r][h]=e,this.scannedFrozenValidationErrors[r][h]=[];else{if(!t[this.validatedSchemasKey])try{Object.defineProperty(t,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(t,this.validationErrorsKey,{value:[],configurable:!0})}catch(g){t[this.validatedSchemasKey]=[],t[this.validationErrorsKey]=[]}d=t[this.validatedSchemasKey].length,t[this.validatedSchemasKey][d]=e,t[this.validationErrorsKey][d]=[]}}var f=this.errors.length,p=this.validateBasic(t,e,o)||this.validateNumeric(t,e,o)||this.validateString(t,e,o)||this.validateArray(t,e,o)||this.validateObject(t,e,o)||this.validateCombinations(t,e,o)||this.validateHypermedia(t,e,o)||this.validateFormat(t,e,o)||this.validateDefinedKeywords(t,e,o)||null;if(s){for(;this.scanned.length;){var m=this.scanned.pop();delete m[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(p||f!==this.errors.length)for(;i&&i.length||n&&n.length;){var v=i&&i.length?""+i.pop():null,w=n&&n.length?""+n.pop():null;p&&(p=p.prefixWith(v,w)),this.prefixErrors(f,v,w)}return null!==h?this.scannedFrozenValidationErrors[r][h]=this.errors.slice(a):null!==d&&(t[this.validationErrorsKey][d]=this.errors.slice(a)),this.handleError(p)},f.prototype.validateFormat=function(t,e){if("string"!=typeof e.format||!this.formatValidators[e.format])return null;var i=this.formatValidators[e.format].call(null,t,e);return"string"==typeof i||"number"==typeof i?this.createError(v.FORMAT_CUSTOM,{message:i},"","/format",null,t,e):i&&"object"==typeof i?this.createError(v.FORMAT_CUSTOM,{message:i.message||"?"},i.dataPath||"",i.schemaPath||"/format",null,t,e):null},f.prototype.validateDefinedKeywords=function(t,e,i){for(var n in this.definedKeywords)if("undefined"!=typeof e[n])for(var o=this.definedKeywords[n],s=0;s<o.length;s++){var r=o[s],a=r(t,e[n],e,i);if("string"==typeof a||"number"==typeof a)return this.createError(v.KEYWORD_CUSTOM,{key:n,message:a},"","",null,t,e).prefixWith(null,n);if(a&&"object"==typeof a){var h=a.code;if("string"==typeof h){if(!v[h])throw new Error("Undefined error code (use defineError): "+h);h=v[h]}else"number"!=typeof h&&(h=v.KEYWORD_CUSTOM);var l="object"==typeof a.message?a.message:{key:n,message:a.message||"?"},d=a.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(h,l,a.dataPath||null,d,null,t,e)}}return null},f.prototype.validateBasic=function(t,e,i){var n;return(n=this.validateType(t,e,i))?n.prefixWith(null,"type"):(n=this.validateEnum(t,e,i))?n.prefixWith(null,"type"):null},f.prototype.validateType=function(t,e){if(void 0===e.type)return null;var i=typeof t;null===t?i="null":Array.isArray(t)&&(i="array");var n=e.type;Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var s=n[o];if(s===i||"integer"===s&&"number"===i&&t%1===0)return null}return this.createError(v.INVALID_TYPE,{type:i,expected:n.join("/")},"","",null,t,e)},f.prototype.validateEnum=function(t,e){if(void 0===e["enum"])return null;for(var i=0;i<e["enum"].length;i++){var o=e["enum"][i];if(n(t,o))return null}return this.createError(v.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(t):t},"","",null,t,e)},f.prototype.validateNumeric=function(t,e,i){return this.validateMultipleOf(t,e,i)||this.validateMinMax(t,e,i)||this.validateNaN(t,e,i)||null};var p=Math.pow(2,-51),m=1-p;f.prototype.validateMultipleOf=function(t,e){var i=e.multipleOf||e.divisibleBy;if(void 0===i)return null;if("number"==typeof t){var n=t/i%1;if(n>=p&&n<m)return this.createError(v.NUMBER_MULTIPLE_OF,{value:t,multipleOf:i},"","",null,t,e)}return null},f.prototype.validateMinMax=function(t,e){if("number"!=typeof t)return null;if(void 0!==e.minimum){if(t<e.minimum)return this.createError(v.NUMBER_MINIMUM,{value:t,minimum:e.minimum},"","/minimum",null,t,e);if(e.exclusiveMinimum&&t===e.minimum)return this.createError(v.NUMBER_MINIMUM_EXCLUSIVE,{value:t,minimum:e.minimum},"","/exclusiveMinimum",null,t,e);
}if(void 0!==e.maximum){if(t>e.maximum)return this.createError(v.NUMBER_MAXIMUM,{value:t,maximum:e.maximum},"","/maximum",null,t,e);if(e.exclusiveMaximum&&t===e.maximum)return this.createError(v.NUMBER_MAXIMUM_EXCLUSIVE,{value:t,maximum:e.maximum},"","/exclusiveMaximum",null,t,e)}return null},f.prototype.validateNaN=function(t,e){return"number"!=typeof t?null:isNaN(t)===!0||t===1/0||t===-(1/0)?this.createError(v.NUMBER_NOT_A_NUMBER,{value:t},"","/type",null,t,e):null},f.prototype.validateString=function(t,e,i){return this.validateStringLength(t,e,i)||this.validateStringPattern(t,e,i)||null},f.prototype.validateStringLength=function(t,e){return"string"!=typeof t?null:void 0!==e.minLength&&t.length<e.minLength?this.createError(v.STRING_LENGTH_SHORT,{length:t.length,minimum:e.minLength},"","/minLength",null,t,e):void 0!==e.maxLength&&t.length>e.maxLength?this.createError(v.STRING_LENGTH_LONG,{length:t.length,maximum:e.maxLength},"","/maxLength",null,t,e):null},f.prototype.validateStringPattern=function(t,e){if("string"!=typeof t||"string"!=typeof e.pattern&&!(e.pattern instanceof RegExp))return null;var i;if(e.pattern instanceof RegExp)i=e.pattern;else{var n,o="",s=e.pattern.match(/^\/(.+)\/([img]*)$/);s?(n=s[1],o=s[2]):n=e.pattern,i=new RegExp(n,o)}return i.test(t)?null:this.createError(v.STRING_PATTERN,{pattern:e.pattern},"","/pattern",null,t,e)},f.prototype.validateArray=function(t,e,i){return Array.isArray(t)?this.validateArrayLength(t,e,i)||this.validateArrayUniqueItems(t,e,i)||this.validateArrayItems(t,e,i)||null:null},f.prototype.validateArrayLength=function(t,e){var i;return void 0!==e.minItems&&t.length<e.minItems&&(i=this.createError(v.ARRAY_LENGTH_SHORT,{length:t.length,minimum:e.minItems},"","/minItems",null,t,e),this.handleError(i))?i:void 0!==e.maxItems&&t.length>e.maxItems&&(i=this.createError(v.ARRAY_LENGTH_LONG,{length:t.length,maximum:e.maxItems},"","/maxItems",null,t,e),this.handleError(i))?i:null},f.prototype.validateArrayUniqueItems=function(t,e){if(e.uniqueItems)for(var i=0;i<t.length;i++)for(var o=i+1;o<t.length;o++)if(n(t[i],t[o])){var s=this.createError(v.ARRAY_UNIQUE,{match1:i,match2:o},"","/uniqueItems",null,t,e);if(this.handleError(s))return s}return null},f.prototype.validateArrayItems=function(t,e,i){if(void 0===e.items)return null;var n,o;if(Array.isArray(e.items)){for(o=0;o<t.length;o++)if(o<e.items.length){if(n=this.validateAll(t[o],e.items[o],[o],["items",o],i+"/"+o))return n}else if(void 0!==e.additionalItems)if("boolean"==typeof e.additionalItems){if(!e.additionalItems&&(n=this.createError(v.ARRAY_ADDITIONAL_ITEMS,{},"/"+o,"/additionalItems",null,t,e),this.handleError(n)))return n}else if(n=this.validateAll(t[o],e.additionalItems,[o],["additionalItems"],i+"/"+o))return n}else for(o=0;o<t.length;o++)if(n=this.validateAll(t[o],e.items,[o],["items"],i+"/"+o))return n;return null},f.prototype.validateObject=function(t,e,i){return"object"!=typeof t||null===t||Array.isArray(t)?null:this.validateObjectMinMaxProperties(t,e,i)||this.validateObjectRequiredProperties(t,e,i)||this.validateObjectProperties(t,e,i)||this.validateObjectDependencies(t,e,i)||null},f.prototype.validateObjectMinMaxProperties=function(t,e){var i,n=Object.keys(t);return void 0!==e.minProperties&&n.length<e.minProperties&&(i=this.createError(v.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:e.minProperties},"","/minProperties",null,t,e),this.handleError(i))?i:void 0!==e.maxProperties&&n.length>e.maxProperties&&(i=this.createError(v.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:e.maxProperties},"","/maxProperties",null,t,e),this.handleError(i))?i:null},f.prototype.validateObjectRequiredProperties=function(t,e){if(void 0!==e.required)for(var i=0;i<e.required.length;i++){var n=e.required[i];if(void 0===t[n]){var o=this.createError(v.OBJECT_REQUIRED,{key:n},"","/required/"+i,null,t,e);if(this.handleError(o))return o}}return null},f.prototype.validateObjectProperties=function(t,e,i){var n;for(var o in t){var s=i+"/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),r=!1;if(void 0!==e.properties&&void 0!==e.properties[o]&&(r=!0,n=this.validateAll(t[o],e.properties[o],[o],["properties",o],s)))return n;if(void 0!==e.patternProperties)for(var a in e.patternProperties){var h=new RegExp(a);if(h.test(o)&&(r=!0,n=this.validateAll(t[o],e.patternProperties[a],[o],["patternProperties",a],s)))return n}if(r)this.trackUnknownProperties&&(this.knownPropertyPaths[s]=!0,delete this.unknownPropertyPaths[s]);else if(void 0!==e.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[s]=!0,delete this.unknownPropertyPaths[s]),"boolean"==typeof e.additionalProperties){if(!e.additionalProperties&&(n=this.createError(v.OBJECT_ADDITIONAL_PROPERTIES,{key:o},"","/additionalProperties",null,t,e).prefixWith(o,null),this.handleError(n)))return n}else if(n=this.validateAll(t[o],e.additionalProperties,[o],["additionalProperties"],s))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[s]&&(this.unknownPropertyPaths[s]=!0)}return null},f.prototype.validateObjectDependencies=function(t,e,i){var n;if(void 0!==e.dependencies)for(var o in e.dependencies)if(void 0!==t[o]){var s=e.dependencies[o];if("string"==typeof s){if(void 0===t[s]&&(n=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:o,missing:s},"","",null,t,e).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(s))for(var r=0;r<s.length;r++){var a=s[r];if(void 0===t[a]&&(n=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:o,missing:a},"","/"+r,null,t,e).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(t,s,[],["dependencies",o],i))return n}return null},f.prototype.validateCombinations=function(t,e,i){return this.validateAllOf(t,e,i)||this.validateAnyOf(t,e,i)||this.validateOneOf(t,e,i)||this.validateNot(t,e,i)||null},f.prototype.validateAllOf=function(t,e,i){if(void 0===e.allOf)return null;for(var n,o=0;o<e.allOf.length;o++){var s=e.allOf[o];if(n=this.validateAll(t,s,[],["allOf",o],i))return n}return null},f.prototype.validateAnyOf=function(t,e,i){if(void 0===e.anyOf)return null;var n,o,s=[],r=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var a=!0,h=0;h<e.anyOf.length;h++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var l=e.anyOf[h],d=this.errors.length,c=this.validateAll(t,l,[],["anyOf",h],i);if(null===c&&d===this.errors.length){if(this.errors=this.errors.slice(0,r),this.trackUnknownProperties){for(var u in this.knownPropertyPaths)o[u]=!0,delete n[u];for(var g in this.unknownPropertyPaths)o[g]||(n[g]=!0);a=!1;continue}return null}c&&s.push(c.prefixWith(null,""+h).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),a?(s=s.concat(this.errors.slice(r)),this.errors=this.errors.slice(0,r),this.createError(v.ANY_OF_MISSING,{},"","/anyOf",s,t,e)):void 0},f.prototype.validateOneOf=function(t,e,i){if(void 0===e.oneOf)return null;var n,o,s=null,r=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var h=0;h<e.oneOf.length;h++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var l=e.oneOf[h],d=this.errors.length,c=this.validateAll(t,l,[],["oneOf",h],i);if(null===c&&d===this.errors.length){if(null!==s)return this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MULTIPLE,{index1:s,index2:h},"","/oneOf",null,t,e);if(s=h,this.trackUnknownProperties){for(var u in this.knownPropertyPaths)o[u]=!0,delete n[u];for(var g in this.unknownPropertyPaths)o[g]||(n[g]=!0)}}else c&&r.push(c)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===s?(r=r.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MISSING,{},"","/oneOf",r,t,e)):(this.errors=this.errors.slice(0,a),null)},f.prototype.validateNot=function(t,e,i){if(void 0===e.not)return null;var n,o,s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var r=this.validateAll(t,e.not,null,null,i),a=this.errors.slice(s);return this.errors=this.errors.slice(0,s),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===r&&0===a.length?this.createError(v.NOT_PASSED,{},"","/not",null,t,e):null},f.prototype.validateHypermedia=function(t,e,n){if(!e.links)return null;for(var o,s=0;s<e.links.length;s++){var r=e.links[s];if("describedby"===r.rel){for(var a=new i(r.href),h=!0,l=0;l<a.varNames.length;l++)if(!(a.varNames[l]in t)){h=!1;break}if(h){var d=a.fillFromObject(t),c={$ref:d};if(o=this.validateAll(t,c,[],["links",s],n))return o}}}};var v={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},w={};for(var y in v)w[v[y]]=y;var R={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="ValidationError",l.prototype.prefixWith=function(t,e){if(null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+t+this.dataPath),null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+e+this.schemaPath),null!==this.subErrors)for(var i=0;i<this.subErrors.length;i++)this.subErrors[i].prefixWith(t,e);return this};var A={},b=c();return b.addLanguage("en-gb",R),b.tv4=b,b});var WaveformPlaylist=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="/webworkers/",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?(0,d["default"])():arguments[1];if(void 0===t.container)throw new Error("DOM element container must be given.");var i=new(window.AudioContext||window.webkitAudioContext),n={ac:i,sampleRate:i.sampleRate,samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",timescale:!1,controls:{show:!1,width:150},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,state:"cursor",zoomLevels:[512,1024,2048,4096]},o=(0,r["default"])(n,t),s=o.zoomLevels.indexOf(o.samplesPerPixel);if(s===-1)throw new Error("initial samplesPerPixel must be included in array zoomLevels");var a=new u["default"];a.setSampleRate(o.sampleRate),a.setSamplesPerPixel(o.samplesPerPixel),a.setAudioContext(o.ac),a.setEventEmitter(e),a.setUpEventEmitter(),a.setTimeSelection(0,0),a.setState(o.state),a.setControlOptions(o.controls),a.setWaveHeight(o.waveHeight),a.setColors(o.colors),a.setZoomLevels(o.zoomLevels),a.setZoomIndex(s),a.setMono(o.mono),a.setShowTimeScale(o.timescale),a.setSeekStyle(o.seekStyle);var l=a.render(),c=(0,h["default"])(l);return o.container.appendChild(c),a.tree=l,a.rootNode=c,a}Object.defineProperty(e,"__esModule",{value:!0}),e.init=o;var s=i(1),r=n(s),a=i(4),h=n(a),l=i(17),d=n(l),c=i(32),u=n(c)},function(t,e,i){function n(t,e,i){var n=t[e];b.call(t,e)&&d(n,i)&&(void 0!==i||e in t)||(t[e]=i)}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e,i,o){i||(i={});for(var s=-1,r=e.length;++s<r;){var a=e[s],h=o?o(i[a],t[a],a,i,t):t[a];n(i,a,h)}return i}function r(t){return m(function(e,i){var n=-1,o=i.length,s=o>1?i[o-1]:void 0,r=o>2?i[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,r&&h(i[0],i[1],r)&&(s=o<3?void 0:s,o=1),e=Object(e);++n<o;){var a=i[n];a&&t(e,a,n,s)}return e})}function a(t,e){return e=null==e?v:e,!!e&&("number"==typeof t||R.test(t))&&t>-1&&t%1==0&&t<e}function h(t,e,i){if(!f(i))return!1;var n=typeof e;return!!("number"==n?c(i)&&a(e,i.length):"string"==n&&e in i)&&d(i[e],t)}function l(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||A;return t===i}function d(t,e){return t===e||t!==t&&e!==e}function c(t){return null!=t&&g(k(t))&&!u(t)}function u(t){var e=f(t)?x.call(t):"";return e==w||e==y}function g(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=v}function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var p=i(2),m=i(3),v=9007199254740991,w="[object Function]",y="[object GeneratorFunction]",R=/^(?:0|[1-9]\d*)$/,A=Object.prototype,b=A.hasOwnProperty,x=A.toString,L=A.propertyIsEnumerable,C=!L.call({valueOf:1},"valueOf"),k=o("length"),E=r(function(t,e){if(C||l(e)||c(e))return void s(e,p(e),t);for(var i in e)b.call(e,i)&&n(t,i,e[i])});t.exports=E},function(t,e){function i(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function n(t,e){return k.call(t,e)||"object"==typeof t&&e in t&&null===r(t)}function o(t){return S(Object(t))}function s(t){return function(e){return null==e?void 0:e[t]}}function r(t){return M(Object(t))}function a(t){var e=t?t.length:void 0;return f(e)&&(T(t)||v(t)||d(t))?i(e,String):null}function h(t,e){return e=null==e?y:e,!!e&&("number"==typeof t||L.test(t))&&t>-1&&t%1==0&&t<e}function l(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||C;return t===i}function d(t){return u(t)&&k.call(t,"callee")&&(!B.call(t,"callee")||E.call(t)==R)}function c(t){return null!=t&&f(F(t))&&!g(t)}function u(t){return m(t)&&c(t)}function g(t){var e=p(t)?E.call(t):"";return e==A||e==b}function f(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=y}function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){return!!t&&"object"==typeof t}function v(t){return"string"==typeof t||!T(t)&&m(t)&&E.call(t)==x}function w(t){var e=l(t);if(!e&&!c(t))return o(t);var i=a(t),s=!!i,r=i||[],d=r.length;for(var u in t)!n(t,u)||s&&("length"==u||h(u,d))||e&&"constructor"==u||r.push(u);return r}var y=9007199254740991,R="[object Arguments]",A="[object Function]",b="[object GeneratorFunction]",x="[object String]",L=/^(?:0|[1-9]\d*)$/,C=Object.prototype,k=C.hasOwnProperty,E=C.toString,B=C.propertyIsEnumerable,M=Object.getPrototypeOf,S=Object.keys,F=s("length"),T=Array.isArray;t.exports=w},function(t,e){function i(t,e,i){var n=i.length;switch(n){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function n(t,e){if("function"!=typeof t)throw new TypeError(c);return e=C(void 0===e?t.length-1:l(e),0),function(){for(var n=arguments,o=-1,s=C(n.length-e,0),r=Array(s);++o<s;)r[o]=n[e+o];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,n[0],r);case 2:return t.call(this,n[0],n[1],r)}var a=Array(e+1);for(o=-1;++o<e;)a[o]=n[o];return a[e]=r,i(t,this,a)}}function o(t){var e=s(t)?L.call(t):"";return e==p||e==m}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){return!!t&&"object"==typeof t}function a(t){return"symbol"==typeof t||r(t)&&L.call(t)==v}function h(t){if(!t)return 0===t?t:0;if(t=d(t),t===u||t===-u){var e=t<0?-1:1;return e*g}return t===t?t:0}function l(t){var e=h(t),i=e%1;return e===e?i?e-i:e:0}function d(t){if("number"==typeof t)return t;if(a(t))return f;if(s(t)){var e=o(t.valueOf)?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(w,"");var i=R.test(t);return i||A.test(t)?b(t.slice(2),i?2:8):y.test(t)?f:+t}var c="Expected a function",u=1/0,g=1.7976931348623157e308,f=NaN,p="[object Function]",m="[object GeneratorFunction]",v="[object Symbol]",w=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,A=/^0o[0-7]+$/i,b=parseInt,x=Object.prototype,L=x.toString,C=Math.max;t.exports=n},function(t,e,i){var n=i(5);t.exports=n},function(t,e,i){function n(t,e){var i=e?e.document||o:o,d=e?e.warn:null;if(t=l(t).a,h(t))return t.init();if(a(t))return i.createTextNode(t.text);if(!r(t))return d&&d("Item is not a valid virtual dom node",t),null;var c=null===t.namespace?i.createElement(t.tagName):i.createElementNS(t.namespace,t.tagName),u=t.properties;s(c,u);for(var g=t.children,f=0;f<g.length;f++){var p=n(g[f],e);p&&c.appendChild(p)}return c}var o=i(6),s=i(8),r=i(11),a=i(13),h=i(14),l=i(15);t.exports=n},function(t,e,i){(function(e){var n="undefined"!=typeof e?e:"undefined"!=typeof window?window:{},o=i(7);if("undefined"!=typeof document)t.exports=document;else{var s=n["__GLOBAL_DOCUMENT_CACHE@4"];s||(s=n["__GLOBAL_DOCUMENT_CACHE@4"]=o),t.exports=s}}).call(e,function(){return this}())},function(t,e){},function(t,e,i){function n(t,e,i){for(var n in e){var r=e[n];void 0===r?o(t,n,r,i):h(r)?(o(t,n,r,i),r.hook&&r.hook(t,n,i?i[n]:void 0)):a(r)?s(t,e,i,n,r):t[n]=r}}function o(t,e,i,n){if(n){var o=n[e];if(h(o))o.unhook&&o.unhook(t,e,i);else if("attributes"===e)for(var s in o)t.removeAttribute(s);else if("style"===e)for(var r in o)t.style[r]="";else"string"==typeof o?t[e]="":t[e]=null}}function s(t,e,i,n,o){var s=i?i[n]:void 0;if("attributes"!==n){if(s&&a(s)&&r(s)!==r(o))return void(t[n]=o);a(t[n])||(t[n]={});var h="style"===n?"":void 0;for(var l in o){var d=o[l];t[n][l]=void 0===d?h:d}}else for(var c in o){var u=o[c];void 0===u?t.removeAttribute(c):t.setAttribute(c,u)}}function r(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}var a=i(9),h=i(10);t.exports=n},function(t,e){"use strict";t.exports=function(t){return"object"==typeof t&&null!==t}},function(t,e){function i(t){return t&&("function"==typeof t.hook&&!t.hasOwnProperty("hook")||"function"==typeof t.unhook&&!t.hasOwnProperty("unhook"))}t.exports=i},function(t,e,i){function n(t){return t&&"VirtualNode"===t.type&&t.version===o}var o=i(12);t.exports=n},function(t,e){t.exports="2"},function(t,e,i){function n(t){return t&&"VirtualText"===t.type&&t.version===o}var o=i(12);t.exports=n},function(t,e){function i(t){return t&&"Widget"===t.type}t.exports=i},function(t,e,i){function n(t,e){var i=t,n=e;return h(e)&&(n=o(e,t)),h(t)&&(i=o(t,null)),{a:i,b:n}}function o(t,e){var i=t.vnode;if(i||(i=t.vnode=t.render(e)),!(s(i)||r(i)||a(i)))throw new Error("thunk did not return a valid node");return i}var s=i(11),r=i(13),a=i(14),h=i(16);t.exports=n},function(t,e){function i(t){return t&&"Thunk"===t.type}t.exports=i},function(t,e,i){"use strict";var n,o,s,r,a,h,l,d=i(18),c=i(31),u=Function.prototype.apply,g=Function.prototype.call,f=Object.create,p=Object.defineProperty,m=Object.defineProperties,v=Object.prototype.hasOwnProperty,w={configurable:!0,enumerable:!1,writable:!0};n=function(t,e){var i;return c(e),v.call(this,"__ee__")?i=this.__ee__:(i=w.value=f(null),p(this,"__ee__",w),w.value=null),i[t]?"object"==typeof i[t]?i[t].push(e):i[t]=[i[t],e]:i[t]=e,this},o=function(t,e){var i,o;return c(e),o=this,n.call(this,t,i=function(){s.call(o,t,i),u.call(e,this,arguments)}),i.__eeOnceListener__=e,this},s=function(t,e){var i,n,o,s;if(c(e),!v.call(this,"__ee__"))return this;if(i=this.__ee__,!i[t])return this;if(n=i[t],"object"==typeof n)for(s=0;o=n[s];++s)o!==e&&o.__eeOnceListener__!==e||(2===n.length?i[t]=n[s?0:1]:n.splice(s,1));else n!==e&&n.__eeOnceListener__!==e||delete i[t];return this},r=function(t){var e,i,n,o,s;if(v.call(this,"__ee__")&&(o=this.__ee__[t]))if("object"==typeof o){for(i=arguments.length,s=new Array(i-1),e=1;e<i;++e)s[e-1]=arguments[e];for(o=o.slice(),e=0;n=o[e];++e)u.call(n,this,s)}else switch(arguments.length){case 1:g.call(o,this);break;case 2:g.call(o,this,arguments[1]);break;case 3:g.call(o,this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),e=1;e<i;++e)s[e-1]=arguments[e];u.call(o,this,s)}},a={on:n,once:o,off:s,emit:r},h={on:d(n),once:d(o),off:d(s),emit:d(r)},l=m({},h),t.exports=e=function(t){return null==t?f(l):m(Object(t),h)},e.methods=a},function(t,e,i){"use strict";var n,o=i(19),s=i(26),r=i(27),a=i(28);n=t.exports=function(t,e){var i,n,r,h,l;return arguments.length<2||"string"!=typeof t?(h=e,e=t,t=null):h=arguments[2],null==t?(i=r=!0,n=!1):(i=a.call(t,"c"),n=a.call(t,"e"),r=a.call(t,"w")),l={value:e,configurable:i,enumerable:n,writable:r},h?o(s(h),l):l},n.gs=function(t,e,i){var n,h,l,d;return"string"!=typeof t?(l=i,i=e,e=t,t=null):l=arguments[3],null==e?e=void 0:r(e)?null==i?i=void 0:r(i)||(l=i,i=void 0):(l=e,e=i=void 0),null==t?(n=!0,h=!1):(n=a.call(t,"c"),h=a.call(t,"e")),d={get:e,set:i,configurable:n,enumerable:h},l?o(s(l),d):d}},function(t,e,i){"use strict";t.exports=i(20)()?Object.assign:i(21)},function(t,e){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,i){"use strict";var n=i(22),o=i(25),s=Math.max;t.exports=function(t,e){var i,r,a,h=s(arguments.length,2);for(t=Object(o(t)),a=function(n){try{t[n]=e[n]}catch(o){i||(i=o)}},r=1;r<h;++r)e=arguments[r],n(e).forEach(a);if(void 0!==i)throw i;return t}},function(t,e,i){"use strict";t.exports=i(23)()?Object.keys:i(24)},function(t,e){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e){"use strict";var i=Object.keys;t.exports=function(t){return i(null==t?t:Object(t))}},function(t,e){"use strict";t.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},function(t,e){"use strict";var i=Array.prototype.forEach,n=Object.create,o=function(t,e){var i;for(i in t)e[i]=t[i]};t.exports=function(t){var e=n(null);return i.call(arguments,function(t){null!=t&&o(Object(t),e)}),e}},function(t,e){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,i){"use strict";t.exports=i(29)()?String.prototype.contains:i(30)},function(t,e){"use strict";var i="razdwatrzy";t.exports=function(){return"function"==typeof i.contains&&(i.contains("dwa")===!0&&i.contains("foo")===!1)}},function(t,e){"use strict";var i=String.prototype.indexOf;t.exports=function(t){return i.call(this,t,arguments[1])>-1}},function(t,e){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(33),a=n(r),h=i(37),l=n(h),d=i(49),c=n(d),u=i(53),g=n(u),f=i(58),p=i(59),m=n(p),v=i(63),w=n(v),y=i(64),R=n(y),A=i(66),b=n(A),x=i(86),L=n(x),C=i(87),k=n(C),E=i(88),B=n(E),M=function(){function t(){o(this,t),this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.showTimescale=!1,this.fadeType="logarithmic",this.masterGain=1}return s(t,[{key:"initRecorder",value:function(t){var e=this;if(t instanceof LocalMediaStream!=!0)throw new Error("Must provide a LocalMediaStream to record from");this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onstart=function(t){var i=new b["default"];i.setName("Recording"),i.setEnabledStates(),i.setEventEmitter(e.ee),e.recordingTrack=i,e.tracks.push(i),e.chunks=[]},this.mediaRecorder.ondataavailable=function(t){e.chunks.push(t.data);var i=new Blob(e.chunks,{type:"audio/ogg; codecs=opus"}),n=m["default"].createLoader(i,e.ac);n.load().then(function(t){e.recorderWorker.postMessage({samples:t.getChannelData(0),samplesPerPixel:e.samplesPerPixel}),e.recordingTrack.setCues(0,t.duration),e.recordingTrack.setBuffer(t),e.recordingTrack.setPlayout(new L["default"](e.ac,t)),e.adjustDuration()})},this.recorderWorker=new k["default"],this.recorderWorker.onmessage=function(t){e.recordingTrack.setPeaks(t.data),e.draw(e.render())}}},{key:"setShowTimeScale",value:function(t){this.showTimescale=t}},{key:"setMono",value:function(t){this.mono=t}},{key:"setSeekStyle",value:function(t){this.seekStyle=t}},{key:"getSeekStyle",value:function(){return this.seekStyle}},{key:"setSampleRate",value:function(t){this.sampleRate=t}},{key:"setSamplesPerPixel",value:function(t){this.samplesPerPixel=t}},{key:"setAudioContext",value:function(t){this.ac=t}},{key:"setControlOptions",value:function(t){this.controls=t}},{key:"setWaveHeight",value:function(t){this.waveHeight=t}},{key:"setColors",value:function(t){this.colors=t}},{key:"setEventEmitter",value:function(t){this.ee=t}},{key:"getEventEmitter",value:function(){return this.ee}},{key:"setUpEventEmitter",value:function(){var t=this,e=this.ee;e.on("select",function(e,i,n){t.isPlaying()?(t.lastSeeked=e,t.pausedAt=void 0,t.restartPlayFrom(e)):(t.seek(e,i,n),t.ee.emit("timeupdate",e),t.draw(t.render()))}),e.on("startaudiorendering",function(e){t.startOfflineRender(e)}),e.on("statechange",function(e){t.setState(e),t.draw(t.render())}),e.on("shift",function(e,i){i.setStartTime(i.getStartTime()+e),t.adjustDuration(),t.draw(t.render())}),e.on("record",function(){t.record()}),e.on("play",function(e,i){t.play(e,i)}),e.on("pause",function(){t.pause()}),e.on("stop",function(){t.stop()}),e.on("rewind",function(){t.rewind()}),e.on("fastforward",function(){t.fastForward()}),e.on("solo",function(e){t.soloTrack(e),t.adjustTrackPlayout(),t.draw(t.render())}),e.on("mute",function(e){t.muteTrack(e),t.adjustTrackPlayout(),t.draw(t.render())}),e.on("volumechange",function(t,e){e.setGainLevel(t/100)}),e.on("mastervolumechange",function(e){t.masterGain=e/100,t.tracks.forEach(function(e){e.setMasterGainLevel(t.masterGain)})}),e.on("fadein",function(e,i){i.setFadeIn(e,t.fadeType),t.draw(t.render())}),e.on("fadeout",function(e,i){i.setFadeOut(e,t.fadeType),t.draw(t.render())}),e.on("fadetype",function(e){t.fadeType=e}),e.on("newtrack",function(e){t.load([{src:e,name:e.name}])}),e.on("trim",function(){var e=t.getActiveTrack(),i=t.getTimeSelection();e.trim(i.start,i.end),e.calculatePeaks(t.samplesPerPixel,t.sampleRate),t.setTimeSelection(0,0),t.draw(t.render())}),e.on("zoomin",function(){var e=Math.max(0,t.zoomIndex-1),i=t.zoomLevels[e];i!==t.samplesPerPixel&&(t.setZoom(i),t.draw(t.render()))}),e.on("zoomout",function(){var e=Math.min(t.zoomLevels.length-1,t.zoomIndex+1),i=t.zoomLevels[e];i!==t.samplesPerPixel&&(t.setZoom(i),t.draw(t.render()))}),e.on("scroll",function(){t.draw(t.render())})}},{key:"load",value:function(t){var e=this,i=(arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t.map(function(t){var i=m["default"].createLoader(t.src,e.ac,e.ee);return i.load()}));return Promise.all(i).then(function(i){var n=i.map(function(i,n){var o=t[n],s=o.name||"Untitled",r=o.start||0,a=o.states||{},h=o.fadeIn,l=o.fadeOut,d=o.cuein||0,c=o.cueout||i.duration,u=o.gain||1,g=o.muted||!1,f=o.soloed||!1,p=o.selected,m=o.peaks||{type:"WebAudio",mono:e.mono},v=new L["default"](e.ac,i),w=new b["default"];return w.src=o.src,w.setBuffer(i),w.setName(s),w.setEventEmitter(e.ee),w.setEnabledStates(a),w.setCues(d,c),void 0!==h&&w.setFadeIn(h.duration,h.shape),void 0!==l&&w.setFadeOut(l.duration,l.shape),void 0!==p&&(e.setActiveTrack(w),e.setTimeSelection(p.start,p.end)),void 0!==m&&w.setPeakData(m),w.setState(e.getState()),w.setStartTime(r),w.setPlayout(v),w.setGainLevel(u),g&&e.muteTrack(w),f&&e.soloTrack(w),w.calculatePeaks(e.samplesPerPixel,e.sampleRate),w});e.tracks=e.tracks.concat(n),e.adjustDuration(),e.draw(e.render())})}},{key:"setActiveTrack",value:function(t){this.activeTrack=t}},{key:"getActiveTrack",value:function(){return this.activeTrack}},{key:"isSegmentSelection",value:function(){return this.timeSelection.start!==this.timeSelection.end}},{key:"setTimeSelection",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1];this.timeSelection={start:t,end:void 0===e?t:e},this.cursor=t}},{key:"startOfflineRender",value:function(t){var e=this;if(!this.isRendering){this.isRendering=!0,this.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(2,44100*this.duration,44100);var i=this.offlineAudioContext.currentTime,n=0,o=0;this.tracks.forEach(function(t){t.setOfflinePlayout(new L["default"](e.offlineAudioContext,t.buffer)),t.schedulePlay(i,n,o,{shouldPlay:e.shouldTrackPlay(t),masterGain:.8,isOffline:!0})}),this.offlineAudioContext.startRendering().then(function(i){return"buffer"==t?(e.ee.emit("audiorenderingfinished",t,i),void(e.isRendering=!1)):void("wav"==t&&(void 0==e.exportWorker&&(e.exportWorker=new B["default"]),e.exportWorker.postMessage({command:"init",config:{sampleRate:44100}}),e.exportWorker.onmessage=function(i){e.ee.emit("audiorenderingfinished",t,i.data),e.isRendering=!1,e.exportWorker.postMessage({command:"clear"})},e.exportWorker.postMessage({command:"record",buffer:[i.getChannelData(0),i.getChannelData(1)]}),e.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"})))})["catch"](function(t){console.log(t)})}}},{key:"getTimeSelection",value:function(){return this.timeSelection}},{key:"setState",value:function(t){this.state=t,this.tracks.forEach(function(e){e.setState(t)})}},{key:"getState",value:function(){return this.state}},{key:"setZoomIndex",value:function(t){this.zoomIndex=t}},{key:"setZoomLevels",value:function(t){this.zoomLevels=t}},{key:"setZoom",value:function(t){var e=this;this.samplesPerPixel=t,this.zoomIndex=this.zoomLevels.indexOf(t),this.tracks.forEach(function(i){i.calculatePeaks(t,e.sampleRate)})}},{key:"muteTrack",value:function(t){var e=this.mutedTracks,i=e.indexOf(t);i>-1?e.splice(i,1):e.push(t)}},{key:"soloTrack",value:function(t){var e=this.soloedTracks,i=e.indexOf(t);i>-1?e.splice(i,1):e.push(t);
}},{key:"adjustTrackPlayout",value:function(){var t=this;this.tracks.forEach(function(e){e.setShouldPlay(t.shouldTrackPlay(e))})}},{key:"adjustDuration",value:function(){this.duration=this.tracks.reduce(function(t,e){return Math.max(t,e.getEndTime())},0)}},{key:"shouldTrackPlay",value:function(t){var e;return this.soloedTracks.length>0?(e=!1,this.soloedTracks.indexOf(t)>-1&&(e=!0)):(e=!0,this.mutedTracks.indexOf(t)>-1&&(e=!1)),e}},{key:"isPlaying",value:function(){return this.tracks.reduce(function(t,e){return t||e.isPlaying()},!1)}},{key:"getCurrentTime",value:function(){var t=this.lastSeeked||this.pausedAt||this.cursor;return t+this.getElapsedTime()}},{key:"getElapsedTime",value:function(){return this.ac.currentTime-this.lastPlay}},{key:"setMasterGain",value:function(t){this.ee.emit("mastervolumechange",t)}},{key:"restartPlayFrom",value:function(t,e){return this.stopAnimation(),this.tracks.forEach(function(t){t.scheduleStop()}),Promise.all(this.playoutPromises).then(this.play.bind(this,t,e))}},{key:"play",value:function(t,e){var i=this,n=this.ac.currentTime,o=this.getTimeSelection(),s=[];return t=t||this.pausedAt||this.cursor,!e&&o.end!==o.start&&o.end>t&&(e=o.end),this.isPlaying()?void this.restartPlayFrom(t,e):(this.tracks.forEach(function(o){o.setState("cursor"),s.push(o.schedulePlay(n,t,e,{shouldPlay:i.shouldTrackPlay(o),masterGain:i.masterGain}))}),this.lastPlay=n,this.playoutPromises=s,this.startAnimation(t),Promise.all(this.playoutPromises))}},{key:"pause",value:function(){if(this.isPlaying())return this.pausedAt=this.getCurrentTime(),this.playbackReset()}},{key:"stop",value:function(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}},{key:"playbackReset",value:function(){var t=this;return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach(function(e){e.scheduleStop(),e.setState(t.getState())}),this.draw(this.render()),Promise.all(this.playoutPromises)}},{key:"rewind",value:function(){var t=this;return this.stop().then(function(){t.scrollLeft=0,t.ee.emit("select",0,0)})}},{key:"fastForward",value:function(){var t=this;return this.stop().then(function(){t.viewDuration<t.duration?t.scrollLeft=t.duration-t.viewDuration:t.scrollLeft=0,t.ee.emit("select",t.duration,t.duration)})}},{key:"record",value:function(){var t=this,e=[];this.mediaRecorder.start(300),this.tracks.forEach(function(i){i.setState("none"),e.push(i.schedulePlay(t.ac.currentTime,0,void 0,{shouldPlay:t.shouldTrackPlay(i)}))}),this.playoutPromises=e}},{key:"startAnimation",value:function(t){this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame(this.updateEditor.bind(this,t))}},{key:"stopAnimation",value:function(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}},{key:"seek",value:function(t,e,i){this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.setActiveTrack(i||this.tracks[0]),this.pausedAt=t,this.setTimeSelection(t,e),"fill"==this.getSeekStyle()&&(this.playbackSeconds=t))}},{key:"updateEditor",value:function(t){var e=this.ac.currentTime,i=0,n=void 0,o=this.getTimeSelection();t=t||this.cursor,n=e-this.lastDraw,this.isPlaying()?(i=t+n,this.ee.emit("timeupdate",i),this.animationRequest=window.requestAnimationFrame(this.updateEditor.bind(this,i))):((t+n>=this.isSegmentSelection()?o.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.pausedAt=void 0,this.lastSeeked=void 0,this.setState(this.getState())),this.playbackSeconds=i,this.draw(this.render()),this.lastDraw=e}},{key:"draw",value:function(t){var e=this;window.requestAnimationFrame(function(){var i=(0,c["default"])(e.tree,t);e.rootNode=(0,g["default"])(e.rootNode,i),e.tree=t,e.viewDuration=(0,f.pixelsToSeconds)(e.rootNode.clientWidth-e.controls.width,e.samplesPerPixel,e.sampleRate)})}},{key:"getTrackRenderData",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors};return(0,a["default"])(t,e)}},{key:"isActiveTrack",value:function(t){var e=this.getActiveTrack();return!this.isSegmentSelection()||e===t}},{key:"render",value:function(){var t=this,e=this.controls.show?this.controls.width:0,i=new R["default"](this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,e),n=this.tracks.map(function(e){return e.render(t.getTrackRenderData({isActive:t.isActiveTrack(e),shouldPlay:t.shouldTrackPlay(e),soloed:t.soloedTracks.indexOf(e)>-1,muted:t.mutedTracks.indexOf(e)>-1}))}),o=(0,l["default"])("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:function(e){t.scrollLeft=(0,f.pixelsToSeconds)(e.target.scrollLeft,t.samplesPerPixel,t.sampleRate),t.ee.emit("scroll",t.scrollLeft)},hook:new w["default"](this,this.samplesPerPixel,this.sampleRate)},n),s=[];return this.showTimescale&&s.push(i.render()),s.push(o),(0,l["default"])("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},s)}},{key:"getInfo",value:function(){var t=[];return this.tracks.forEach(function(e){t.push(e.getTrackDetails())}),t}}]),t}();e["default"]=M},function(t,e,i){function n(t,e,i){var n=i.length;switch(n){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function o(t,e,i,n){return void 0===t||s(t,h[i])&&!l.call(n,i)?e:t}function s(t,e){return t===e||t!==t&&e!==e}var r=i(34),a=i(3),h=Object.prototype,l=h.hasOwnProperty,d=a(function(t){return t.push(void 0,o),n(r,void 0,t)});t.exports=d},function(t,e,i){function n(t,e,i){var n=t[e];A.call(t,e)&&l(n,i)&&(void 0!==i||e in t)||(t[e]=i)}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e,i,o){i||(i={});for(var s=-1,r=e.length;++s<r;){var a=e[s],h=o?o(i[a],t[a],a,i,t):t[a];n(i,a,h)}return i}function r(t){return p(function(e,i){var n=-1,o=i.length,s=o>1?i[o-1]:void 0,r=o>2?i[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,r&&h(i[0],i[1],r)&&(s=o<3?void 0:s,o=1),e=Object(e);++n<o;){var a=i[n];a&&t(e,a,n,s)}return e})}function a(t,e){return e=null==e?m:e,!!e&&("number"==typeof t||y.test(t))&&t>-1&&t%1==0&&t<e}function h(t,e,i){if(!g(i))return!1;var n=typeof e;return!!("number"==n?d(i)&&a(e,i.length):"string"==n&&e in i)&&l(i[e],t)}function l(t,e){return t===e||t!==t&&e!==e}function d(t){return null!=t&&u(x(t))&&!c(t)}function c(t){var e=g(t)?b.call(t):"";return e==v||e==w}function u(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=m}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var f=i(35),p=i(3),m=9007199254740991,v="[object Function]",w="[object GeneratorFunction]",y=/^(?:0|[1-9]\d*)$/,R=Object.prototype,A=R.hasOwnProperty,b=R.toString,x=o("length"),L=r(function(t,e,i,n){s(e,f(e),t,n)});t.exports=L},function(t,e,i){(function(t,i){function n(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function o(t){return t&&t.Object===Object?t:null}function s(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}function r(t){t=null==t?t:Object(t);var e=[];for(var i in t)e.push(i);return e}function a(t){return function(e){return null==e?void 0:e[t]}}function h(t){var e=t?t.length:void 0;return p(e)&&(W(t)||w(t)||c(t))?n(e,String):null}function l(t,e){return e=null==e?R:e,!!e&&("number"==typeof t||C.test(t))&&t>-1&&t%1==0&&t<e}function d(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||_;return t===i}function c(t){return g(t)&&D.call(t,"callee")&&(!N.call(t,"callee")||H.call(t)==A)}function u(t){return null!=t&&p(I(t))&&!f(t)}function g(t){return v(t)&&u(t)}function f(t){var e=m(t)?H.call(t):"";return e==b||e==x}function p(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=R}function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){return!!t&&"object"==typeof t}function w(t){return"string"==typeof t||!W(t)&&v(t)&&H.call(t)==L}function y(t){for(var e=-1,i=d(t),n=r(t),o=n.length,s=h(t),a=!!s,c=s||[],u=c.length;++e<o;){var g=n[e];a&&("length"==g||l(g,u))||"constructor"==g&&(i||!D.call(t,g))||c.push(g)}return c}var R=9007199254740991,A="[object Arguments]",b="[object Function]",x="[object GeneratorFunction]",L="[object String]",C=/^(?:0|[1-9]\d*)$/,k={"function":!0,object:!0},E=k[typeof e]&&e&&!e.nodeType?e:void 0,B=k[typeof t]&&t&&!t.nodeType?t:void 0,M=o(E&&B&&"object"==typeof i&&i),S=o(k[typeof self]&&self),F=o(k[typeof window]&&window),T=o(k[typeof this]&&this),P=M||F!==(T&&T.window)&&F||S||T||Function("return this")(),_=Object.prototype,D=_.hasOwnProperty,H=_.toString,$=P.Reflect,O=$?$.enumerate:void 0,N=_.propertyIsEnumerable;O&&!N.call({valueOf:1},"valueOf")&&(r=function(t){return s(O(t))});var I=a("length"),W=Array.isArray;t.exports=y}).call(e,i(36)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,i){var n=i(38);t.exports=n},function(t,e,i){"use strict";function n(t,e,i){var n,r,h,l,d=[];return!i&&a(e)&&(i=e,r={}),r=r||e||{},n=w(t,r),r.hasOwnProperty("key")&&(h=r.key,r.key=void 0),r.hasOwnProperty("namespace")&&(l=r.namespace,r.namespace=void 0),"INPUT"!==n||l||!r.hasOwnProperty("value")||void 0===r.value||m(r.value)||(r.value=y(r.value)),s(r),void 0!==i&&null!==i&&o(i,d,n,r),new c(n,r,d,h,l)}function o(t,e,i,n){if("string"==typeof t)e.push(new u(t));else if("number"==typeof t)e.push(new u(String(t)));else if(r(t))e.push(t);else{if(!d(t)){if(null===t||void 0===t)return;throw h({foreignObject:t,parentVnode:{tagName:i,properties:n}})}for(var s=0;s<t.length;s++)o(t[s],e,i,n)}}function s(t){for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];if(m(i))continue;"ev-"===e.substr(0,3)&&(t[e]=R(i))}}function r(t){return g(t)||f(t)||p(t)||v(t)}function a(t){return"string"==typeof t||d(t)||r(t)}function h(t){var e=new Error;return e.type="virtual-hyperscript.unexpected.virtual-element",e.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+l(t.foreignObject)+".\nThe parent vnode is:\n"+l(t.parentVnode),e.foreignObject=t.foreignObject,e.parentVnode=t.parentVnode,e}function l(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}var d=i(39),c=i(40),u=i(41),g=i(11),f=i(13),p=i(14),m=i(10),v=i(16),w=i(42),y=i(44),R=i(45);t.exports=n},function(t,e){function i(t){return"[object Array]"===o.call(t)}var n=Array.isArray,o=Object.prototype.toString;t.exports=n||i},function(t,e,i){function n(t,e,i,n,o){this.tagName=t,this.properties=e||l,this.children=i||d,this.key=null!=n?String(n):void 0,this.namespace="string"==typeof o?o:null;var c,u=i&&i.length||0,g=0,f=!1,p=!1,m=!1;for(var v in e)if(e.hasOwnProperty(v)){var w=e[v];h(w)&&w.unhook&&(c||(c={}),c[v]=w)}for(var y=0;y<u;y++){var R=i[y];s(R)?(g+=R.count||0,!f&&R.hasWidgets&&(f=!0),!p&&R.hasThunks&&(p=!0),m||!R.hooks&&!R.descendantHooks||(m=!0)):!f&&r(R)?"function"==typeof R.destroy&&(f=!0):!p&&a(R)&&(p=!0)}this.count=u+g,this.hasWidgets=f,this.hasThunks=p,this.hooks=c,this.descendantHooks=m}var o=i(12),s=i(11),r=i(14),a=i(16),h=i(10);t.exports=n;var l={},d=[];n.prototype.version=o,n.prototype.type="VirtualNode"},function(t,e,i){function n(t){this.text=String(t)}var o=i(12);t.exports=n,n.prototype.version=o,n.prototype.type="VirtualText"},function(t,e,i){"use strict";function n(t,e){if(!t)return"DIV";var i=!e.hasOwnProperty("id"),n=o(t,s),a=null;r.test(n[1])&&(a="DIV");var h,l,d,c;for(c=0;c<n.length;c++)l=n[c],l&&(d=l.charAt(0),a?"."===d?(h=h||[],h.push(l.substring(1,l.length))):"#"===d&&i&&(e.id=l.substring(1,l.length)):a=l);return h&&(e.className&&h.push(e.className),e.className=h.join(" ")),e.namespace?a:a.toUpperCase()}var o=i(43),s=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,r=/^\.|#/;t.exports=n},function(t,e){t.exports=function(t){var e,i=String.prototype.split,n=/()??/.exec("")[1]===t;return e=function(e,o,s){if("[object RegExp]"!==Object.prototype.toString.call(o))return i.call(e,o,s);var r,a,h,l,d=[],c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.extended?"x":"")+(o.sticky?"y":""),u=0,o=new RegExp(o.source,c+"g");for(e+="",n||(r=new RegExp("^"+o.source+"$(?!\\s)",c)),s=s===t?-1>>>0:s>>>0;(a=o.exec(e))&&(h=a.index+a[0].length,!(h>u&&(d.push(e.slice(u,a.index)),!n&&a.length>1&&a[0].replace(r,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(a[e]=t)}),a.length>1&&a.index<e.length&&Array.prototype.push.apply(d,a.slice(1)),l=a[0].length,u=h,d.length>=s)));)o.lastIndex===a.index&&o.lastIndex++;return u===e.length?!l&&o.test("")||d.push(""):d.push(e.slice(u)),d.length>s?d.slice(0,s):d}}()},function(t,e){"use strict";function i(t){return this instanceof i?void(this.value=t):new i(t)}t.exports=i,i.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},function(t,e,i){"use strict";function n(t){return this instanceof n?void(this.value=t):new n(t)}var o=i(46);t.exports=n,n.prototype.hook=function(t,e){var i=o(t),n=e.substr(3);i[n]=this.value},n.prototype.unhook=function(t,e){var i=o(t),n=e.substr(3);i[n]=void 0}},function(t,e,i){"use strict";function n(t){var e=t[r];return e||(e=t[r]={}),e}var o=i(47),s="7";o("ev-store",s);var r="__EV_STORE_KEY@"+s;t.exports=n},function(t,e,i){"use strict";function n(t,e,i){var n="__INDIVIDUAL_ONE_VERSION_"+t,s=n+"_ENFORCE_SINGLETON",r=o(s,e);if(r!==e)throw new Error("Can only have one copy of "+t+".\nYou already have version "+r+" installed.\nThis means you cannot install version "+e);return o(n,i)}var o=i(48);t.exports=n},function(t,e){(function(e){"use strict";function i(t,e){return t in n?n[t]:(n[t]=e,e)}var n="undefined"!=typeof window?window:"undefined"!=typeof e?e:{};t.exports=i}).call(e,function(){return this}())},function(t,e,i){var n=i(50);t.exports=n},function(t,e,i){function n(t,e){var i={a:t};return o(t,e,i,0),i}function o(t,e,i,n){if(t!==e){var o=i[n],a=!1;if(A(t)||A(e))h(t,e,i,n);else if(null==e)R(t)||(r(t,i,n),o=i[n]),o=p(o,new v(v.REMOVE,t,e));else if(w(e))if(w(t))if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var l=x(t.properties,e.properties);l&&(o=p(o,new v(v.PROPS,t,l))),o=s(t,e,i,o,n)}else o=p(o,new v(v.VNODE,t,e)),a=!0;else o=p(o,new v(v.VNODE,t,e)),a=!0;else y(e)?y(t)?t.text!==e.text&&(o=p(o,new v(v.VTEXT,t,e))):(o=p(o,new v(v.VTEXT,t,e)),a=!0):R(e)&&(R(t)||(a=!0),o=p(o,new v(v.WIDGET,t,e)));o&&(i[n]=o),a&&r(t,i,n)}}function s(t,e,i,n,s){for(var r=t.children,a=u(r,e.children),h=a.children,l=r.length,d=h.length,c=l>d?l:d,g=0;g<c;g++){var f=r[g],m=h[g];s+=1,f?o(f,m,i,s):m&&(n=p(n,new v(v.INSERT,null,m))),w(f)&&f.count&&(s+=f.count)}return a.moves&&(n=p(n,new v(v.ORDER,t,a.moves))),n}function r(t,e,i){d(t,e,i),a(t,e,i)}function a(t,e,i){if(R(t))"function"==typeof t.destroy&&(e[i]=p(e[i],new v(v.REMOVE,t,null)));else if(w(t)&&(t.hasWidgets||t.hasThunks))for(var n=t.children,o=n.length,s=0;s<o;s++){var r=n[s];i+=1,a(r,e,i),w(r)&&r.count&&(i+=r.count)}else A(t)&&h(t,null,e,i)}function h(t,e,i,o){var s=b(t,e),r=n(s.a,s.b);l(r)&&(i[o]=new v(v.THUNK,null,r))}function l(t){for(var e in t)if("a"!==e)return!0;return!1}function d(t,e,i){if(w(t)){if(t.hooks&&(e[i]=p(e[i],new v(v.PROPS,t,c(t.hooks)))),t.descendantHooks||t.hasThunks)for(var n=t.children,o=n.length,s=0;s<o;s++){var r=n[s];i+=1,d(r,e,i),w(r)&&r.count&&(i+=r.count)}}else A(t)&&h(t,null,e,i)}function c(t){var e={};for(var i in t)e[i]=void 0;return e}function u(t,e){var i=f(e),n=i.keys,o=i.free;if(o.length===e.length)return{children:e,moves:null};var s=f(t),r=s.keys,a=s.free;if(a.length===t.length)return{children:e,moves:null};for(var h=[],l=0,d=o.length,c=0,u=0;u<t.length;u++){var p,m=t[u];m.key?n.hasOwnProperty(m.key)?(p=n[m.key],h.push(e[p])):(p=u-c++,h.push(null)):l<d?(p=o[l++],h.push(e[p])):(p=u-c++,h.push(null))}for(var v=l>=o.length?e.length:o[l],w=0;w<e.length;w++){var y=e[w];y.key?r.hasOwnProperty(y.key)||h.push(y):w>=v&&h.push(y)}for(var R,A=h.slice(),b=0,x=[],L=[],C=0;C<e.length;){var k=e[C];for(R=A[b];null===R&&A.length;)x.push(g(A,b,null)),R=A[b];R&&R.key===k.key?(b++,C++):k.key?(R&&R.key&&n[R.key]!==C+1?(x.push(g(A,b,R.key)),R=A[b],R&&R.key===k.key?b++:L.push({key:k.key,to:C})):L.push({key:k.key,to:C}),C++):R&&R.key&&x.push(g(A,b,R.key))}for(;b<A.length;)R=A[b],x.push(g(A,b,R&&R.key));return x.length!==c||L.length?{children:h,moves:{removes:x,inserts:L}}:{children:h,moves:null}}function g(t,e,i){return t.splice(e,1),{from:e,key:i}}function f(t){for(var e={},i=[],n=t.length,o=0;o<n;o++){var s=t[o];s.key?e[s.key]=o:i.push(o)}return{keys:e,free:i}}function p(t,e){return t?(m(t)?t.push(e):t=[t,e],t):e}var m=i(39),v=i(51),w=i(11),y=i(13),R=i(14),A=i(16),b=i(15),x=i(52);t.exports=n},function(t,e,i){function n(t,e,i){this.type=Number(t),this.vNode=e,this.patch=i}var o=i(12);n.NONE=0,n.VTEXT=1,n.VNODE=2,n.WIDGET=3,n.PROPS=4,n.ORDER=5,n.INSERT=6,n.REMOVE=7,n.THUNK=8,t.exports=n,n.prototype.version=o,n.prototype.type="VirtualPatch"},function(t,e,i){function n(t,e){var i;for(var a in t){a in e||(i=i||{},i[a]=void 0);var h=t[a],l=e[a];if(h!==l)if(s(h)&&s(l))if(o(l)!==o(h))i=i||{},i[a]=l;else if(r(l))i=i||{},i[a]=l;else{var d=n(h,l);d&&(i=i||{},i[a]=d)}else i=i||{},i[a]=l}for(var c in e)c in t||(i=i||{},i[c]=e[c]);return i}function o(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}var s=i(9),r=i(10);t.exports=n},function(t,e,i){var n=i(54);t.exports=n},function(t,e,i){function n(t,e,i){return i=i||{},i.patch=i.patch&&i.patch!==n?i.patch:o,i.render=i.render||l,i.patch(t,e,i)}function o(t,e,i){var n=r(e);if(0===n.length)return t;var o=d(t,e.a,n),h=t.ownerDocument;i.document||h===a||(i.document=h);for(var l=0;l<n.length;l++){var c=n[l];t=s(t,o[c],e[c],i)}return t}function s(t,e,i,n){if(!e)return t;var o;if(h(i))for(var s=0;s<i.length;s++)o=c(i[s],e,n),e===t&&(t=o);else o=c(i,e,n),e===t&&(t=o);return t}function r(t){var e=[];for(var i in t)"a"!==i&&e.push(Number(i));return e}var a=i(6),h=i(39),l=i(5),d=i(55),c=i(56);t.exports=n},function(t,e){function i(t,e,i,o){return i&&0!==i.length?(i.sort(s),n(t,e,i,o,0)):{}}function n(t,e,i,s,a){if(s=s||{},t){o(i,a,a)&&(s[a]=t);var h=e.children;if(h)for(var l=t.childNodes,d=0;d<e.children.length;d++){a+=1;var c=h[d]||r,u=a+(c.count||0);o(i,a,u)&&n(l[d],c,i,s,a),a=u}}return s}function o(t,e,i){if(0===t.length)return!1;for(var n,o,s=0,r=t.length-1;s<=r;){if(n=(r+s)/2>>0,o=t[n],s===r)return o>=e&&o<=i;if(o<e)s=n+1;else{if(!(o>i))return!0;r=n-1}}return!1}function s(t,e){return t>e?1:-1}var r={};t.exports=i},function(t,e,i){function n(t,e,i){var n=t.type,l=t.vNode,g=t.patch;switch(n){case f.REMOVE:return o(e,l);case f.INSERT:return s(e,g,i);case f.VTEXT:return r(e,l,g,i);case f.WIDGET:return a(e,l,g,i);case f.VNODE:return h(e,l,g,i);case f.ORDER:return d(e,g),e;case f.PROPS:return u(e,g,l.properties),e;case f.THUNK:return c(e,i.patch(e,g,i));default:return e}}function o(t,e){var i=t.parentNode;return i&&i.removeChild(t),l(t,e),null}function s(t,e,i){var n=i.render(e,i);return t&&t.appendChild(n),t}function r(t,e,i,n){var o;if(3===t.nodeType)t.replaceData(0,t.length,i.text),o=t;else{var s=t.parentNode;o=n.render(i,n),s&&o!==t&&s.replaceChild(o,t)}return o}function a(t,e,i,n){var o,s=p(e,i);o=s?i.update(e,t)||t:n.render(i,n);var r=t.parentNode;return r&&o!==t&&r.replaceChild(o,t),s||l(t,e),o}function h(t,e,i,n){var o=t.parentNode,s=n.render(i,n);return o&&s!==t&&o.replaceChild(s,t),s}function l(t,e){"function"==typeof e.destroy&&g(e)&&e.destroy(t)}function d(t,e){for(var i,n,o,s=t.childNodes,r={},a=0;a<e.removes.length;a++)n=e.removes[a],i=s[n.from],n.key&&(r[n.key]=i),t.removeChild(i);for(var h=s.length,l=0;l<e.inserts.length;l++)o=e.inserts[l],i=r[o.key],t.insertBefore(i,o.to>=h++?null:s[o.to])}function c(t,e){return t&&e&&t!==e&&t.parentNode&&t.parentNode.replaceChild(e,t),e}var u=i(8),g=i(14),f=i(51),p=i(57);t.exports=n},function(t,e,i){function n(t,e){return!(!o(t)||!o(e))&&("name"in t&&"name"in e?t.id===e.id:t.init===e.init)}var o=i(14);t.exports=n},function(t,e){"use strict";function i(t,e){return t/e}function n(t,e){return Math.ceil(t*e)}function o(t,e){return~~(t/e)}function s(t,e){return~~(t*e)}function r(t,e,i){return t*e/i}function a(t,e,i){return Math.ceil(t*i/e)}Object.defineProperty(e,"__esModule",{value:!0}),e.samplesToSeconds=i,e.secondsToSamples=n,e.samplesToPixels=o,e.pixelsToSamples=s,e.pixelsToSeconds=r,e.secondsToPixels=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(60),a=n(r),h=i(62),l=n(h),d=function(){function t(){o(this,t)}return s(t,null,[{key:"createLoader",value:function(t,e,i){if(t instanceof Blob)return new a["default"](t,e,i);if("string"==typeof t)return new l["default"](t,e,i);throw new Error("Unsupported src type")}}]),t}();e["default"]=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function u(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:u(o,e,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},l=i(61),d=n(l),c=function(t){function e(){return o(this,e),s(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,[{key:"load",value:function(){var t=this;return new Promise(function(i,n){if(t.src.type.match(/audio.*/)||t.src.type.match(/video\/ogg/)){var o=new FileReader;o.readAsArrayBuffer(t.src),o.addEventListener("progress",function(i){h(Object.getPrototypeOf(e.prototype),"fileProgress",t).call(t,i)}),o.addEventListener("load",function(n){var o=h(Object.getPrototypeOf(e.prototype),"fileLoad",t).call(t,n);o.then(function(t){i(t)})}),o.addEventListener("error",function(){n(Error("Error reading Blob"))})}else n(Error("Unsupported file type "+t.src.type))})}}]),e}(d["default"]);e["default"]=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.STATE_FINISHED=e.STATE_DECODING=e.STATE_LOADING=e.STATE_UNINITIALIZED=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(17),a=n(r),h=e.STATE_UNINITIALIZED=0,l=e.STATE_LOADING=1,d=e.STATE_DECODING=2,c=e.STATE_FINISHED=3,u=function(){function t(e,i){var n=arguments.length<=2||void 0===arguments[2]?(0,a["default"])():arguments[2];o(this,t),this.src=e,this.ac=i,this.audioRequestState=h,this.ee=n}return s(t,[{key:"setStateChange",value:function(t){this.audioRequestState=t,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}},{key:"fileProgress",value:function(t){var e=0;this.audioRequestState===h&&this.setStateChange(l),t.lengthComputable&&(e=t.loaded/t.total*100),this.ee.emit("loadprogress",e,this.src)}},{key:"fileLoad",value:function(t){var e=this,i=t.target.response||t.target.result;return this.setStateChange(d),new Promise(function(t,n){e.ac.decodeAudioData(i,function(i){e.audioBuffer=i,e.setStateChange(c),t(i)},function(t){n(Error("Unable to decode Audio Data for src "+e.src))})})}}]),t}();e["default"]=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function u(t,e,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:u(o,e,i)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(i)},l=i(61),d=n(l),c=function(t){function e(){return o(this,e),s(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),a(e,[{key:"load",value:function(){var t=this;return new Promise(function(i,n){var o=new XMLHttpRequest;o.open("GET",t.src,!0),o.responseType="arraybuffer",o.send(),o.addEventListener("progress",function(i){h(Object.getPrototypeOf(e.prototype),"fileProgress",t).call(t,i)}),o.addEventListener("load",function(n){var o=h(Object.getPrototypeOf(e.prototype),"fileLoad",t).call(t,n);o.then(function(t){i(t)})}),o.addEventListener("error",function(){n(Error("Track "+t.src+" failed to load"))})})}}]),e}(d["default"]);e["default"]=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(58),r=function(){function t(e,i,o){n(this,t),this.track=e,this.resolution=i,this.sampleRate=o}return o(t,[{key:"hook",value:function(t,e,i){t.scrollLeft=(0,s.secondsToPixels)(this.track.scrollLeft,this.resolution,this.sampleRate)}}]),t}();e["default"]=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(58),a=i(37),h=n(a),l=i(65),d=n(l),c=function(){function t(e,i,n,s){var r=arguments.length<=4||void 0===arguments[4]?0:arguments[4];o(this,t),this.duration=e,this.offset=i,this.samplesPerPixel=n,this.sampleRate=s,this.marginLeft=r,this.timeinfo={2e4:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12e3:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},1e4:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5e3:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}return s(t,[{key:"getScaleInfo",value:function(t){var e,i,n;for(e=Object.keys(this.timeinfo).map(function(t){return parseInt(t,10)}),e=e.sort(function(t,e){return t-e}),i=0,n=e.length;i<n;i++)if(t<=e[i])return this.timeinfo[e[i]]}},{key:"formatTime",value:function(t){var e,i,n,o;return o=t/1e3,n=o%60,i=(o-n)/60,n<10&&(n="0"+n),e=i+":"+n}},{key:"render",value:function(){var t=(0,r.secondsToPixels)(this.duration,this.samplesPerPixel,this.sampleRate),e=this.sampleRate/this.samplesPerPixel,i=(0,r.secondsToPixels)(this.offset,this.samplesPerPixel,this.sampleRate),n=this.getScaleInfo(this.samplesPerPixel),o={},s=[],a=void 0,l=t+i,c=void 0,u=void 0,g=0;for(a=0;a<l;a+=e*n.secondStep)c=~~a,u=c-i,c>=i&&(n.marker&&g%n.marker===0?(s.push((0,h["default"])("div.time",{attributes:{style:"position: absolute; left: "+u+"px;"}},[this.formatTime(g)])),o[u]=10):n.bigStep&&g%n.bigStep===0?o[u]=5:n.smallStep&&g%n.smallStep===0&&(o[u]=2)),g+=1e3*n.secondStep;return(0,h["default"])("div.playlist-time-scale",{attributes:{style:"position: relative; left: 0; right: 0; margin-left: "+this.marginLeft+"px;"}},[s,(0,h["default"])("canvas",{attributes:{width:t,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new d["default"](o,this.offset,this.samplesPerPixel,this.duration)})])}}]),t}();e["default"]=c},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,n,o,s){i(this,t),this.tickInfo=e,this.offset=n,this.samplesPerPixel=o,this.duration=s}return n(t,[{key:"hook",value:function(t,e,i){var n=this;if(void 0===i||i.offset!==this.offset||i.duration!==this.duration||i.samplesPerPixel!==this.samplesPerPixel){var o=t.width,s=t.height,r=t.getContext("2d");r.clearRect(0,0,o,s),Object.keys(this.tickInfo).forEach(function(t){var e=n.tickInfo[t],i=s-e;r.fillRect(t,i,1,e)})}}}]),t}();e["default"]=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1),a=n(r),h=i(67),l=n(h),d=i(72),c=n(d),u=i(37),g=n(u),f=i(58),p=i(74),m=n(p),v=i(75),w=n(v),y=i(81),R=n(y),A=i(82),b=n(A),x=i(85),L=n(x),C=i(83),k=1e3,E=function(){function t(){o(this,t),this.name="Untitled",this.gain=1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0}return s(t,[{key:"setEventEmitter",value:function(t){this.ee=t}},{key:"setName",value:function(t){this.name=t}},{key:"setCues",value:function(t,e){if(e<t)throw new Error("cue out cannot be less than cue in");this.cueIn=t,this.cueOut=e,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}},{key:"trim",value:function(t,e){var i=this.getStartTime(),n=this.getEndTime(),o=this.cueIn-i;if(i<=t&&n>=t||i<=e&&n>=e){var s=t<i?i:t,r=e>n?n:e;this.setCues(s+o,r+o),t>i&&this.setStartTime(t)}}},{key:"setStartTime",value:function(t){this.startTime=t,
this.endTime=t+this.duration}},{key:"setPlayout",value:function(t){this.playout=t}},{key:"setOfflinePlayout",value:function(t){this.offlinePlayout=t}},{key:"setEnabledStates",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e={cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0};this.enabledStates=(0,a["default"])(e,t)}},{key:"setFadeIn",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"logarithmic":arguments[1];if(t>this.duration)throw new Error("Invalid Fade In");var i={shape:e,start:0,end:t};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade(C.FADEIN,i.shape,i.start,i.end)}},{key:"setFadeOut",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"logarithmic":arguments[1];if(t>this.duration)throw new Error("Invalid Fade Out");var i={shape:e,start:this.duration-t,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade(C.FADEOUT,i.shape,i.start,i.end)}},{key:"saveFade",value:function(t,e,i,n){var o=c["default"].v4();return this.fades[o]={type:t,shape:e,start:i,end:n},o}},{key:"removeFade",value:function(t){delete this.fades[t]}},{key:"setBuffer",value:function(t){this.buffer=t}},{key:"setPeakData",value:function(t){this.peakData=t}},{key:"calculatePeaks",value:function(t,e){var i=(0,f.secondsToSamples)(this.cueIn,e),n=(0,f.secondsToSamples)(this.cueOut,e);this.setPeaks((0,m["default"])(this.buffer,t,this.peakData.mono,i,n))}},{key:"setPeaks",value:function(t){this.peaks=t}},{key:"setState",value:function(t){this.state=t}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getEndTime",value:function(){return this.endTime}},{key:"getDuration",value:function(){return this.duration}},{key:"isPlaying",value:function(){return this.playout.isPlaying()}},{key:"setShouldPlay",value:function(t){this.playout.setShouldPlay(t)}},{key:"setGainLevel",value:function(t){this.gain=t,this.playout.setVolumeGainLevel(t)}},{key:"setMasterGainLevel",value:function(t){this.playout.setMasterGainLevel(t)}},{key:"schedulePlay",value:function(t,e,i,n){var o,s,r,h,d,c=t,u=i?i-e:void 0,g={shouldPlay:!0,masterGain:1,isOffline:!1};return n=(0,a["default"])(g,n),d=n.isOffline?this.offlinePlayout:this.playout,this.endTime<=e||u&&e+u<this.startTime?Promise.resolve():(this.startTime>=e?(o=0,c=c+this.startTime-e,i?(u-=this.startTime-e,s=Math.min(u,this.duration)):s=this.duration):(o=e-this.startTime,s=i?Math.min(u,this.duration-o):this.duration-o),o+=this.cueIn,r=e-this.startTime,h=d.setUpSource(),(0,l["default"])(this.fades,function(e){var i=void 0,n=void 0;if(r<e.end)switch(r<=e.start?(i=t+(e.start-r),n=e.end-e.start):r>e.start&&r<e.end&&(i=t-(r-e.start),n=e.end-e.start),e.type){case C.FADEIN:d.applyFadeIn(i,n,e.shape);break;case C.FADEOUT:d.applyFadeOut(i,n,e.shape);break;default:throw new Error("Invalid fade type saved on track.")}}),d.setVolumeGainLevel(this.gain),d.setShouldPlay(n.shouldPlay),d.setMasterGainLevel(n.masterGain),d.play(c,o,s),h)}},{key:"scheduleStop",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];this.playout.stop(t)}},{key:"renderTimeSelection",value:function(t){var e=(0,f.secondsToPixels)(t.timeSelection.start,t.resolution,t.sampleRate),i=(0,f.secondsToPixels)(t.timeSelection.end,t.resolution,t.sampleRate),n=i-e+1,o=n>1?"segment":"point";return(0,g["default"])("div.selection."+o,{attributes:{style:"position: absolute; width: "+n+"px; bottom: 0; top: 0; left: "+e+"px; z-index: 4;"}})}},{key:"renderOverlay",value:function(t){var e=this,i=(0,f.secondsToPixels)(t.playlistLength,t.resolution,t.sampleRate),n={attributes:{style:"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: "+i+"px; z-index: 9;"}},o="";return this.state&&this.enabledStates[this.state]&&!function(){var i=new w["default"][e.state](e,t.resolution,t.sampleRate),s=i.getEvents();Object.keys(s).map(function(t){n["on"+t]=s[t].bind(i)}),o=i.getClasses()}(),(0,g["default"])("div.playlist-overlay"+o,n)}},{key:"renderControls",value:function(t){var e=this,i=t.muted?".active":"",n=t.soloed?".active":"",o=this.peaks.data.length;return(0,g["default"])("div.controls",{attributes:{style:"height: "+o*t.height+"px; width: "+t.controls.width+"px; position: absolute; left: 0; z-index: 10;"}},[(0,g["default"])("header",[this.name]),(0,g["default"])("div.btn-group",[(0,g["default"])("span.btn.btn-default.btn-xs.btn-mute"+i,{onclick:function(){e.ee.emit("mute",e)}},["Mute"]),(0,g["default"])("span.btn.btn-default.btn-xs.btn-solo"+n,{onclick:function(){e.ee.emit("solo",e)}},["Solo"])]),(0,g["default"])("label",[(0,g["default"])("input.volume-slider",{attributes:{type:"range",min:0,max:100,value:100},hook:new L["default"](this.gain),oninput:function(t){e.ee.emit("volumechange",t.target.value,e)}})])])}},{key:"render",value:function(t){var e=this,i=this.peaks.length,n=(0,f.secondsToPixels)(t.playbackSeconds,t.resolution,t.sampleRate),o=(0,f.secondsToPixels)(this.startTime,t.resolution,t.sampleRate),s=(0,f.secondsToPixels)(this.endTime,t.resolution,t.sampleRate),r=0,a=this.peaks.data.length;n>0&&n>o&&(r=n<s?n-o:i);var h=[(0,g["default"])("div.cursor",{attributes:{style:"position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: "+n+"px; bottom: 0; z-index: 5;"}})],l=Object.keys(this.peaks.data).map(function(n){for(var s=[(0,g["default"])("div.channel-progress",{attributes:{style:"position: absolute; width: "+r+"px; height: "+t.height+"px; z-index: 2;"}})],a=0,h=i,l=e.peaks.data[n];h>0;){var d=Math.min(h,k);s.push((0,g["default"])("canvas",{attributes:{width:d,height:t.height,style:"float: left; position: relative; margin: 0; padding: 0; z-index: 3;"},hook:new R["default"](l,a,e.peaks.bits,t.colors.waveOutlineColor)})),h-=d,a+=k}if(e.fadeIn){var c=e.fades[e.fadeIn],u=(0,f.secondsToPixels)(c.end-c.start,t.resolution,t.sampleRate);s.push((0,g["default"])("div.wp-fade.wp-fadein",{attributes:{style:"position: absolute; height: "+t.height+"px; width: "+u+"px; top: 0; left: 0; z-index: 4;"}},[(0,g["default"])("canvas",{attributes:{width:u,height:t.height},hook:new b["default"](c.type,c.shape,c.end-c.start,t.resolution)})]))}if(e.fadeOut){var p=e.fades[e.fadeOut],m=(0,f.secondsToPixels)(p.end-p.start,t.resolution,t.sampleRate);s.push((0,g["default"])("div.wp-fade.wp-fadeout",{attributes:{style:"position: absolute; height: "+t.height+"px; width: "+m+"px; top: 0; right: 0; z-index: 4;"}},[(0,g["default"])("canvas",{attributes:{width:m,height:t.height},hook:new b["default"](p.type,p.shape,p.end-p.start,t.resolution)})]))}return(0,g["default"])("div.channel.channel-"+n,{attributes:{style:"height: "+t.height+"px; width: "+i+"px; top: "+n*t.height+"px; left: "+o+"px; position: absolute; margin: 0; padding: 0; z-index: 1;"}},s)}),d=t.shouldPlay?"":".silent";h.push(l),h.push(this.renderOverlay(t)),t.isActive===!0&&h.push(this.renderTimeSelection(t));var c=(0,g["default"])("div.waveform",{attributes:{style:"height: "+a*t.height+"px; position: relative;"}},h),u=[],p=0;return t.controls.show&&(u.push(this.renderControls(t)),p=t.controls.width),u.push(c),(0,g["default"])("div.channel-wrapper"+d,{attributes:{style:"margin-left: "+p+"px; height: "+t.height*a+"px;"}},u)}},{key:"getTrackDetails",value:function(){var t={src:this.src,start:this.startTime,end:this.endTime,name:this.name,cuein:this.cueIn,cueout:this.cueOut};if(this.fadeIn){var e=this.fades[this.fadeIn];t.fadeIn={shape:e.shape,duration:e.end-e.start}}if(this.fadeOut){var i=this.fades[this.fadeOut];t.fadeOut={shape:i.shape,duration:i.end-i.start}}return t}}]),t}();e["default"]=E},function(t,e,i){function n(t,e){return t&&s(t,e,a)}function o(t,e){return t&&n(t,r(e,3))}var s=i(68),r=i(69),a=i(2);t.exports=o},function(t,e){function i(t){return function(e,i,n){for(var o=-1,s=Object(e),r=n(e),a=r.length;a--;){var h=r[t?a:++o];if(i(s[h],h,s)===!1)break}return e}}var n=i();t.exports=n},function(t,e,i){(function(t,n){function o(t,e){for(var i=-1,n=t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o}function s(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function r(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function a(t,e){return o(e,function(e){return[e,t[e]]})}function h(t){return t&&t.Object===Object?t:null}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(i){}return e}function d(t){var e=-1,i=Array(t.size);return t.forEach(function(t,n){i[++e]=[n,t]}),i}function c(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}function u(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=[t,t]}),i}function g(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function f(){this.__data__=Ve?Ve(null):{}}function p(t){return this.has(t)&&delete this.__data__[t]}function m(t){var e=this.__data__;if(Ve){var i=e[t];return i===Ot?void 0:i}return Pe.call(e,t)?e[t]:void 0}function v(t){var e=this.__data__;return Ve?void 0!==e[t]:Pe.call(e,t)}function w(t,e){var i=this.__data__;return i[t]=Ve&&void 0===e?Ot:e,this}function y(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function R(){this.__data__=[]}function A(t){var e=this.__data__,i=I(e,t);if(i<0)return!1;var n=e.length-1;return i==n?e.pop():Ne.call(e,i,1),!0}function b(t){var e=this.__data__,i=I(e,t);return i<0?void 0:e[i][1]}function x(t){return I(this.__data__,t)>-1}function L(t,e){var i=this.__data__,n=I(i,t);return n<0?i.push([t,e]):i[n][1]=e,this}function C(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function k(){this.__data__={hash:new g,map:new(Xe||y),string:new g}}function E(t){return ot(this,t)["delete"](t)}function B(t){return ot(this,t).get(t)}function M(t){return ot(this,t).has(t)}function S(t,e){return ot(this,t).set(t,e),this}function F(t){var e=-1,i=t?t.length:0;for(this.__data__=new C;++e<i;)this.add(t[e])}function T(t){return this.__data__.set(t,Ot),this}function P(t){return this.__data__.has(t)}function _(t){this.__data__=new y(t)}function D(){this.__data__=new y}function H(t){return this.__data__["delete"](t)}function $(t){return this.__data__.get(t)}function O(t){return this.__data__.has(t)}function N(t,e){var i=this.__data__;return i instanceof y&&i.__data__.length==$t&&(i=this.__data__=new C(i.__data__)),i.set(t,e),this}function I(t,e){for(var i=t.length;i--;)if(yt(t[i][0],e))return i;return-1}function W(t,e){e=ut(e,t)?[e]:Q(e);for(var i=0,n=e.length;null!=t&&i<n;)t=t[vt(e[i++])];return i&&i==n?t:void 0}function j(t,e){return Pe.call(t,e)||"object"==typeof t&&e in t&&null===at(t)}function X(t,e){return e in Object(t)}function z(t,e,i,n,o){return t===e||(null==t||null==e||!Ct(t)&&!kt(e)?t!==t&&e!==e:Y(t,e,z,i,n,o))}function Y(t,e,i,n,o,s){var r=ii(t),a=ii(e),h=zt,d=zt;r||(h=ht(t),h=h==Xt?Jt:h),a||(d=ht(e),d=d==Xt?Jt:d);var c=h==Jt&&!l(t),u=d==Jt&&!l(e),g=h==d;if(g&&!c)return s||(s=new _),r||St(t)?et(t,e,i,n,o,s):it(t,e,h,i,n,o,s);if(!(o&It)){var f=c&&Pe.call(t,"__wrapped__"),p=u&&Pe.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,v=p?e.value():e;return s||(s=new _),i(m,v,n,o,s)}}return!!g&&(s||(s=new _),nt(t,e,i,n,o,s))}function U(t,e,i,n){var o=i.length,s=o,r=!n;if(null==t)return!s;for(t=Object(t);o--;){var a=i[o];if(r&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<s;){a=i[o];var h=a[0],l=t[h],d=a[1];if(r&&a[2]){if(void 0===l&&!(h in t))return!1}else{var c=new _;if(n)var u=n(l,d,h,t,e,c);if(!(void 0===u?z(d,l,n,Nt|It,c):u))return!1}}return!0}function V(t){return"function"==typeof t?t:null==t?_t:"object"==typeof t?ii(t)?K(t[0],t[1]):Z(t):Dt(t)}function G(t){return We(Object(t))}function Z(t){var e=st(t);return 1==e.length&&e[0][2]?mt(e[0][0],e[0][1]):function(i){return i===t||U(i,t,e)}}function K(t,e){return ut(t)&&pt(e)?mt(vt(t),e):function(i){var n=Ft(i,t);return void 0===n&&n===e?Tt(i,t):z(e,n,void 0,Nt|It)}}function q(t){return function(e){return null==e?void 0:e[t]}}function J(t){return function(e){return W(e,t)}}function Q(t){return ii(t)?t:Ht(t)}function tt(t){return function(e){var i=ht(e);return i==Kt?d(e):i==ee?u(e):a(e,t(e))}}function et(t,e,i,n,o,r){var a=o&It,h=t.length,l=e.length;if(h!=l&&!(a&&l>h))return!1;var d=r.get(t);if(d)return d==e;var c=-1,u=!0,g=o&Nt?new F:void 0;for(r.set(t,e);++c<h;){var f=t[c],p=e[c];if(n)var m=a?n(p,f,c,e,t,r):n(f,p,c,t,e,r);if(void 0!==m){if(m)continue;u=!1;break}if(g){if(!s(e,function(t,e){if(!g.has(e)&&(f===t||i(f,t,n,o,r)))return g.add(e)})){u=!1;break}}else if(f!==p&&!i(f,p,n,o,r)){u=!1;break}}return r["delete"](t),u}function it(t,e,i,n,o,s,r){switch(i){case re:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case se:return!(t.byteLength!=e.byteLength||!n(new $e(t),new $e(e)));case Yt:case Ut:return+t==+e;case Vt:return t.name==e.name&&t.message==e.message;case qt:return t!=+t?e!=+e:t==+e;case te:case ie:return t==e+"";case Kt:var a=d;case ee:var h=s&It;if(a||(a=c),t.size!=e.size&&!h)return!1;var l=r.get(t);return l?l==e:(s|=Nt,r.set(t,e),et(a(t),a(e),n,o,s,r));case ne:if(ti)return ti.call(t)==ti.call(e)}return!1}function nt(t,e,i,n,o,s){var r=o&It,a=Pt(t),h=a.length,l=Pt(e),d=l.length;if(h!=d&&!r)return!1;for(var c=h;c--;){var u=a[c];if(!(r?u in e:j(e,u)))return!1}var g=s.get(t);if(g)return g==e;var f=!0;s.set(t,e);for(var p=r;++c<h;){u=a[c];var m=t[u],v=e[u];if(n)var w=r?n(v,m,u,e,t,s):n(m,v,u,t,e,s);if(!(void 0===w?m===v||i(m,v,n,o,s):w)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=t.constructor,R=e.constructor;y!=R&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof R&&R instanceof R)&&(f=!1)}return s["delete"](t),f}function ot(t,e){var i=t.__data__;return gt(e)?i["string"==typeof e?"string":"hash"]:i.map}function st(t){for(var e=ni(t),i=e.length;i--;)e[i][2]=pt(e[i][1]);return e}function rt(t,e){var i=t[e];return Et(i)?i:void 0}function at(t){return Ie(Object(t))}function ht(t){return _e.call(t)}function lt(t,e,i){e=ut(e,t)?[e]:Q(e);for(var n,o=-1,s=e.length;++o<s;){var r=vt(e[o]);if(!(n=null!=t&&i(t,r)))break;t=t[r]}if(n)return n;var s=t?t.length:0;return!!s&&Lt(s)&&ct(r,s)&&(ii(t)||Bt(t)||Rt(t))}function dt(t){var e=t?t.length:void 0;return Lt(e)&&(ii(t)||Bt(t)||Rt(t))?r(e,String):null}function ct(t,e){return e=null==e?jt:e,!!e&&("number"==typeof t||Re.test(t))&&t>-1&&t%1==0&&t<e}function ut(t,e){if(ii(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!Mt(t))||(ve.test(t)||!me.test(t)||null!=e&&t in Object(e))}function gt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ft(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||Fe;return t===i}function pt(t){return t===t&&!Ct(t)}function mt(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}}function vt(t){if("string"==typeof t||Mt(t))return t;var e=t+"";return"0"==e&&1/t==-Wt?"-0":e}function wt(t){if(null!=t){try{return Te.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function yt(t,e){return t===e||t!==t&&e!==e}function Rt(t){return bt(t)&&Pe.call(t,"callee")&&(!Oe.call(t,"callee")||_e.call(t)==Xt)}function At(t){return null!=t&&Lt(ei(t))&&!xt(t)}function bt(t){return kt(t)&&At(t)}function xt(t){var e=Ct(t)?_e.call(t):"";return e==Gt||e==Zt}function Lt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=jt}function Ct(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function kt(t){return!!t&&"object"==typeof t}function Et(t){if(!Ct(t))return!1;var e=xt(t)||l(t)?De:ye;return e.test(wt(t))}function Bt(t){return"string"==typeof t||!ii(t)&&kt(t)&&_e.call(t)==ie}function Mt(t){return"symbol"==typeof t||kt(t)&&_e.call(t)==ne}function St(t){return kt(t)&&Lt(t.length)&&!!Ae[_e.call(t)]}function Ft(t,e,i){var n=null==t?void 0:W(t,e);return void 0===n?i:n}function Tt(t,e){return null!=t&&lt(t,e,X)}function Pt(t){var e=ft(t);if(!e&&!At(t))return G(t);var i=dt(t),n=!!i,o=i||[],s=o.length;for(var r in t)!j(t,r)||n&&("length"==r||ct(r,s))||e&&"constructor"==r||o.push(r);return o}function _t(t){return t}function Dt(t){return ut(t)?q(vt(t)):J(t)}var Ht=i(70),$t=200,Ot="__lodash_hash_undefined__",Nt=1,It=2,Wt=1/0,jt=9007199254740991,Xt="[object Arguments]",zt="[object Array]",Yt="[object Boolean]",Ut="[object Date]",Vt="[object Error]",Gt="[object Function]",Zt="[object GeneratorFunction]",Kt="[object Map]",qt="[object Number]",Jt="[object Object]",Qt="[object Promise]",te="[object RegExp]",ee="[object Set]",ie="[object String]",ne="[object Symbol]",oe="[object WeakMap]",se="[object ArrayBuffer]",re="[object DataView]",ae="[object Float32Array]",he="[object Float64Array]",le="[object Int8Array]",de="[object Int16Array]",ce="[object Int32Array]",ue="[object Uint8Array]",ge="[object Uint8ClampedArray]",fe="[object Uint16Array]",pe="[object Uint32Array]",me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve=/^\w*$/,we=/[\\^$.*+?()[\]{}|]/g,ye=/^\[object .+?Constructor\]$/,Re=/^(?:0|[1-9]\d*)$/,Ae={};Ae[ae]=Ae[he]=Ae[le]=Ae[de]=Ae[ce]=Ae[ue]=Ae[ge]=Ae[fe]=Ae[pe]=!0,Ae[Xt]=Ae[zt]=Ae[se]=Ae[Yt]=Ae[re]=Ae[Ut]=Ae[Vt]=Ae[Gt]=Ae[Kt]=Ae[qt]=Ae[Jt]=Ae[te]=Ae[ee]=Ae[ie]=Ae[oe]=!1;var be={"function":!0,object:!0},xe=be[typeof e]&&e&&!e.nodeType?e:void 0,Le=be[typeof t]&&t&&!t.nodeType?t:void 0,Ce=h(xe&&Le&&"object"==typeof n&&n),ke=h(be[typeof self]&&self),Ee=h(be[typeof window]&&window),Be=h(be[typeof this]&&this),Me=Ce||Ee!==(Be&&Be.window)&&Ee||ke||Be||Function("return this")(),Se=Array.prototype,Fe=Object.prototype,Te=Function.prototype.toString,Pe=Fe.hasOwnProperty,_e=Fe.toString,De=RegExp("^"+Te.call(Pe).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=Me.Symbol,$e=Me.Uint8Array,Oe=Fe.propertyIsEnumerable,Ne=Se.splice,Ie=Object.getPrototypeOf,We=Object.keys,je=rt(Me,"DataView"),Xe=rt(Me,"Map"),ze=rt(Me,"Promise"),Ye=rt(Me,"Set"),Ue=rt(Me,"WeakMap"),Ve=rt(Object,"create"),Ge=wt(je),Ze=wt(Xe),Ke=wt(ze),qe=wt(Ye),Je=wt(Ue),Qe=He?He.prototype:void 0,ti=Qe?Qe.valueOf:void 0;g.prototype.clear=f,g.prototype["delete"]=p,g.prototype.get=m,g.prototype.has=v,g.prototype.set=w,y.prototype.clear=R,y.prototype["delete"]=A,y.prototype.get=b,y.prototype.has=x,y.prototype.set=L,C.prototype.clear=k,C.prototype["delete"]=E,C.prototype.get=B,C.prototype.has=M,C.prototype.set=S,F.prototype.add=F.prototype.push=T,F.prototype.has=P,_.prototype.clear=D,_.prototype["delete"]=H,_.prototype.get=$,_.prototype.has=O,_.prototype.set=N;var ei=q("length");(je&&ht(new je(new ArrayBuffer(1)))!=re||Xe&&ht(new Xe)!=Kt||ze&&ht(ze.resolve())!=Qt||Ye&&ht(new Ye)!=ee||Ue&&ht(new Ue)!=oe)&&(ht=function(t){var e=_e.call(t),i=e==Jt?t.constructor:void 0,n=i?wt(i):void 0;if(n)switch(n){case Ge:return re;case Ze:return Kt;case Ke:return Qt;case qe:return ee;case Je:return oe}return e});var ii=Array.isArray,ni=tt(Pt);t.exports=V}).call(e,i(36)(t),function(){return this}())},function(t,e,i){(function(t,n){function o(t){return t&&t.Object===Object?t:null}function s(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(i){}return e}function r(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function a(){this.__data__=rt?rt(null):{}}function h(t){return this.has(t)&&delete this.__data__[t]}function l(t){var e=this.__data__;if(rt){var i=e[t];return i===$?void 0:i}return et.call(e,t)?e[t]:void 0}function d(t){var e=this.__data__;return rt?void 0!==e[t]:et.call(e,t)}function c(t,e){var i=this.__data__;return i[t]=rt&&void 0===e?$:e,this}function u(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function g(){this.__data__=[]}function f(t){var e=this.__data__,i=L(e,t);if(i<0)return!1;var n=e.length-1;return i==n?e.pop():ot.call(e,i,1),!0}function p(t){var e=this.__data__,i=L(e,t);return i<0?void 0:e[i][1]}function m(t){return L(this.__data__,t)>-1}function v(t,e){var i=this.__data__,n=L(i,t);return n<0?i.push([t,e]):i[n][1]=e,this}function w(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function y(){this.__data__={hash:new r,map:new(st||u),string:new r}}function R(t){return C(this,t)["delete"](t)}function A(t){return C(this,t).get(t)}function b(t){return C(this,t).has(t)}function x(t,e){return C(this,t).set(t,e),this}function L(t,e){for(var i=t.length;i--;)if(S(t[i][0],e))return i;return-1}function C(t,e){var i=t.__data__;return E(e)?i["string"==typeof e?"string":"hash"]:i.map}function k(t,e){var i=t[e];return P(i)?i:void 0}function E(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function B(t){if(null!=t){try{return tt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function M(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(H);var i=function(){var n=arguments,o=e?e.apply(this,n):n[0],s=i.cache;if(s.has(o))return s.get(o);var r=t.apply(this,n);return i.cache=s.set(o,r),r};return i.cache=new(M.Cache||w),i}function S(t,e){return t===e||t!==t&&e!==e}function F(t){var e=T(t)?it.call(t):"";return e==O||e==N}function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function P(t){if(!T(t))return!1;var e=F(t)||s(t)?nt:X;return e.test(B(t))}function _(t){return null==t?"":D(t)}var D=i(71),H="Expected a function",$="__lodash_hash_undefined__",O="[object Function]",N="[object GeneratorFunction]",I=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,W=/[\\^$.*+?()[\]{}|]/g,j=/\\(\\)?/g,X=/^\[object .+?Constructor\]$/,z={"function":!0,object:!0},Y=z[typeof e]&&e&&!e.nodeType?e:void 0,U=z[typeof t]&&t&&!t.nodeType?t:void 0,V=o(Y&&U&&"object"==typeof n&&n),G=o(z[typeof self]&&self),Z=o(z[typeof window]&&window),K=o(z[typeof this]&&this),q=V||Z!==(K&&K.window)&&Z||G||K||Function("return this")(),J=Array.prototype,Q=Object.prototype,tt=Function.prototype.toString,et=Q.hasOwnProperty,it=Q.toString,nt=RegExp("^"+tt.call(et).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=J.splice,st=k(q,"Map"),rt=k(Object,"create");r.prototype.clear=a,r.prototype["delete"]=h,r.prototype.get=l,r.prototype.has=d,r.prototype.set=c,u.prototype.clear=g,u.prototype["delete"]=f,u.prototype.get=p,u.prototype.has=m,u.prototype.set=v,w.prototype.clear=y,w.prototype["delete"]=R,w.prototype.get=A,w.prototype.has=b,w.prototype.set=x;var at=M(function(t){var e=[];return _(t).replace(I,function(t,i,n,o){e.push(n?o.replace(j,"$1"):i||t)}),e});M.Cache=w,t.exports=at}).call(e,i(36)(t),function(){return this}())},function(t,e,i){(function(t,i){function n(t){return t&&t.Object===Object?t:null}function o(t){if("string"==typeof t)return t;if(r(t))return A?A.call(t):"";var e=t+"";return"0"==e&&1/t==-a?"-0":e}function s(t){return!!t&&"object"==typeof t}function r(t){return"symbol"==typeof t||s(t)&&w.call(t)==h}var a=1/0,h="[object Symbol]",l={"function":!0,object:!0},d=l[typeof e]&&e&&!e.nodeType?e:void 0,c=l[typeof t]&&t&&!t.nodeType?t:void 0,u=n(d&&c&&"object"==typeof i&&i),g=n(l[typeof self]&&self),f=n(l[typeof window]&&window),p=n(l[typeof this]&&this),m=u||f!==(p&&p.window)&&f||g||p||Function("return this")(),v=Object.prototype,w=v.toString,y=m.Symbol,R=y?y.prototype:void 0,A=R?R.toString:void 0;t.exports=o}).call(e,i(36)(t),function(){return this}())},function(t,e,i){function n(t,e,i){var n=e&&i||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){o<16&&(e[n+o++]=l[t])});o<16;)e[n+o++]=0;return e}function o(t,e){var i=e||0,n=h;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function s(t,e,i){var n=e&&i||0,s=e||[];t=t||{};var r=void 0!==t.clockseq?t.clockseq:g,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:p+1,l=a-f+(h-p)/1e4;if(l<0&&void 0===t.clockseq&&(r=r+1&16383),(l<0||a>f)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=a,p=h,g=r,a+=122192928e5;var d=(1e4*(268435455&a)+h)%4294967296;s[n++]=d>>>24&255,s[n++]=d>>>16&255,s[n++]=d>>>8&255,s[n++]=255&d;var c=a/4294967296*1e4&268435455;s[n++]=c>>>8&255,s[n++]=255&c,s[n++]=c>>>24&15|16,s[n++]=c>>>16&255,s[n++]=r>>>8|128,s[n++]=255&r;for(var m=t.node||u,v=0;v<6;v++)s[n+v]=m[v];return e?e:o(s)}function r(t,e,i){var n=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var s=t.random||(t.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var r=0;r<16;r++)e[n+r]=s[r];return e||o(s)}for(var a=i(73),h=[],l={},d=0;d<256;d++)h[d]=(d+256).toString(16).substr(1),l[h[d]]=d;var c=a(),u=[1|c[0],c[1],c[2],c[3],c[4],c[5]],g=16383&(c[6]<<8|c[7]),f=0,p=0,m=r;m.v1=s,m.v4=r,m.parse=n,m.unparse=o,t.exports=m},function(t,e){(function(e){var i;if(e.crypto&&crypto.getRandomValues){var n=new Uint8Array(16);i=function(){return crypto.getRandomValues(n),n}}if(!i){var o=new Array(16);i=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=i}).call(e,function(){return this}())},function(module,exports){"use strict";function findMinMax(t){for(var e,i=1/0,n=-(1/0),o=0,s=t.length;o<s;o++)e=t[o],i>e&&(i=e),n<e&&(n=e);return{min:i,max:n}}function convert(t,e){var i=Math.pow(2,e-1),n=t<0?t*i:t*i-1;return Math.max(-i,Math.min(i-1,n))}function extractPeaks(channel,samplesPerPixel,bits){var i,chanLength=channel.length,numPeaks=Math.ceil(chanLength/samplesPerPixel),start,end,segment,max,min,extrema,peaks=new(eval("Int"+bits+"Array"))(2*numPeaks);for(i=0;i<numPeaks;i++)start=i*samplesPerPixel,end=(i+1)*samplesPerPixel>chanLength?chanLength:(i+1)*samplesPerPixel,segment=channel.subarray(start,end),extrema=findMinMax(segment),min=convert(extrema.min,bits),max=convert(extrema.max,bits),peaks[2*i]=min,peaks[2*i+1]=max;return peaks}function makeMono(channelPeaks,bits){var numChan=channelPeaks.length,weight=1/numChan,numPeaks=channelPeaks[0].length/2,c=0,i=0,min,max,peaks=new(eval("Int"+bits+"Array"))(2*numPeaks);for(i=0;i<numPeaks;i++){for(min=0,max=0,c=0;c<numChan;c++)min+=weight*channelPeaks[c][2*i],max+=weight*channelPeaks[c][2*i+1];peaks[2*i]=min,peaks[2*i+1]=max}return[peaks]}module.exports=function(t,e,i,n,o,s){if(e=e||1e4,s=s||8,i=i||!0,[8,16,32].indexOf(s)<0)throw new Error("Invalid number of bits specified for peaks.");var r,a,h,l,d=t.numberOfChannels,c=[];if("undefined"==typeof t.subarray)for(r=0;r<d;r++)h=t.getChannelData(r),n=n||0,o=o||h.length,l=h.subarray(n,o),c.push(extractPeaks(l,e,s));else n=n||0,o=o||t.length,c.push(extractPeaks(t.subarray(n,o),e,s));return i&&c.length>1&&(c=makeMono(c,s)),a=c[0].length/2,{length:a,data:c,bits:s}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(76),s=n(o),r=i(77),a=n(r),h=i(78),l=n(h),d=i(79),c=n(d),u=i(80),g=n(u);e["default"]={cursor:s["default"],select:a["default"],shift:l["default"],fadein:c["default"],fadeout:g["default"]}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(58),r=function(){function t(e,i,o){n(this,t),this.track=e,this.samplesPerPixel=i,this.sampleRate=o}return o(t,[{key:"click",value:function(t){t.preventDefault();var e=t.offsetX,i=(0,s.pixelsToSeconds)(e,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",i,i,this.track)}},{key:"getClasses",value:function(){return".state-cursor"}},{key:"getEvents",value:function(){return{click:this.click}}}]),t}();e["default"]=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(58),r=function(){function t(e,i,o){n(this,t),this.track=e,this.samplesPerPixel=i,this.sampleRate=o}return o(t,[{key:"mousedown",value:function(t){var e=this;t.preventDefault();var i=t.target,n=t.offsetX,o=(0,s.pixelsToSeconds)(n,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",o,o,this.track);var r=function(t){var i=Math.min(t,n),o=Math.max(t,n),r=(0,s.pixelsToSeconds)(i,e.samplesPerPixel,e.sampleRate),a=(0,s.pixelsToSeconds)(o,e.samplesPerPixel,e.sampleRate);e.track.ee.emit("select",r,a,e.track)},a=function(t){t.preventDefault(),r(t.offsetX),i.onmousemove=i.onmouseup=i.onmouseleave=null};i.onmousemove=function(t){t.preventDefault(),r(t.offsetX)},i.onmouseup=i.onmouseleave=a}},{key:"getClasses",value:function(){return".state-select"}},{key:"getEvents",value:function(){return{mousedown:this.mousedown}}}]),t}();e["default"]=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(58),r=function(){function t(e,i,o){n(this,t),this.track=e,this.samplesPerPixel=i,this.sampleRate=o}return o(t,[{key:"mousedown",value:function(t){var e=this;t.preventDefault();var i=t.target,n=t.offsetX,o=function(t){var i=t-n,o=(0,s.pixelsToSeconds)(i,e.samplesPerPixel,e.sampleRate);n=t,e.track.ee.emit("shift",o,e.track)};i.onmousemove=function(t){t.preventDefault(),o(t.offsetX)};var r=function(t){t.preventDefault(),o(t.offsetX),i.onmousemove=i.onmouseup=i.onmouseleave=null};i.onmouseup=i.onmouseleave=r}},{key:"getClasses",value:function(){return".state-shift"}},{key:"getEvents",value:function(){return{mousedown:this.mousedown}}}]),t}();e["default"]=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(58),r=function(){function t(e,i,o){n(this,t),this.track=e,this.samplesPerPixel=i,this.sampleRate=o}return o(t,[{key:"click",value:function(t){var e=t.offsetX,i=(0,s.pixelsToSeconds)(e,this.samplesPerPixel,this.sampleRate);i>this.track.getStartTime()&&i<this.track.getEndTime()&&this.track.ee.emit("fadein",i-this.track.getStartTime(),this.track)}},{key:"getClasses",value:function(){return".state-fadein"}},{key:"getEvents",value:function(){return{click:this.click}}}]),t}();e["default"]=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(58),r=function(){function t(e,i,o){n(this,t),this.track=e,this.samplesPerPixel=i,this.sampleRate=o}return o(t,[{key:"click",value:function(t){var e=t.offsetX,i=(0,s.pixelsToSeconds)(e,this.samplesPerPixel,this.sampleRate);i>this.track.getStartTime()&&i<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-i,this.track)}},{key:"getClasses",value:function(){return".state-fadeout"}},{key:"getEvents",
value:function(){return{click:this.click}}}]),t}();e["default"]=r},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,i,n,o){var s=Math.abs(n*e),r=Math.abs(o*e);t.fillRect(i,0,1,e-r),t.fillRect(i,e+s,1,e-s)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,n,o,s){i(this,t),this.peaks=e,this.offset=n,this.color=s,this.bits=o}return o(t,[{key:"hook",value:function(t,e,i){if(void 0===i||i.peaks!==this.peaks){var o=void 0,s=t.width,r=t.getContext("2d"),a=t.height/2,h=Math.pow(2,this.bits-1),l=void 0,d=void 0;for(r.clearRect(0,0,t.width,t.height),r.fillStyle=this.color,o=0;o<s;o++)l=this.peaks[2*(o+this.offset)]/h,d=this.peaks[2*(o+this.offset)+1]/h,n(r,a,o,l,d)}}}]),t}();e["default"]=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,i){var n=e===a.FADEIN?1:-1,o=void 0;switch(t){case a.SCURVE:o=(0,h.sCurve)(i,n);break;case a.LINEAR:o=(0,h.linear)(i,n);break;case a.EXPONENTIAL:o=(0,h.exponential)(i,n);break;case a.LOGARITHMIC:o=(0,h.logarithmic)(i,10,n);break;default:throw new Error("Unsupported Fade type")}return o}function s(t,e,i,n,s){var r=void 0,a=void 0,h=void 0,l=void 0;for(t.strokeStyle="black",r=o(e,i,n),l=s-r[0]*s,t.beginPath(),t.moveTo(0,l),a=1,h=r.length;a<h;a++)l=s-r[a]*s,t.lineTo(a,l);t.stroke()}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(83),h=i(84),l=function(){function t(e,i,o,s){n(this,t),this.type=e,this.shape=i,this.duration=o,this.samplesPerPixel=s}return r(t,[{key:"hook",value:function(t,e,i){if(void 0===i||i.shape!==this.shape||i.type!==this.type||i.duration!==this.duration||i.samplesPerPixel!==this.samplesPerPixel){var n=t.getContext("2d");s(n,this.shape,this.type,t.width,t.height)}}}]),t}();e["default"]=l},function(t,e,i){"use strict";function n(t,e){var i=(0,g.sCurve)(1e4,1);this.setValueCurveAtTime(i,t,e)}function o(t,e){var i=(0,g.sCurve)(1e4,-1);this.setValueCurveAtTime(i,t,e)}function s(t,e){this.linearRampToValueAtTime(0,t),this.linearRampToValueAtTime(1,t+e)}function r(t,e){this.linearRampToValueAtTime(1,t),this.linearRampToValueAtTime(0,t+e)}function a(t,e){this.exponentialRampToValueAtTime(.01,t),this.exponentialRampToValueAtTime(1,t+e)}function h(t,e){this.exponentialRampToValueAtTime(1,t),this.exponentialRampToValueAtTime(.01,t+e)}function l(t,e){var i=(0,g.logarithmic)(1e4,10,1);this.setValueCurveAtTime(i,t,e)}function d(t,e){var i=(0,g.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(i,t,e)}function c(t,e,i,o){switch(e){case f:n.call(t,i,o);break;case p:s.call(t,i,o);break;case m:a.call(t,i,o);break;case v:l.call(t,i,o);break;default:throw new Error("Unsupported Fade type")}}function u(t,e,i,n){switch(e){case f:o.call(t,i,n);break;case p:r.call(t,i,n);break;case m:h.call(t,i,n);break;case v:d.call(t,i,n);break;default:throw new Error("Unsupported Fade type")}}Object.defineProperty(e,"__esModule",{value:!0}),e.FADEOUT=e.FADEIN=e.LOGARITHMIC=e.EXPONENTIAL=e.LINEAR=e.SCURVE=void 0,e.createFadeIn=c,e.createFadeOut=u;var g=i(84),f=e.SCURVE="sCurve",p=e.LINEAR="linear",m=e.EXPONENTIAL="exponential",v=e.LOGARITHMIC="logarithmic";e.FADEIN="FadeIn",e.FADEOUT="FadeOut"},function(t,e){"use strict";function i(t,e){var i,n,o=new Float32Array(t),s=t-1;for(i=0;i<t;i++)n=i/s,e>0?o[i]=n:o[i]=1-n;return o}function n(t,e){var i,n,o,s=new Float32Array(t),r=t-1;for(i=0;i<t;i++)n=i/r,o=e>0?i:t-1-i,s[o]=Math.exp(2*n-1)/Math.exp(1);return s}function o(t,e){var i,n=new Float32Array(t),o=e>0?Math.PI/2:-(Math.PI/2);for(i=0;i<t;++i)n[i]=Math.sin(Math.PI*i/t-o)/2+.5;return n}function s(t,e,i){var n,o,s=new Float32Array(t),r=0;for(o=0;o<t;o++)n=i>0?o:t-1-o,r=o/t,s[n]=Math.log(1+e*r)/Math.log(1+e);return s}Object.defineProperty(e,"__esModule",{value:!0}),e.linear=i,e.exponential=n,e.sCurve=o,e.logarithmic=s},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e){i(this,t),this.gain=e}return n(t,[{key:"hook",value:function(t,e,i){t.value=100*this.gain}}]),t}();e["default"]=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(83),r="FadeIn",a="FadeOut",h=function(){function t(e,i){n(this,t),this.ac=e,this.gain=1,this.buffer=i,this.destination=this.ac.destination}return o(t,[{key:"applyFade",value:function(t,e,i){var n=arguments.length<=3||void 0===arguments[3]?"logarithmic":arguments[3];if(t===r)(0,s.createFadeIn)(this.fadeGain.gain,n,e,i);else{if(t!==a)throw new Error("Unsupported fade type");(0,s.createFadeOut)(this.fadeGain.gain,n,e,i)}}},{key:"applyFadeIn",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?"logarithmic":arguments[2];this.applyFade(r,t,e,i)}},{key:"applyFadeOut",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?"logarithmic":arguments[2];this.applyFade(a,t,e,i)}},{key:"isPlaying",value:function(){return void 0!==this.source}},{key:"getDuration",value:function(){return this.buffer.duration}},{key:"setAudioContext",value:function(t){this.ac=t,this.destination=this.ac.destination}},{key:"setUpSource",value:function(){var t,e=this;return this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer,t=new Promise(function(t,i){e.source.onended=function(i){e.source.disconnect(),e.fadeGain.disconnect(),e.volumeGain.disconnect(),e.shouldPlayGain.disconnect(),e.masterGain.disconnect(),e.source=void 0,e.fadeGain=void 0,e.volumeGain=void 0,e.shouldPlayGain=void 0,e.masterGain=void 0,t()}}),this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.masterGain=this.ac.createGain(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.masterGain),this.masterGain.connect(this.destination),t}},{key:"setVolumeGainLevel",value:function(t){this.volumeGain&&(this.volumeGain.gain.value=t)}},{key:"setShouldPlay",value:function(t){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=t?1:0)}},{key:"setMasterGainLevel",value:function(t){this.masterGain&&(this.masterGain.gain.value=t)}},{key:"play",value:function(t,e,i){this.source.start(t,e,i)}},{key:"stop",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];this.source&&this.source.stop(t)}}]),t}();e["default"]=h},function(t,e,i){t.exports=function(){return new Worker(i.p+"301ffd7b6b1f9a16c47c.worker.js")}},function(t,e,i){t.exports=function(){return new Worker(i.p+"9d6412a286f347dccc73.worker.js")}}]);!function(t,e,i){function n(t,e){return typeof t===e}function o(){var t,e,i,o,s,r,a;for(var h in y)if(y.hasOwnProperty(h)){if(t=[],e=y[h],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(o=n(e.fn,"function")?e.fn():e.fn,s=0;s<t.length;s++)r=t[s],a=r.split("."),1===a.length?A[a[0]]=o:(!A[a[0]]||A[a[0]]instanceof Boolean||(A[a[0]]=new Boolean(A[a[0]])),A[a[0]][a[1]]=o),w.push((o?"":"no-")+a.join("-"))}}function s(t){var e=b.className,i=A._config.classPrefix||"";if(x&&(e=e.baseVal),A._config.enableJSClass){var n=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");e=e.replace(n,"$1"+i+"js$2")}A._config.enableClasses&&(e+=" "+i+t.join(" "+i),x?b.className.baseVal=e:b.className=e)}function r(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):x?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function a(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,i){return e+i.toUpperCase()}).replace(/^-/,"")}function h(t,e){if("object"==typeof t)for(var i in t)C(t,i)&&h(i,t[i]);else{t=t.toLowerCase();var n=t.split("."),o=A[n[0]];if(2==n.length&&(o=o[n[1]]),"undefined"!=typeof o)return A;e="function"==typeof e?e():e,1==n.length?A[n[0]]=e:(!A[n[0]]||A[n[0]]instanceof Boolean||(A[n[0]]=new Boolean(A[n[0]])),A[n[0]][n[1]]=e),s([(e&&0!=e?"":"no-")+n.join("-")]),A._trigger(t,e)}return A}function l(){var t=e.body;return t||(t=r(x?"svg":"body"),t.fake=!0),t}function d(t,i,n,o){var s,a,h,d,c="modernizr",u=r("div"),g=l();if(parseInt(n,10))for(;n--;)h=r("div"),h.id=o?o[n]:c+(n+1),u.appendChild(h);return s=r("style"),s.type="text/css",s.id="s"+c,(g.fake?g:u).appendChild(s),g.appendChild(u),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(e.createTextNode(t)),u.id=c,g.fake&&(g.style.background="",g.style.overflow="hidden",d=b.style.overflow,b.style.overflow="hidden",b.appendChild(g)),a=i(u,t),g.fake?(g.parentNode.removeChild(g),b.style.overflow=d,b.offsetHeight):u.parentNode.removeChild(u),!!a}function c(t,e){return!!~(""+t).indexOf(e)}function u(t,e){return function(){return t.apply(e,arguments)}}function g(t,e,i){var o;for(var s in t)if(t[s]in e)return i===!1?t[s]:(o=e[t[s]],n(o,"function")?u(o,i||e):o);return!1}function f(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function p(e,n){var o=e.length;if("CSS"in t&&"supports"in t.CSS){for(;o--;)if(t.CSS.supports(f(e[o]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var s=[];o--;)s.push("("+f(e[o])+":"+n+")");return s=s.join(" or "),d("@supports ("+s+") { #modernizr { position: absolute; } }",function(t){return"absolute"==getComputedStyle(t,null).position})}return i}function m(t,e,o,s){function h(){d&&(delete T.style,delete T.modElem)}if(s=!n(s,"undefined")&&s,!n(o,"undefined")){var l=p(t,o);if(!n(l,"undefined"))return l}for(var d,u,g,f,m,v=["modernizr","tspan","samp"];!T.style&&v.length;)d=!0,T.modElem=r(v.shift()),T.style=T.modElem.style;for(g=t.length,u=0;u<g;u++)if(f=t[u],m=T.style[f],c(f,"-")&&(f=a(f)),T.style[f]!==i){if(s||n(o,"undefined"))return h(),"pfx"!=e||f;try{T.style[f]=o}catch(w){}if(T.style[f]!=m)return h(),"pfx"!=e||f}return h(),!1}function v(t,e,i,o,s){var r=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+B.join(r+" ")+r).split(" ");return n(e,"string")||n(e,"undefined")?m(a,e,o,s):(a=(t+" "+S.join(r+" ")+r).split(" "),g(a,e,i))}var w=[],y=[],R={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){y.push({name:t,fn:e,options:i})},addAsyncTest:function(t){y.push({name:null,fn:t})}},A=function(){};A.prototype=R,A=new A,A.addTest("applicationcache","applicationCache"in t),A.addTest("cors","XMLHttpRequest"in t&&"withCredentials"in new XMLHttpRequest),A.addTest("json","JSON"in t&&"parse"in JSON&&"stringify"in JSON),A.addTest("serviceworker","serviceWorker"in navigator),A.addTest("filereader",!!(t.File&&t.FileList&&t.FileReader)),A.addTest("localstorage",function(){var t="modernizr";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}),A.addTest("webworkers","Worker"in t);var b=e.documentElement,x="svg"===b.nodeName.toLowerCase();A.addTest("canvas",function(){var t=r("canvas");return!(!t.getContext||!t.getContext("2d"))}),A.addTest("video",function(){var t=r("video"),e=!1;try{(e=!!t.canPlayType)&&(e=new Boolean(e),e.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),e.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),e.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),e.vp9=t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),e.hls=t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(i){}return e}),A.addTest("webgl",function(){var e=r("canvas"),i="probablySupportsContext"in e?"probablySupportsContext":"supportsContext";return i in e?e[i]("webgl")||e[i]("experimental-webgl"):"WebGLRenderingContext"in t}),A.addTest("adownload",!t.externalHost&&"download"in r("a"));var L=r("canvas");A.addTest("todataurljpeg",function(){return!!A.canvas&&0===L.toDataURL("image/jpeg").indexOf("data:image/jpeg")}),A.addTest("todataurlpng",function(){return!!A.canvas&&0===L.toDataURL("image/png").indexOf("data:image/png")}),A.addTest("todataurlwebp",function(){var t=!1;try{t=!!A.canvas&&0===L.toDataURL("image/webp").indexOf("data:image/webp")}catch(e){}return t}),A.addTest("imgcrossorigin","crossOrigin"in r("img"));var C;!function(){var t={}.hasOwnProperty;C=n(t,"undefined")||n(t.call,"undefined")?function(t,e){return e in t&&n(t.constructor.prototype[e],"undefined")}:function(e,i){return t.call(e,i)}}(),R._l={},R.on=function(t,e){this._l[t]||(this._l[t]=[]),this._l[t].push(e),A.hasOwnProperty(t)&&setTimeout(function(){A._trigger(t,A[t])},0)},R._trigger=function(t,e){if(this._l[t]){var i=this._l[t];setTimeout(function(){var t,n;for(t=0;t<i.length;t++)(n=i[t])(e)},0),delete this._l[t]}},A._q.push(function(){R.addTest=h}),A.addAsyncTest(function(){function t(){var t=new Image;t.onerror=function(){h("datauri",!0),A.datauri=new Boolean((!0)),A.datauri.over32kb=!1},t.onload=function(){h("datauri",!0),A.datauri=new Boolean((!0)),A.datauri.over32kb=1==t.width&&1==t.height};for(var e="R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.length<33e3;)e="\r\n"+e;t.src="data:image/gif;base64,"+e}navigator.userAgent.indexOf("MSIE 7.")!==-1&&setTimeout(function(){h("datauri",!1)},10);var e=new Image;e.onerror=function(){h("datauri",!1)},e.onload=function(){1==e.width&&1==e.height?t():h("datauri",!1)},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="});var k=R.testStyles=d;k("#modernizr { height: 50vh; }",function(e){var i=parseInt(t.innerHeight/2,10),n=parseInt((t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).height,10);A.addTest("cssvhunit",n==i)});var E="Moz O ms Webkit",B=R._config.usePrefixes?E.split(" "):[];R._cssomPrefixes=B;var M=function(e){var n,o=prefixes.length,s=t.CSSRule;if("undefined"==typeof s)return i;if(!e)return!1;if(e=e.replace(/^@/,""),n=e.replace(/-/g,"_").toUpperCase()+"_RULE",n in s)return"@"+e;for(var r=0;r<o;r++){var a=prefixes[r],h=a.toUpperCase()+"_"+n;if(h in s)return"@-"+a.toLowerCase()+"-"+e}return!1};R.atRule=M;var S=R._config.usePrefixes?E.toLowerCase().split(" "):[];R._domPrefixes=S;var F={elem:r("modernizr")};A._q.push(function(){delete F.elem});var T={style:F.elem.style};A._q.unshift(function(){delete T.style}),R.testAllProps=v;var P,_=R.prefixed=function(t,e,i){return 0===t.indexOf("@")?M(t):(t.indexOf("-")!=-1&&(t=a(t)),e?v(t,e,i):v(t,"pfx"))};try{P=_("indexedDB",t)}catch(D){}A.addTest("indexeddb",!!P),P&&A.addTest("indexeddb.deletedatabase","deleteDatabase"in P),A.addTest("quotamanagement",function(){var t=_("temporaryStorage",navigator),e=_("persistentStorage",navigator);return!(!t||!e)}),A.addTest("filesystem",!!_("requestFileSystem",t));var H=_("URL",t,!1);H=H&&t[H],A.addTest("bloburls",H&&"revokeObjectURL"in H&&"createObjectURL"in H),A.addTest("getusermedia",!!_("getUserMedia",navigator)),o(),s(w),delete R.addTest,delete R.addAsyncTest;for(var $=0;$<A._q.length;$++)A._q[$]();t.Modernizr=A}(window,document),function(t){"use strict";t.colorpicker=new function(){this.regional=[],this.regional[""]={done:"Done",none:"None",revert:"Color",button:"Color",title:"Pick a color",transparent:"Transparent",hueShort:"H",saturationShort:"S",valueShort:"V",redShort:"R",greenShort:"G",blueShort:"B",alphaShort:"A"}};var e='<div class="ui-colorpicker ui-colorpicker-dialog ui-dialog ui-widget ui-widget-content ui-corner-all" style="display: none;"></div>',i='<div class="ui-colorpicker ui-colorpicker-inline ui-dialog ui-widget ui-widget-content ui-corner-all"></div>',n={full:["header","map","bar","hex","inputs","preview","swatches","brush","randomize","footer"],popup:["map","bar","hex","inputs","preview","footer"],inline:["map","bar","hex","inputs","preview"]},o={black:[0,0,0],dimgray:[105,105,105],gray:[128,128,128],darkgray:[169,169,169],silver:[192,192,192],lightgrey:[211,211,211],gainsboro:[220,220,220],whitesmoke:[245,245,245],white:[255,255,255],rosybrown:[188,143,143],indianred:[205,92,92],brown:[165,42,42],firebrick:[178,34,34],lightcoral:[240,128,128],maroon:[128,0,0],darkred:[139,0,0],red:[255,0,0],snow:[255,250,250],salmon:[250,128,114],mistyrose:[255,228,225],tomato:[255,99,71],darksalmon:[233,150,122],orangered:[255,69,0],coral:[255,127,80],lightsalmon:[255,160,122],sienna:[160,82,45],seashell:[255,245,238],chocolate:[210,105,30],saddlebrown:[139,69,19],sandybrown:[244,164,96],peachpuff:[255,218,185],peru:[205,133,63],linen:[250,240,230],darkorange:[255,140,0],bisque:[255,228,196],burlywood:[222,184,135],tan:[210,180,140],antiquewhite:[250,235,215],navajowhite:[255,222,173],blanchedalmond:[255,235,205],papayawhip:[255,239,213],orange:[255,165,0],moccasin:[255,228,181],wheat:[245,222,179],oldlace:[253,245,230],floralwhite:[255,250,240],goldenrod:[218,165,32],darkgoldenrod:[184,134,11],cornsilk:[255,248,220],gold:[255,215,0],palegoldenrod:[238,232,170],khaki:[240,230,140],lemonchiffon:[255,250,205],darkkhaki:[189,183,107],beige:[245,245,220],lightgoldenrodyellow:[250,250,210],olive:[128,128,0],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],olivedrab:[107,142,35],yellowgreen:[154,205,50],darkolivegreen:[85,107,47],greenyellow:[173,255,47],lawngreen:[124,252,0],chartreuse:[127,255,0],darkseagreen:[143,188,143],forestgreen:[34,139,34],limegreen:[50,205,50],lightgreen:[144,238,144],palegreen:[152,251,152],darkgreen:[0,100,0],green:[0,128,0],lime:[0,255,0],honeydew:[240,255,240],mediumseagreen:[60,179,113],seagreen:[46,139,87],springgreen:[0,255,127],mintcream:[245,255,250],mediumspringgreen:[0,250,154],mediumaquamarine:[102,205,170],aquamarine:[127,255,212],turquoise:[64,224,208],lightseagreen:[32,178,170],mediumturquoise:[72,209,204],darkslategray:[47,79,79],paleturquoise:[175,238,238],teal:[0,128,128],darkcyan:[0,139,139],darkturquoise:[0,206,209],aqua:[0,255,255],cyan:[0,255,255],lightcyan:[224,255,255],azure:[240,255,255],cadetblue:[95,158,160],powderblue:[176,224,230],lightblue:[173,216,230],deepskyblue:[0,191,255],skyblue:[135,206,235],lightskyblue:[135,206,250],steelblue:[70,130,180],aliceblue:[240,248,255],dodgerblue:[30,144,255],slategray:[112,128,144],lightslategray:[119,136,153],lightsteelblue:[176,196,222],cornflowerblue:[100,149,237],royalblue:[65,105,225],midnightblue:[25,25,112],lavender:[230,230,250],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],ghostwhite:[248,248,255],darkslateblue:[72,61,139],slateblue:[106,90,205],mediumslateblue:[123,104,238],mediumpurple:[147,112,219],blueviolet:[138,43,226],indigo:[75,0,130],darkorchid:[153,50,204],darkviolet:[148,0,211],mediumorchid:[186,85,211],thistle:[216,191,216],plum:[221,160,221],violet:[238,130,238],purple:[128,0,128],darkmagenta:[139,0,139],magenta:[255,0,255],fuchsia:[255,0,255],orchid:[218,112,214],mediumvioletred:[199,21,133],deeppink:[255,20,147],hotpink:[255,105,180],palevioletred:[219,112,147],lavenderblush:[255,240,245],crimson:[220,20,60],pink:[255,192,203],lightpink:[255,182,193]};t.widget("vanderlee.colorpicker",{options:{alpha:!1,altAlpha:!0,altField:"",altOnChange:!0,altProperties:"background-color",autoOpen:!1,buttonColorize:!1,buttonImage:"/editor/js/vanderlee-colorpicker/images/ui-colorpicker.png",buttonImageOnly:!1,buttonText:null,closeOnOutside:!0,color:"#00FF00",duration:"fast",hsv:!0,regional:"",layout:{map:[0,0,1,3],bar:[1,0,1,3],preview:[2,0,1,1],inputs:[2,1,1,1],hex:[2,2,1,1],swatches:[3,0,1,3]},limit:"",mode:"h",parts:"",rgb:!0,showAnim:"fadeIn",showNoneButton:!1,showOn:"focus",showOptions:{},swatches:null,title:null,zIndex:null,onClose:null,onSelect:null},_create:function(){var n=this;if(n.color_none=!1,n.opened=!1,n.generated=!1,n.inline=!1,n.changed=!1,n.dialog=null,n.button=null,n.image=null,n.mode=n.options.mode,null===n.options.swatches&&(n.options.swatches=o),"input"===this.element[0].nodeName.toLowerCase()){if(n.options.color=n.element.val(),n._loadColor(),t("body").append(e),n.dialog=t(".ui-colorpicker:last"),t(document).mousedown(function(e){if(n.opened&&e.target!==n.element[0]){if(t(e.target).parents(".ui-colorpicker").length>0)return void n.element.blur();var i,o=t(e.target).parents();for(i in o)if(null!==n.button&&o[i]===n.button[0])return;n.options.closeOnOutside&&n.close()}}),"focus"!==n.options.showOn&&"both"!==n.options.showOn||n.element.focus(function(){n.open()}),"button"===n.options.showOn||"both"===n.options.showOn){if(""!==n.options.buttonImage){var s=n.options.buttonText?n.options.buttonText:n._getRegional("button");n.image=t("<img/>").attr({src:n.options.buttonImage,alt:s,title:s}),n._setImageBackground()}n.options.buttonImageOnly&&n.image?n.button=n.image:(n.button=t('<button type="button"></button>').html(n.image||n.options.buttonText).button(),n.image=n.image?t("img",n.button).first():null),n.button.insertAfter(n.element).click(function(){n[n.opened?"close":"open"]()})}n.options.autoOpen&&n.open(),n.element.keydown(function(t){9===t.keyCode&&n.close()}).keyup(function(t){var e=n._parseHex(n.element.val());e&&(n.color=e===!1?new n.Color:new n.Color(e[0],e[1],e[2]),n._change())})}else n.inline=!0,t(this.element).html(i),n.dialog=t(".ui-colorpicker",this.element),n._generate(),n.opened=!0;return this},destroy:function(){this.element.unbind(),null!==this.image&&this.image.remove(),null!==this.button&&this.button.remove(),null!==this.dialog&&this.dialog.remove()},_setOption:function(e,i){var n=this;switch(e){case"disabled":i?n.dialog.addClass("ui-colorpicker-disabled"):n.dialog.removeClass("ui-colorpicker-disabled")}t.Widget.prototype._setOption.apply(n,arguments)},_setAltField:function(){if(this.options.altOnChange&&this.options.altField&&this.options.altProperties){var e,i,n=this.options.altProperties.split(",");for(var e in n)switch(i=t.trim(n[e])){case"color":case"background-color":case"outline-color":case"border-color":t(this.options.altField).css(i,this.color_none?"":this.color.toCSS())}this.options.altAlpha&&t(this.options.altField).css("opacity",this.color_none?"":this.color.a)}},_loadColor:function(){if(!this.color){var e=this._parseColor(this.options.color);this.color=e===!1?new this.Color:new this.Color(e[0],e[1],e[2],e[3]),this.color_none=e===!1,this.currentColor=t.extend({},this.color)}this._setAltField()},_loadBrush:function(){},_generate:function(){var e,i,o,s=this;o="string"==typeof s.options.parts?s.options.parts in n?n[s.options.parts]:n[s.inline?"inline":"popup"]:s.options.parts,s.parts={};for(var e in o)i=o[e],i in s._parts&&(s.parts[i]=new s._parts[i](s));if(s._loadColor(),s._loadBrush(),!s.generated){var r=[];for(var e in s.options.layout)e in s.parts&&r.push({part:e,pos:s.options.layout[e]});t(s._layoutTable(r,function(t,e,i){var n=[];return e>0&&n.push("ui-colorpicker-padding-left"),i>0&&n.push("ui-colorpicker-padding-top"),'<td id="ui-colorpicker-'+t.part+'-container"'+(t.pos[2]>1?' colspan="'+t.pos[2]+'"':"")+(t.pos[3]>1?' rowspan="'+t.pos[3]+'"':"")+(n.length>0?' class="'+n.join(" ")+'"':"")+' valign="top"></td>'})).appendTo(s.dialog).addClass("ui-dialog-content ui-widget-content"),s._initAllParts(),s._generateAllParts(),s.generated=!0}},_layoutTable:function(t,e){var i,n,o,s,r,a,h,l,d,c,t=t.sort(function(t,e){return t.pos[1]==e.pos[1]?t.pos[0]-e.pos[0]:t.pos[1]-e.pos[1]});s=0,r=0;for(var l in t)s=Math.max(s,t[l].pos[0]+t[l].pos[2]),r=Math.max(r,t[l].pos[1]+t[l].pos[3]);for(i=[],n=0;n<s;++n)i.push(new Array(r));h=new Array(r),a=new Array(s);for(var l in t){for(n=0;n<t[l].pos[2];n+=1)a[t[l].pos[0]+n]=!0;for(o=0;o<t[l].pos[3];o+=1)h[t[l].pos[1]+o]=!0}for(c="",d=t[l=0],o=0;o<r;++o){for(c+="<tr>",n=0;n<s;)if(void 0!==d&&n==d.pos[0]&&o==d.pos[1]){var u,g;for(c+=e(d,n,o),g=0;g<d.pos[3];g+=1)for(u=0;u<d.pos[2];u+=1)i[n+u][o+g]=!0;n+=d.pos[2],d=t[++l]}else{for(var f=0,p=!1;n<s&&void 0===i[n][o]&&(void 0===d||o<d.pos[1]||o==d.pos[1]&&n<d.pos[0]);)a[n]===!0&&(f+=1),p=!0,n+=1;f>0?c+='<td colspan="'+f+'"></td>':p||(n+=1)}c+="</tr>"}return'<table cellspacing="0" cellpadding="0" border="0"><tbody>'+c+"</tbody></table>"},_effectGeneric:function(e,i,n,o){var s=this;t.effects&&t.effects[s.options.showAnim]?s.dialog[e](s.options.showAnim,s.options.showOptions,s.options.duration,o):(s.dialog["slideDown"===s.options.showAnim?i:"fadeIn"===s.options.showAnim?n:e](s.options.showAnim?s.options.duration:null,o),s.options.showAnim&&s.options.duration||o())},_effectShow:function(t){this._effectGeneric("show","slideDown","fadeIn",t)},_effectHide:function(t){this._effectGeneric("hide","slideUp","fadeOut",t)},open:function(){if(!this.opened){this.options.zIndex&&this.dialog.css("z-index",this.options.zIndex),this._generate(),this._change();var e=this.element.offset(),i=e.left,n=e.top+this.element.outerHeight();i-=Math.max(0,i+this.dialog.width()-t(window).width()+20),n-=Math.max(0,n+this.dialog.height()-t(window).height()+20),this.dialog.css({left:i,top:n}),this._effectShow(),this.opened=!0;var o=this;t(function(){t.each(o.parts,function(t,e){e.repaint()})})}},_setImageBackground:function(){this.image&&this.options.buttonColorize&&this.image.css("background-color",this.color_none?"":this.color.toCSS())},close:function(){var e=this;this.currentColor=t.extend({},this.color),this.changed=!1,this._effectHide(function(){e.options.zIndex&&e.dialog.css("z-index",""),e.dialog.empty(),e.generated=!1,e.opened=!1,e._callback(e.options.onClose)})},setColor:function(e){var i=this._parseColor(e);i!==!1&&(this.color=new this.Color(i[0],i[1],i[2],i[3]),this.color_none=!1,this.currentColor=t.extend({},this.color),this._change())},setBrush:function(e,i,n){t(".brush-options.selected").removeClass("selected"),this.brush=new this.Brush(e,i,n),t(this.brush.brush).addClass("selected"),this._change()},_callback:function(t){var e=this;t instanceof Function&&(e.color_none?t("",{r:0,g:0,b:0,a:0},e):t(e.color.toCSS(),{r:e.color.r,g:e.color.g,b:e.color.b,a:e.color.a},e))},_generateAllParts:function(){t.each(this.parts,function(t,e){e.generate()})},_initAllParts:function(){t.each(this.parts,function(t,e){e.init()})},_limit:function(){switch(this.options.limit){case"websafe":this.color.limit(6);break;case"nibble":this.color.limit(16);break;case"binary":this.color.limit(2)}},_change:function(e){this.color_none=e===!0,this.changed=!0,this._limit(),this.inline||(this.color_none?this.element.val(""):this.color.equals(this._parseHex(this.element.val()))||this.element.val(this.color.toHex()),this._setImageBackground(),this._setAltField()),this.opened&&t.each(this.parts,function(t,e){e.repaint()}),this._callback(this.options.onSelect)},_intToHex:function(t){var e=Math.round(t).toString(16);return 1===e.length&&(e="0"+e),e.toLowerCase()},_hoverable:function(t){t.hover(function(){t.addClass("ui-state-hover")},function(){t.removeClass("ui-state-hover")})},_focusable:function(t){t.focus(function(){t.addClass("ui-state-focus")}).blur(function(){t.removeClass("ui-state-focus")})},_getRegional:function(e){return void 0!==t.colorpicker.regional[this.options.regional][e]?t.colorpicker.regional[this.options.regional][e]:t.colorpicker.regional[""][e]},getBrushSize:function(){return this.brush&&Number(this.brush.size)||1},_parts:{header:function(e){var i,n=null;i=function(){var t=e.options.title?e.options.title:e._getRegional("title");return'<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title">'+t+'</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div>'},this.init=function(){n=t(i()).prependTo(e.dialog);var o=t(".ui-dialog-titlebar-close",n);e._hoverable(o),e._focusable(o),o.click(function(){e.close()})},this.repaint=function(){},this.generate=function(){this.repaint()}},map:function(e){var i,n,o,s,r=this,a=null;i=function(s){if(e.opened){var r=t("#ui-colorpicker-map-layer-pointer",a),h=r.offset(),l=r.width(),d=r.height(),c=s.originalEvent.changedTouches?s.originalEvent.changedTouches[0]:s,u=c.pageX-h.left,g=c.pageY-h.top;u>=0&&u<l&&g>=0&&g<d&&(s.stopImmediatePropagation(),s.preventDefault(),t(a).unbind("mousedown",i),t(a).unbind("touchstart",i),t(a).bind("mouseup",n),t(a).bind("touchend",n),t(a).bind("mousemove",o),t(a).bind("touchmove",o),o(s))}},n=function(e){e.stopImmediatePropagation(),e.preventDefault(),t(a).unbind("mouseup",n),t(a).unbind("touchend",n),t(a).unbind("mousemove",o),t(a).unbind("touchmove",o),t(a).bind("mousedown",i),t(a).bind("touchstart",i)},o=function(i){i.stopImmediatePropagation(),i.preventDefault();var n=i.originalEvent.changedTouches?i.originalEvent.changedTouches[0]:i;if(n.pageX!==r.x||n.pageY!==r.y){r.x=n.pageX,r.y=n.pageY;var o=t("#ui-colorpicker-map-layer-pointer",a),s=o.offset(),h=o.width(),l=o.height(),d=n.pageX-s.left,c=n.pageY-s.top;switch(d=Math.max(0,Math.min(d/h,1)),c=Math.max(0,Math.min(c/l,1)),e.mode){case"h":e.color.s=d,e.color.v=1-c,e.color.updateRGB();break;case"s":case"a":e.color.h=d,e.color.v=1-c,e.color.updateRGB();break;case"v":e.color.h=d,e.color.s=1-c,e.color.updateRGB();break;case"r":e.color.b=d,e.color.g=1-c,e.color.updateHSV();break;case"g":e.color.b=d,e.color.r=1-c,e.color.updateHSV();break;case"b":e.color.r=d,e.color.g=1-c,e.color.updateHSV();break;case"picture":e.color.x=d,e.color.y=c;var u=e.picturectx.getImageData(d*h|0,c*l|0,1,1).data;e.color.r=u[0]/255,e.color.g=u[1]/255,e.color.b=u[2]/255,e.color.updateHSV()}e._change()}},s=function(){var t='<div id="ui-colorpicker-map" class="ui-colorpicker-border"><span id="ui-colorpicker-map-layer-1">&nbsp;</span><span id="ui-colorpicker-map-layer-2">&nbsp;</span>'+(e.options.alpha?'<span id="ui-colorpicker-map-layer-alpha">&nbsp;</span>':"")+'<span id="ui-colorpicker-map-layer-pointer"><span id="ui-colorpicker-map-pointer"></span></span></div>';return t},this.generate=function(){switch(t("#ui-colorpicker-map-layer-1",a).css({"background-position":"","background-size":"",opacity:"","background-image":""}),e.mode){case"h":t("#ui-colorpicker-map-layer-1",a).css({"background-position":"0 0",opacity:""}).show(),t("#ui-colorcasepicker-map-layer-2",a).hide();break;case"s":case"a":t("#ui-colorpicker-map-layer-1",a).css({"background-position":"0 -260px",opacity:""}).show(),t("#ui-colorpicker-map-layer-2",a).css({"background-position":"0 -520px",opacity:""}).show();break;case"v":t(a).css("background-color","black"),t("#ui-colorpicker-map-layer-1",a).css({"background-position":"0 -780px",opacity:""}).show(),t("#ui-colorpicker-map-layer-2",a).hide();break;case"r":t("#ui-colorpicker-map-layer-1",a).css({"background-position":"0 -1040px",opacity:""}).show(),t("#ui-colorpicker-map-layer-2",a).css({"background-position":"0 -1300px",opacity:""}).show();break;case"g":t("#ui-colorpicker-map-layer-1",a).css({"background-position":"0 -1560px",opacity:""}).show(),t("#ui-colorpicker-map-layer-2",a).css({"background-position":"0 -1820px",opacity:""}).show();break;case"b":t("#ui-colorpicker-map-layer-1",a).css({"background-position":"0 -2080px",opacity:""}).show(),t("#ui-colorpicker-map-layer-2",a).css({
"background-position":"0 -2340px",opacity:""}).show();break;case"picture":t("#ui-colorpicker-map-layer-1",a).css({"background-position":"0px 0px","background-size":"256px 256px",opacity:"","background-image":'url("'+e.picture+'")'}).show(),t("#ui-colorpicker-map-layer-2",a).hide()}r.repaint()},this.repaint=function(){var i=t("#ui-colorpicker-map-layer-pointer",a),n=0,o=0;switch(e.mode){case"h":n=e.color.s*i.width(),o=(1-e.color.v)*i.width(),t(a).css("background-color",e.color.normClone().toCSS());break;case"s":case"a":n=e.color.h*i.width(),o=(1-e.color.v)*i.width(),t("#ui-colorpicker-map-layer-2",a).css("opacity",1-e.color.s);break;case"v":n=e.color.h*i.width(),o=(1-e.color.s)*i.width(),t("#ui-colorpicker-map-layer-1",a).css("opacity",e.color.v);break;case"r":n=e.color.b*i.width(),o=(1-e.color.g)*i.width(),t("#ui-colorpicker-map-layer-2",a).css("opacity",e.color.r);break;case"g":n=e.color.b*i.width(),o=(1-e.color.r)*i.width(),t("#ui-colorpicker-map-layer-2",a).css("opacity",e.color.g);break;case"b":n=e.color.r*i.width(),o=(1-e.color.g)*i.width(),t("#ui-colorpicker-map-layer-2",a).css("opacity",e.color.b);break;case"picture":t(a).css("background-color",""),n=e.color.x*i.width(),o=e.color.y*i.height()}e.options.alpha&&t("#ui-colorpicker-map-layer-alpha",a).css("opacity",1-e.color.a),t("#ui-colorpicker-map-pointer",a).css({left:n-7,top:o-7})},this.init=function(){a=t(s()).appendTo(t("#ui-colorpicker-map-container",e.dialog)),a.bind("mousedown",i),a.bind("touchstart",i)}},bar:function(e){var i,n,o,s,r=this,a=null;i=function(s){if(e.opened){var r=t("#ui-colorpicker-bar-layer-pointer",a),h=r.offset(),l=r.width(),d=r.height(),c=s.originalEvent.changedTouches?s.originalEvent.changedTouches[0]:s,u=c.pageX-h.left,g=c.pageY-h.top;u>=0&&u<l&&g>=0&&g<d&&(s.stopImmediatePropagation(),s.preventDefault(),t(a).unbind("mousedown",i),t(a).unbind("touchstart",i),t(a).bind("mouseup",n),t(a).bind("touchend",n),t(a).bind("mousemove",o),t(a).bind("touchmove",o),o(s))}},n=function(e){e.stopImmediatePropagation(),e.preventDefault(),t(a).unbind("mouseup",n),t(a).unbind("touchend",n),t(a).unbind("mousemove",o),t(a).unbind("touchmove",o),t(a).bind("mousedown",i),t(a).bind("touchstart",i)},o=function(i){i.stopImmediatePropagation(),i.preventDefault();var n=i.originalEvent.changedTouches?i.originalEvent.changedTouches[0]:i;if(n.pageY!==r.y){r.y=n.pageY;var o=t("#ui-colorpicker-bar-layer-pointer",a),s=o.offset(),h=o.height(),l=n.pageY-s.top;switch(l=Math.max(0,Math.min(l/h,1)),e.mode){case"h":e.color.h=1-l,e.color.updateRGB();break;case"s":e.color.s=1-l,e.color.updateRGB();break;case"v":e.color.v=1-l,e.color.updateRGB();break;case"r":e.color.r=1-l,e.color.updateHSV();break;case"g":e.color.g=1-l,e.color.updateHSV();break;case"b":e.color.b=1-l,e.color.updateHSV();break;case"a":case"picture":e.color.a=1-l}e._change()}},s=function(){var t='<div id="ui-colorpicker-bar" class="ui-colorpicker-border"><span id="ui-colorpicker-bar-layer-1">&nbsp;</span><span id="ui-colorpicker-bar-layer-2">&nbsp;</span><span id="ui-colorpicker-bar-layer-3">&nbsp;</span><span id="ui-colorpicker-bar-layer-4">&nbsp;</span>';return e.options.alpha&&(t+='<span id="ui-colorpicker-bar-layer-alpha">&nbsp;</span><span id="ui-colorpicker-bar-layer-alphabar">&nbsp;</span>'),t+='<span id="ui-colorpicker-bar-layer-pointer"><span id="ui-colorpicker-bar-pointer"></span></span></div>'},this.generate=function(){switch(e.mode){case"h":case"s":case"v":case"r":case"g":case"b":t("#ui-colorpicker-bar-layer-alpha",a).show(),t("#ui-colorpicker-bar-layer-alphabar",a).hide();break;case"a":case"picture":t("#ui-colorpicker-bar-layer-alpha",a).hide(),t("#ui-colorpicker-bar-layer-alphabar",a).show()}switch(e.mode){case"h":t("#ui-colorpicker-bar-layer-1",a).css({"background-position":"0 0",opacity:""}).show(),t("#ui-colorpicker-bar-layer-2",a).hide(),t("#ui-colorpicker-bar-layer-3",a).hide(),t("#ui-colorpicker-bar-layer-4",a).hide();break;case"s":t("#ui-colorpicker-bar-layer-1",a).css({"background-position":"0 -260px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-2",a).css({"background-position":"0 -520px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-3",a).hide(),t("#ui-colorpicker-bar-layer-4",a).hide();break;case"v":t("#ui-colorpicker-bar-layer-1",a).css({"background-position":"0 -520px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-2",a).hide(),t("#ui-colorpicker-bar-layer-3",a).hide(),t("#ui-colorpicker-bar-layer-4",a).hide();break;case"r":t("#ui-colorpicker-bar-layer-1",a).css({"background-position":"0 -1560px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-2",a).css({"background-position":"0 -1300px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-3",a).css({"background-position":"0 -780px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-4",a).css({"background-position":"0 -1040px",opacity:""}).show();break;case"g":t("#ui-colorpicker-bar-layer-1",a).css({"background-position":"0 -2600px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-2",a).css({"background-position":"0 -2340px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-3",a).css({"background-position":"0 -1820px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-4",a).css({"background-position":"0 -2080px",opacity:""}).show();break;case"b":t("#ui-colorpicker-bar-layer-1",a).css({"background-position":"0 -3640px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-2",a).css({"background-position":"0 -3380px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-3",a).css({"background-position":"0 -2860px",opacity:""}).show(),t("#ui-colorpicker-bar-layer-4",a).css({"background-position":"0 -3120px",opacity:""}).show();break;case"a":case"picture":t("#ui-colorpicker-bar-layer-1",a).hide(),t("#ui-colorpicker-bar-layer-2",a).hide(),t("#ui-colorpicker-bar-layer-3",a).hide(),t("#ui-colorpicker-bar-layer-4",a).hide()}r.repaint()},this.repaint=function(){var i=t("#ui-colorpicker-bar-layer-pointer",a),n=0;switch(e.mode){case"h":n=(1-e.color.h)*i.height();break;case"s":n=(1-e.color.s)*i.height(),t("#ui-colorpicker-bar-layer-2",a).css("opacity",1-e.color.v),t(a).css("background-color",e.color.normClone().toCSS());break;case"v":n=(1-e.color.v)*i.height(),t(a).css("background-color",e.color.normClone().toCSS());break;case"r":n=(1-e.color.r)*i.height(),t("#ui-colorpicker-bar-layer-2",a).css("opacity",Math.max(0,e.color.b-e.color.g)),t("#ui-colorpicker-bar-layer-3",a).css("opacity",Math.max(0,e.color.g-e.color.b)),t("#ui-colorpicker-bar-layer-4",a).css("opacity",Math.min(e.color.b,e.color.g));break;case"g":n=(1-e.color.g)*i.height(),t("#ui-colorpicker-bar-layer-2",a).css("opacity",Math.max(0,e.color.b-e.color.r)),t("#ui-colorpicker-bar-layer-3",a).css("opacity",Math.max(0,e.color.r-e.color.b)),t("#ui-colorpicker-bar-layer-4",a).css("opacity",Math.min(e.color.r,e.color.b));break;case"b":n=(1-e.color.b)*i.height(),t("#ui-colorpicker-bar-layer-2",a).css("opacity",Math.max(0,e.color.r-e.color.g)),t("#ui-colorpicker-bar-layer-3",a).css("opacity",Math.max(0,e.color.g-e.color.r)),t("#ui-colorpicker-bar-layer-4",a).css("opacity",Math.min(e.color.r,e.color.g));break;case"a":case"picture":n=(1-e.color.a)*i.height(),t(a).css("background-color",e.color.toCSS())}"a"!==e.mode&&t("#ui-colorpicker-bar-layer-alpha",a).css("opacity",1-e.color.a),t("#ui-colorpicker-bar-pointer",a).css("top",n-3)},this.init=function(){a=t(s()).appendTo(t("#ui-colorpicker-bar-container",e.dialog)),a.bind("mousedown",i),a.bind("touchstart",i)}},inputs:function(e){var i,n=null;i=function(){var t='<div id="ui-colorpicker-inputs">';return e.options.hsv&&(t+='<div id="ui-colorpicker-h"><input class="ui-colorpicker-mode" type="radio" value="h"/><label>'+e._getRegional("hueShort")+'</label><input class="ui-colorpicker-number ui-colorpicker-number-hsv" type="number" min="0" max="360" size="10"/><span class="ui-colorpicker-unit">&deg;</span></div><div id="ui-colorpicker-s"><input class="ui-colorpicker-mode" type="radio" value="s"/><label>'+e._getRegional("saturationShort")+'</label><input class="ui-colorpicker-number ui-colorpicker-number-hsv" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div><div id="ui-colorpicker-v"><input class="ui-colorpicker-mode" type="radio" value="v"/><label>'+e._getRegional("valueShort")+'</label><input class="ui-colorpicker-number ui-colorpicker-number-hsv" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div>'),e.options.rgb&&(t+='<div id="ui-colorpicker-r"><input class="ui-colorpicker-mode" type="radio" value="r"/><label>'+e._getRegional("redShort")+'</label><input class="ui-colorpicker-number ui-colorpicker-number-rgb" type="number" min="0" max="255" size="10"/><span class="ui-colorpicker-unit"></span></div><div id="ui-colorpicker-g"><input class="ui-colorpicker-mode" type="radio" value="g"/><label>'+e._getRegional("greenShort")+'</label><input class="ui-colorpicker-number ui-colorpicker-number-rgb" type="number" min="0" max="255" size="10"/><span class="ui-colorpicker-unit"></span></div><div id="ui-colorpicker-b"><input class="ui-colorpicker-mode" type="radio" value="b"/><label>'+e._getRegional("blueShort")+'</label><input class="ui-colorpicker-number ui-colorpicker-number-rgb" type="number" min="0" max="255" size="10"/><span class="ui-colorpicker-unit"></span></div>'),e.options.alpha&&(t+='<div id="ui-colorpicker-a"><input class="ui-colorpicker-mode" name="mode" type="radio" value="a"/><label>'+e._getRegional("alphaShort")+'</label><input class="ui-colorpicker-number ui-colorpicker-number-a" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div>'),e.options.picture&&(t+='<div id="ui-colorpicker-picture"><input class="ui-colorpicker-mode" name="mode" type="radio" value="picture"/><input type="file" class="btn-file" title="picture" class="ui-colorpicker-picture" accept="image/*"></div>'),t+"</div>"},this.init=function(){n=t(i()).appendTo(t("#ui-colorpicker-inputs-container",e.dialog)),n.find("input.btn-file").removeClass("btn-file").bootstrapFileInput(),n.find("#ui-colorpicker-picture .btn input").change(function(){var i=URL.createObjectURL(this.files[0]);ImageUtils.loadImage(i,function(i){e.picturecanvas=ImageUtils.resize(i,256,256),e.picture=e.picturecanvas.toDataURL(),e.picturectx=e.picturecanvas.getContext("2d"),e._generateAllParts(),t("#ui-colorpicker-picture .ui-colorpicker-mode",e.dialog).click()})}),t(".ui-colorpicker-mode",n).click(function(){e.mode=t(this).val(),e._generateAllParts()}),t(".ui-colorpicker-number",n).bind("change input keyup",function(){e.color.r=t("#ui-colorpicker-r .ui-colorpicker-number",n).val()/255,e.color.g=t("#ui-colorpicker-g .ui-colorpicker-number",n).val()/255,e.color.b=t("#ui-colorpicker-b .ui-colorpicker-number",n).val()/255,e.color.a=t("#ui-colorpicker-a .ui-colorpicker-number",n).val()/100,e.color.h=t("#ui-colorpicker-h .ui-colorpicker-number",n).val()/360,e.color.s=t("#ui-colorpicker-s .ui-colorpicker-number",n).val()/100,e.color.v=t("#ui-colorpicker-v .ui-colorpicker-number",n).val()/100,t(this).hasClass("ui-colorpicker-number-hsv")?e.color.updateRGB():t(this).hasClass("ui-colorpicker-number-rgb")&&e.color.updateHSV(),e._change()})},this.repaint=function(){var i=t.extend(e.color);i.h*=360,i.s*=100,i.v*=100,i.r*=255,i.g*=255,i.b*=255,i.a*=100,t.each(i,function(e,i){var o=Math.round(i);t("#ui-colorpicker-"+e+" .ui-colorpicker-number",n).is(":focus")||t("#ui-colorpicker-"+e+" .ui-colorpicker-number",n).val()===o||t("#ui-colorpicker-"+e+" .ui-colorpicker-number",n).val(o)})},this.generate=function(){t(".ui-colorpicker-mode",n).each(function(){t(this).attr("checked",t(this).val()===e.mode)}),this.repaint()}},preview:function(e){var i,n=null;i=function(){return'<div id="ui-colorpicker-preview"><span class="ui-colorpicker-border"><div id="ui-colorpicker-preview-initial"><div id="ui-colorpicker-preview-initial-alpha"></div></div><div id="ui-colorpicker-preview-current"><div id="ui-colorpicker-preview-current-alpha"></div></div></span></div>'},this.init=function(){n=t(i()).appendTo(t("#ui-colorpicker-preview-container",e.dialog)),t("#ui-colorpicker-preview-initial",n).click(function(){e.color=t.extend({},e.currentColor),e._change()})},this.repaint=function(){t("#ui-colorpicker-preview-initial",n).css("background-color",e.currentColor.toCSS()).attr("title",e.currentColor.toHex()),t("#ui-colorpicker-preview-initial-alpha",n).css("opacity",1-e.currentColor.a),t("#ui-colorpicker-preview-current",n).css("background-color",e.color.toCSS()).attr("title",e.color.toHex()),t("#ui-colorpicker-preview-current-alpha",n).css("opacity",1-e.color.a)},this.generate=function(){e.options.alpha?t("#ui-colorpicker-preview-initial-alpha, #ui-colorpicker-preview-current-alpha",n).show():t("#ui-colorpicker-preview-initial-alpha, #ui-colorpicker-preview-current-alpha",n).hide(),this.repaint()}},hex:function(e){var i,n=null;i=function(){var t="";return e.options.alpha&&(t+='<input id="ui-colorpicker-hex-alpha" maxlength="2" size="2"/>'),t+='<input id="ui-colorpicker-hex-input" maxlength="6" size="6"/>','<div id="ui-colorpicker-hex"><label for="ui-colorpicker-hex-input">#: </label>'+t+"</div>"},this.init=function(){n=t(i()).appendTo(t("#ui-colorpicker-hex-container",e.dialog)),t("#ui-colorpicker-hex-input",n).bind("change keyup",function(){var i=e._parseHex(t(this).val());e.color.r=i[0],e.color.g=i[1],e.color.b=i[2],e.color.updateHSV(),e._change()}),t("#ui-colorpicker-hex-alpha",n).bind("change keyup",function(){e.color.a=parseInt(t("#ui-colorpicker-hex-alpha",n).val(),16),e._change()})},this.repaint=function(){t("#ui-colorpicker-hex-input",n).is(":focus")||t("#ui-colorpicker-hex-input",n).val(e.color.toHex(!0)),t("#ui-colorpicker-hex-alpha",n).is(":focus")||t("#ui-colorpicker-hex-alpha",n).val(e._intToHex(255*e.color.a))},this.generate=function(){this.repaint()}},swatches:function(e){var i,n=null;i=function(){var i="";return t.each(e.options.swatches,function(t,n){var o=e._intToHex(n[0])+e._intToHex(n[1])+e._intToHex(n[2]);i+='<div class="ui-colorpicker-swatch" style="background-color: #'+o+'" title="'+t+'"></div>'}),'<div id="ui-colorpicker-swatches" class="ui-colorpicker-border">'+i+"</div>"},this.init=function(){n=t(i()).appendTo(t("#ui-colorpicker-swatches-container",e.dialog)),t(".ui-colorpicker-swatch",n).click(function(){var i=e._parseColor(t(this).css("background-color"));e.color=i===!1?new e.Color:new e.Color(i[0],i[1],i[2],i[3]),e._change()})},this.repaint=function(){},this.generate=function(){}},brush:function(e){var i=this,n=[],o=["/images/brush/dunes.png","/images/brush/brush2.png","/images/brush/brush3.png","/images/brush/brush5.png","/images/brush/brush6.png","/images/brush/brush7.png","/images/brush/brush9.png","/images/brush/brush10.png","/images/brush/brush11.png"];this.repaint=function(){var t=e.color.toCSS(),i=e.color.a,o=32;n.forEach(function(n){n.toggle(e.brush.size>=n.data("min-size"));var s=n.data("sprite");n=n.get(0);var r=n.getContext("2d");r.globalAlpha=i,r.clearRect(0,0,n.width,n.height),r.fillStyle=t,r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",s&&r.drawImage(s,(n.width-o)/2,(n.height-o)/2,o,o)})},this.init=function(){var s=t("#ui-colorpicker-brush-container",e.dialog);s.append(t("<input>").attr({id:"brushSize",type:"number",value:e.getBrushSize(),min:1,max:50,step:1,title:"Pencil size"}).css({width:"40px",height:"32px","vertical-align":"top",margin:0,padding:0,border:"none","text-align":"right"}).addClass("ui-colorpicker-number").on("change keypress mouseup",function(){e.brush.size=this.value,i.repaint()}));var r=t("<canvas>").addClass("brush-options").attr({width:32,height:32,title:"color pixels"}).css({"background-image":"url(/images/pencil-tool.png)","background-position":"center center","background-repeat":"no-repeat","background-size":"16px 16px"}).click(function(){e.setBrush(this,e.getBrushSize(),"pixel")}),a=new Image;a.onload=function(){i.repaint()},a.src="/images/brush/pencil.png",r.data("sprite",a),r.data("min-size",1),r.data("src",a.src),n.push(r),s.append(r),r=t("<canvas>").addClass("brush-options").attr({width:24,height:2,title:"draw lines"}).click(function(){e.setBrush(this,e.getBrushSize(),"line")}).css({height:2,"padding-top":15,"padding-bottom":15}),r.data("src","line"),r.data("min-size",1),n.push(r),s.append(r),o.forEach(function(o){var r=t("<canvas>").addClass("brush-options").attr({width:32,height:32}).click(function(){e.setBrush(this,e.getBrushSize(),o)}),a=new Image;a.onload=function(){i.repaint()},a.src=o,r.data("sprite",a),r.data("min-size",4),r.data("src",o),n.push(r),s.append(r)}),e.brush||n[0].click(),n.forEach(function(t){t.data("src")==e.brush.type&&(t.addClass("selected"),e.brush.brush=t.get(0))}),this.repaint()},this.generate=function(){}},randomize:function(e){this.init=function(){var i=t("#ui-colorpicker-randomize-container",e.dialog),n="randomize-"+1e4*Math.random()|0,o=t('<div><div class="squaredTwo pull-left"><input type="checkbox" id="'+n+'" onclick=""><label for="'+n+'" title="Randomize the color luminance when drawing to lighter or darker tone"></label></div><label for="'+n+'" style="padding: 5px;cursor:pointer" onclick=""> noise</label></div>');e.randomize&&o.children("input").prop("checked",!1),o.find("input").change(function(){e.randomize=this.checked?1:0}),i.append(o)},this.repaint=function(){},this.generate=function(){}},footer:function(e){var i,n,o=null;i=function(){return'<div class="ui-dialog-buttonpane ui-widget-content">'+(e.options.alpha?'<button class="ui-colorpicker-transparent">'+e._getRegional("transparent")+"</button>":"")+(e.inline?"":'<div class="ui-dialog-buttonset">'+(e.options.showNoneButton?'<button class="ui-colorpicker-none">'+e._getRegional("none")+"</button>":"")+'<button class="ui-colorpicker-close">'+e._getRegional("done")+"</button></div>")+"</div>"},n=function(i){t(".ui-colorpicker-none .ui-button-text",i).text(e._getRegional(e.color_none?"revert":"none"))},this.init=function(){o=t(i()).appendTo(e.dialog),t(".ui-colorpicker-close",o).button().click(function(){e.close()}),t(".ui-colorpicker-none",o).button().click(function(){e._change(!e.color_none),n(o)}),n(o),e.options.alpha&&t(".ui-colorpicker-transparent",o).button().click(function(){e.color.a=0,e._change()})},this.repaint=function(){},this.generate=function(){}}},_parseHex:function(e){var i,n,s=t.trim(e).toLowerCase();return o[s]?(i=o[s],[i[0]/255,i[1]/255,i[2]/255]):(n=/^#?([a-fA-F0-9]{0,6})/.exec(e),n?(i=parseInt(n[1],16),[(i>>16&255)/255,(i>>8&255)/255,(255&i)/255]):void 0)},_parseColor:function(t){var e;return(e=/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/.exec(t))?[e[1]/255,e[2]/255,e[3]/255,e[4]]:(e=/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/.exec(t))?[e[1]/100,e[2]/100,e[3]/100,e[4]/100]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]:(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t),e?[parseInt(e[1]+e[1],16)/255,parseInt(e[2]+e[2],16)/255,parseInt(e[3]+e[3],16)/255]:this._parseHex(t))},Color:function(){var e,i=arguments;for(this.updateRGB=function(){if(this.h=Math.max(0,Math.min(this.h,1)),this.s=Math.max(0,Math.min(this.s,1)),this.v=Math.max(0,Math.min(this.v,1)),0===this.s)this.r=this.g=this.b=this.v;else{var t=1===this.h?0:6*this.h,e=Math.floor(t),i=this.v*(1-this.s),n=this.v*(1-this.s*(t-e)),o=this.v*(1-this.s*(1-(t-e)));0===e?(this.r=this.v,this.g=o,this.b=i):1===e?(this.r=n,this.g=this.v,this.b=i):2===e?(this.r=i,this.g=this.v,this.b=o):3===e?(this.r=i,this.g=n,this.b=this.v):4===e?(this.r=o,this.g=i,this.b=this.v):(this.r=this.v,this.g=i,this.b=n)}return this},this.updateHSV=function(){var t,e,i,n,o,s;return this.r=Math.max(0,Math.min(this.r,1)),this.g=Math.max(0,Math.min(this.g,1)),this.b=Math.max(0,Math.min(this.b,1)),t=Math.min(this.r,this.g,this.b),e=Math.max(this.r,this.g,this.b),i=e-t,this.v=e,0===i?(this.h=0,this.s=0):(this.s=i/e,n=((e-this.r)/6+i/2)/i,o=((e-this.g)/6+i/2)/i,s=((e-this.b)/6+i/2)/i,this.r===e?this.h=s-o:this.g===e?this.h=1/3+n-s:this.b===e&&(this.h=2/3+o-n),this.h<0?this.h+=1:this.h>1&&(this.h-=1)),this},this._hexify=function(t){var e="0123456789abcdef",i=t%16,n=(t-i)/16,o=e.charAt(n)+e.charAt(i);return o},this.toHex=function(){return this._hexify(255*this.r)+this._hexify(255*this.g)+this._hexify(255*this.b)},this.toCSS=function(){return"#"+this.toHex()},this.toRGBA=function(){return"rgba("+Math.round(255*this.r)+","+Math.round(255*this.g)+","+Math.round(255*this.b)+","+this.a+")"},this.toHexAlpha=function(){return this._hexify(255*this.a)},this.normClone=function(){return t.extend({},this,{s:1,v:1}).updateRGB()},this.equals=function(t){return t[0]===this.r&&t[1]===this.g&&t[2]===this.b},this.limit=function(t){t-=1,this.r=Math.round(this.r*t)/t,this.g=Math.round(this.g*t)/t,this.b=Math.round(this.b*t)/t,this.updateHSV()},e=0;e<i.length;e+=1)i[e]=Math.max(0,Math.min(i[e],1));this.no_color=!1,this.r=i[0]||0,this.g=i[1]||0,this.b=i[2]||0,this.a=i[3]||1,this.h=i[4]||0,this.s=i[5]||0,this.v=i[6]||0,this.updateHSV()},Brush:function(t,e,i){this.size=e,this.brush=t,this.type=i}})}(jQuery),function(t){function e(t,e){var n=t.getLazyScrollLoadingViewport(),s=n.getScrollBindTarget(),r=!1,a=null;s.bind("scroll."+o,function(n){0>=e.delay?i(n,t,e):r||(r=!0,null!=a&&clearTimeout(a),a=setTimeout(function(){i(n,t,e),clearTimeout(a),r=!1},e.delay))}),(0>=n.getScrollTop()&&0>=n.getScrollLeft()||h&&9>l)&&s.trigger("scroll."+o)}function i(e,i,r){var a=i.getLazyScrollLoadingCachedLazyItems(),h=[],l=[],d=[];if(null!=r.lazyItemSelector&&(r.isDefaultLazyImageMode||null!=r.onLazyItemFirstVisible||null!=r.onLazyItemVisible||null!=r.onLazyItemInvisible)&&(a.each(function(){var e=t(this);e.isLazyScrollLoadingLazyItemVisible(i)?(e.data("isLoading."+o,!0),h.push(this),e.isLazyScrollLoadingLazyItemLoaded()||(e.data("isLoaded."+o,!0),l.push(this))):e.isLazyScrollLoadingLazyItemLoading()&&(e.removeData("isLoading."+o),d.push(this))}),r.isDefaultLazyImageMode))for(var c=0,u=l.length;c<u;c++){var g=l[c];g.src=g.getAttribute(s)}u=i.getLazyScrollLoadingViewport(),c=u.getScrollTop(),u=u.getScrollLeft(),g={scrollTop:c,scrollLeft:u},n(e,i,r,a,h,l,d),r.resetScrollBarPositionAfterEventTriggered&&(i.scrollTop(c),i.scrollLeft(u)),i.data("scrollHistory."+o,g)}function n(t,e,i,n,o,s,r){var a=e[0];if(null!=i.onScroll&&i.onScroll.apply(a,[t]),null!=i.onScrollVertically||null!=i.onScrollUp||null!=i.onScrollDown||null!=i.onScrollToTop||null!=i.onScrollToBottom||null!=i.onScrollHorizontally||null!=i.onScrollLeft||null!=i.onScrollRight||null!=i.onScrollToLeftmost||null!=i.onScrollToRightmost){var h=e.getLazyScrollLoadingViewport(),l=[t,n];h.isVerticalScrollBarScrolling()&&(null!=i.onScrollVertically&&i.onScrollVertically.apply(a,l),null!=i.onScrollUp&&h.isScrollUp()&&i.onScrollUp.apply(a,l),null!=i.onScrollDown&&h.isScrollDown()&&i.onScrollDown.apply(a,l),null!=i.onScrollToTop&&h.isScrollToTop()&&i.onScrollToTop.apply(a,l),null!=i.onScrollToBottom&&h.isScrollToBottom()&&i.onScrollToBottom.apply(a,l)),h.isHorizontalScrollBarScrolling()&&(null!=i.onScrollHorizontally&&i.onScrollHorizontally.apply(a,l),null!=i.onScrollLeft&&h.isScrollLeft()&&i.onScrollLeft.apply(a,l),null!=i.onScrollRight&&h.isScrollRight()&&i.onScrollRight.apply(a,l),null!=i.onScrollToLeftmost&&h.isScrollToLeftmost()&&i.onScrollToLeftmost.apply(a,l),null!=i.onScrollToRightmost&&h.isScrollToRightmost()&&i.onScrollToRightmost.apply(a,l))}null!=i.onLazyItemFirstVisible&&0<s.length&&i.onLazyItemFirstVisible.apply(a,[t,n,e.pushStack(s)]),null!=i.onLazyItemVisible&&0<o.length&&i.onLazyItemVisible.apply(a,[t,n,e.pushStack(o)]),null!=i.onLazyItemInvisible&&0<r.length&&i.onLazyItemInvisible.apply(a,[t,n,e.pushStack(r)])}var o="LazyScrollLoading",s="data-lazyimg",r={isDefaultLazyImageMode:!1,lazyItemSelector:null,delay:500,resetScrollBarPositionAfterEventTriggered:!0,onCreate:null,onScroll:null,onLazyItemFirstVisible:null,onLazyItemVisible:null,onLazyItemInvisible:null,onScrollVertically:null,onScrollHorizontally:null,onScrollUp:null,onScrollDown:null,onScrollLeft:null,onScrollRight:null,onScrollToTop:null,onScrollToBottom:null,onScrollToLeftmost:null,onScrollToRightmost:null},a=navigator.userAgent.toLowerCase(),h=/msie/.test(a),l=h?parseFloat((a.match(/.*(?:rv|ie)[\/: ](.+?)([ \);]|$)/)||[])[1]):-1;t.extend(t.fn,{lazyScrollLoading:function(i){return i=t.extend({},r,i),i.isDefaultLazyImageMode&&null==i.lazyItemSelector&&(i.lazyItemSelector="img["+s+"]:not([src])"),this.each(function(){var n=t(this);n.destroyLazyScrollLoading(),n.data("options."+o,i),e(n,i),null!=i.onCreate&&i.onCreate.apply(n[0])})},getLazyScrollLoadingOptions:function(){return this.data("options."+o)},getLazyScrollLoadingScrollHistory:function(){return this.data("scrollHistory."+o)},clearLazyScrollLoadingScrollHistory:function(){return this.removeData("scrollHistory."+o)},getLazyScrollLoadingViewport:function(){var e=this,i=e.data("viewport."+o);if(null==i)var n=e[0],s=n==window||n==document||n==document.body,r=t(window),a=t(document),h=t(document.body),i={getOffset:function(){return s?h.offset():e.offset()},getScrollLeft:function(){return(s?r:e).scrollLeft()},getScrollTop:function(){return(s?r:e).scrollTop()},getScrollBindTarget:function(){return s?r:e},getWidth:function(t){return s?r.width():t?e.outerWidth():e.innerWidth()},getHeight:function(t){return s?r.height():t?e.outerHeight():e.innerHeight()},getScrollWidth:function(t){return(s?a.width():n.scrollWidth)+(t&&this.isVerticalScrollBarVisible()?16:0)},getScrollHeight:function(t){return(s?a.height():n.scrollHeight)+(t&&this.isHorizontalScrollBarVisible()?16:0)},getLeftPos:function(){return s?this.getScrollLeft():this.getOffset().left},getTopPos:function(){return s?this.getScrollTop():this.getOffset().top},getRightPos:function(){return this.getLeftPos()+this.getWidth(!0)},getBottomPos:function(){return this.getTopPos()+this.getHeight(!0)},isVerticalScrollBarVisible:function(){return this.getHeight(!1)<this.getScrollHeight(!1)},isHorizontalScrollBarVisible:function(){return this.getWidth(!1)<this.getScrollWidth(!1)},isVerticalScrollBarScrolling:function(){if(!this.isVerticalScrollBarVisible())return!1;var t=e.getLazyScrollLoadingScrollHistory();return null!=t&&t.scrollTop!=this.getScrollTop()},isHorizontalScrollBarScrolling:function(){if(!this.isHorizontalScrollBarVisible())return!1;var t=e.getLazyScrollLoadingScrollHistory();return null!=t&&t.scrollLeft!=this.getScrollLeft()},isScrollUp:function(){if(!this.isVerticalScrollBarVisible())return!1;var t=e.getLazyScrollLoadingScrollHistory();return null!=t&&t.scrollTop>this.getScrollTop()},isScrollDown:function(){if(!this.isVerticalScrollBarVisible())return!1;var t=e.getLazyScrollLoadingScrollHistory();return null!=t&&t.scrollTop<this.getScrollTop()},isScrollLeft:function(){if(!this.isHorizontalScrollBarVisible())return!1;var t=e.getLazyScrollLoadingScrollHistory();return null!=t&&t.scrollLeft>this.getScrollLeft()},isScrollRight:function(){if(!this.isHorizontalScrollBarVisible())return!1;var t=e.getLazyScrollLoadingScrollHistory();return null!=t&&t.scrollLeft<this.getScrollLeft()},isScrollToTop:function(){return!!this.isVerticalScrollBarVisible()&&0>=this.getScrollTop()},isScrollToBottom:function(){return!!this.isVerticalScrollBarVisible()&&this.getScrollTop()+this.getHeight(!0)>=this.getScrollHeight(!0)},isScrollToLeftmost:function(){return!!this.isHorizontalScrollBarVisible()&&0>=this.getScrollLeft()},isScrollToRightmost:function(){return!!this.isHorizontalScrollBarVisible()&&this.getScrollLeft()+this.getWidth(!0)>=this.getScrollWidth(!0)}};return e.data("viewport."+o,i),i},getLazyScrollLoadingCachedLazyItems:function(e){return this.pushStack(t.map(this,function(i){var n=t(i),s=n.getLazyScrollLoadingOptions(),r=n.data("items."+o);return null!=s&&null!=s.lazyItemSelector&&null==r&&(r=t(s.lazyItemSelector,i==window||i==document||i==document.body?void 0:n),n.data("items."+o,r)),null!=r&&null!=e&&(r=r.filter(e)),null!=r?r.get():null}))},clearLazyScrollLoadingCachedLazyItems:function(){return this.removeData("items."+o)},refreshLazyScrollLoading:function(){return this.clearLazyScrollLoadingCachedLazyItems()},destroyLazyScrollLoading:function(){return this.each(function(){var e=t(this);e.getLazyScrollLoadingViewport().getScrollBindTarget().unbind("scroll."+o),e.getLazyScrollLoadingCachedLazyItems().removeData("isLoaded."+o),e.clearLazyScrollLoadingCachedLazyItems().clearLazyScrollLoadingScrollHistory().removeData("viewport."+o).removeData("options."+o)})},isLazyScrollLoadingLazyItemLoaded:function(){return this.data("isLoaded."+o)},isLazyScrollLoadingLazyItemLoading:function(){return this.data("isLoading."+o)},isLazyScrollLoadingLazyItemVisible:function(t){var e=this.getLazyScrollLoadingViewport();return t=t.getLazyScrollLoadingViewport(),e.getBottomPos()>t.getTopPos()&&e.getLeftPos()<t.getRightPos()&&e.getTopPos()<t.getBottomPos()&&e.getRightPos()>t.getLeftPos()}})}(jQuery),!function(t,e,i,n,o){var s="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,r=s||"undefined"==typeof navigator?0:1,a="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,h=Array,l=h.prototype,d=function(){var t=null;if(s)return t=__filename,{path:__dirname,file:__filename};if(a)t=self.location.href;else if(r){var e;(e=document.getElementsByTagName("script"))&&e.length&&(t=e[e.length-1].src)}return t?{path:t.split("/").slice(0,-1).join("/"),file:t}:{path:null,file:null}},c=d(),u=function(t,e){if(s)return e;if("."==e.charAt(0)){t=t.split("/"),e=e.split("/");var i,n=0,o=0,r=e.length,a=t.length;for(i=0;r>i;i++)if(/^\.\./.test(e[i]))n++,o++;else{if(!/^\./.test(e[i]))break;o++}n=n>=a?0:a-n,e=t.slice(0,n).concat(e.slice(o)).join("/")}return e};i=i?[].concat(i):[];var g,f,p,m=i.length,v=new h(m),w=new h(m),y=new h(m),R=new h(m);for(g=0;m>g;g++)v[g]=i[g][0],w[g]=i[g][1],y[g]=/\.js$/i.test(w[g])?u(c.path,w[g]):u(c.path,w[g]+".js");if("object"==typeof module&&module.exports){if(o===module.exports[e]){for(g=0;m>g;g++)R[g]=module.exports[v[g]]||require(y[g])[v[g]];f=n.apply(t,R),module.exports[e]=f||1}}else if("function"==typeof define&&define.amd)define(["exports"].concat(w),function(i){if(o===i[e]){for(var s=l.slice.call(arguments,1),r=s.length,a=0;r>a;a++)R[a]=i[v[a]]||s[a];f=n.apply(t,R),i[e]=f||1}});else if(a){for(g=0;m>g;g++)self[v[g]]||importScripts(y[g]),R[g]=self[v[g]];f=n.apply(t,R),self[e]=f||1}else if(o===t[e]){var A=function(t,e){p=p||document.getElementsByTagName("head")[0];var i=0,n=document.createElement("script");n.type="text/javascript",n.language="javascript",n.src=t,n.onload=n.onreadystatechange=function(){i||n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(i=1,n.onload=n.onreadystatechange=null,p.removeChild(n),n=null,e&&e())},p.appendChild(n)},b=function(e,i,n){t[e]?n():A(i,n)},x=function(i){return function(){m>i&&(R[i]=t[v[i]]),++i<m?b(v[i],y[i],x(i)):(f=n.apply(t,R),t[e]=f||1)}};m?b(v[0],y[0],x(0)):(f=n.apply(t,R),t[e]=f||1)}}(this,"Classy",null,function(){var t={};return function(t,e){var i=function(t,e,i){this.v=t||null,this.prev=e||null,this.next=i||null};i.prototype={constructor:i,v:null,prev:null,next:null};var n=Array.prototype,o=Object.prototype,s=Function.prototype,r=s.call.bind(n.slice),a=s.call.bind(o.toString),h=s.call.bind(o.hasOwnProperty),l=s.call.bind(o.propertyIsEnumerable),d=Object.keys,c=Object.defineProperty,u=2,g=3,f=4,p=8,m=9,v=16,w=32,y=64,R=128,A=256,b=512,x=1024,L=function(t){var e=typeof t,i=a(t);return"undefined"===e?b:"number"===e||t instanceof Number?isNaN(t)?g:u:null===t?A:!0===t||!1===t?f:t&&("string"===e||t instanceof String)?1===t.length?m:p:t&&("[object Array]"===i||t instanceof Array)?v:t&&("[object RegExp]"===i||t instanceof RegExp)?R:t&&("function"===e&&"[object Function]"===i||t instanceof Function)?y:t&&"[object Object]"===i?w:x},C=function(t,e){var i,n=e.length,o=[].concat(t);for(i=0;n>i;i++)o.indexOf(e[i])>-1||o.push(e[i]);return o},k=function(t,e){
if(w!==L(t))throw new TypeError("bad desc");var i={};if(h(t,"enumerable")&&(i.enumerable=!!e.enumerable),h(t,"configurable")&&(i.configurable=!!e.configurable),h(t,"value")&&(i.value=e.value),h(t,"writable")&&(i.writable=!!t.writable),h(t,"get")){var n=t.get;if(y!==L(n)&&"undefined"!==n)throw new TypeError("bad get");i.get=n}if(h(t,"set")){var o=t.set;if(y!==L(o)&&"undefined"!==o)throw new TypeError("bad set");i.set=o}if(("get"in i||"set"in i)&&("value"in i||"writable"in i))throw new TypeError("identity-confused descriptor");return i},E=Object.defineProperties||function(t,e){if("object"!=typeof t||null===t)throw new TypeError("bad obj");e=Object(e);for(var i=d(e),n=[],o=0;o<i.length;o++)n.push([i[o],k(e[i[o]],t)]);for(var o=0;o<n.length;o++)c(t,n[o][0],n[o][1]);return t},B=Object.create||function(t,e){var i,n=function(){};return n.prototype=t,i=new n,i.__proto__=t,"object"==typeof e&&E(i,e),i},M=function(t){var e=new i(t);return function(t){if(t&&e&&e.v){var n,o=this;if(t="constructor"==t?e.v:e.v.prototype[t])return e=new i(e.v.$super,e),n=t.apply(o,r(arguments,1)),e=e.prev,n}}},S=function(){var t,e,i,n,o,s,a,d=r(arguments);for(e=d.shift()||{},t=d.length,s=0;t>s;s++)if(i=d[s],w===L(i))for(o in i)h(i,o)&&l(i,o)&&(n=i[o],a=L(n),e[o]=u&a?0+n:(p|v)&a?n.slice(0):n);return e},F=function(t,i){t=t||Object,i=i||{};var n,o,s,r,a,l,c,g,f=null,m=t.$static||null;if(h(i,"constructor")?o=i.constructor:(n=function(){},i.constructor=o=n),h(i,"__static__")&&(f=i.__static__,delete i.__static__,m=C(m||[],d(f))),o.prototype=B(t.prototype),o.prototype=S(o.prototype,i),E(o.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0},$class:{value:o,enumerable:!1,writable:!0,configurable:!0},$super:{value:M(t),enumerable:!1,writable:!0,configurable:!0}}),E(o,{$super:{value:t,enumerable:!1,writable:!0,configurable:!0},$static:{value:m,enumerable:!1,writable:!0,configurable:!0}}),m){for(r=m.length,a={},s=0;r>s;s++)l=m[s],c=null,f&&e!==f[l]?c=f[l]:e!==t[l]&&(g=L(t[l]),c=w===g?S(null,t[l]):(p|v)&g?t[l].slice(0):u&g?0+t[l]:t[l]),a[l]={value:c,enumerable:!1,writable:!0,configurable:!0};E(o,a)}return o},T=Mixin=S,P=function(){var t=r(arguments),e=t.length,i=null;if(e>=2){var n=L(t[0]);n=y===n?{Extends:t[0]}:w===n?t[0]:{Extends:Object};var o,s,a=t[1]||{},h={},l=n.Extends||n["extends"]||Object,d=n.Implements||n["implements"],c=n.Mixin||n.mixin;if(d=d?[].concat(d):null,c=c?[].concat(c):null)for(o=0,s=c.length;s>o;o++)c[o].prototype&&(h=Mixin(h,c[o].prototype));if(d)for(o=0,s=d.length;s>o;o++)d[o].prototype&&(h=T(h,d[o].prototype));i=F(l,S(h,a))}else i=F(Object,t[0]);return i};t.Classy={VERSION:"0.5.5",T:{UNDEFINED:b,NULL:A,BOOLEAN:f,STRING:p,NUMBER:u,NAN:g,FUNCTION:y,REGEXP:R,ARRAY:v,OBJECT:w},Type:L,Create:B,Merge:S,Implements:T,Mixin:Mixin,Extends:F,Static:function(t){return t},Class:P}}(t),t.Classy}),!function(t,e,i,n,o){i=i?[].concat(i):[];var s,r,a=Array,h=a.prototype,l=i.length,d=new a(l);if("object"==typeof module&&module.exports){if(o===module.exports[e]){for(s=0;l>s;s++)d[s]=module.exports[i[s][0]]||require(i[s][1])[i[s][0]];r=n.apply(t,d),module.exports[e]=r||1}}else if("function"==typeof define&&define.amd)define(["exports"].concat(i.map(function(t){return t[1]})),function(s){if(o===s[e]){var a,l=h.slice.call(arguments,1),c=l.length;for(a=0;c>a;a++)d[a]=s[i[a][0]]||l[a];r=n.apply(t,d),s[e]=r||1}});else if(o===t[e]){for(s=0;l>s;s++)d[s]=t[i[s][0]];r=n.apply(t,d),t[e]=r||1}}(this,"MOD3",[["Classy","./classy"]],function(t){var e=e||{VERSION:"0.4",Class:t.Class,StaticClass:t.Static};return!function(t){"use strict";t.Constants={PI:Math.PI,invPI:1/Math.PI,halfPI:.5*Math.PI,doublePI:2*Math.PI,toRad:Math.PI/180,toDeg:180/Math.PI},t.ModConstant={NONE:0,LEFT:-1,RIGHT:1,X:1,Y:2,Z:4,Xi:0,Yi:1,Zi:2},t.Array32F="undefined"!=typeof Float32Array?Float32Array:Array,t.Array64F="undefined"!=typeof Float64Array?Float64Array:Array,t.Array8I="undefined"!=typeof Int8Array?Int8Array:Array,t.Array16I="undefined"!=typeof Int16Array?Int16Array:Array,t.Array32I="undefined"!=typeof Int32Array?Int32Array:Array,t.Array8U="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Array16U="undefined"!=typeof Uint16Array?Uint16Array:Array,t.Array32U="undefined"!=typeof Uint32Array?Uint32Array:Array,t.VecArray=t.Array32F}(e),!function(t,e){"use strict";var i,n=t.Constants.toRad,o=t.Constants.toDeg,s=Math.min,r=Math.max,a=Math.pow,h=Math.round,l=Math.floor,d=Math.ceil,c=t.XMath=t.StaticClass({normalize:function(t,e,n){var o,s=e-t;return o=0===s?1:i(0,1,(n-t)/e)},toRange:function(t,e,i){var n,o=e-t;return n=0===o?0:t+(e-t)*i},inRange:function(t,i,n,o){return o===e&&(o=!1),o?n>=t&&i>=n:n>t&&i>n},sign:function(t,i){return i===e&&(i=0),0==t?i:t>0?1:-1},trim:function(t,e,i){return s(e,r(t,i))},wrap:function(t,e,i){var n=e-t;return t>i?i+n:i>=e?i-n:i},degToRad:function(t){return t*n},radToDeg:function(t){return t*o},presicion:function(t,e){var i=a(10,e);return h(t*i)/i},uceil:function(t){return 0>t?l(t):d(t)}});i=c.clamp=c.trim}(e),!function(t,e){"use strict";var i=t.XMath.normalize,n=t.XMath.toRange,o=t.XMath.trim;t.Range=t.Class({constructor:function(t,i){this.start=0,this.end=1,t!==e&&(this.start=t),i!==e&&(this.end=i)},name:"Range",start:0,end:1,dispose:function(){return this.start=null,this.end=null,this},serialize:function(){return{name:this.name,start:this.start,end:this.end}},unserialize:function(t){return t&&this.name===t.name&&(this.start=t.start,this.end=t.end),this},getSize:function(){return this.end-this.start},move:function(t){this.start+=t,this.end+=t},isIn:function(t){return t>=this.start&&t<=this.end},normalize:function(t){return i(this.start,this.end,t)},toRange:function(t){return n(this.start,this.end,t)},trim:function(t){return o(this.start,this.end,t)},interpolate:function(t,e){return n(this.start,this.end,e.normalize(t))},toString:function(){return"["+this.start+" - "+this.end+"]"}})}(e),!function(t,e){"use strict";var i=Math.sin,n=Math.abs;t.Phase=t.Class({constructor:function(t){this.value=0,t!==e&&(this.value=t)},name:"Phase",value:0,dispose:function(){return this.value=null,this},serialize:function(){return{name:this.name,value:this.value}},unserialize:function(t){return t&&this.name===t.name&&(this.value=t.value),this},getPhasedValue:function(){return i(this.value)},getAbsPhasedValue:function(){return n(i(this.value))},getNormValue:function(){return.5*(i(this.value)+1)}})}(e),!function(t,e){"use strict";var i=t.Point=t.Class({constructor:function(t,i){this.x=t===e?0:t,this.y=i===e?0:i},name:"Point",x:0,y:0,dispose:function(){return this.x=null,this.y=null,this},serialize:function(){return{name:this.name,x:this.x,y:this.y}},unserialize:function(t){return t&&this.name===t.name&&(this.x=t.x,this.y=t.y),this},clone:function(){return new i(this.x,this.y)}})}(e),!function(t,e){"use strict";var i=Math.sin,n=Math.cos,o=t.Point,s=t.Matrix=t.Class({constructor:function(t,i,n,o){this.m11=t===e?1:t,this.m12=i===e?0:i,this.m21=n===e?0:n,this.m22=o===e?1:o},name:"Matrix",m11:1,m12:0,m21:0,m22:1,dispose:function(){return this.m11=null,this.m12=null,this.m21=null,this.m22=null,this},serialize:function(){return{name:this.name,m11:this.m11,m12:this.m12,m21:this.m21,m22:this.m22}},unserialize:function(t){return t&&this.name===t.name&&(this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22),this},reset:function(){return this.m11=1,this.m12=0,this.m21=0,this.m22=1,this},rotate:function(t){var e=n(t),o=i(t);return this.m11=e,this.m12=-o,this.m21=o,this.m22=e,this},scale:function(t,i){return this.m12=0,this.m21=0,this.m11=1,this.m22=1,t!==e&&(this.m11=t,this.m22=t),i!==e&&(this.m22=i),this},multiply:function(t){var e=this.m11,i=this.m12,n=this.m21,o=this.m22,s=t.m11,r=t.m12,a=t.m21,h=t.m22;return this.m11=e*s+i*a,this.m12=e*r+i*h,this.m21=n*s+o*a,this.m22=n*r+o*h,this},transformPoint:function(t){var e=t.x,i=t.y,n=this.m11*e+this.m12*i,s=this.m21*e+this.m22*i;return new o(n,s)},transformPointSelf:function(t){var e=t.x,i=t.y;return t.x=this.m11*e+this.m12*i,t.y=this.m21*e+this.m22*i,t},clone:function(){return new s(this.m11,this.m12,this.m21,this.m22)}})}(e),!function(t,e){"use strict";var i=Math.sqrt,n=t.VecArray,o=t.Vector3=t.Class({__static__:{ZERO:function(){return new o([0,0,0])},dot:function(t,e){var i=t.xyz,n=e.xyz;return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]},equals:function(t,e){var i=t.xyz,n=e.xyz;return i[0]==n[0]&&i[1]==n[1]&&i[2]==n[2]},cross:function(t,e){var i=t.xyz,n=e.xyz,s=i[0],r=i[1],a=i[2],h=n[0],l=n[1],d=n[2];return new o([r*d-a*l,a*h-s*d,s*l-r*h])},distance:function(t,e){var n=t.xyz,o=e.xyz,s=n[0]-o[0],r=n[1]-o[1],a=n[2]-o[2];return i(s*s+r*r+a*a)},sum:function(t,e){var i=t.xyz,n=e.xyz;return new o([i[0]+n[0],i[1]+n[1],i[2]+n[2]])}},constructor:function(t,i,o){t&&t.length?this.xyz=new n([t[0],t[1],t[2]]):(t=t===e?0:t,i=i===e?0:i,o=o===e?0:o,this.xyz=new n([t,i,o]))},name:"Vector3",xyz:null,dispose:function(){return this.xyz=null,this},serialize:function(){return{name:this.name,xyz:this.xyz}},unserialize:function(t){return t&&this.name===t.name&&(this.xyz=t.xyz),this},getXYZ:function(){return new n(this.xyz)},getXYZRef:function(){return this.xyz},setXYZ:function(t){return this.xyz=new n(t),this},setXYZRef:function(t){return this.xyz=t,this},clone:function(){return new o(this.xyz)},equalsSelf:function(t){var e=this.xyz,i=t.xyz;return e[0]==i[0]&&e[1]==i[1]&&e[2]==i[2]},zeroSelf:function(){return this.xyz[0]=0,this.xyz[1]=0,this.xyz[2]=0,this},negate:function(){var t=this.xyz;return new o([-t[0],-t[1],-t[2]])},negateSelf:function(){var t=this.xyz;return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],this},add:function(t){var e=this.xyz,i=t.xyz;return new o([e[0]+i[0],e[1]+i[1],e[2]+i[2]])},addSelf:function(t){var e=this.xyz,i=t.xyz;return e[0]+=i[0],e[1]+=i[1],e[2]+=i[2],this},subtract:function(t){var e=this.xyz,i=t.xyz;return new o([e[0]-i[0],e[1]-i[1],e[2]-i[2]])},subtractSelf:function(t){var e=this.xyz,i=t.xyz;return e[0]-=i[0],e[1]-=i[1],e[2]-=i[2],this},multiplyScalar:function(t){var e=this.xyz;return new o([e[0]*t,e[1]*t,e[2]*t])},multiplyScalarSelf:function(t){var e=this.xyz;return e[0]*=t,e[1]*=t,e[2]*=t,this},multiply:function(t){var e=this.xyz,i=t.xyz;return new o([e[0]*i[0],e[1]*i[1],e[2]*i[2]])},multiplySelf:function(t){var e=this.xyz,i=t.xyz;return e[0]*=i[0],e[1]*=i[1],e[2]*=i[2],this},divide:function(t){var e=1/t,i=this.xyz;return new o([i[0]*e,i[1]*e,i[2]*e])},divideSelf:function(t){var e=1/t,i=this.xyz;return i[0]*=e,i[1]*=e,i[2]*=e,this},normalize:function(){var t,e=this.xyz,n=e[0],s=e[1],r=e[2],a=n*n+s*s+r*r;return a>0&&(t=1/i(a),n*=t,s*=t,r*=t),new o([n,s,r])},normalizeSelf:function(){var t,e=this.xyz,n=e[0],o=e[1],s=e[2],r=n*n+o*o+s*s;return r>0&&(t=1/i(r),n*=t,o*=t,s*=t),e[0]=n,e[1]=o,e[2]=s,this},getMagnitude:function(){var t=this.xyz,e=t[0],n=t[1],o=t[2];return i(e*e+n*n+o*o)},setMagnitude:function(t){this.normalizeSelf();var e=this.xyz;return e[0]*=t,e[1]*=t,e[2]*=t,this},dotSelf:function(t){var e=this.xyz,i=t.xyz;return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]},crossSelf:function(t){var e=this.xyz,i=t.xyz,n=e[0],o=e[1],s=e[2],r=i[0],a=i[1],h=i[2];return e[0]=o*h-s*a,e[1]=s*r-n*h,e[2]=n*a-o*r,this},distanceSelf:function(t){var e=this.xyz,n=t.xyz,o=e[0]-n[0],s=e[1]-n[1],r=e[2]-n[2];return i(o*o+s*s+r*r)},toString:function(){return"["+this.xyz[0]+" , "+this.xyz[1]+" , "+this.xyz[2]+"]"}})}(e),!function(t,e){"use strict";var i=Math.sin,n=Math.cos,o=t.Matrix4=t.Class({__static__:{multiplyVector:function(t,e){var i=e.xyz,n=i[0],o=i[1],s=i[2];return i[0]=n*t.n11+o*t.n12+s*t.n13+t.n14,i[1]=n*t.n21+o*t.n22+s*t.n23+t.n24,i[2]=n*t.n31+o*t.n32+s*t.n33+t.n34,e},calculateMultiply:function(t,e){var i=t.n11,n=e.n11,o=t.n21,s=e.n21,r=t.n31,a=e.n31,h=t.n12,l=e.n12,d=t.n22,c=e.n22,u=t.n32,g=e.n32,f=t.n13,p=e.n13,m=t.n23,v=e.n23,w=t.n33,y=e.n33,R=t.n14,A=e.n14,b=t.n24,x=e.n24,L=t.n34,C=e.n34;return t.n11=i*n+h*s+f*a,t.n12=i*l+h*c+f*g,t.n13=i*p+h*v+f*y,t.n14=i*A+h*x+f*C+R,t.n21=o*n+d*s+m*a,t.n22=o*l+d*c+m*g,t.n23=o*p+d*v+m*y,t.n24=o*A+d*x+m*C+b,t.n31=r*n+u*s+w*a,t.n32=r*l+u*c+w*g,t.n33=r*p+u*v+w*y,t.n34=r*A+u*x+w*C+L,t}},constructor:function(t,i,n,o,s,r,a,h,l,d,c,u,g,f,p,m){this.n11=t===e?1:t,this.n12=i===e?0:i,this.n13=n===e?0:n,this.n14=o===e?0:o,this.n21=s===e?0:s,this.n22=r===e?1:r,this.n23=a===e?0:a,this.n24=h===e?0:h,this.n31=l===e?0:l,this.n32=d===e?0:d,this.n33=c===e?1:c,this.n34=u===e?0:u,this.n41=g===e?0:g,this.n42=f===e?0:f,this.n43=p===e?0:p,this.n44=m===e?1:m},name:"Matrix4",n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1,dispose:function(){return this.n11=null,this.n12=null,this.n13=null,this.n14=null,this.n21=null,this.n22=null,this.n23=null,this.n24=null,this.n31=null,this.n32=null,this.n33=null,this.n34=null,this.n41=null,this.n42=null,this.n43=null,this.n44=null,this},serialize:function(){return{name:this.name,n11:this.n11,n12:this.n12,n13:this.n13,n14:this.n14,n21:this.n21,n22:this.n22,n23:this.n23,n24:this.n24,n31:this.n31,n32:this.n32,n33:this.n33,n34:this.n34,n41:this.n41,n42:this.n42,n43:this.n43,n44:this.n44}},unserialize:function(t){return t&&this.name===t.name&&(this.n11=t.n11,this.n12=t.n12,this.n13=t.n13,this.n14=t.n14,this.n21=t.n21,this.n22=t.n22,this.n23=t.n23,this.n24=t.n24,this.n31=t.n31,this.n32=t.n32,this.n33=t.n33,this.n34=t.n34,this.n41=t.n41,this.n42=t.n42,this.n43=t.n43,this.n44=t.n44),this},reset:function(){return this.n11=1,this.n12=0,this.n13=0,this.n14=0,this.n21=0,this.n22=1,this.n23=0,this.n24=0,this.n31=0,this.n32=0,this.n33=1,this.n34=0,this.n41=0,this.n42=0,this.n43=0,this.n44=1,this},translationMatrix:function(t,e,i){return this.n14=t,this.n24=e,this.n34=i,this},translationMatrixFromVector:function(t){var e=t.xyz;return this.n14=e[0],this.n24=e[1],this.n34=e[2],this},scaleMatrix:function(t,e,i){return this.n11=t,this.n22=e,this.n33=i,this},scaleMatrixFromVector:function(t){var e=t.xyz;return this.n11=e[0],this.n22=e[0],this.n33=e[0],this},rotationMatrix:function(t,e,o,s){var r=n(s),a=i(s),h=1-r,l=t*e*h,d=e*o*h,c=t*o*h,u=a*o,g=a*e,f=a*t;return this.n11=r+t*t*h,this.n12=-u+l,this.n13=g+c,this.n14=0,this.n21=u+l,this.n22=r+e*e*h,this.n23=-f+d,this.n24=0,this.n31=-g+c,this.n32=f+d,this.n33=r+o*o*h,this.n34=0,this},rotationMatrixFromVector:function(t,e){var o=t.xyz,s=o[0],r=o[1],a=o[2],h=n(e),l=i(e),d=1-h,c=s*r*d,u=r*a*d,g=s*a*d,f=l*a,p=l*r,m=l*s;return this.n11=h+s*s*d,this.n12=-f+c,this.n13=p+g,this.n14=0,this.n21=f+c,this.n22=h+r*r*d,this.n23=-m+u,this.n24=0,this.n31=-p+g,this.n32=m+u,this.n33=h+a*a*d,this.n34=0,this},multiply:function(t){return o.calculateMultiply(this,t),this},multiplyVector:function(t){var e=t.xyz,i=e[0],n=e[1],o=e[2];return e[0]=i*this.n11+n*this.n12+o*this.n13+this.n14,e[1]=i*this.n21+n*this.n22+o*this.n23+this.n24,e[2]=i*this.n31+n*this.n32+o*this.n33+this.n34,t}})}(e),!function(t,e){"use strict";var i=Object.prototype,n=Function.prototype,o=Array.prototype,s=n.call.bind(o.slice),r=n.call.bind(i.toString),a=e.isNode="undefined"!=typeof global&&"[object global]"===r(global),h=e.isBrowser=!a&&"undefined"!=typeof navigator,l=e.isWorker="function"==typeof importScripts&&navigator instanceof WorkerNavigator,d=e.supportsWorker="function"==typeof Worker;if(e.getPath=function(){var t,e=null;return a?{path:__dirname,file:__filename}:(l?e=self.location.href:h&&(t=document.getElementsByTagName("script"))&&t.length&&(e=t[t.length-1].src),e?{path:e.split("/").slice(0,-1).join("/"),file:""+e}:{path:null,file:null})},l){var c=null;t.console={log:function(t){postMessage({event:"console.log",data:{output:t||""}})},error:function(t){postMessage({event:"console.error",data:{output:t||""}})}},onmessage=function(t){var i=t.data.event,n=t.data.data||null;switch(i){case"init":c&&(c.dispose(!0),c=null),n&&n.modifier&&(c=e.Factory.getModifier(n));break;case"import":n&&n["import"]&&n["import"].length&&importScripts(n["import"].join(","));break;case"apply":n&&c&&(n.modifiable&&c.setModifiable(e.Factory.getMesh(n.modifiable)),n.params&&c.unserialize(n.params),c.send("apply",{modifiable:c._apply().mod.serialize()}));break;case"dispose":default:c&&(c.dispose(!0),c=null),close()}}}e.WorkerInterface=e.Class({path:e.getPath(),name:null,_worker:null,_workerListeners:null,disposeWorker:function(){var t=this;return t._worker&&(t.send("dispose"),t._worker=null,t._workerListeners=null),t},scripts:function(){var t=s(arguments);return t.length&&this.send("import",{"import":t}),this},worker:function(t){var e,i=this;if(arguments.length||(t=!0),t=!!t,!1===t)return i._worker&&i.disposeWorker(),i;if(!i._worker){if(!d)throw new Error("Worker is not supported");i._workerListeners={},e=i._worker=new Worker(this.path.file),e.onmessage=function(t){if(t.data.event){var e=t.data.event,n=t.data.data||null;i._workerListeners&&i._workerListeners[e]&&i._workerListeners[e](n),("console.log"===e||"console.error"===e)&&log("Worker: "+n.output)}},e.onerror=function(t){if(!i._workerListeners||!i._workerListeners.error)throw new Error("Worker Error: "+t.message+" file: "+t.filename+" line: "+t.lineno);i._workerListeners.error(t)},i.send("init",{modifier:i.name})}return i},bind:function(t,e){return t&&e&&this._workerListeners&&(this._workerListeners[t]=e.bind(this)),this},unbind:function(t){return t&&this._workerListeners&&this._workerListeners[t]&&delete this._workerListeners[t],this},send:function(t,e){return t&&(l?postMessage({event:t,data:e||null}):this._worker&&this._worker.postMessage({event:t,data:e||null})),this}})}(this,e),!function(t,e){"use strict";var i=t.ModConstant,n=i.X,o=i.Y,s=i.Z,r=t.Vector3,a=t.VecArray;t.VertexProxy=t.Class({constructor:function(t){this.xyz=new a([0,0,0]),this.original=new a([0,0,0]),this.ratio=new a([0,0,0]),e!==t&&null!==t&&!1!==t&&this.setVertex(t)},name:"VertexProxy",vertex:null,xyz:null,original:null,ratio:null,dispose:function(){return this.vertex=null,this.xyz=null,this.original=null,this.ratio=null,this},serialize:function(){return{vertex:this.name,xyz:this.getXYZ(),original:this.original,ratio:this.ratio}},unserialize:function(t){return t&&(this.setXYZ(t.xyz),this.original=t.original,this.ratio=t.ratio),this},setVertex:function(t){return this.vertex=t,this},getRatioVector:function(){return new r(this.ratio)},getRatio:function(t){switch(t){case n:return this.ratio[0];case o:return this.ratio[1];case s:return this.ratio[2]}return-1},getOriginalValue:function(t){switch(t){case n:return this.original[0];case o:return this.original[1];case s:return this.original[2]}return 0},setRatios:function(t,i,n){return t=t===e?0:t,i=i===e?0:i,n=n===e?0:n,this.ratio=new a([t,i,n]),this},setOriginalPosition:function(t,i,n){return t=t===e?0:t,i=i===e?0:i,n=n===e?0:n,this.original=new a([t,i,n]),this},getXYZ:function(){return new a(this.xyz)},getXYZRef:function(){return this.xyz},getX:function(){return this.xyz[0]},getY:function(){return this.xyz[1]},getZ:function(){return this.xyz[2]},setXYZ:function(t){return this.xyz=new a(t),this},setXYZRef:function(t){return this.xyz=t,this},setX:function(t){return this.xyz[0]=t,this},setY:function(t){return this.xyz[1]=t,this},setZ:function(t){return this.xyz[2]=t,this},getValue:function(t){switch(t){case n:return this.getX();case o:return this.getY();case s:return this.getZ()}return 0},setValue:function(t,e){switch(t){case n:this.setX(e);break;case o:this.setY(e);break;case s:this.setZ(e)}return this},reset:function(){return this.setXYZ(this.original),this},collapse:function(){return this.original=this.getXYZ(),this},getVector:function(){return new r(this.getXYZ())},setVector:function(t){this.setXYZ(t.xyz)}})}(e),!function(t){"use strict";var e=t.FaceProxy=t.Class(Object,{constructor:function(){this.vertices=[]},name:"FaceProxy",vertices:null,dispose:function(){return this.vertices=null,this},serialize:function(){return{face:this.name,vertices:null}},unserialize:function(t){return t&&this.name===t.face&&(this.vertices=t.vertices||null),this},addVertex:function(t){this.vertices.push(t)},getVertices:function(){return this.vertices}});e.unserialize-function(i){return i&&i.face&&t[i.face]?(new t[i.face]).unserialize(i):new e}}(e),!function(t,e){"use strict";var i,n,o=t.ModConstant,s=o.X,r=o.Y,a=o.Z,h=Math.min,l=Math.max;i=function(t){return t?t.serialize():t},n=t.isWorker?function(e){return e&&e.vertex?(new t.VertexProxy).unserialize(e):e}:function(t,e){return t&&t.vertex?this.vertices[e].unserialize(t):t},t.MeshProxy=t.Class({constructor:function(t){this.maxX=null,this.maxY=null,this.maxZ=null,this.minX=null,this.minY=null,this.minZ=null,this.maxAxis=null,this.midAxis=null,this.minAxis=null,this.width=null,this.height=null,this.depth=null,this.vertices=[],this.faces=[],this.mesh=null,e!==t&&this.setMesh(t)},name:"MeshProxy",maxX:null,maxY:null,maxZ:null,minX:null,minY:null,minZ:null,maxAxis:null,midAxis:null,minAxis:null,width:null,height:null,depth:null,vertices:null,faces:null,mesh:null,dispose:function(){return this.maxX=null,this.maxY=null,this.maxZ=null,this.minX=null,this.minY=null,this.minZ=null,this.maxAxis=null,this.midAxis=null,this.minAxis=null,this.width=null,this.height=null,this.depth=null,this.disposeFaces(),this.disposeVertices(),this.mesh=null,this},disposeVertices:function(){var t,e;if(this.vertices)for(e=this.vertices.length,t=0;e>t;t++)this.vertices[t].dispose();return this.vertices=null,this},disposeFaces:function(){var t,e;if(this.faces)for(e=this.faces.length,t=0;e>t;t++)this.faces[t].dispose();return this.faces=null,this},serialize:function(){return{mesh:this.name,maxX:this.maxX,maxY:this.maxY,maxZ:this.maxZ,minX:this.minX,minY:this.minY,minZ:this.minZ,maxAxis:this.maxAxis,midAxis:this.midAxis,minAxis:this.minAxis,width:this.width,height:this.height,depth:this.depth,vertices:this.vertices?this.vertices.map(i):null,faces:null}},unserialize:function(e){return e&&(t.isWorker&&(this.disposeFaces(),this.disposeVertices()),this.maxX=e.maxX,this.maxY=e.maxY,this.maxZ=e.maxZ,this.minX=e.minX,this.minY=e.minY,this.minZ=e.minZ,this.maxAxis=e.maxAxis,this.midAxis=e.midAxis,this.minAxis=e.minAxis,this.width=e.width,this.height=e.height,this.depth=e.depth,this.vertices=(e.vertices||[]).map(n,this),this.faces=null),this},setMesh:function(t){return this.mesh=t,this.vertices=[],this},getVertices:function(){return this.vertices},getFaces:function(){return this.faces},analyzeGeometry:function(){var t,e,i,n,o,d,c,u,g,f,p,m,v,w,y=this.vertices,R=y.length,A=R;for(R&&(t=y[0],e=t.getXYZ(),i=e[0],n=e[1],o=e[2],d=c=i,u=g=n,f=p=o);--A>=0;)t=y[A],e=t.getXYZ(),i=e[0],n=e[1],o=e[2],t.setOriginalPosition(i,n,o),d=h(d,i),u=h(u,n),f=h(f,o),c=l(c,i),g=l(g,n),p=l(p,o);m=c-d,v=g-u,w=p-f,this.width=m,this.height=v,this.depth=w,this.minX=d,this.maxX=c,this.minY=u,this.maxY=g,this.minZ=f,this.maxZ=p;var b=l(m,v,w),x=h(m,v,w);for(b==m&&x==v?(this.minAxis=r,this.midAxis=a,this.maxAxis=s):b==m&&x==w?(this.minAxis=a,this.midAxis=r,this.maxAxis=s):b==v&&x==m?(this.minAxis=s,this.midAxis=a,this.maxAxis=r):b==v&&x==w?(this.minAxis=a,this.midAxis=s,this.maxAxis=r):b==w&&x==m?(this.minAxis=s,this.midAxis=r,this.maxAxis=a):b==w&&x==v&&(this.minAxis=r,this.midAxis=s,this.maxAxis=a),A=R;--A>=0;)t=y[A],e=t.getXYZ(),t.setRatios((e[0]-d)/m,(e[1]-u)/v,(e[2]-f)/w);return this},resetGeometry:function(){for(var t=this.vertices,e=t.length;--e>=0;)t[e].reset();return this.update(),this},collapseGeometry:function(){for(var t=this.vertices,e=t.length;--e>=0;)t[e].collapse();return this.update(),this.analyzeGeometry(),this},getMin:function(t){switch(t){case s:return this.minX;case r:return this.minY;case a:return this.minZ}return-1},getMax:function(t){switch(t){case s:return this.maxX;case r:return this.maxY;case a:return this.maxZ}return-1},getSize:function(t){switch(t){case s:return this.width;case r:return this.height;case a:return this.depth}return-1},update:function(){return this},postApply:function(){return this},updateMeshPosition:function(){return this}})}(e),!function(t){"use strict";var e=0,i=t.ModConstant.NONE;t.Modifier=t.Class(t.WorkerInterface,{constructor:function(t){this.id=++e,this.name="Modifier",this.mod=t||null,this.axes=i,this.constraint=i,this.enabled=!0},id:null,name:"Modifier",mod:null,axes:null,constraint:null,enabled:!0,dispose:function(t){return this.disposeWorker(),!0===t&&this.mod&&this.mod.dispose(),this.mod=null,this.name=null,this.axes=null,this.constraint=null,this},serialize:function(){return{modifier:this.name,params:{axes:this.axes,constraint:this.constraint,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.axes=e.axes,this.constraint=e.constraint,this.enabled=e.enabled}return this},enable:function(t){return arguments.length?(this.enabled=!!t,this):this.enabled},constraintAxes:function(t){return this.axes=t||i,this},setConstraint:function(t){return this.constraint=t||i,this},setModifiable:function(t){return this.mod=t,this},getVertices:function(){return this.mod?this.mod.getVertices():null},_apply:function(){return this},apply:function(t){var e=this;return e._worker?e.bind("apply",function(i){e.unbind("apply"),i&&i.modifiable&&(e.mod.unserialize(i.modifiable),e.mod.update()),t&&t.call(e)}).send("apply",{params:e.serialize(),modifiable:e.mod.serialize()}):(e._apply(),t&&t.call(e)),e},toString:function(){return"[Modifier "+this.name+"]"}})}(e),!function(t){"use strict";t.Library3d=t.Class({constructor:function(){this.id="Library3d",this.meshClass=t.MeshProxy,this.vertexClass=t.VertexProxy},id:"Library3d",meshClass:null,vertexClass:null}),t.Factory=t.StaticClass({getMeshProxy:function(t){if(arguments.length){var e=t.meshClass;return e?new e:null}return null},getModifier:function(e){return e&&e.modifier&&t[e.modifier]?new t[e.modifier]:null},getLibrary:function(e){return e&&e.library&&t[e.library]?new t[e.library]:new t.Library3d},getMesh:function(e){return e&&e.mesh&&t[e.mesh]?(new t.MeshProxy).unserialize(e):new t.MeshProxy},getVertex:function(e){return e&&e.vertex&&t[e.vertex]?(new t.VertexProxy).unserialize(e):new t.VertexProxy}})}(e),!function(t){"use strict";var e=t.Factory.getMeshProxy,i=function(t){return t?t.serialize():t},n=t.ModifierStack=t.Class(t.WorkerInterface,{constructor:function(i,n){this.mod=null,this.stack=[],t.isWorker?(this.lib3d=new t.Library3d,this.mod=e(this.lib3d)):(this.lib3d=i,this.mod=e(this.lib3d)),n&&(this.mod.setMesh(n),this.mod.analyzeGeometry())},name:"ModifierStack",lib3d:null,mod:null,stack:null,dispose:function(t){if(this.lib3d=null,t&&this.stack)for(;this.stack.length;)this.stack.pop().dispose();return this.stack=null,this.mod&&this.mod.dispose(),this.mod=null,this},serialize:function(){return{modifier:this.name,params:{modifiers:this.stack.map(i)}}},unserialize:function(e){if(e&&this.name===e.modifier){var i,n=e.params.modifiers,o=this.stack;if(n.length!==o.length)for(o.length=0,i=0;i<n.length;i++)o.push(t.Factory.getModifier(n[i]));for(i=0;i<o.length;i++)o[i]=o[i].unserialize(n[i]).setModifiable(this.mod);this.stack=o}return this},setModifiable:function(t){return this.mod=t,this},add:function(t){return t&&(t.setModifiable(this.mod),this.stack.push(t)),this},_apply:function(){if(this.mod&&this.stack&&this.stack.length){var t=this.stack,e=t.length,i=this.mod,n=0;for(i.resetGeometry();e>n;)t[n].enabled&&t[n]._apply(),n++;i.update()}return this},apply:function(t){var e=this;return e._worker?e.bind("apply",function(i){e.unbind("apply"),i&&i.modifiable&&(e.mod.unserialize(i.modifiable),e.mod.update()),t&&t.call(e)}).send("apply",{params:e.serialize(),modifiable:e.mod.serialize()}):(e._apply(),t&&t.call(e)),e},collapse:function(){return this.mod&&this.stack&&this.stack.length&&(this.apply(),this.mod.collapseGeometry(),this.stack.length=0),this},clear:function(){return this.stack&&(this.stack.length=0),this},getMeshInfo:function(){return this.mod}});n.prototype.addModifier=n.prototype.add}(e),function(t){function e(t,e,i){this.x=t,this.y=e,this.z=i}function i(t){return t*t*t*(t*(6*t-15)+10)}function n(t,e,i){return(1-i)*t+i*e}var o=t.noise={};e.prototype.dot2=function(t,e){return this.x*t+this.y*e},e.prototype.dot3=function(t,e,i){return this.x*t+this.y*e+this.z*i};var s=[new e(1,1,0),new e((-1),1,0),new e(1,(-1),0),new e((-1),(-1),0),new e(1,0,1),new e((-1),0,1),new e(1,0,(-1)),new e((-1),0,(-1)),new e(0,1,1),new e(0,(-1),1),new e(0,1,(-1)),new e(0,(-1),(-1))],r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],a=new Array(512),h=new Array(512);o.seed=function(t){t>0&&1>t&&(t*=65536),t=Math.floor(t),256>t&&(t|=t<<8);for(var e=0;256>e;e++){var i;i=1&e?r[e]^255&t:r[e]^255&t>>8,a[e]=a[e+256]=i,h[e]=h[e+256]=s[i%12]}},o.seed(0);var l=.5*(Math.sqrt(3)-1),d=(3-Math.sqrt(3))/6,c=1/3,u=1/6;o.simplex2=function(t,e){var i,n,o,s,r,c=(t+e)*l,u=Math.floor(t+c),g=Math.floor(e+c),f=(u+g)*d,p=t-u+f,m=e-g+f;p>m?(s=1,r=0):(s=0,r=1);var v=p-s+d,w=m-r+d,y=p-1+2*d,R=m-1+2*d;u&=255,g&=255;var A=h[u+a[g]],b=h[u+s+a[g+r]],x=h[u+1+a[g+1]],L=.5-p*p-m*m;0>L?i=0:(L*=L,i=L*L*A.dot2(p,m));var C=.5-v*v-w*w;0>C?n=0:(C*=C,n=C*C*b.dot2(v,w));var k=.5-y*y-R*R;return 0>k?o=0:(k*=k,o=k*k*x.dot2(y,R)),70*(i+n+o)},o.simplex3=function(t,e,i){var n,o,s,r,l,d,g,f,p,m,v=(t+e+i)*c,w=Math.floor(t+v),y=Math.floor(e+v),R=Math.floor(i+v),A=(w+y+R)*u,b=t-w+A,x=e-y+A,L=i-R+A;b>=x?x>=L?(l=1,d=0,g=0,f=1,p=1,m=0):b>=L?(l=1,d=0,g=0,f=1,p=0,m=1):(l=0,d=0,g=1,f=1,p=0,m=1):L>x?(l=0,d=0,g=1,f=0,p=1,m=1):L>b?(l=0,d=1,g=0,f=0,p=1,m=1):(l=0,d=1,g=0,f=1,p=1,m=0);var C=b-l+u,k=x-d+u,E=L-g+u,B=b-f+2*u,M=x-p+2*u,S=L-m+2*u,F=b-1+3*u,T=x-1+3*u,P=L-1+3*u;w&=255,y&=255,R&=255;var _=h[w+a[y+a[R]]],D=h[w+l+a[y+d+a[R+g]]],H=h[w+f+a[y+p+a[R+m]]],$=h[w+1+a[y+1+a[R+1]]],O=.5-b*b-x*x-L*L;0>O?n=0:(O*=O,n=O*O*_.dot3(b,x,L));var N=.5-C*C-k*k-E*E;0>N?o=0:(N*=N,o=N*N*D.dot3(C,k,E));var I=.5-B*B-M*M-S*S;0>I?s=0:(I*=I,s=I*I*H.dot3(B,M,S));var W=.5-F*F-T*T-P*P;return 0>W?r=0:(W*=W,r=W*W*$.dot3(F,T,P)),32*(n+o+s+r)},o.perlin2=function(t,e){var o=Math.floor(t),s=Math.floor(e);t-=o,e-=s,o=255&o,s=255&s;var r=h[o+a[s]].dot2(t,e),l=h[o+a[s+1]].dot2(t,e-1),d=h[o+1+a[s]].dot2(t-1,e),c=h[o+1+a[s+1]].dot2(t-1,e-1),u=i(t);return n(n(r,d,u),n(l,c,u),i(e))},o.perlin3=function(t,e,o){var s=Math.floor(t),r=Math.floor(e),l=Math.floor(o);t-=s,e-=r,o-=l,s=255&s,r=255&r,l=255&l;var d=h[s+a[r+a[l]]].dot3(t,e,o),c=h[s+a[r+a[l+1]]].dot3(t,e,o-1),u=h[s+a[r+1+a[l]]].dot3(t,e-1,o),g=h[s+a[r+1+a[l+1]]].dot3(t,e-1,o-1),f=h[s+1+a[r+a[l]]].dot3(t-1,e,o),p=h[s+1+a[r+a[l+1]]].dot3(t-1,e,o-1),m=h[s+1+a[r+1+a[l]]].dot3(t-1,e-1,o),v=h[s+1+a[r+1+a[l+1]]].dot3(t-1,e-1,o-1),w=i(t),y=i(e),R=i(o);return n(n(n(d,f,w),n(c,p,w),R),n(n(u,m,w),n(g,v,w),R),y)}}(this),!function(t){"use strict";var e=t.Vector3;t.Pivot=t.Class(t.Modifier,{constructor:function(t,i,n){this.$super("constructor"),this.name="Pivot",this.pivot=new e([t||0,i||0,n||0])},pivot:null,dispose:function(){return this.pivot.dispose(),this.pivot=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{pivot:this.pivot.serialize(),enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.pivot.unserialize(e.pivot),this.enabled=!!e.enabled}return this},setMeshCenter:function(){var t=this.mod;return this.pivot=new e((-(t.minX+.5*t.width)),(-(t.minY+.5*t.height)),(-(t.minZ+.5*t.depth))),this},_apply:function(){for(var t,e=this.mod.vertices,i=e.length,n=this.pivot;--i>=0;)t=e[i],t.setVector(t.getVector().addSelf(n));
return this.mod.updateMeshPosition(n.negate()),this}})}(e),!function(t,e){"use strict";var i=t.ModConstant.NONE,n=t.ModConstant.LEFT,o=t.ModConstant.RIGHT,s=t.Matrix,r=Math.atan,a=(Math.atan2,Math.sin),h=Math.cos,l=t.Constants.PI,d=t.Constants.halfPI,c=t.Constants.doublePI,u=t.Point;t.Bend=t.Class(t.Modifier,{constructor:function(t,n,o){this.$super("constructor"),this.name="Bend",this.constraint=i,this.max=0,this.min=0,this.mid=0,this.width=0,this.height=0,this.origin=0,this.m1=null,this.m2=null,this.diagAngle=0,this.switchAxes=!1,this.force=t!==e?t:0,this.offset=n!==e?n:0,o!==e?this.setAngle(o):this.setAngle(0)},force:0,offset:0,angle:0,diagAngle:0,max:0,min:0,mid:0,width:0,height:0,origin:0,m1:null,m2:null,switchAxes:!1,dispose:function(){return this.force=null,this.offset=null,this.angle=null,this.diagAngle=null,this.max=null,this.min=null,this.mid=null,this.width=null,this.height=null,this.origin=null,this.m1&&this.m1.dispose(),this.m2&&this.m2.dispose(),this.m1=null,this.m2=null,this.switchAxes=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{force:this.force,offset:this.offset,angle:this.angle,diagAngle:this.diagAngle,max:this.max,min:this.min,mid:this.mid,width:this.width,height:this.height,origin:this.origin,m1:this.m1.serialize(),m2:this.m2.serialize(),switchAxes:this.switchAxes,constraint:this.constraint,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.force=e.force,this.offset=e.offset,this.angle=e.angle,this.diagAngle=e.diagAngle,this.max=e.max,this.min=e.min,this.mid=e.mid,this.width=e.width,this.height=e.height,this.origin=e.origin,this.m1.unserialize(e.m1),this.m2.unserialize(e.m2),this.switchAxes=e.switchAxes,this.constraint=e.constraint,this.enabled=!!e.enabled}return this},setAngle:function(t){return this.angle=t,this.m1=(new s).rotate(t),this.m2=(new s).rotate(-t),this},setModifiable:function(t){return this.$super("setModifiable",t),this.max=this.switchAxes?this.mod.midAxis:this.mod.maxAxis,this.min=this.mod.minAxis,this.mid=this.switchAxes?this.mod.maxAxis:this.mod.midAxis,this.width=this.mod.getSize(this.max),this.height=this.mod.getSize(this.mid),this.origin=this.mod.getMin(this.max),this.diagAngle=r(this.width/this.height),this},_apply:function(){if(!this.force)return this;for(var t,e,i,s,r,g,f,p,m,v,w=this.mod.vertices,y=w.length,R=this.constraint,A=this.width,b=this.offset,x=this.origin,L=this.force,C=this.max,k=this.min,E=this.mid,B=this.m1,M=this.m2,S=x+A*b,F=A/l/L,T=c*(A/(F*c)),P=1/A;--y>=0;)t=w[y],e=t.getValue(C),i=t.getValue(E),s=t.getValue(k),r=B.transformPointSelf(new u(e,i)),e=r.x,i=r.y,g=(e-x)*P,n===R&&b>=g||o===R&&g>=b||(f=d-T*b+T*g,p=a(f)*(F+s),m=h(f)*(F+s),s=p-F,e=S-m),v=M.transformPointSelf(new u(e,i)),e=v.x,i=v.y,t.setValue(C,e),t.setValue(E,i),t.setValue(k,s);return this}})}(e),!function(t){"use strict";var e=t.Vector3,i=Math.max,n=Math.exp;t.Bloat=t.Class(t.Modifier,{constructor:function(){this.$super("constructor"),this.name="Bloat",this.radius=0,this.a=.01,this.center=e.ZERO()},center:null,radius:0,a:.01,dispose:function(){return this.center.dispose(),this.center=null,this.radius=null,this.a=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{center:this.center.serialize(),radius:this.radius,a:this.a,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.center.unserialize(e.center),this.radius=e.radius,this.a=e.a,this.enabled=!!e.enabled}return this},setRadius:function(t){return this.radius=i(0,t),this},setA:function(t){return this.a=i(0,t),this},_apply:function(){for(var t,e,i,o=this.mod.vertices,s=o.length,r=this.center,a=this.radius,h=this.a;--s>=0;)t=o[s],i=t.getVector().subtractSelf(r),e=i.getMagnitude(),i.setMagnitude(e+a*n(-e*h)),t.setVector(i.addSelf(r));return this}})}(e),!function(t,e){"use strict";var i=t.Vector3,n=t.Matrix4;t.Twist=t.Class(t.Modifier,{constructor:function(t){this.$super("constructor"),this.name="Twist",this.vector=new i([0,1,0]).normalizeSelf(),this.angle=t!==e?t:0,this.center=i.ZERO(),this.mat1=new n,this.mat2=new n},vector:null,angle:0,center:null,mat1:null,mat2:null,dispose:function(){return this.vector.dispose(),this.vector=null,this.angle=null,this.center.dispose(),this.center=null,this.mat1.dispose(),this.mat2.dispose(),this.mat1=null,this.mat2=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{vector:this.vector.serialize(),angle:this.angle,center:this.center.serialize(),mat1:this.mat1.serialize(),mat2:this.mat2.serialize(),enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.vector.unserialize(e.vector),this.angle=e.angle,this.center.unserialize(e.center),this.mat1.unserialize(e.mat1),this.mat2.unserialize(e.mat2),this.enabled=!!e.enabled}return this},_apply:function(){for(var t,e,n,o=this.mod,s=o.vertices,r=s.length,a=this.vector,h=this.angle,l=this.center,d=new i([.5*o.maxX,.5*o.maxY,.5*o.maxZ]),c=1/d.getMagnitude(),u=c*h,g=-i.dot(a,l);--r>=0;)t=s[r],n=t.getVector(),e=i.dot(n,a)+g,t.setVector(this.twistPoint(n,a,e*u));return this},twistPoint:function(t,e,n){var o=this.mat1.reset().translationMatrixFromVector(t),s=this.mat2.reset().rotationMatrixFromVector(e,n);return s.multiply(o),new i([s.n14,s.n24,s.n34])}})}(e),!function(t,e){"use strict";var i=Math.abs,n=Math.pow,o=(t.XMath.sign,t.ModConstant),s=o.NONE,r=o.LEFT,a=o.RIGHT,h=o.X,l=o.Y,d=o.Z;t.Skew=t.Class(t.Modifier,{constructor:function(t){this.$super("constructor"),this.name="Skew",this.force=t!==e?t:0,this.offset=.5,this.constraint=s,this.power=1,this.falloff=1,this.inverseFalloff=!1,this.oneSide=!1,this.swapAxes=!1,this.skewAxis=0},force:0,skewAxis:0,offset:.5,power:1,falloff:1,inverseFalloff:!1,oneSide:!1,swapAxes:!1,dispose:function(){return this.force=null,this.skewAxis=null,this.offset=null,this.power=null,this.falloff=null,this.inverseFalloff=null,this.oneSide=null,this.swapAxes=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{force:this.force,skewAxis:this.skewAxis,offset:this.offset,power:this.power,falloff:this.falloff,inverseFalloff:this.inverseFalloff,oneSide:this.oneSide,swapAxes:this.swapAxes,constraint:this.constraint,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.force=e.force,this.skewAxis=e.skewAxis,this.offset=e.offset,this.power=e.power,this.falloff=e.falloff,this.inverseFalloff=e.inverseFalloff,this.oneSide=e.oneSide,this.swapAxes=e.swapAxes,this.constraint=e.constraint,this.enabled=!!e.enabled}return this},setModifiable:function(t){return this.$super("setModifiable",t),this.skewAxis=this.skewAxis||this.mod.maxAxis,this},_apply:function(){for(var t,e,o,s,h,l,d,c,u=this.mod.vertices,g=u.length,f=this.constraint,p=this.skewAxis,m=this.offset,v=this.oneSide,w=this.inverseFalloff,y=this.falloff,R=1-y,A=this.power,b=this.force,x=this.getDisplaceAxis();--g>=0;)t=u[g],d=t.getRatio(p),r===f&&m>=d||a===f&&d>m||(e=d-m,v&&(e=i(e)),o=t.getRatio(x),w&&(o=1-o),s=y+o*R,c=0>e?-1:1,h=n(i(e),A)*c,l=t.getValue(x)+b*h*s,t.setValue(x,l));return this},getDisplaceAxis:function(){var t=this.skewAxis,e=this.swapAxes;switch(t){case h:return e?d:l;case l:return e?d:h;case d:return e?l:h}}})}(e),!function(t,e){"use strict";var i=t.Vector3,n=t.Matrix4,o=Math.pow;t.Taper=t.Class(t.Modifier,{constructor:function(t,n){this.$super("constructor"),this.name="Taper",this.vector=new i([1,0,1]),this.vector2=new i([0,1,0]),this.force=t!==e?t:0,this.power=n!==e?n:1},force:0,power:1,vector:null,vector2:null,dispose:function(){return this.vector.dispose(),this.vector2.dispose(),this.vector=null,this.vector2=null,this.force=null,this.power=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{force:this.force,power:this.power,vector:this.vector.serialize(),vector2:this.vector2.serialize(),enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.force=e.force,this.power=e.power,this.vector.unserialize(e.vector),this.vector2.unserialize(e.vector2),this.enabled=!!e.enabled}return this},_apply:function(){var t,e,i,s,r,a,h=this.mod.vertices,l=h.length,d=this.vector,c=this.vector2,u=this.force,g=this.power;for(s=new n;--l>=0;)t=h[l],e=t.getRatioVector().multiply(c),i=1!==g?u*o(e.getMagnitude(),g):u*e.getMagnitude(),a=d.xyz,s.reset().scaleMatrix(1+i*a[0],1+i*a[1],1+i*a[2]),r=t.getVector(),t.setVector(s.multiplyVector(r));return this}})}(e),!function(t){"use strict";var e=t.Constants.invPI,i=t.Constants.doublePI,n=t.Vector3,o=t.Matrix4;t.Wheel=t.Class(t.Modifier,{constructor:function(){this.$super("constructor"),this.name="Wheel",this.speed=0,this.turn=0,this.roll=0,this.radius=0,this.steerVector=new n([0,1,0]),this.rollVector=new n([0,0,1])},speed:0,turn:0,roll:0,radius:0,steerVector:null,rollVector:null,dispose:function(){return this.speed=null,this.turn=null,this.roll=null,this.radius=null,this.steerVector.dispose(),this.rollVector.dispose(),this.steerVector=null,this.rollVector=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{speed:this.speed,turn:this.turn,roll:this.roll,radius:this.radius,steerVector:this.steerVector.serialize(),rollVector:this.rollVector.serialize(),enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.speed=e.speed,this.turn=e.turn,this.roll=e.roll,this.radius=e.radius,this.steerVector.unserialize(e.steerVector),this.rollVector.unserialize(e.rollVector),this.enabled=!!e.enabled}return this},setModifiable:function(t){return this.$super("setModifiable",t),this.radius=.5*this.mod.width,this},_apply:function(){var t,e,i=this.mod.vertices,n=i.length,s=this.steerVector,r=this.turn,a=this.rollVector,h=this.roll,l=null,d=null,c=null;for(this.roll+=this.speed,r?(d=(new o).rotationMatrixFromVector(s,r),c=d.multiplyVector(a.clone()),l=(new o).rotationMatrixFromVector(c,h)):l=(new o).rotationMatrixFrom(a,h);--n>=0;)t=i[n],e=t.getVector(),d&&d.multiplyVector(e),t.setVector(l.multiplyVector(e));return this},getStep:function(){return this.radius*this.speed*e},getPerimeter:function(){return this.radius*i}})}(e),!function(t,e){"use strict";var i=t.Vector3,n=t.Range,o=t.Matrix4;t.Break=t.Class(t.Modifier,{constructor:function(t,o){this.$super("constructor"),this.name="Break",this.bv=new i([0,1,0]),this.range=new n(0,1),this.offset=t!==e?t:0,this.angle=o!==e?o:0},bv:null,range:null,offset:0,angle:0,dispose:function(){return this.bv.dispose(),this.bv=null,this.range.dispose(),this.range=null,this.offset=null,this.angle=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{bv:this.bv.serialize(),range:this.range.serialize(),offset:this.offset,angle:this.angle,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.bv.unserialize(e.bv),this.range.unserialize(e.range),this.offset=e.offset,this.angle=e.angle,this.enabled=!!e.enabled}return this},_apply:function(){var t,e,n,s,r,a=this.mod,h=a.vertices,l=h.length,d=this.offset,c=this.range,u=this.angle,g=this.bv,f=g.xyz;for(t=new i([0,0,-(a.minZ+a.depth*d)]),e=t.negate(),r=(new o).rotationMatrix(f[0],f[1],f[2],u);--l>=0;)n=h[l],s=n.getVector().addSelf(t),s.xyz[2]>=0&&c.isIn(n.ratio[1])&&r.multiplyVector(s),n.setVector(s.addSelf(e));return this}})}(e),!function(t,e){"use strict";var i=t.ModConstant.NONE,n=t.ModConstant.X,o=t.ModConstant.Y,s=t.ModConstant.Z,r=(t.VecArray,Math.random);t.Noise=t.Class(t.Modifier,{constructor:function(t){this.$super("constructor"),this.name="Noise",this.axes=i,this.start=0,this.end=0,this.force=t!==e?t:0},force:0,start:0,end:1,dispose:function(){return this.force=null,this.start=null,this.end=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{force:this.force,start:this.start,end:this.end,axes:this.axes,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.force=e.force,this.start=e.start,this.end=e.end,this.axes=e.axes,this.enabled=!!e.enabled}return this},setFalloff:function(t,i){return this.start=t!==e?t:0,this.end=i!==e?i:1,this},_apply:function(){var t,e,i,a,h,l=this.mod,d=this.axes,c=this.start,u=this.end,g=l.vertices,f=g.length,p=this.force,m=.5*p,v=l.maxAxis;if(!d||!p)return this;for(;--f>=0;)t=g[f],e=r()*p-m,i=t.getRatio(v),u>c?c>i?i=0:i>u&&(i=1):c>u?(i=1-i,i>c?i=0:u>i&&(i=1)):i=1,a=e*i,h=t.getXYZ(),t.setXYZ([h[0]+(d&n?0:a),h[1]+(d&o?0:a),h[2]+(d&s?0:a)]);return this}})}(e),!function(t){"use strict";var e=t.ModConstant,i=(e.NONE,e.X),n=e.Y,o=e.Z;t.DisplaceMap=t.Class(t.Modifier,{constructor:function(t,e,s,r){this.$super("constructor"),this.name="DisplaceMap",arguments.length>=3?(this.setBitmap(t,e,s),this.force=r||1):this.force=t||1,this.offset=127,this.axes=i|n|o},width:null,height:null,bitmapData:null,force:1,offset:127,dispose:function(){return this.bitmapData=null,this.width=null,this.height=null,this.force=null,this.offset=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{width:this.width,height:this.height,bitmapData:this.bitmapData,force:this.force,offset:this.offset,axes:this.axes,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.width=e.width,this.height=e.height,this.bitmapData=e.bitmapData,this.force=e.force,this.offset=e.offset,this.axes=e.axes,this.enabled=!!e.enabled}return this},setBitmap:function(t,e,i){return this.bitmapData=t||null,this.width=e||0,this.height=i||0,this},_apply:function(){var t,e,s,r,a,h=this.mod.vertices,l=h.length,d=this.axes,c=this.width,u=this.height,g=this.bitmapData,f=this.force,p=this.offset;if(!d||!g)return this;for(;--l>=0;)t=h[l],a=t.getXYZ(),s=~~((c-1)*t.ratio[0]),r=~~((u-1)*t.ratio[2]),e=r*c+s<<2,d&i&&(a[0]+=((255&g[e]>>16)-p)*f),d&n&&(a[1]+=((255&g[e+1]>>8)-p)*f),d&o&&(a[2]+=((255&g[e+2])-p)*f),t.setXYZ(a);return this}})}(e),!function(t,e){"use strict";var i=(t.Vector3,Math.round),n=t.VecArray,o=t.ModConstant,s=(o.NONE,o.X),r=o.Y,a=o.Z,h=t.PerlinNoise=t.Class({constructor:function(t,n){this.width=e!==t?i(t):10,this.height=e!==n?i(n):10},width:10,height:10,data:null,dispose:function(){return this.data=null,this.width=this.height=null,this},uvIndex:function(t,e){var i=this.width,n=this.height,o=~~((i-1)*t),s=~~((n-1)*e);return o+s*i},generate:function(){var t,e,i,o=this.width,s=this.height,r=o*s,a=new n(r);for(t=0,e=0,i=0;r>i;i++,t++)t>=o&&(t=0,e++),a[i]=noise.simplex2(t/o,e/s);return this.data=a,this},move:function(t,e){var i,o,s,r,a,h,l=this.width,d=this.height,c=l*d,u=this.data,g=new n(c);for(0>t&&(t+=l),0>e&&(e+=d),t=~~t,e=~~e,i=0,o=0,a=0;c>a;a++,i++)i>=l&&(i=0,o++),s=(i+t)%l,r=(o+e)%d,h=s+r*l,g[a]=u[h];return this.data=g,this}});t.Perlin=t.Class(t.Modifier,{constructor:function(i,n,o){this.$super("constructor"),this.name="Perlin",this.source=e!==n||t.isWorker?n:new h(25,25).generate(),this.force=i||1,this.autoRun=e===o||!!o,this.axes=s|r|a},speedX:1,speedY:1,source:null,force:1,offset:0,autoRun:!0,dispose:function(){return this.source=null,this.speedX=null,this.speedY=null,this.force=null,this.offset=null,this.autoRun=null,this.$super("dispose"),this},serialize:function(){return{modifier:this.name,params:{speedX:this.speedX,speedY:this.speedY,axes:this.axes,source:this.source?{data:this.source.data,width:this.source.width,height:this.source.height}:null,force:this.force,offset:this.offset,autoRun:!!this.autoRun,enabled:!!this.enabled}}},unserialize:function(t){if(t&&this.name===t.modifier){var e=t.params;this.speedX=e.speedX,this.speedY=e.speedY,this.axes=e.axes,this.force=e.force,this.offset=e.offset,this.autoRun=!!e.autoRun,this.enabled=!!e.enabled,!this.source&&this.autoRun&&e.source&&(this.source=new h(e.source.width,e.source.height),this.source.data=e.source.data)}return this},setSpeed:function(t,e){return this.speedX=t,this.speedY=e,this},_apply:function(){var t,e,i,n,o=this.mod.vertices,h=o.length,l=this.axes,d=this.force,c=this.offset,u=this.source;if(!l||!u)return this;for(this.autoRun&&u.move(this.speedX,this.speedY),t=u.data;--h>=0;)e=o[h],n=e.getXYZ(),i=u.uvIndex(e.ratio[0],e.ratio[2]),l&s&&(n[0]+=(t[i]-c)*d),l&r&&(n[1]+=(t[i]-c)*d),l&a&&(n[2]+=(t[i]-c)*d),e.setXYZ(n);return this}})}(e),!function(t){"use strict";var e=t.ModConstant,i=e.X,n=e.Y,o=e.Z,s=t.Vector3,r=t.VecArray,a=t.VertexThree=t.Class(t.VertexProxy,{constructor:function(t,e){this.mesh=t,this.$super("constructor",e),this.name="VertexThree"},mesh:null,dispose:function(){return this.mesh=null,this.$super("dispose"),this},setVertex:function(t){return this.vertex=t,this.original=new r([t.x,t.y,t.z]),this.xyz=new r(this.original),this},getXYZ:function(){var t=this.vertex;return new r([t.x,t.y,t.z])},getX:function(){return this.vertex.x},getY:function(){return this.vertex.y},getZ:function(){return this.vertex.z},setXYZ:function(t){var e=this.vertex;return this.mesh.geometry,e.x=t[0],e.y=t[1],e.z=t[2],this},setX:function(t){var e=this.vertex;return e.x=t,this},setY:function(t){var e=this.vertex;return e.y=t,this},setZ:function(t){var e=this.vertex;return e.z=t,this},reset:function(){var t=this.vertex,e=(this.mesh.geometry,this.original);return t.x=e[0],t.y=e[1],t.z=e[2],this},collapse:function(){var t=this.vertex;return this.original=new r([t.x,t.y,t.z]),this},getValue:function(t){var e=this.vertex;switch(t){case i:return e.x;case n:return e.y;case o:return e.z}return 0},setValue:function(t,e){var s=this.vertex,r=!1;switch(t){case i:s.x=e,r=!0;break;case n:s.y=e,r=!0;break;case o:s.z=e,r=!0}return this},setVector:function(t){var e=this.vertex,i=t.xyz;return this.mesh.geometry,e.x=i[0],e.y=i[1],e.z=i[2],this},getVector:function(){var t=this.vertex;return new s([t.x,t.y,t.z])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t){"use strict";var e=t.VertexThree;t.FaceProxy,t.MeshThree=t.Class(t.MeshProxy,{constructor:function(t){this.$super("constructor",t),this.name="MeshThree"},setMesh:function(t){this.$super("setMesh",t);var i,n=0,t=this.mesh,o=this.vertices,s=t.geometry.vertices,r=s.length,a=t.geometry.faces;for(a.length,n=0;r>n;)i=new e(t,s[n]),o.push(i),n++;return this.faces=null,this},update:function(){var t=this.mesh.geometry;return t.verticesNeedUpdate=!0,t.normalsNeedUpdate=!0,t.buffersNeedUpdate=!0,t.dynamic=!0,this},updateMeshPosition:function(t){var e=this.mesh.position,i=t.xyz;return e.x+=i[0],e.y+=i[1],e.z+=i[2],this}})}(e),!function(t){"use strict";var e=t.Class(t.Library3d,{constructor:function(){this.id="Three.js",this.meshClass=t.MeshThree,this.vertexClass=t.VertexThree}});t.LibraryThree=new e}(e),!function(t){"use strict";var e=t.ModConstant,i=e.X,n=e.Y,o=e.Z,s=t.Vector3,r=t.VecArray,a=t.VertexJ3D=t.Class(t.VertexProxy,{constructor:function(t,e){this.geometry=t,this.VERTEX_POSITION=J3D.Mesh.VERTEX_POSITION,this.$super("constructor",e),this.name="VertexJ3D"},geometry:null,VERTEX_POSITION:null,dispose:function(){return this.VERTEX_POSITION=null,this.geometry=null,this.$super("dispose"),this},setVertex:function(t){var e=this.geometry,i=e.arraysByName[this.VERTEX_POSITION],n=i.data;return this.vertex=t,this.original=new r([n[t],n[t+1],n[t+2]]),this.xyz=new r(this.original),this},getXYZ:function(){var t=this.vertex,e=this.geometry,i=e.arraysByName[this.VERTEX_POSITION],n=i.data;return new r([n[t],n[t+1],n[t+2]])},getX:function(){var t=this.vertex,e=this.geometry,i=e.arraysByName[this.VERTEX_POSITION],n=i.data;return n[t]},getY:function(){var t=this.vertex,e=this.geometry,i=e.arraysByName[this.VERTEX_POSITION],n=i.data;return n[t+1]},getZ:function(){var t=this.vertex,e=this.geometry,i=e.arraysByName[this.VERTEX_POSITION],n=i.data;return n[t+2]},setXYZ:function(t){var e=this.vertex,i=this.geometry,n=i.arraysByName[this.VERTEX_POSITION],o=n.data;return o[e]=t[0],o[e+1]=t[1],o[e+2]=t[2],this},setX:function(t){var e=this.vertex,i=this.geometry,n=i.arraysByName[this.VERTEX_POSITION],o=n.data;return o[e]=t,this},setY:function(t){var e=this.vertex,i=this.geometry,n=i.arraysByName[this.VERTEX_POSITION],o=n.data;return o[e+1]=t,this},setZ:function(t){var e=this.vertex,i=this.geometry,n=i.arraysByName[this.VERTEX_POSITION],o=n.data;return o[e+2]=t,this},reset:function(){var t=this.vertex,e=this.geometry,i=e.arraysByName[this.VERTEX_POSITION],n=i.data,o=this.original;return n[t]=o[0],n[t+1]=o[1],n[t+2]=o[2],this},collapse:function(){var t=this.vertex,e=this.geometry,i=e.arraysByName[this.VERTEX_POSITION],n=i.data;return this.original=new r([n[t],n[t+1],n[t+2]]),this},getValue:function(t){var e=this.vertex,s=this.geometry,r=s.arraysByName[this.VERTEX_POSITION],a=r.data;switch(t){case i:return a[e];case n:return a[e+1];case o:return a[e+2]}return 0},setValue:function(t,e){var s=this.vertex,r=this.geometry,a=r.arraysByName[this.VERTEX_POSITION],h=a.data,l=!1;switch(t){case i:h[s]=e,l=!0;break;case n:h[s+1]=e,l=!0;break;case o:h[s+2]=e,l=!0}return this},setVector:function(t){var e=this.vertex,i=this.geometry,n=i.arraysByName[this.VERTEX_POSITION],o=n.data,s=t.xyz;return o[e]=s[0],o[e+1]=s[1],o[e+2]=s[2],this},getVector:function(){var t=this.vertex,e=this.geometry,i=e.arraysByName[this.VERTEX_POSITION],n=i.data;return new s([n[t],n[t+1],n[t+2]])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t){"use strict";var e=t.VertexJ3D;t.FaceProxy,t.VecArray,t.MeshJ3D=t.Class(t.MeshProxy,{constructor:function(t){this.VERTEX_POSITION=J3D.Mesh.VERTEX_POSITION,this.$super("constructor",t),this.name="MeshJ3D"},VERTEX_POSITION:null,dispose:function(){return this.VERTEX_POSITION=null,this.$super("dispose"),this},setMesh:function(t){this.$super("setMesh",t);var i,n=0,o=t.geometry,s=o.arraysByName[this.VERTEX_POSITION],r=s.data,a=r.length,h=s.itemSize,l=this.vertices;for(n=0;a>n;)i=new e(o,n),l.push(i),n+=h;return this.faces=null,this},update:function(){var t=this.mesh.geometry,e=t.arraysByName[this.VERTEX_POSITION],i=e.data;return t.replaceArray(e,i),this},updateMeshPosition:function(t){var e=this.mesh.position,i=t.xyz;return e.x+=i[0],e.y+=i[1],e.z+=i[2],this}})}(e),!function(t){"use strict";var e=t.Class(t.Library3d,{constructor:function(){this.id="J3D",this.meshClass=t.MeshJ3D,this.vertexClass=t.VertexJ3D}});t.LibraryJ3D=new e}(e),!function(t){"use strict";var e=t.ModConstant,i=e.X,n=e.Y,o=e.Z,s=t.Vector3,r=t.VecArray,a=t.VertexCubicVR=t.Class(t.VertexProxy,{constructor:function(t,e){this.sceneObject=t,this.$super("constructor",e),this.name="VertexCubicVR"},sceneObject:null,dispose:function(){return this.sceneObject=null,this.$super("dispose"),this},setVertex:function(t){return this.vertex=t,this.original=new r(t),this.xyz=new r(t),this},getXYZ:function(){return new r(this.vertex)},getX:function(){return this.vertex[0]},getY:function(){return this.vertex[1]},getZ:function(){return this.vertex[2]},setXYZ:function(t){var e=this.vertex;return e[0]=t[0],e[1]=t[1],e[2]=t[2],this},setX:function(t){var e=this.vertex;return e[0]=t,this},setY:function(t){var e=this.vertex;return e[1]=t,this},setZ:function(t){var e=this.vertex;return e[2]=t,this},reset:function(){var t=this.vertex,e=this.original;return t[0]=e[0],t[1]=e[1],t[2]=e[2],this},collapse:function(){return this.original=new r(this.vertex),this},getValue:function(t){var e=this.vertex;switch(t){case i:return e[0];case n:return e[1];case o:return e[2]}return 0},setValue:function(t,e){var s=this.vertex,r=!1;switch(t){case i:s[0]=e,r=!0;break;case n:s[1]=e,r=!0;break;case o:s[2]=e,r=!0}return this},setVector:function(t){var e=this.vertex,i=t.xyz;return e[0]=i[0],e[1]=i[1],e[2]=i[2],this},getVector:function(){return new s(this.vertex)}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t){"use strict";var e=t.VertexCubicVR;t.FaceProxy,t.MeshCubicVR=t.Class(t.MeshProxy,{constructor:function(t){this.$super("constructor",t),this.name="MeshCubicVR"},setMesh:function(t){this.$super("setMesh",t);var i,n=0,o=t.obj.points,s=o.length,r=t.obj.faces,a=(r.length,this.vertices);for(n=0;s>n;)i=new e(t,o[n]),a.push(i),n++;return this.faces=null,this},update:function(){return this.mesh.dirty=!0,this},updateMeshPosition:function(t){var e=this.mesh.position,i=t.xyz;return e[0]+=i[0],e[1]+=i[1],e[2]+=i[2],this}})}(e),!function(t){"use strict";var e=t.Class(t.Library3d,{constructor:function(){this.id="CubicVR.js",this.meshClass=t.MeshCubicVR,this.vertexClass=t.VertexCubicVR}});t.LibraryCubicVR=new e}(e),!function(t){"use strict";var e=t.ModConstant,i=e.X,n=e.Y,o=e.Z,s=t.Vector3,r=t.VecArray,a=t.VertexCopperlicht=t.Class(t.VertexProxy,{constructor:function(t,e,i){this.node=t,this.buffer=e,this.$super("constructor",i),this.name="VertexCopperlicht"},node:null,buffer:null,dispose:function(){return this.node=null,this.buffer=null,this.$super("dispose"),this},setVertex:function(t){var e=t.Pos;return this.vertex=t,this.original=new r([e.X,e.Y,e.Z]),this.xyz=new r(this.original),this},getXYZ:function(){var t=this.vertex.Pos;return new r([t.X,t.Y,t.Z])},getX:function(){return this.vertex.Pos.X},getY:function(){return this.vertex.Pos.Y},getZ:function(){return this.vertex.Pos.Z},setXYZ:function(t){var e=this.vertex.Pos;return e.X=t[0],e.Y=t[1],e.Z=t[2],this},setX:function(t){var e=this.vertex.Pos;return e.X=t,this},setY:function(t){var e=this.vertex.Pos;return e.Y=t,this},setZ:function(t){var e=this.vertex.Pos;return e.Z=t,this},reset:function(){var t=this.vertex.Pos,e=this.original;return t.X=e[0],t.Y=e[1],t.Z=e[2],this},collapse:function(){var t=this.vertex.Pos;return this.original=new r([t.X,t.Y,t.Z]),this},getValue:function(t){var e=this.vertex.Pos;switch(t){case i:return e.X;case n:return e.Y;case o:return e.Z}return 0},setValue:function(t,e){var s=this.vertex.Pos,r=!1;switch(t){case i:s.X=e,r=!0;break;case n:s.Y=e,r=!0;break;case o:s.Z=e,r=!0}return this},setVector:function(t){var e=this.vertex.Pos,i=t.xyz;return e.X=i[0],e.Y=i[1],e.Z=i[2],this},getVector:function(){var t=this.vertex.Pos;return new s([t.X,t.Y,t.Z])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t){"use strict";var e=t.VertexCopperlicht;t.FaceProxy,t.MeshCopperlicht=t.Class(t.MeshProxy,{constructor:function(t){this.$super("constructor",t),this.name="MeshCopperlicht"},setMesh:function(t){this.$super("setMesh",t);var i,n,o,s,r,a=this.mesh.getMesh().GetMeshBuffers(),h=this.vertices,l=[];for(n=0,o=a.length;o>n;n++)for(l=a[n].Vertices,i=0,s=l.length;s>i;i++)r=new e(this.mesh,a[n],l[i]),h.push(r);return this.faces=null,this},update:function(){for(var t=this.mesh.getMesh().GetMeshBuffers(),e=t.length,i=0;e>i;)t[i].update(!0),i++;return this},updateMeshPosition:function(t){var e=this.mesh.Pos,i=t.xyz;return e.X+=i[0],e.Y+=i[1],e.Z+=i[2],this}})}(e),!function(t){"use strict";var e=t.Class(t.Library3d,{constructor:function(){this.id="Copperlicht",this.meshClass=t.MeshCopperlicht,this.vertexClass=t.VertexCopperlicht}});t.LibraryCopperlicht=new e}(e),!function(t){"use strict";var e=t.ModConstant,i=e.X,n=e.Y,o=e.Z,s=t.Vector3,r=t.VecArray,a=t.VertexPre3D=t.Class(t.VertexProxy,{constructor:function(t){this.$super("constructor",t),this.name="VertexPre3D"},setVertex:function(t){return this.vertex=t,this.original=new r([t.x,t.y,t.z]),this.xyz=new r(this.original),this},getXYZ:function(){var t=this.vertex;return new r([t.x,t.y,t.z])},getX:function(){return this.vertex.x},getY:function(){return this.vertex.y},getZ:function(){return this.vertex.z},setXYZ:function(t){var e=this.vertex;return e.x=t[0],e.y=t[1],e.z=t[2],this},setX:function(t){return this.vertex.x=t,this},setY:function(t){return this.vertex.y=t,this},setZ:function(t){return this.vertex.z=t,this},getValue:function(t){var e=this.vertex;switch(t){case i:return e.x;case n:return e.y;case o:return e.z}return 0},setValue:function(t,e){var s=this.vertex;switch(t){case i:s.x=e;break;case n:s.y=e;break;case o:s.z=e}return this},setVector:function(t){var e=this.vertex,i=t.xyz;return e.x=i[0],e.y=i[1],e.z=i[2],this},getVector:function(){var t=this.vertex;return new s([t.x,t.y,t.z])}});a.prototype.getXYZRef=a.prototype.getXYZ,a.prototype.setXYZRef=a.prototype.setXYZ}(e),!function(t){"use strict";var e=t.VertexPre3D;t.FaceProxy,t.MeshPre3D=t.Class(t.MeshProxy,{constructor:function(t){this.$super("constructor",t),this.name="MeshPre3D"},setMesh:function(t){this.$super("setMesh",t);var i,n,o=this.mesh.vertices,s=this.mesh.quads,r=o.length,a=(s.length,this.vertices);for(i=0;r>i;i++)n=new e(o[i]),a.push(n);return this.faces=null,this}})}(e),!function(t){"use strict";var e=t.Class(t.Library3d,{constructor:function(){this.id="pre3d.js",this.meshClass=t.MeshPre3D,this.vertexClass=t.VertexPre3D}});t.LibraryPre3D=new e}(e),e}),function(){var t=function(t){return t.reduce(function(t,e){return 2*t+e},0)},e=function(t){for(var e=[],i=7;i>=0;i--)e.push(!!(t&1<<i));return e},i=function(t){this.data=t,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return 255&t.charCodeAt(this.pos++)},this.readBytes=function(t){for(var e=[],i=0;i<t;i++)e.push(this.readByte());return e},this.read=function(t){for(var e="",i=0;i<t;i++)e+=String.fromCharCode(this.readByte());return e},this.readUnsigned=function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}},n=function(t,e){for(var i,n,o=0,s=function(t){for(var i=0,n=0;n<t;n++)e.charCodeAt(o>>3)&1<<(7&o)&&(i|=1<<n),o++;return i},r=[],a=1<<t,h=a+1,l=t+1,d=[],c=function(){d=[],l=t+1;for(var e=0;e<a;e++)d[e]=[e];d[a]=[],d[h]=null};;)if(n=i,i=s(l),i!==a){if(i===h)break;if(i<d.length)n!==a&&d.push(d[n].concat(d[i][0]));else{if(i!==d.length)throw new Error("Invalid LZW code.");d.push(d[n].concat(d[n][0]))}r.push.apply(r,d[i]),d.length===1<<l&&l<12&&l++}else c();return r},o=function(i,o){o||(o={});var s=function(t){for(var e=[],n=0;n<t;n++)e.push(i.readBytes(3));return e},r=function(){var t,e;e="";do t=i.readByte(),e+=i.read(t);while(0!==t);return e},a=function(){var n={};if(n.sig=i.read(3),n.ver=i.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=i.readUnsigned(),n.height=i.readUnsigned();var r=e(i.readByte());n.gctFlag=r.shift(),n.colorRes=t(r.splice(0,3)),n.sorted=r.shift(),n.gctSize=t(r.splice(0,3)),n.bgColor=i.readByte(),n.pixelAspectRatio=i.readByte(),n.gctFlag&&(n.gct=s(1<<n.gctSize+1)),o.hdr&&o.hdr(n)},h=function(n){var s=function(n){var s=(i.readByte(),e(i.readByte()));n.reserved=s.splice(0,3),n.disposalMethod=t(s.splice(0,3)),n.userInput=s.shift(),n.transparencyGiven=s.shift(),n.delayTime=i.readUnsigned(),n.transparencyIndex=i.readByte(),n.terminator=i.readByte(),o.gce&&o.gce(n)},a=function(t){t.comment=r(),o.com&&o.com(t)},h=function(t){i.readByte();t.ptHeader=i.readBytes(12),t.ptData=r(),o.pte&&o.pte(t)},l=function(t){var e=function(t){i.readByte();t.unknown=i.readByte(),t.iterations=i.readUnsigned(),t.terminator=i.readByte(),o.app&&o.app.NETSCAPE&&o.app.NETSCAPE(t)},n=function(t){t.appData=r(),o.app&&o.app[t.identifier]&&o.app[t.identifier](t)};i.readByte();switch(t.identifier=i.read(8),t.authCode=i.read(3),t.identifier){case"NETSCAPE":e(t);break;default:n(t)}},d=function(t){t.data=r(),o.unknown&&o.unknown(t)};switch(n.label=i.readByte(),n.label){case 249:n.extType="gce",s(n);break;case 254:n.extType="com",a(n);break;case 1:n.extType="pte",h(n);break;case 255:n.extType="app",l(n);break;default:n.extType="unknown",d(n)}},l=function(a){var h=function(t,e){for(var i=new Array(t.length),n=t.length/e,o=function(n,o){var s=t.slice(o*e,(o+1)*e);i.splice.apply(i,[n*e,e].concat(s))},s=[0,4,2,1],r=[8,8,4,2],a=0,h=0;h<4;h++)for(var l=s[h];l<n;l+=r[h])o(l,a),a++;return i};a.leftPos=i.readUnsigned(),a.topPos=i.readUnsigned(),a.width=i.readUnsigned(),a.height=i.readUnsigned();var l=e(i.readByte());a.lctFlag=l.shift(),a.interlaced=l.shift(),a.sorted=l.shift(),a.reserved=l.splice(0,2),a.lctSize=t(l.splice(0,3)),a.lctFlag&&(a.lct=s(1<<a.lctSize+1)),a.lzwMinCodeSize=i.readByte();var d=r();a.pixels=n(a.lzwMinCodeSize,d),
a.interlaced&&(a.pixels=h(a.pixels,a.width)),o.img&&o.img(a)},d=function(){var t={};switch(t.sentinel=i.readByte(),String.fromCharCode(t.sentinel)){case"!":t.type="ext",h(t);break;case",":t.type="img",l(t);break;case";":t.type="eof",o.eof&&o.eof(t);break;default:throw new Error("Unknown block: 0x"+t.sentinel.toString(16))}"eof"!==t.type&&d()},c=function(){a(),d()};c()};SuperGif=function(t){var e,n,s=null,r=!1,a=null,h=null,l=null,d=null,c=null,u=!0,g=!0,f=!1,p=[],m=t.gif;t.auto_play=!1,t.rubbable=!1;var v,w,y,R=function(){a=null,h=null,d=l,l=null,c=null},A=function(){try{o(e,_)}catch(t){x("parse")}},b=function(t,e,i){if(i){var n=25,o=v.height-n,s=t/e*v.width;w.fillStyle="rgba(255,255,255,0.4)",w.fillRect(s,o,v.width-s,n),w.fillStyle="rgba(255,0,22,.8)",w.fillRect(0,o,t/e*v.width,n)}},x=function(t){var e=function(){w.fillStyle="black",w.fillRect(0,0,n.width,n.height),w.strokeStyle="red",w.lineWidth=3,w.moveTo(0,0),w.lineTo(n.width,n.height),w.moveTo(0,n.height),w.lineTo(n.width,0),w.stroke()};s=t,n={width:50,height:50},p=[],e()},L=function(t){n=t,v.width=n.width,v.height=n.height,y.width=n.width,y.height=n.height},C=function(t){k(),R(),a=t.transparencyGiven?t.transparencyIndex:null,h=t.delayTime,l=t.disposalMethod},k=function(){c&&p.push({data:c.getImageData(0,0,n.width,n.height),delay:h})},E=!1,B=!1,M=function(t){c||(c=y.getContext("2d"));var e=t.lctFlag?t.lct:n.gct,i=c.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,n){a!==t?(i.data[4*n+0]=e[t][0],i.data[4*n+1]=e[t][1],i.data[4*n+2]=e[t][2],i.data[4*n+3]=255):2!==d&&3!==d||(i.data[4*n+3]=0)}),E||(E=t),B||(B=i),c.putImageData(i,t.leftPos,t.topPos),f||(w.scale(H(),H()),f=!0),w.drawImage(y,0,0)},S=function(){var e,i,n=-1,o=function(t){n=(n+t+p.length)%p.length,e=n+1,i=p[n].delay,a()},r=function(){var t=!1,e=function(){if(t=u){o(g?1:-1);var i=10*p[n].delay;i||(i=100),setTimeout(e,i)}};return function(){t||e()}}(),a=function(){e=n,y.getContext("2d").putImageData(p[n].data,0,0),w.drawImage(y,0,0)},h=function(){u=!0,r()},l=function(){u=!1};return{init:function(){s||(w.scale(H(),H()),t.auto_play?r():(n=0,a()))},current_frame:e,step:r,play:h,pause:l,playing:u,move_relative:o,current_frame:function(){return n},length:function(){return p.length},move_to:function(t){n=t,a()}}}(),F=function(t){b(e.pos,e.data.length,t)},T=function(){},P=function(t,e){return function(i){t(i),F(e)}},_={hdr:P(L),gce:P(C),com:P(T),app:{NETSCAPE:P(T)},img:P(M,!0),eof:function(t){k(),F(!1),v.width=n.width,v.height=n.height,S.init(),r=!1,O&&O()}},D=function(){v=document.createElement("canvas"),w=v.getContext("2d"),y=document.createElement("canvas")},H=function(){return t.max_width&&v.width>t.max_width?t.max_width/v.width:1},$=!1,O=!1;return{play:S.play,pause:S.pause,move_relative:S.move_relative,move_to:S.move_to,get_playing:function(){return S.playing},get_canvas:function(){return v},get_loading:function(){return r},get_auto_play:function(){return t.auto_play},get_length:function(){return S.length()},get_current_frame:function(){return S.current_frame()},load:function(t){$||D(),O=t,e=new i(m),A()}}}}(),LZWEncoder=function(){var t,e,i,n,o,s,r,a,h,l,d,c,u={},g=-1,f=12,p=5003,m=f,v=1<<f,w=new Array,y=new Array,R=p,A=0,b=!1,x=0,L=0,C=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],k=[],E=u.LZWEncoder=function(o,s,r,a){t=o,e=s,i=r,n=Math.max(2,a)},B=function(t,e){k[c++]=t,c>=254&&T(e)},M=function(t){S(R),A=l+2,b=!0,D(l,t)},S=function(t){for(var e=0;e<t;++e)w[e]=-1},F=u.compress=function(t,e){var i,n,o,s,u,f,p;for(h=t,b=!1,r=h,a=P(r),l=1<<t-1,d=l+1,A=l+2,c=0,s=_(),p=0,i=R;i<65536;i*=2)++p;p=8-p,f=R,S(f),D(l,e);t:for(;(o=_())!=g;)if(i=(o<<m)+s,n=o<<p^s,w[n]!=i){if(w[n]>=0){u=f-n,0==n&&(u=1);do if((n-=u)<0&&(n+=f),w[n]==i){s=y[n];continue t}while(w[n]>=0)}D(s,e),s=o,A<v?(y[n]=A++,w[n]=i):M(e)}else s=y[n];D(s,e),D(d,e)},T=(u.encode=function(i){i.writeByte(n),o=t*e,s=0,F(n+1,i),i.writeByte(0)},function(t){c>0&&(t.writeByte(c),t.writeBytes(k,0,c),c=0)}),P=function(t){return(1<<t)-1},_=function(){if(0==o)return g;--o;var t=i[s++];return 255&t},D=function(t,e){for(x&=C[L],L>0?x|=t<<L:x=t,L+=r;L>=8;)B(255&x,e),x>>=8,L-=8;if((A>a||b)&&(b?(a=P(r=h),b=!1):(++r,a=r==m?v:P(r))),t==d){for(;L>0;)B(255&x,e),x>>=8,L-=8;T(e)}};return E.apply(this,arguments),u},NeuQuant=function(){var t,e,i,n,o,s={},r=256,a=499,h=491,l=487,d=503,c=3*d,u=r-1,g=4,f=100,p=16,m=1<<p,v=10,w=10,y=m>>w,R=m<<v-w,A=r>>3,b=6,x=1<<b,L=A*x,C=30,k=10,E=1<<k,B=8,M=1<<B,S=k+B,F=1<<S,T=new Array,P=new Array,_=new Array,D=new Array,H=s.NeuQuant=function(t,s,a){var h,l;for(e=t,i=s,n=a,o=new Array(r),h=0;h<r;h++)o[h]=new Array(4),l=o[h],l[0]=l[1]=l[2]=(h<<g+8)/r,_[h]=m/r,P[h]=0},$=function(){for(var t=[],e=new Array(r),i=0;i<r;i++)e[o[i][3]]=i;for(var n=0,s=0;s<r;s++){var a=e[s];t[n++]=o[a][0],t[n++]=o[a][1],t[n++]=o[a][2]}return t},O=function(){var t,e,i,n,s,a,h,l;for(h=0,l=0,t=0;t<r;t++){for(s=o[t],i=t,n=s[1],e=t+1;e<r;e++)a=o[e],a[1]<n&&(i=e,n=a[1]);if(a=o[i],t!=i&&(e=a[0],a[0]=s[0],s[0]=e,e=a[1],a[1]=s[1],s[1]=e,e=a[2],a[2]=s[2],s[2]=e,e=a[3],a[3]=s[3],s[3]=e),n!=h){for(T[h]=l+t>>1,e=h+1;e<n;e++)T[e]=t;h=n,l=t}}for(T[h]=l+u>>1,e=h+1;e<256;e++)T[e]=u},N=function(){var o,s,r,u,p,m,v,w,y,R,A,x,k,B;for(i<c&&(n=1),t=30+(n-1)/3,x=e,k=0,B=i,A=i/(3*n),R=A/f,w=E,m=L,v=m>>b,v<=1&&(v=0),o=0;o<v;o++)D[o]=w*((v*v-o*o)*M/(v*v));for(y=i<c?3:i%a!=0?3*a:i%h!=0?3*h:i%l!=0?3*l:3*d,o=0;o<A;)if(r=(255&x[k+0])<<g,u=(255&x[k+1])<<g,p=(255&x[k+2])<<g,s=X(r,u,p),j(w,s,r,u,p),0!=v&&W(v,s,r,u,p),k+=y,k>=B&&(k-=i),o++,0==R&&(R=1),o%R==0)for(w-=w/t,m-=m/C,v=m>>b,v<=1&&(v=0),s=0;s<v;s++)D[s]=w*((v*v-s*s)*M/(v*v))},I=(s.map=function(t,e,i){var n,s,a,h,l,d,c;for(l=1e3,c=-1,n=T[e],s=n-1;n<r||s>=0;)n<r&&(d=o[n],a=d[1]-e,a>=l?n=r:(n++,a<0&&(a=-a),h=d[0]-t,h<0&&(h=-h),a+=h,a<l&&(h=d[2]-i,h<0&&(h=-h),a+=h,a<l&&(l=a,c=d[3])))),s>=0&&(d=o[s],a=e-d[1],a>=l?s=-1:(s--,a<0&&(a=-a),h=d[0]-t,h<0&&(h=-h),a+=h,a<l&&(h=d[2]-i,h<0&&(h=-h),a+=h,a<l&&(l=a,c=d[3]))));return c},s.process=function(){return N(),I(),O(),$()},function(){var t;for(t=0;t<r;t++)o[t][0]>>=g,o[t][1]>>=g,o[t][2]>>=g,o[t][3]=t}),W=function(t,e,i,n,s){var a,h,l,d,c,u,g;for(l=e-t,l<-1&&(l=-1),d=e+t,d>r&&(d=r),a=e+1,h=e-1,u=1;a<d||h>l;){if(c=D[u++],a<d){g=o[a++];try{g[0]-=c*(g[0]-i)/F,g[1]-=c*(g[1]-n)/F,g[2]-=c*(g[2]-s)/F}catch(f){}}if(h>l){g=o[h--];try{g[0]-=c*(g[0]-i)/F,g[1]-=c*(g[1]-n)/F,g[2]-=c*(g[2]-s)/F}catch(f){}}}},j=function(t,e,i,n,s){var r=o[e];r[0]-=t*(r[0]-i)/E,r[1]-=t*(r[1]-n)/E,r[2]-=t*(r[2]-s)/E},X=function(t,e,i){var n,s,a,h,l,d,c,u,f,m;for(u=~(1<<31),f=u,d=-1,c=d,n=0;n<r;n++)m=o[n],s=m[0]-t,s<0&&(s=-s),a=m[1]-e,a<0&&(a=-a),s+=a,a=m[2]-i,a<0&&(a=-a),s+=a,s<u&&(u=s,d=n),h=s-(P[n]>>p-g),h<f&&(f=h,c=n),l=_[n]>>w,_[n]-=l,P[n]+=l<<v;return _[d]+=y,P[d]-=R,c};return H.apply(this,arguments),s},GIFEncoder=function(){function t(){this.bin=[]}for(var e=0,i={};e<256;e++)i[e]=String.fromCharCode(e);t.prototype.getData=function(){for(var t="",e=this.bin.length,n=0;n<e;n++)t+=i[this.bin[n]];return t},t.prototype.writeByte=function(t){this.bin.push(t)},t.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},t.prototype.writeBytes=function(t,e,i){for(var n=i||t.length,o=e||0;o<n;o++)this.writeByte(t[o])};var n,o,s,r,a,h,l,d,c,u={},g=null,f=-1,p=0,m=!1,v=new Array,w=7,y=-1,R=!1,A=!0,b=!1,x=10,L=(u.setDelay=function(t){p=Math.round(t/10)},u.setDispose=function(t){t>=0&&(y=t)},u.setRepeat=function(t){t>=0&&(f=t)},u.setTransparent=function(t){g=t},u.addFrame=function(t,e){if(null==t||!m||null==r)throw new Error("Please call start method before calling addFrame");var i=!0;try{e?a=t:(a=t.getImageData(0,0,t.canvas.width,t.canvas.height).data,b||C(t.canvas.width,t.canvas.height)),B(),k(),A&&(F(),P(),f>=0&&T()),M(),S(),A||P(),D(),A=!1}catch(n){i=!1}return i},u.finish=function(){if(!m)return!1;var t=!0;m=!1;try{r.writeByte(59)}catch(e){t=!1}return t},function(){s=0,a=null,h=null,l=null,c=null,R=!1,A=!0}),C=(u.setFrameRate=function(t){15!=t&&(p=Math.round(100/t))},u.setQuality=function(t){t<1&&(t=1),x=t},u.setSize=function(t,e){m&&!A||(n=t,o=e,n<1&&(n=320),o<1&&(o=240),b=!0)}),k=(u.start=function(){L();var e=!0;R=!1,r=new t;try{r.writeUTFBytes("GIF89a")}catch(i){e=!1}return m=e},function(){var t=h.length,e=t/3;l=[];var i=new NeuQuant(h,t,x);c=i.process();for(var n=0,o=0;o<e;o++){var r=i.map(255&h[n++],255&h[n++],255&h[n++]);v[r]=!0,l[o]=r}h=null,d=8,w=7,null!=g&&(s=E(g))});_analyzePixels=function(){for(var t=[],e=0;e<h.length;e+=3)t.push([h[e],h[e+1],h[e+2]]);var i=256,n=MMCQ.quantize(t,i),o=n.palette();t.map(function(t,e){return n.map(t)});c=[];for(var e=0;e<o.length;e++)v[e]=!0,c.push(o[e][0]),c.push(o[e][1]),c.push(o[e][2])};var E=function(t){if(null==c)return-1;for(var e=(16711680&t)>>16,i=(65280&t)>>8,n=255&t,o=0,s=16777216,r=c.length,a=0;a<r;){var h=e-(255&c[a++]),l=i-(255&c[a++]),d=n-(255&c[a]),u=h*h+l*l+d*d,g=a/3;v[g]&&u<s&&(s=u,o=g),a++}return o},B=function(){var t=n,e=o;h=[];for(var i=a,s=0,r=0;r<e;r++)for(var l=0;l<t;l++){var d=r*t*4+4*l;h[s++]=i[d],h[s++]=i[d+1],h[s++]=i[d+2]}},M=function(){r.writeByte(33),r.writeByte(249),r.writeByte(4);var t,e;null==g?(t=0,e=0):(t=1,e=2),y>=0&&(e=7&y),e<<=2,r.writeByte(0|e|0|t),_(p),r.writeByte(s),r.writeByte(0)},S=function(){r.writeByte(44),_(0),_(0),_(n),_(o),A?r.writeByte(0):r.writeByte(128|w)},F=function(){_(n),_(o),r.writeByte(240|w),r.writeByte(0),r.writeByte(0)},T=function(){r.writeByte(33),r.writeByte(255),r.writeByte(11),r.writeUTFBytes("NETSCAPE2.0"),r.writeByte(3),r.writeByte(1),_(f),r.writeByte(0)},P=function(){r.writeBytes(c);for(var t=768-c.length,e=0;e<t;e++)r.writeByte(0)},_=function(t){r.writeByte(255&t),r.writeByte(t>>8&255)},D=function(){var t=new LZWEncoder(n,o,l,d);t.encode(r)};u.stream=function(){return r},u.setProperties=function(t,e){m=t,A=e};return u},EditorChangesHistory.prototype={clear:function(){this.history=[],this.undone=[],this.storeList=this.history},register:function(t){t.layerSnapshot&&(t.snapshot=t.layerSnapshot.ctx.getImageData(0,0,t.layerSnapshot.canvas.width,t.layerSnapshot.canvas.height)),this.storeList.push(t),this.undoing||this.redoing||(this.undone=[]),this.onChange&&this.onChange()},undo:function(){if(0!=this.history.length){this.undoing=!0;var t=this.history.pop();this.storeList=this.undone,t.undo(t),this.storeList=this.history,this.onChange&&this.onChange(),this.undoing=!1}},redo:function(){if(0!=this.undone.length){this.redoing=!0;var t=this.undone.pop();t.undo(t),this.onChange&&this.onChange(),this.redoing=!1}}},TextureView.prototype={mergeLayers:!0,onChange:eventListener,paintSkin:function(){var t=this;if(this.canvas.width=this.texture.width,this.canvas.height=this.texture.height,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.mergeLayers)this.layers.forEachActiveLayer(function(e){var i=e.canvas;t.ctx.drawImage(i,0,0,i.width,i.height)});else{var e=this.layers.working(),i=e.canvas;i&&(this.ctx.drawImage(i,0,0,i.width,i.height),this.ctx.drawImage(e.disposable.canvas,0,0,e.disposable.canvas.width,e.disposable.canvas.height))}this.onChange({textureupdated:!0})},updateTexturePreview:function(){this.paintSkin(),this.drawTextureAreas()},setTexture:function(t){this.texture=t,this.texture.image=this.canvas},setTextureAreas:function(t){this.textureAreas=t,this.textureatlas=null},setTextureAtlas:function(t){this.textureatlas=t,this.textureAreas=null},drawTextureAreas:function(t,e,i){this.map.ctx.clearRect(0,0,this.map.canvas.width,this.map.canvas.height),t=t||0,e=e||0,i=i||1,this.map.canvas.width=256,this.map.canvas.height=this.texture.height*(this.map.canvas.width/this.texture.width),this.map.ctx.imageSmoothingEnabled=!1;var n=0;if(this.textureAreas){var o=this.map.canvas.width/this.textureAreas.textureWidth()*i;this.map.ctx.save(),this.map.ctx.translate(.5-t,.5-e),this.map.ctx.scale(o,o),this.map.ctx.lineWidth=1/o,this.textureAreas.boxList.forEach(function(t){for(var e=t.cubeList,i=0;i<e.length;i++){var s=e[i];s.texture.hidden||(this.map.ctx.beginPath(),this.map.ctx.clearRect(s.texture.x+s.size.z,s.texture.y,2*s.size.x,s.size.z),this.map.ctx.clearRect(s.texture.x,s.texture.y+s.size.z,2*s.size.x+2*s.size.z,s.size.y),this.map.ctx.rect(s.texture.x+s.size.z,s.texture.y,s.size.x,s.size.z),this.map.ctx.rect(s.texture.x+s.size.z+s.size.x,s.texture.y,s.size.x,s.size.z),this.map.ctx.rect(s.texture.x,s.texture.y+s.size.z,s.size.z,s.size.y-1/o),this.map.ctx.rect(s.texture.x+s.size.z,s.texture.y+s.size.z,s.size.x,s.size.y-1/o),this.map.ctx.rect(s.texture.x+s.size.z+s.size.x,s.texture.y+s.size.z,s.size.z,s.size.y-1/o),this.map.ctx.rect(s.texture.x+2*s.size.z+s.size.x,s.texture.y+s.size.z,s.size.x,s.size.y-1/o),this.map.ctx.strokeStyle=["orange","lime","yellow","cyan","navy","purple","maroon","silver"][n++%8],this.map.ctx.stroke())}},this),this.map.ctx.restore()}if(this.textureatlas){var o=this.map.canvas.width*i/this.canvas.width,s=9;this.map.ctx.save(),this.map.ctx.textBaseline="top",this.map.ctx.font=s+"px Arial",this.map.ctx.beginPath();for(var r in this.textureatlas.map){var a=file_name(r,!0),h=this.textureatlas.map[r],l=this.map.ctx.measureText(a);this.map.ctx.moveTo(h.x*o+h.field_94233_j*o,h.y*o),this.map.ctx.lineTo(h.x*o+h.field_94233_j*o,h.y*o+h.field_94234_k*o),this.map.ctx.lineTo(h.x*o,h.y*o+h.field_94234_k*o),this.map.ctx.fillStyle="white",this.map.ctx.fillRect(h.x*o,h.y*o,l.width,s),this.map.ctx.fillStyle="black",this.map.ctx.fillText(a,h.x*o,h.y*o)}this.map.ctx.strokeStyle="navy",this.map.ctx.stroke(),this.map.ctx.restore()}this.map.ctx.save();var o=this.map.canvas.width/this.canvas.width*i;this.map.ctx.translate(.5-t,.5-e),this.map.ctx.scale(o,o),this.map.ctx.globalCompositeOperation="destination-over",this.map.ctx.imageSmoothingEnabled=!1,this.map.ctx.drawImage(this.canvas,0,0),this.map.ctx.restore()},previewLayer:function(t){this.canvas.width=this.texture.width,this.canvas.height=this.texture.height,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var e=t.canvas;this.ctx.drawImage(e,0,0,e.width,e.height),this.onChange({layerPreview:t})},areaAt:function(t,e){if(this.textureAreas){var i,n=this.canvas.width/this.textureAreas.textureWidth();return t/=n,e/=n,this.textureAreas.boxList.some(function(o){for(var s=o.cubeList,r=0;r<s.length;r++){var a=s[r],h=[[a.texture.x,a.texture.y+a.size.z],[a.texture.x+a.size.z,a.texture.y+a.size.z],[a.texture.x+a.size.z,a.texture.y],[a.texture.x+a.size.z+2*a.size.x,a.texture.y],[a.texture.x+a.size.z+2*a.size.x,a.texture.y+a.size.z],[a.texture.x+2*a.size.z+2*a.size.x,a.texture.y+a.size.z],[a.texture.x+2*a.size.z+2*a.size.x,a.texture.y+a.size.z+a.size.y],[a.texture.x,a.texture.y+a.size.z+a.size.y]];if(isPointInPoly(h,{x:t,y:e}))return i=h.map(function(t){return[t[0]*n,t[1]*n]}),!0}},this)&&i}}},TextureLayers.prototype={onChange:eventListener,add:function(t){var e=this,i=t&&t.image,n=t&&t.width||i&&i.width||this.disposable.canvas&&this.disposable.canvas.width||1,o=t&&t.height||i&&i.height||this.disposable.canvas&&this.disposable.canvas.height||1,s=t&&(t.filename||t.title)||"";if(i&&this.disposable.canvas&&i.width>n){var r=nearestPow2(i.width),a=r*o/n;confirm("The texture is bigger than the actual resolution. Change texture size to "+r+"?")&&(n=r,o=a,this.resize(n,o))}else this.onChange({resized:{width:n,height:o}});var h=$(this.container.data("template")({width:n,height:o,name:s,id:"layer_checkbox_"+Math.random().toString().substring(2)})),l=h.find("canvas"),d=l.get(0).getContext("2d");d.imageSmoothingEnabled=!1,i&&d.drawImage(i,0,0,n,o);var c=d.getImageData(0,0,n,o);h.find(".close").click(function(){e.remove(h),e.updateLayerList(),event.preventDefault()}),h.find(".clone-layer").click(function(t){e.clone(h),t.preventDefault()}),h.find("input[type=checkbox]").change(function(t){$(this).parents(".layer").toggleClass("disabled",!$(this).is(":checked")),e.onChange({checked:h})}),this.disposable.canvas||this.createDisposable(n,o);var u=this.disposable;h.data({canvas:l.get(0),ctx:d,imageData:c,name:t&&t.filename,disposable:u}),h.attr("title",t&&t.title||s),this.container.prepend(h),this.onChange({addLayer:h,layers:this.layers}),this.updateLayerList(),this.setLayer(h)},setLayer:function(t){t.canvas&&(t=$(t.canvas).parents(".layer:first")),!$(t).is(this.currentLayer)&&$(t).parent().is(this.container)&&(this.container.find(".layer.active").removeClass("active"),t&&$(t).addClass("active"),this.currentLayer=$(t),this.onChange({activeLayer:t}))},clone:function(){this.add({image:this.working().canvas,title:"copy"})},working:function(){return this.currentLayer.data()},combineWorkingLayer:function(){var t=this.working();t.modified&&(this.onChange({layerModified:t}),t.ctx.drawImage(this.disposable.canvas,0,0),t.imageData=t.ctx.getImageData(0,0,t.canvas.width,t.canvas.height),t.modified=!1,this.clearDisposable())},clearWorkingLayer:function(){this.disposable.dirty&&this.clearDisposable()},remove:function(t,e){this.onChange({removeLayer:t}),$(t).addClass("hidden"),this.updateLayerList(),this.layers.length>0?this.setLayer(this.layers[this.layers.length-1]):e?this.currentLayer=null:this.add()},updateLayerList:function(){this.layers=this.container.children(".layer:not(.hidden)").toArray()},clear:function(){$(this.layers).remove(),this.disposable={},this.onChange({clear:!0})},resize:function(t,e){var i=this;i.onChange({width:i.disposable.canvas.width,height:i.disposable.canvas.height,layersBeforeResize:this.layers.map(function(t){var e=$(t).data();return{canvas:e.canvas,ctx:e.ctx,imageData:e.imageData,layer:t}})}),this.layers.forEach(function(i){var n=$(i).data(),o=ImageUtils.nearestNeighborImageResize(n.canvas,t/n.canvas.width);$(n.canvas).replaceWith(o),n.canvas=o,n.ctx=o.getContext("2d"),n.imageData=n.ctx.getImageData(0,0,t,e)}),this.createDisposable(t,e),this.onChange({resized:{width:t,height:e}})},forEachActiveLayer:function(t){for(var e=this.layers.length-1;e>=0;e--){var i=$(this.layers[e]);!i.hasClass("disabled")&&i.parent().presence()&&t(i.data())}this.disposable.canvas&&t(this.disposable)},createDisposable:function(t,e){this.disposable.canvas=document.createElement("canvas"),this.disposable.canvas.width=t,this.disposable.canvas.height=e,this.disposable.ctx=this.disposable.canvas.getContext("2d"),this.clearDisposable()},clearDisposable:function(){this.disposable.ctx.clearRect(0,0,this.disposable.canvas.width,this.disposable.canvas.height),this.disposable.imageData=this.disposable.ctx.getImageData(0,0,this.disposable.canvas.width,this.disposable.canvas.height),this.disposable.dirty=!1},clip:function(t){if(t){var e=this.working().ctx;e.save(),e.beginPath(),e.moveTo(t[0][0],t[0][1]),t.forEach(function(t){e.lineTo(t[0],t[1])}),e.closePath(),e.clip(),e.isClipped=!0}},unclip:function(){var t=this.currentLayer.data().ctx;t.isClipped&&(t.isClipped=!1,t.restore())}};var KneeBend=MOD3.KneeBend=MOD3.Class(MOD3.Bend,{constructor:function(t,e,i,n){this.$super("constructor",t,e,n),this.len=i||0},_apply:function(){if(!this.force||!this.len)return this;for(var t,e,i,n,o,s,r,a,h,l,d=this.mod.vertices,c=d.length,u=this.constraint,g=this.width,f=this.offset,p=Math.min(this.len,1-f),m=this.origin,v=this.force,w=this.max,y=this.min,R=this.mid,A=this.m1,b=this.m2,x=m+g*f,L=p*g/MOD3.Constants.PI/v,C=MOD3.Constants.doublePI*(g/(L*MOD3.Constants.doublePI)),k=1/g;--c>=0;){if(t=d[c],e=t.getValue(w),i=t.getValue(R),n=t.getValue(y),o=A.transformPointSelf(new MOD3.Point(e,i)),e=o.x,i=o.y,s=(e-m)*k,MOD3.ModConstant.LEFT===u&&s<=f||MOD3.ModConstant.RIGHT===u&&s>=f);else if(MOD3.ModConstant.LEFT===u&&s>f+p||MOD3.ModConstant.RIGHT===u&&s<f-p){var E=f-p-s;s=Math.min(Math.max(s,f-p,0),f+p,1),r=MOD3.Constants.halfPI-C*f+C*s,a=Math.sin(r)*(L+n),h=Math.cos(r)*(L+n);var B=Math.sin(r)*E*g,M=Math.cos(r)*E*g;n=a-L-M,e=x-h-B}else r=MOD3.Constants.halfPI-C*f+C*s,a=Math.sin(r)*(L+n),h=Math.cos(r)*(L+n),n=a-L,e=x-h;l=b.transformPointSelf(new MOD3.Point(e,i)),e=l.x,i=l.y,t.setValue(w,e),t.setValue(R,i),t.setValue(y,n)}return this}});ResourceGallery.prototype={search:function(t){var e=this;t.keep||this.clear(),this.container.is(":visible")?e.performQuery(t):$("#show-gallery").off("click").one("click",function(){e.performQuery(t)})},performQuery:function(t){var e=this,i=t.model,n=t.query||"",o=t.next||!1,s=t.keep||!1,r=t.url||"/search/"+(i?'model:"'+i+'"+':"")+n;e.container.find(".search-results").spin(),$.getJSON("https://minecraft.novaskin.me"+r+"?json=true&callback=?"+(o?"&next="+o:""),function(t){e.container.find(".search-results").spin(!1),e.show(i,n,t,s)})},clear:function(){this.container.find(".search-results .gallery-post").remove()},show:function(t,e,i){this.applyTemplate(this.container.find(".search-results"),{skins:i.skins},!0),this.applyTemplate(this.container.find(".search-pagination"),{pagination:{model:t,query:e,next:i.pagination&&i.pagination.next}}),i.skins.forEach(function(t){this.skin[t.id]=t},this),this.container.find(".search-results [data-toggle=tooltip]").tooltip()},applyTemplate:function(t,e,i){$(t).each(function(){var t=$(this).data("template");t&&$(this).html((i?$(this).html():"")+t(e))})},explore:function(t,e,i){function n(e,n,o){var s=e.filename.match(/(\w+)\.\w+$/i),r=s&&s[1]||"";gallery.addItem({url:e.filename,imageurl:e.imageurl,screenshotCanvas:$(n).attr("title",r),caption:r,model:t.name,pack:o.pack,map:i},o.container)}function o(t,e,i,n,o,s){var r=$("<ul>").addClass("gallery-list").appendTo($("#gallery"));$("<a>").addClass("texturepack").addClass(s).attr("href","/texturepacks?texturepack="+e).attr("data-resolution",""+i).append($("<image>").attr("src",n)).append($("<span>").text(e).data("folder",o)).appendTo(r);r.append($("<br/>")),h(e,t,r)}function s(t,e,i){function n(n){var s=[];fileSystem.list(i,function(t,e){var i=t.toURL();e.size&&d.test(i.replace(/\/[^\/]+\//,""))&&s.push({filename:i,imageurl:window.URL.createObjectURL(e),fullPath:t.fullPath})},function(){s.length>0&&o(s,t,e,n,i)})}function s(){n("/texturepack/pack.png")}i.getFile("pack.png",{create:!0,exclusive:!1},function(t){t.file(function(t){n(t.size?window.URL.createObjectURL(t):"/texturepack/pack.png")})},s)}function r(t,e){var i,n=[],s=0;listDropboxFolder(t,function(r){d.test(r.path)&&(s++,dropbox.readFile(r.path,{blob:!0},function(a,h,l){if(a)return console.error(a);var d=URL.createObjectURL(h);n.push({filename:"dropbox:"+r.path,imageurl:d,fullPath:r.path}),s--,i&&0==s&&o(n,t,16,e,null,"dropbox")}))},function(){n.length>0&&0==s?o(n,t,16,e,null,"dropbox"):i=!0})}function a(t){javabridge(function(i){i.setTexturepackName(t);try{var n=JSON.parse(i.getTexturePackSkins()),s=[];for(e in n)if(d.test(e)){var r=e.replace(new RegExp("^.*"+t+"/"),"");s.push({filename:"minecraft:"+e,imageurl:n[e],fullPath:r})}s.length>0&&o(s,t,16,n["pack.png"],null,"fromMinecraft")}catch(a){finishjavabridge()}})}function h(e,o,s){gallery.items[gallery.tab="@texturepack"]||[];gallery.renderlist.render({model:t,map:i,textureList:o,args:{pack:e,container:s},onRender:n})}if(i)return gallery.exploreBlocks(i);var l=(e||t.textureList.join("|")).replace(/\.png/g,""),d=new RegExp("("+l+")\\d*\\.png");gallery.clear(),$("#gallery").addClass("model-"+t.name).data("model",t.name),$("#edit-default").attr("href","/editor?model="+t.name),t.textureList.forEach(function(e){d.test(e)&&gallery.renderlist.render({model:t,map:i,textureList:[{filename:"/textures/"+e,imageurl:"/resources/default/assets/minecraft/textures/"+e}],args:{pack:"default",container:$("#default-skins")},onRender:n})}),$("#show-more-texturepack-previews").hide(),$(this).hide().unbind("click"),fileSystem.init(function(){loadPacks(s)}),listDropboxTexturepacks(r),minecrafttexturepacks.forEach(a)},exploreBlocks:function(t){function e(e,i,n){gallery.addItem({url:n.basepath,imageurl:n.basepath,screenshotCanvas:$(i).attr("title",n.basepath),caption:n.caption||"Block",model:"Block",pack:n.pack,map:t,texturepack:n.texturepack},n.container)}function i(t,e,i,n){var o=$("<ul>").addClass("gallery-list").appendTo($("#gallery"));$("<a>").addClass("texturepack").addClass(n).attr("href","/texturepacks?texturepack="+t).append($("<image>").attr("src",e)).append($("<span>").text(t).data("folder",i)).appendTo(o);return o.append($("<br/>")),o}function n(n,o,r){function a(o){fileSystem.list(r,function(t,e){var i=t.toURL(),n=i.replace(d,"");i.indexOf(d)!=-1&&e.size&&s[n]&&(c[n]=i,u=!0)},function(){if(u){for(var a in s)c[a]||(c[a]=s[a]);loadImages(c,function(s){gallery.renderlist.render({map:t,textures:s,args:{pack:n,basepath:l,container:i(n,o,r)},onRender:e})})}})}function h(){a("/texturepack/pack.png")}var l=r.toURL()+"/",d=l+"blocks/",c={},u=!1;r.getFile("pack.png",{create:!0,exclusive:!1},function(t){t.file(function(t){a(t.size?window.URL.createObjectURL(t):"/texturepack/pack.png")})},h)}function o(n,o){function r(i){gallery.renderlist.render({map:t,textures:i,args:{pack:n,basepath:d,container:g},onRender:e}),gallery.blockTextureCache[n]=i,g.spin(!1)}function a(){if(u){for(var t in s)c[t]||(c[t]=s[t]);loadImages(c,r)}g.spin(!1)}var h=0,l=!1,d="dropbox:"+n+"/",c={},u=!1,g=i(n,o,null,"dropbox");g.spin({left:"24px",lines:10,length:8,width:4,radius:8,color:"white",shadow:!0}),gallery.blockTextureCache[n]?r(gallery.blockTextureCache[n]):listDropboxFolder(n+"/blocks/",function(t){s[t.name]&&/blocks/.test(t.path)&&(h++,dropbox.readFile(t.path,{blob:!0},function(e,i,n){return e?console.error(e):(c[t.name]=URL.createObjectURL(i),u=!0,h--,void(l&&0==h&&a()))}))},function(){0==h?a():l=!0})}gallery.clear(),$("#gallery").addClass("model-Block").data("model","Block"),$("#edit-default").attr("href","/editor?model=Block&skin=/texturepack/#!map="+schematicAsText(t));var s={};for(var r in getRequiredTextures(t))r+=".png",s[r]=blockstextureslist[r];loadImages(s,function(i){gallery.renderlist.render({map:t,textures:i,args:{pack:"default",basepath:"/texturepack/",container:$("#default-skins")},onRender:e})}),$("#show-more-texturepack-previews").unbind("click").click(function(){$(this).hide().unbind("click"),fileSystem.init(function(){loadPacks(n)}),listDropboxTexturepacks(o)}).show()}},GifRecorder.prototype={clear:function(){this.frames=[],this.onReset&&this.onReset()},start:function(){var t=this.modelview.screenArea();t.expandByVector({x:20,y:20}),this.x=0|t.min.x,this.y=0|t.min.y,this.width=0|t.size().x,this.height=0|t.size().y;var e=this.width/this.height;this.targetHeight=Math.min(this.maxsize,this.height),this.targetWidth=Math.round(this.targetHeight*e)},record:function(){0==this.frames.length&&this.start();var t=document.createElement("canvas");t.width=this.targetWidth,t.height=this.targetHeight,this.modelview.updateGrid({}),this.modelview.draw(),t.getContext("2d").drawImage(this.modelview.canvas,this.x,this.y,this.width,this.height,0,0,this.targetWidth,this.targetHeight),this.frames.push({canvas:t}),this.onRecord&&this.onRecord(t)},encode:function(t){var e=new Worker("/webworkers/encode-gif.js"),i=this.frames.map(function(t){var e=t.canvas.getContext("2d").getImageData(0,0,this.targetWidth,this.targetHeight);return Array.prototype.slice.call(e.data)},this);e.postMessage({targetWidth:this.targetWidth,targetHeight:this.targetHeight,delay:this.delay||30,images:i}),e.addEventListener("message",function(e){t(e.data)},!1)},setModelView:function(t){this.modelview=t}};var setRotation=function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n};with(MathHelper.func_76126_a=Math.sin,MathHelper.func_76134_b=Math.cos,ModelMoCAnt.prototype=$.extend({},ModelBase.prototype,{ModelMoCAnt:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,11),this.Head.addBox(-.5,0,0,1,1,1),this.Head.setRotationPoint(0,21.9,-1.3),setRotation(this.Head,-2.171231,0,0),this.Mouth=this.model.Mouth=new ModelRenderer(this,8,10),this.Mouth.addBox(0,0,0,2,1,0),this.Mouth.setRotationPoint(-1,22.299999,-1.9),setRotation(this.Mouth,-.8286699,0,0),this.RightAntenna=this.model.RightAntenna=new ModelRenderer(this,0,6),this.RightAntenna.addBox(-.5,0,-1,1,0,1),this.RightAntenna.setRotationPoint(-.5,21.700001,-2.3),setRotation(this.RightAntenna,-1.041001,.7853982,0),this.LeftAntenna=this.model.LeftAntenna=new ModelRenderer(this,4,6),this.LeftAntenna.addBox(-.5,0,-1,1,0,1),this.LeftAntenna.setRotationPoint(.5,21.700001,-2.3),setRotation(this.LeftAntenna,-1.041001,-.7853982,0),this.Thorax=this.model.Thorax=new ModelRenderer(this,0,0),this.Thorax.addBox(-.5,1.5,-1,1,1,2),this.Thorax.setRotationPoint(0,20,-.5),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,8,1),this.Abdomen.addBox(-.5,-.2,-1,1,2,1),this.Abdomen.setRotationPoint(0,21.5,.3),setRotation(this.Abdomen,1.706911,0,0),this.MidLegs=this.model.MidLegs=new ModelRenderer(this,4,8),this.MidLegs.addBox(-1,0,0,2,3,0),this.MidLegs.setRotationPoint(0,22,-.7),setRotation(this.MidLegs,.5948578,0,0),this.FrontLegs=this.model.FrontLegs=new ModelRenderer(this,0,8),this.FrontLegs.addBox(-1,0,0,2,3,0),this.FrontLegs.setRotationPoint(0,22,-.8),setRotation(this.FrontLegs,-.6192304,0,0),this.RearLegs=this.model.RearLegs=new ModelRenderer(this,0,8),this.RearLegs.addBox(-1,0,0,2,3,0),this.RearLegs.setRotationPoint(0,22,0),setRotation(this.RearLegs,.913664,0,0)},func_78088_a:function(t,e,i,n,o,s,r){ModelMoCAnt.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Head.render(r),this.Mouth.render(r),this.RightAntenna.render(r),this.LeftAntenna.render(r),this.Thorax.render(r),this.Abdomen.render(r),this.MidLegs.render(r),this.FrontLegs.render(r),this.RearLegs.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){var r=MathHelper.func_76134_b(t+3.141593)*e,a=MathHelper.func_76134_b(t)*e;this.FrontLegs.rotateAngleX=-.6192304+r,this.MidLegs.rotateAngleX=.5948578+a,this.RearLegs.rotateAngleX=.913664+r}}),ModelMoCBear.prototype=$.extend({},ModelBase.prototype,{bearState:0,details:{bearState:{name:"Bear state",type:"select",options:{"Position A":0,"Position B":1,"Position C":2},persistent:!0}},ModelMoCBear:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=128,this.buildModel()},buildModel:function(){this.model={},this.Head=this.model.Head=new ModelRenderer(this,19,0),this.Head.addBox(-4,0,-4,8,8,5),this.Head.setRotationPoint(0,6,-10),setRotation(this.Head,.1502636,0,0),this.Mouth=this.model.Mouth=new ModelRenderer(this,24,21),this.Mouth.addBox(-1.5,6,-6.8,3,2,5),this.Mouth.setRotationPoint(0,6,-10),setRotation(this.Mouth,-.0068161,0,0),this.MouthOpen=this.model.MouthOpen=new ModelRenderer(this,24,21),this.MouthOpen.addBox(-1.5,4,-9.5,3,2,5),this.MouthOpen.setRotationPoint(0,6,-10),setRotation(this.MouthOpen,.534236,0,0),this.LEar=this.model.LEar=new ModelRenderer(this,40,0),this.LEar.addBox(2,-2,-2,3,3,1),this.LEar.setRotationPoint(0,6,-10),setRotation(this.LEar,.1502636,-.349066,.1396263),this.REar=this.model.REar=new ModelRenderer(this,16,0),this.REar.addBox(-5,-2,-2,3,3,1),this.REar.setRotationPoint(0,6,-10),setRotation(this.REar,.1502636,.349066,-.1396263),this.Snout=this.model.Snout=new ModelRenderer(this,23,13),this.Snout.addBox(-2,3,-8,4,3,5),this.Snout.setRotationPoint(0,6,-10),setRotation(this.Snout,.1502636,0,0),this.Neck=this.model.Neck=new ModelRenderer(this,18,28),this.Neck.addBox(-3.5,0,-7,7,7,7),this.Neck.setRotationPoint(0,5,-5),setRotation(this.Neck,.261799,0,0),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,13,62),this.Abdomen.addBox(-4.5,0,0,9,11,10),this.Abdomen.setRotationPoint(0,5,5),setRotation(this.Abdomen,-.4363323,0,0),this.Torso=this.model.Torso=new ModelRenderer(this,12,42),this.Torso.addBox(-5,0,0,10,10,10),this.Torso.setRotationPoint(0,5,-5),this.Tail=this.model.Tail=new ModelRenderer(this,26,83),this.Tail.addBox(-1.5,0,0,3,3,3),this.Tail.setRotationPoint(0,8.466666,12),setRotation(this.Tail,.4363323,0,0),this.LegFL1=this.model.LegFL1=new ModelRenderer(this,40,22),this.LegFL1.addBox(-2.5,0,-2.5,5,8,5),this.LegFL1.setRotationPoint(4,10,-4),setRotation(this.LegFL1,.261799,0,0),this.LegFL2=this.model.LegFL2=new ModelRenderer(this,46,35),this.LegFL2.addBox(-2,7,0,4,6,4),this.LegFL2.setRotationPoint(4,10,-4),this.LegFL3=this.model.LegFL3=new ModelRenderer(this,46,45),
this.LegFL3.addBox(-2,12,-1,4,2,5),this.LegFL3.setRotationPoint(4,10,-4),this.LegFR1=this.model.LegFR1=new ModelRenderer(this,4,22),this.LegFR1.addBox(-2.5,0,-2.5,5,8,5),this.LegFR1.setRotationPoint(-4,10,-4),setRotation(this.LegFR1,.261799,0,0),this.LegFR2=this.model.LegFR2=new ModelRenderer(this,2,35),this.LegFR2.addBox(-2,7,0,4,6,4),this.LegFR2.setRotationPoint(-4,10,-4),this.LegFR3=this.model.LegFR3=new ModelRenderer(this,0,45),this.LegFR3.addBox(-2,12,-1,4,2,5),this.LegFR3.setRotationPoint(-4,10,-4),this.LegRL1=this.model.LegRL1=new ModelRenderer(this,34,83),this.LegRL1.addBox(-1.5,0,-2.5,4,8,6),this.LegRL1.setRotationPoint(3.5,11,9),setRotation(this.LegRL1,-.1745329,0,0),this.LegRL2=this.model.LegRL2=new ModelRenderer(this,41,97),this.LegRL2.addBox(-2,6,-1,4,6,4),this.LegRL2.setRotationPoint(3.5,11,9),this.LegRL3=this.model.LegRL3=new ModelRenderer(this,44,107),this.LegRL3.addBox(-2,11,-2,4,2,5),this.LegRL3.setRotationPoint(3.5,11,9),this.LegRR1=this.model.LegRR1=new ModelRenderer(this,10,83),this.LegRR1.addBox(-2.5,0,-2.5,4,8,6),this.LegRR1.setRotationPoint(-3.5,11,9),setRotation(this.LegRR1,-.1745329,0,0),this.LegRR2=this.model.LegRR2=new ModelRenderer(this,7,97),this.LegRR2.addBox(-2,6,-1,4,6,4),this.LegRR2.setRotationPoint(-3.5,11,9),this.LegRR3=this.model.LegRR3=new ModelRenderer(this,2,107),this.LegRR3.addBox(-2,11,-2,4,2,5),this.LegRR3.setRotationPoint(-3.5,11,9),this.BHead=this.model.BHead=new ModelRenderer(this,19,0),this.model.BHead.showModel=!1,this.BHead.addBox(-4,0,-4,8,8,5),this.BHead.setRotationPoint(0,-12,5),setRotation(this.BHead,-.024269,0,0),this.BSnout=this.model.BSnout=new ModelRenderer(this,23,13),this.model.BSnout.showModel=!1,this.BSnout.addBox(-2,2.5,-8.5,4,3,5),this.BSnout.setRotationPoint(0,-12,5),setRotation(this.BSnout,-.024269,0,0),this.BMouth=this.model.BMouth=new ModelRenderer(this,24,21),this.model.BMouth.showModel=!1,this.BMouth.addBox(-1.5,5.5,-8,3,2,5),this.BMouth.setRotationPoint(0,-12,5),setRotation(this.BMouth,-.08726,0,0),this.BMouthOpen=this.model.BMouthOpen=new ModelRenderer(this,24,21),this.model.BMouthOpen.showModel=!1,this.BMouthOpen.addBox(-1.5,3.5,-11,3,2,5),this.BMouthOpen.setRotationPoint(0,-12,5),setRotation(this.BMouthOpen,.5235988,0,0),this.BNeck=this.model.BNeck=new ModelRenderer(this,18,28),this.model.BNeck.showModel=!1,this.BNeck.addBox(-3.5,0,-7,7,6,7),this.BNeck.setRotationPoint(0,-3,11),setRotation(this.BNeck,-1.336881,0,0),this.BLEar=this.model.BLEar=new ModelRenderer(this,40,0),this.model.BLEar.showModel=!1,this.BLEar.addBox(2,-2,-2,3,3,1),this.BLEar.setRotationPoint(0,-12,5),setRotation(this.BLEar,-.024269,-.349066,.1396263),this.BREar=this.model.BREar=new ModelRenderer(this,16,0),this.model.BREar.showModel=!1,this.BREar.addBox(-5,-2,-2,3,3,1),this.BREar.setRotationPoint(0,-12,5),setRotation(this.BREar,-.024269,.349066,-.1396263),this.BTorso=this.model.BTorso=new ModelRenderer(this,12,42),this.model.BTorso.showModel=!1,this.BTorso.addBox(-5,0,0,10,10,10),this.BTorso.setRotationPoint(0,-3.5,12.3),setRotation(this.BTorso,-1.396263,0,0),this.BAbdomen=this.model.BAbdomen=new ModelRenderer(this,13,62),this.model.BAbdomen.showModel=!1,this.BAbdomen.addBox(-4.5,0,0,9,11,10),this.BAbdomen.setRotationPoint(0,6,14),setRotation(this.BAbdomen,-1.570796,0,0),this.BTail=this.model.BTail=new ModelRenderer(this,26,83),this.model.BTail.showModel=!1,this.BTail.addBox(-1.5,0,0,3,3,3),this.BTail.setRotationPoint(0,12.46667,12.6),setRotation(this.BTail,.361975,0,0),this.BLegFL1=this.model.BLegFL1=new ModelRenderer(this,40,22),this.model.BLegFL1.showModel=!1,this.BLegFL1.addBox(-2.5,0,-2.5,5,8,5),this.BLegFL1.setRotationPoint(5,-1,6),setRotation(this.BLegFL1,.261799,0,-.261799),this.BLegFL2=this.model.BLegFL2=new ModelRenderer(this,46,35),this.model.BLegFL2.showModel=!1,this.BLegFL2.addBox(0,5,3,4,6,4),this.BLegFL2.setRotationPoint(5,-1,6),setRotation(this.BLegFL2,-.5576792,0,0),this.BLegFL3=this.model.BLegFL3=new ModelRenderer(this,46,45),this.model.BLegFL3.showModel=!1,this.BLegFL3.addBox(.1,-7,-14,4,2,5),this.BLegFL3.setRotationPoint(5,-1,6),setRotation(this.BLegFL3,2.007645,0,0),this.BLegFR1=this.model.BLegFR1=new ModelRenderer(this,4,22),this.model.BLegFR1.showModel=!1,this.BLegFR1.addBox(-2.5,0,-2.5,5,8,5),this.BLegFR1.setRotationPoint(-5,-1,6),setRotation(this.BLegFR1,.261799,0,.261799),this.BLegFR2=this.model.BLegFR2=new ModelRenderer(this,2,35),this.model.BLegFR2.showModel=!1,this.BLegFR2.addBox(-4,5,3,4,6,4),this.BLegFR2.setRotationPoint(-5,-1,6),setRotation(this.BLegFR2,-.5576792,0,0),this.BLegFR3=this.model.BLegFR3=new ModelRenderer(this,0,45),this.model.BLegFR3.showModel=!1,this.BLegFR3.addBox(-4.1,-7,-14,4,2,5),this.BLegFR3.setRotationPoint(-5,-1,6),setRotation(this.BLegFR3,2.007129,0,0),this.BLegRL1=this.model.BLegRL1=new ModelRenderer(this,34,83),this.model.BLegRL1.showModel=!1,this.BLegRL1.addBox(-1.5,0,-2.5,4,8,6),this.BLegRL1.setRotationPoint(3,11,9),setRotation(this.BLegRL1,-.5235988,-.261799,0),this.BLegRL2=this.model.BLegRL2=new ModelRenderer(this,41,97),this.model.BLegRL2.showModel=!1,this.BLegRL2.addBox(-1.3,6,-3,4,6,4),this.BLegRL2.setRotationPoint(3,11,9),setRotation(this.BLegRL2,0,-.261799,0),this.BLegRL3=this.model.BLegRL3=new ModelRenderer(this,44,107),this.model.BLegRL3.showModel=!1,this.BLegRL3.addBox(-1.2,11,-4,4,2,5),this.BLegRL3.setRotationPoint(3,11,9),setRotation(this.BLegRL3,0,-.261799,0),this.BLegRR1=this.model.BLegRR1=new ModelRenderer(this,10,83),this.model.BLegRR1.showModel=!1,this.BLegRR1.addBox(-2.5,0,-2.5,4,8,6),this.BLegRR1.setRotationPoint(-3,11,9),setRotation(this.BLegRR1,-.1745329,.261799,0),this.BLegRR2=this.model.BLegRR2=new ModelRenderer(this,7,97),this.model.BLegRR2.showModel=!1,this.BLegRR2.addBox(-2.4,6,-1,4,6,4),this.BLegRR2.setRotationPoint(-3,11,9),setRotation(this.BLegRR2,0,.261799,0),this.BLegRR3=this.model.BLegRR3=new ModelRenderer(this,2,107),this.model.BLegRR3.showModel=!1,this.BLegRR3.addBox(-2.5,11,-2,4,2,5),this.BLegRR3.setRotationPoint(-3,11,9),setRotation(this.BLegRR3,0,.261799,0),this.CHead=this.model.CHead=new ModelRenderer(this,19,0),this.model.CHead.showModel=!1,this.CHead.addBox(-4,0,-4,8,8,5),this.CHead.setRotationPoint(0,3,-3.5),setRotation(this.CHead,.1502636,0,0),this.CSnout=this.model.CSnout=new ModelRenderer(this,23,13),this.model.CSnout.showModel=!1,this.CSnout.addBox(-2,3,-8.5,4,3,5),this.CSnout.setRotationPoint(0,3,-3.5),setRotation(this.CSnout,.1502636,0,0),this.CMouth=this.model.CMouth=new ModelRenderer(this,24,21),this.model.CMouth.showModel=!1,this.CMouth.addBox(-1.5,6,-7,3,2,5),this.CMouth.setRotationPoint(0,3,-3.5),setRotation(this.CMouth,-.0068161,0,0),this.CMouthOpen=this.model.CMouthOpen=new ModelRenderer(this,24,21),this.model.CMouthOpen.showModel=!1,this.CMouthOpen.addBox(-1.5,5.5,-9,3,2,5),this.CMouthOpen.setRotationPoint(0,3,-3.5),setRotation(this.CMouthOpen,.3665191,0,0),this.CLEar=this.model.CLEar=new ModelRenderer(this,40,0),this.model.CLEar.showModel=!1,this.CLEar.addBox(2,-2,-2,3,3,1),this.CLEar.setRotationPoint(0,3,-3.5),setRotation(this.CLEar,.1502636,-.349066,.1396263),this.CREar=this.model.CREar=new ModelRenderer(this,16,0),this.model.CREar.showModel=!1,this.CREar.addBox(-5,-2,-2,3,3,1),this.CREar.setRotationPoint(0,3,-3.5),setRotation(this.CREar,.1502636,.349066,-.1396263),this.CNeck=this.model.CNeck=new ModelRenderer(this,18,28),this.model.CNeck.showModel=!1,this.CNeck.addBox(-3.5,0,-7,7,7,7),this.CNeck.setRotationPoint(0,5.8,3.4),setRotation(this.CNeck,-.3316126,0,0),this.CTorso=this.model.CTorso=new ModelRenderer(this,12,42),this.model.CTorso.showModel=!1,this.CTorso.addBox(-5,0,0,10,10,10),this.CTorso.setRotationPoint(0,5.8,3.4),setRotation(this.CTorso,-.9712912,0,0),this.CAbdomen=this.model.CAbdomen=new ModelRenderer(this,13,62),this.model.CAbdomen.showModel=!1,this.CAbdomen.addBox(-4.5,0,0,9,11,10),this.CAbdomen.setRotationPoint(0,14,9),setRotation(this.CAbdomen,-1.570796,0,0),this.CTail=this.model.CTail=new ModelRenderer(this,26,83),this.model.CTail.showModel=!1,this.CTail.addBox(-1.5,0,0,3,3,3),this.CTail.setRotationPoint(0,21.466669,8),setRotation(this.CTail,.4363323,0,0),this.CLegFL1=this.model.CLegFL1=new ModelRenderer(this,40,22),this.model.CLegFL1.showModel=!1,this.CLegFL1.addBox(-2.5,0,-1.5,5,8,5),this.CLegFL1.setRotationPoint(4,10,0),setRotation(this.CLegFL1,-.261799,0,0),this.CLegFL2=this.model.CLegFL2=new ModelRenderer(this,46,35),this.model.CLegFL2.showModel=!1,this.CLegFL2.addBox(-2,0,-1.2,4,6,4),this.CLegFL2.setRotationPoint(4,17,-2),setRotation(this.CLegFL2,-.349066,0,.261799),this.CLegFL3=this.model.CLegFL3=new ModelRenderer(this,46,45),this.model.CLegFL3.showModel=!1,this.CLegFL3.addBox(-2,0,-3,4,2,5),this.CLegFL3.setRotationPoint(2.5,22,-4),setRotation(this.CLegFL3,0,.1745329,0),this.CLegFR1=this.model.CLegFR1=new ModelRenderer(this,4,22),this.model.CLegFR1.showModel=!1,this.CLegFR1.addBox(-2.5,0,-1.5,5,8,5),this.CLegFR1.setRotationPoint(-4,10,0),setRotation(this.CLegFR1,-.261799,0,0),this.CLegFR2=this.model.CLegFR2=new ModelRenderer(this,2,35),this.model.CLegFR2.showModel=!1,this.CLegFR2.addBox(-2,0,-1.2,4,6,4),this.CLegFR2.setRotationPoint(-4,17,-2),setRotation(this.CLegFR2,-.349066,0,-.261799),this.CLegFR3=this.model.CLegFR3=new ModelRenderer(this,0,45),this.model.CLegFR3.showModel=!1,this.CLegFR3.addBox(-2,0,-3,4,2,5),this.CLegFR3.setRotationPoint(-2.5,22,-4),setRotation(this.CLegFR3,0,-.1745329,0),this.CLegRL1=this.model.CLegRL1=new ModelRenderer(this,34,83),this.model.CLegRL1.showModel=!1,this.CLegRL1.addBox(-1.5,0,-2.5,4,8,6),this.CLegRL1.setRotationPoint(3,21,5),setRotation(this.CLegRL1,-1.396263,-.349066,.349066),this.CLegRL2=this.model.CLegRL2=new ModelRenderer(this,41,97),this.model.CLegRL2.showModel=!1,this.CLegRL2.addBox(-2,0,-2,4,6,4),this.CLegRL2.setRotationPoint(5.2,22.5,-1),setRotation(this.CLegRL2,-1.570796,0,.349066),this.CLegRL3=this.model.CLegRL3=new ModelRenderer(this,44,107),this.model.CLegRL3.showModel=!1,this.CLegRL3.addBox(-2,0,-3,4,2,5),this.CLegRL3.setRotationPoint(5.5,22,-6),setRotation(this.CLegRL3,-1.375609,0,.349066),this.CLegRR1=this.model.CLegRR1=new ModelRenderer(this,10,83),this.model.CLegRR1.showModel=!1,this.CLegRR1.addBox(-2.5,0,-2.5,4,8,6),this.CLegRR1.setRotationPoint(-3,21,5),setRotation(this.CLegRR1,-1.396263,.349066,-.349066),this.CLegRR2=this.model.CLegRR2=new ModelRenderer(this,7,97),this.model.CLegRR2.showModel=!1,this.CLegRR2.addBox(-2,0,-2,4,6,4),this.CLegRR2.setRotationPoint(-5.2,22.5,-1),setRotation(this.CLegRR2,-1.570796,0,-.349066),this.CLegRR3=this.model.CLegRR3=new ModelRenderer(this,2,107),this.model.CLegRR3.showModel=!1,this.CLegRR3.addBox(-2,0,-3,4,2,5),this.CLegRR3.setRotationPoint(-5.5,22,-6),setRotation(this.CLegRR3,-1.375609,0,-.349066),delete this.model.Mouth,delete this.model.BMouth,delete this.model.CMouth},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=this.state,l=0!=a.mouthCounter,d=a.getAttackSwing();setRotationAngles(e,i,n,o,s,r,h,d),0==h?(l?this.MouthOpen.render(r):this.Mouth.render(r),this.LegFR1.render(r),this.Neck.render(r),this.LEar.render(r),this.Snout.render(r),this.Head.render(r),this.REar.render(r),this.Abdomen.render(r),this.Torso.render(r),this.LegRR3.render(r),this.LegRR1.render(r),this.LegRR2.render(r),this.LegFR2.render(r),this.LegFR3.render(r),this.LegFL1.render(r),this.LegFL3.render(r),this.LegFL2.render(r),this.LegRL1.render(r),this.LegRL2.render(r),this.LegRL3.render(r),this.Tail.render(r)):1==h?(this.BHead.render(r),this.BSnout.render(r),l?this.BMouthOpen.render(r):this.BMouth.render(r),this.BNeck.render(r),this.BLEar.render(r),this.BREar.render(r),this.BTorso.render(r),this.BAbdomen.render(r),this.BTail.render(r),this.BLegFL1.render(r),this.BLegFL2.render(r),this.BLegFL3.render(r),this.BLegFR1.render(r),this.BLegFR2.render(r),this.BLegFR3.render(r),this.BLegRL1.render(r),this.BLegRL2.render(r),this.BLegRL3.render(r),this.BLegRR1.render(r),this.BLegRR2.render(r),this.BLegRR3.render(r)):(l?this.CMouthOpen.render(r):this.CMouth.render(r),this.CHead.render(r),this.CSnout.render(r),this.CLEar.render(r),this.CREar.render(r),this.CNeck.render(r),this.CTorso.render(r),this.CAbdomen.render(r),this.CTail.render(r),this.CLegFL1.render(r),this.CLegFL2.render(r),this.CLegFL3.render(r),this.CLegFR1.render(r),this.CLegFR2.render(r),this.CLegFR3.render(r),this.CLegRL1.render(r),this.CLegRL2.render(r),this.CLegRL3.render(r),this.CLegRR1.render(r),this.CLegRR2.render(r),this.CLegRR3.render(r))},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){this.bearState!=this.details.bearState.value&&(this.model.Head.showModel=0==this.bearState,this.model.MouthOpen.showModel=0==this.bearState,this.model.LEar.showModel=0==this.bearState,this.model.REar.showModel=0==this.bearState,this.model.Snout.showModel=0==this.bearState,this.model.Neck.showModel=0==this.bearState,this.model.Abdomen.showModel=0==this.bearState,this.model.Torso.showModel=0==this.bearState,this.model.Tail.showModel=0==this.bearState,this.model.LegFL1.showModel=0==this.bearState,this.model.LegFL2.showModel=0==this.bearState,this.model.LegFL3.showModel=0==this.bearState,this.model.LegFR1.showModel=0==this.bearState,this.model.LegFR2.showModel=0==this.bearState,this.model.LegFR3.showModel=0==this.bearState,this.model.LegRL1.showModel=0==this.bearState,this.model.LegRL2.showModel=0==this.bearState,this.model.LegRL3.showModel=0==this.bearState,this.model.LegRR1.showModel=0==this.bearState,this.model.LegRR2.showModel=0==this.bearState,this.model.LegRR3.showModel=0==this.bearState,this.model.BHead.showModel=1==this.bearState,this.model.BSnout.showModel=1==this.bearState,this.model.BMouthOpen.showModel=1==this.bearState,this.model.BNeck.showModel=1==this.bearState,this.model.BLEar.showModel=1==this.bearState,this.model.BREar.showModel=1==this.bearState,this.model.BTorso.showModel=1==this.bearState,this.model.BAbdomen.showModel=1==this.bearState,this.model.BTail.showModel=1==this.bearState,this.model.BLegFL1.showModel=1==this.bearState,this.model.BLegFL2.showModel=1==this.bearState,this.model.BLegFL3.showModel=1==this.bearState,this.model.BLegFR1.showModel=1==this.bearState,this.model.BLegFR2.showModel=1==this.bearState,this.model.BLegFR3.showModel=1==this.bearState,this.model.BLegRL1.showModel=1==this.bearState,this.model.BLegRL2.showModel=1==this.bearState,this.model.BLegRL3.showModel=1==this.bearState,this.model.BLegRR1.showModel=1==this.bearState,this.model.BLegRR2.showModel=1==this.bearState,this.model.BLegRR3.showModel=1==this.bearState,this.model.CHead.showModel=2==this.bearState,this.model.CSnout.showModel=2==this.bearState,this.model.CMouthOpen.showModel=2==this.bearState,this.model.CLEar.showModel=2==this.bearState,this.model.CREar.showModel=2==this.bearState,this.model.CNeck.showModel=2==this.bearState,this.model.CTorso.showModel=2==this.bearState,this.model.CAbdomen.showModel=2==this.bearState,this.model.CTail.showModel=2==this.bearState,this.model.CLegFL1.showModel=2==this.bearState,this.model.CLegFL2.showModel=2==this.bearState,this.model.CLegFL3.showModel=2==this.bearState,this.model.CLegFR1.showModel=2==this.bearState,this.model.CLegFR2.showModel=2==this.bearState,this.model.CLegFR3.showModel=2==this.bearState,this.model.CLegRL1.showModel=2==this.bearState,this.model.CLegRL2.showModel=2==this.bearState,this.model.CLegRL3.showModel=2==this.bearState,this.model.CLegRR1.showModel=2==this.bearState,this.model.CLegRR2.showModel=2==this.bearState,this.model.CLegRR3.showModel=2==this.bearState,this.details.bearState.value=this.bearState);var r=.8*MathHelper.func_76134_b(.6662*t)*e,a=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,h=o/57.29578,l=n/57.29578,d=this.bearState,c=0;if(0==d)this.Head.rotateAngleX=.1502636+h,this.Head.rotateAngleY=l,this.Snout.rotateAngleX=.1502636+h,this.Snout.rotateAngleY=l,this.Mouth.rotateAngleX=-.0068161+h,this.Mouth.rotateAngleY=l,this.MouthOpen.rotateAngleX=.534236+h,this.MouthOpen.rotateAngleY=l,this.LEar.rotateAngleX=.1502636+h,this.LEar.rotateAngleY=-.349066+l,this.REar.rotateAngleX=.1502636+h,this.REar.rotateAngleY=.349066+l,this.LegFL1.rotateAngleX=.261799+r,this.LegFL2.rotateAngleX=r,this.LegFL3.rotateAngleX=r,this.LegRR1.rotateAngleX=-.1745329+r,this.LegRR2.rotateAngleX=r,this.LegRR3.rotateAngleX=r,this.LegFR1.rotateAngleX=.261799+a,this.LegFR2.rotateAngleX=a,this.LegFR3.rotateAngleX=a,this.LegRL1.rotateAngleX=-.1745329+a,this.LegRL2.rotateAngleX=a,this.LegRL3.rotateAngleX=a;else if(1==d){this.BHead.rotateAngleX=-.024269-h,this.BHead.rotateAngleY=l,this.BSnout.rotateAngleX=-.024269-h,this.BSnout.rotateAngleY=l,this.BMouth.rotateAngleX=-.08726-h,this.BMouth.rotateAngleY=l,this.BMouthOpen.rotateAngleX=.5235988-h,this.BMouthOpen.rotateAngleY=l,this.BLEar.rotateAngleX=-.024269-h,this.BLEar.rotateAngleY=-.349066+l,this.BREar.rotateAngleX=-.024269-h,this.BREar.rotateAngleY=.349066+l;var u=.05*MathHelper.func_76134_b(.09*i)+.05;this.BLegFR1.rotateAngleZ=.261799+u,this.BLegFR2.rotateAngleZ=u,this.BLegFR3.rotateAngleZ=u,this.BLegFL1.rotateAngleZ=-.261799-u,this.BLegFL2.rotateAngleZ=-u,this.BLegFL3.rotateAngleZ=-u,this.BLegFL1.rotateAngleX=.261799+c,this.BLegFL2.rotateAngleX=-.5576792+c,this.BLegFL3.rotateAngleX=2.007645+c,this.BLegFR1.rotateAngleX=.261799+c,this.BLegFR2.rotateAngleX=-.5576792+c,this.BLegFR3.rotateAngleX=2.007645+c,this.BLegRR1.rotateAngleX=-.1745329+r,this.BLegRR2.rotateAngleX=r,this.BLegRR3.rotateAngleX=r,this.BLegRL1.rotateAngleX=-.5235988+a,this.BLegRL2.rotateAngleX=a,this.BLegRL3.rotateAngleX=a}else 2==d&&(this.CHead.rotateAngleX=.1502636+h,this.CHead.rotateAngleY=l,this.CSnout.rotateAngleX=.1502636+h,this.CSnout.rotateAngleY=l,this.CMouth.rotateAngleX=-.0068161+h,this.CMouth.rotateAngleY=l,this.CMouthOpen.rotateAngleX=.3665191+h,this.CMouthOpen.rotateAngleY=l,this.CLEar.rotateAngleX=.1502636+h,this.CLEar.rotateAngleY=-.349066+l,this.CREar.rotateAngleX=.1502636+h,this.CREar.rotateAngleY=.349066+l);this.Tail&&(this.Tail.rotateAngleZ=.2*r)}}),ModelMoCBee.prototype=$.extend({},ModelBase.prototype,{ModelMoCBee:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,9),this.Head.addBox(-1,0,-1,2,1,2),this.Head.setRotationPoint(0,21.5,-2),setRotation(this.Head,-2.171231,0,0),this.RAntenna=this.model.RAntenna=new ModelRenderer(this,0,17),this.RAntenna.addBox(-.5,0,-1,1,0,1),this.RAntenna.setRotationPoint(-.5,20.200001,-2.3),setRotation(this.RAntenna,-1.041001,.7853982,0),this.LAntenna=this.model.LAntenna=new ModelRenderer(this,0,12),this.LAntenna.addBox(-.5,0,-1,1,0,1),this.LAntenna.setRotationPoint(.5,20.200001,-2.3),setRotation(this.LAntenna,-1.041001,-.7853982,0),this.Mouth=this.model.Mouth=new ModelRenderer(this,0,13),this.Mouth.addBox(0,0,-1,1,1,1),this.Mouth.setRotationPoint(0,21.5,-2),setRotation(this.Mouth,-.446143,.356915,.7853982),this.Thorax=this.model.Thorax=new ModelRenderer(this,0,5),this.Thorax.addBox(-1,0,-1,2,2,2),this.Thorax.setRotationPoint(0,20.5,-1),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,0,0),this.Abdomen.addBox(-1,0,-1,2,3,2),this.Abdomen.setRotationPoint(0,21.5,0),setRotation(this.Abdomen,1.249201,0,0),this.Tail=this.model.Tail=new ModelRenderer(this,0,15),this.Tail.addBox(-.5,0,0,1,1,1),this.Tail.setRotationPoint(0,22,2),setRotation(this.Tail,.237943,0,0),this.FrontLegs=this.model.FrontLegs=new ModelRenderer(this,4,14),this.FrontLegs.addBox(-1,0,0,2,2,0),this.FrontLegs.setRotationPoint(0,22,-1.8),setRotation(this.FrontLegs,.1487144,0,0),this.RearLegs=this.model.RearLegs=new ModelRenderer(this,8,1),this.RearLegs.addBox(-1.5,0,0,3,3,0),this.RearLegs.setRotationPoint(0,22.5,-.4),setRotation(this.RearLegs,.8922867,0,0),this.MidLegs=this.model.MidLegs=new ModelRenderer(this,4,12),this.MidLegs.addBox(-1,0,0,2,2,0),this.MidLegs.setRotationPoint(0,22.5,-1.2),setRotation(this.MidLegs,.5948578,0,0),this.LeftWing=this.model.LeftWing=new ModelRenderer(this,0,17),this.LeftWing.addBox(-1,0,.5,2,0,4),this.LeftWing.setRotationPoint(0,20.4,-1),setRotation(this.LeftWing,0,1.047198,0),this.RightWing=this.model.RightWing=new ModelRenderer(this,0,17),this.RightWing.addBox(-1,0,.5,2,0,4),this.RightWing.setRotationPoint(0,20.4,-1),setRotation(this.RightWing,0,-1.047198,0),this.FoldedWings=this.model.FoldedWings=new ModelRenderer(this,0,17),this.FoldedWings.addBox(-1,0,0,2,0,4),this.FoldedWings.setRotationPoint(0,20.5,-1),setRotation(this.FoldedWings,175e-6,0,0)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r);var a=t,h=a.getIsFlying()||a.isOnAir();if(setRotationAngles(e,i,n,o,s,r,!h),this.Abdomen.render(r),this.FrontLegs.render(r),this.RAntenna.render(r),this.LAntenna.render(r),this.RearLegs.render(r),this.MidLegs.render(r),this.Head.render(r),this.Mouth.render(r),this.Tail.render(r),this.Thorax.render(r),h){GL11.glPushMatrix(),GL11.glEnable(3042);var l=.6;GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,l),this.LeftWing.render(r),this.RightWing.render(r),GL11.glDisable(3042),GL11.glPopMatrix()}else this.FoldedWings.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r){var a=.7*MathHelper.func_76134_b(3*i);this.RightWing.rotateAngleZ=a,this.LeftWing.rotateAngleZ=-a;var h=0,l=0;r?(h=2*MathHelper.func_76134_b(1.5*t+3.141593)*e,l=2*MathHelper.func_76134_b(1.5*t)*e):(h=1.5*e,l=h),this.FrontLegs.rotateAngleX=.1487144+h,this.MidLegs.rotateAngleX=.5948578+l,this.RearLegs.rotateAngleX=1.070744+h}}),ModelMoCBigCat1.prototype=$.extend({},ModelQuadruped.prototype,{ModelMoCBigCat1:function(){ModelQuadruped.call(this,12,0),this.field_78150_a=this.model.field_78150_a=new ModelRenderer(this,20,0),this.field_78150_a.addBox(-7,-8,-2,14,14,8,0),this.field_78150_a.setRotationPoint(0,4,-8),this.field_78148_b=this.model.field_78148_b=new ModelRenderer(this,20,0),this.field_78148_b.addBox(-6,-11,-8,12,10,10,0),this.field_78148_b.setRotationPoint(0,5,2)}}),ModelMoCBigCat.prototype=$.extend({},ModelBase.prototype,{sitting:!1,tamed:!1,ModelMoCBigCat:function(){ModelBase.call(this),this.ears=this.model.ears=new ModelRenderer(this,16,25),this.ears.addBox(-4,-7,-3,8,4,1,0),this.ears.setRotationPoint(0,4,-8),this.head=this.model.head=new ModelRenderer(this,0,0),this.head.addBox(-4,-4,-6,8,8,6,0),this.head.setRotationPoint(0,4,-8),this.snout=this.model.snout=new ModelRenderer(this,14,14),this.snout.addBox(-2,0,-9,4,4,6,0),this.snout.setRotationPoint(0,4,-8),this.Collar=this.model.Collar=new ModelRenderer(this,24,0),this.Collar.addBox(-2.5,4,-3,5,4,1,0),this.Collar.setRotationPoint(0,4,-8),this.body=this.model.body=new ModelRenderer(this,28,0),this.body.addBox(-5,-10,-7,10,18,8,0),this.body.setRotationPoint(0,5,2),this.Tail=this.model.Tail=new ModelRenderer(this,26,15),this.Tail.addBox(-5,-5,-2,3,3,14,0),this.Tail.setRotationPoint(3.5,9.3,9),this.Tail.rotateAngleX=-.5235988,this.leg1=this.model.leg1=new ModelRenderer(this,0,16),this.leg1.addBox(-2,0,-2,4,12,4,0),this.leg1.setRotationPoint(-3,12,7),this.leg2=this.model.leg2=new ModelRenderer(this,0,16),this.leg2.addBox(-2,0,-2,4,12,4,0),this.leg2.setRotationPoint(3,12,7),this.leg3=this.model.leg3=new ModelRenderer(this,0,16),this.leg3.addBox(-2,0,-2,4,12,4,0),this.leg3.setRotationPoint(-3,12,-5),this.leg4=this.model.leg4=new ModelRenderer(this,0,16),this.leg4.addBox(-2,0,-2,4,12,4,0),this.leg4.setRotationPoint(3,12,-5)},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.snout.render(r),this.Tail.render(r),this.ears.render(r),this.head.render(r),this.body.render(r),this.leg1.render(r),this.leg2.render(r),this.leg3.render(r),this.leg4.render(r),this.tamed&&this.Collar.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.head.rotateAngleX=o/57.29578,this.head.rotateAngleY=n/57.29578,this.leg1.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.leg2.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.leg3.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.leg4.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.snout.rotateAngleY=this.head.rotateAngleY,this.snout.rotateAngleX=this.head.rotateAngleX,this.ears.rotateAngleY=this.head.rotateAngleY,this.ears.rotateAngleX=this.head.rotateAngleX,this.Collar.rotateAngleY=this.head.rotateAngleY,this.Collar.rotateAngleX=this.head.rotateAngleX,this.sitting?(this.body.rotateAngleX=.8726646,this.body.c=0,this.body.d=12,this.body.e=1,this.leg1.c=-5,this.leg1.e=0,this.leg2.c=5,this.leg2.e=0,this.leg3.c=-2,this.leg3.e=-8,this.leg4.c=2,this.leg4.e=-8,this.Tail.c=3.5,this.Tail.d=22,this.Tail.e=8,this.Tail.rotateAngleX=-.1745329):(this.body.c=0,this.body.d=5,this.body.e=2,this.body.rotateAngleX=1.570796,this.leg1.c=-3,this.leg1.e=7,this.leg2.c=3,this.leg2.e=7,this.leg3.c=-3,this.leg3.e=-5,this.leg4.c=3,this.leg4.e=-5,this.Tail.c=3.5,this.Tail.d=9.3,this.Tail.e=9,this.Tail.rotateAngleX=-.5235988,this.Tail.rotateAngleY=.7*MathHelper.func_76134_b(.6662*t)*e)}}),ModelMoCBird.prototype=$.extend({},ModelBase.prototype,{ModelMoCBird:function(){ModelBase.call(this);var t=16;this.head=this.model.head=new ModelRenderer(this,0,0),this.head.addBox(-1.5,-3,-2,3,3,3,0),this.head.setRotationPoint(0,-1+t,-4),this.beak=this.model.beak=new ModelRenderer(this,14,0),this.beak.addBox(-.5,-1.5,-3,1,1,2,0),this.beak.setRotationPoint(0,-1+t,-4),this.body=this.model.body=new ModelRenderer(this,0,9),this.body.addBox(-2,-4,-3,4,8,4,0),this.body.setRotationPoint(0,0+t,0),this.body.rotateAngleX=1.047198,this.leftleg=this.model.leftleg=new ModelRenderer(this,26,0),this.leftleg.addBox(-1,0,-4,3,4,3),this.leftleg.setRotationPoint(-2,3+t,1),this.rightleg=this.model.rightleg=new ModelRenderer(this,26,0),this.rightleg.addBox(-1,0,-4,3,4,3),this.rightleg.setRotationPoint(1,3+t,1),this.rwing=this.model.rwing=new ModelRenderer(this,24,13),this.rwing.addBox(-1,0,-3,1,5,5),this.rwing.setRotationPoint(-2,-2+t,0),this.lwing=this.model.lwing=new ModelRenderer(this,24,13),this.lwing.addBox(0,0,-3,1,5,5),this.lwing.setRotationPoint(2,-2+t,0),this.tail=this.model.tail=new ModelRenderer(this,0,23),this.tail.addBox(-6,5,2,4,1,4,0),this.tail.setRotationPoint(4,-3+t,0),this.tail.rotateAngleX=.261799},func_78088_a:function(t,e,i,n,o,s,r){func_78087_a(e,i,n,o,s,r,t),this.head.render(r),this.beak.render(r),this.body.render(r),this.leftleg.render(r),this.rightleg.render(r),this.rwing.render(r),this.lwing.render(r),this.tail.render(r)},func_78087_a:function(t,e,i,n,o,s,r){this.head.rotateAngleX=-(o/2/57.29578),this.head.rotateAngleY=n/57.29578,this.beak.rotateAngleY=this.head.rotateAngleY,this.leftleg.rotateAngleX=MathHelper.func_76134_b(.6662*t)*e,this.rightleg.rotateAngleX=MathHelper.func_76134_b(.6662*t+3.141593)*e,this.rwing.rotateAngleZ=i,this.lwing.rotateAngleZ=-i}}),ModelMoCBoar.prototype=$.extend({},ModelBase.prototype,{ModelMoCBoar:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=64,this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-3,0,-5,6,6,5),this.Head.setRotationPoint(0,11,-5),setRotation(this.Head,.261799,0,0),this.Trout=this.model.Trout=new ModelRenderer(this,0,11),this.Trout.addBox(-1.5,1.5,-9.5,3,3,5),this.Trout.setRotationPoint(0,11,-5),setRotation(this.Trout,.349066,0,0),this.Tusks=this.model.Tusks=new ModelRenderer(this,0,24),this.Tusks.addBox(-2,3,-8,4,2,1),this.Tusks.setRotationPoint(0,11,-5),setRotation(this.Tusks,.349066,0,0),this.Jaw=this.model.Jaw=new ModelRenderer(this,0,19),this.Jaw.addBox(-1,4.9,-8.5,2,1,4),this.Jaw.setRotationPoint(0,11,-5),setRotation(this.Jaw,.261799,0,0),this.LeftEar=this.model.LeftEar=new ModelRenderer(this,16,11),this.LeftEar.addBox(1,-4,-2,2,4,2),this.LeftEar.setRotationPoint(0,11,-5),setRotation(this.LeftEar,.6981317,0,.349066),this.RightEar=this.model.RightEar=new ModelRenderer(this,16,17),this.RightEar.addBox(-3,-4,-2,2,4,2),this.RightEar.setRotationPoint(0,11,-5),setRotation(this.RightEar,.6981317,0,-.349066),this.HeadMane=this.model.HeadMane=new ModelRenderer(this,23,0),this.HeadMane.addBox(-1,-2,-5,2,2,5),this.HeadMane.setRotationPoint(0,11,-5),setRotation(this.HeadMane,.4363323,0,0),this.Body=this.model.Body=new ModelRenderer(this,24,0),this.Body.addBox(-3.5,0,0,7,8,13),this.Body.setRotationPoint(0,11,-5),setRotation(this.Body,-.0872665,0,0),this.BodyMane=this.model.BodyMane=new ModelRenderer(this,0,27),this.BodyMane.addBox(-1,-2,-1,2,2,9),this.BodyMane.setRotationPoint(0,11.3,-4),setRotation(this.BodyMane,-.261799,0,0),this.Tail=this.model.Tail=new ModelRenderer(this,60,38),this.Tail.addBox(-.5,0,0,1,5,1),this.Tail.setRotationPoint(0,13,7.5),setRotation(this.Tail,.0872665,0,0),this.UpperLegRight=this.model.UpperLegRight=new ModelRenderer(this,32,21),this.UpperLegRight.addBox(-1,-2,-2,1,5,3),this.UpperLegRight.setRotationPoint(-3.5,16,-2.5),setRotation(this.UpperLegRight,.1745329,0,0),this.LowerLegRight=this.model.LowerLegRight=new ModelRenderer(this,32,29),this.LowerLegRight.addBox(-.5,2,-1,2,6,2),this.LowerLegRight.setRotationPoint(-3.5,16,-2.5),this.UpperLegLeft=this.model.UpperLegLeft=new ModelRenderer(this,24,21),this.UpperLegLeft.addBox(0,-2,-2,1,5,3),this.UpperLegLeft.setRotationPoint(3.5,16,-2.5),setRotation(this.UpperLegLeft,.1745329,0,0),this.LowerLegLeft=this.model.LowerLegLeft=new ModelRenderer(this,24,29),this.LowerLegLeft.addBox(-1.5,2,-1,2,6,2),this.LowerLegLeft.setRotationPoint(3.5,16,-2.5),this.UpperHindLegRight=this.model.UpperHindLegRight=new ModelRenderer(this,44,21),this.UpperHindLegRight.addBox(-1.5,-2,-2,1,5,4),this.UpperHindLegRight.setRotationPoint(-3,16,5.5),setRotation(this.UpperHindLegRight,-.261799,0,0),this.LowerHindLegRight=this.model.LowerHindLegRight=new ModelRenderer(this,46,30),this.LowerHindLegRight.addBox(-1,2,0,2,6,2),this.LowerHindLegRight.setRotationPoint(-3,16,5.5),this.UpperHindLegLeft=this.model.UpperHindLegLeft=new ModelRenderer(this,54,21),this.UpperHindLegLeft.addBox(.5,-2,-2,1,5,4),this.UpperHindLegLeft.setRotationPoint(3,16,5.5),setRotation(this.UpperHindLegLeft,-.261799,0,0),this.LowerHindLegLeft=this.model.LowerHindLegLeft=new ModelRenderer(this,56,30),this.LowerHindLegLeft.addBox(-1,2,0,2,6,2),this.LowerHindLegLeft.setRotationPoint(3,16,5.5)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Head.render(r),this.Trout.render(r),this.Tusks.render(r),this.Jaw.render(r),this.LeftEar.render(r),this.RightEar.render(r),this.HeadMane.render(r),this.Body.render(r),this.BodyMane.render(r),this.Tail.render(r),this.UpperLegRight.render(r),this.LowerLegRight.render(r),this.UpperLegLeft.render(r),this.LowerLegLeft.render(r),this.UpperHindLegRight.render(r),this.LowerHindLegRight.render(r),this.UpperHindLegLeft.render(r),this.LowerHindLegLeft.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){var r=o/57.29578,a=n/57.29578;this.Head.rotateAngleX=.261799+r,this.Head.rotateAngleY=a,this.HeadMane.rotateAngleX=.4363323+r,this.HeadMane.rotateAngleY=a,this.Trout.rotateAngleX=.349066+r,this.Trout.rotateAngleY=a,this.Jaw.rotateAngleX=.261799+r,this.Jaw.rotateAngleY=a,this.Tusks.rotateAngleX=.349066+r,this.Tusks.rotateAngleY=a,this.LeftEar.rotateAngleX=.6981317+r,this.LeftEar.rotateAngleY=a,this.RightEar.rotateAngleX=.6981317+r,this.RightEar.rotateAngleY=a;var h=1.4*MathHelper.func_76134_b(.6662*t)*e,l=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e;this.UpperLegLeft.rotateAngleX=h,this.LowerLegLeft.rotateAngleX=h,this.UpperHindLegRight.rotateAngleX=h,this.LowerHindLegRight.rotateAngleX=h,this.UpperLegRight.rotateAngleX=l,this.LowerLegRight.rotateAngleX=l,this.UpperHindLegLeft.rotateAngleX=l,this.LowerHindLegLeft.rotateAngleX=l,this.Tail.rotateAngleZ=.2*h}}),ModelMoCBunny.prototype=$.extend({},ModelBase.prototype,{ModelMoCBunny:function(){ModelBase.call(this);var t=16;this.part1=this.model.part1=new ModelRenderer(this,0,0),this.part1.addBox(-2,-1,-4,4,4,6,0),this.part1.setRotationPoint(0,-1+t,-4),this.part8=this.model.part8=new ModelRenderer(this,14,0),this.part8.addBox(-2,-5,-3,1,4,2,0),this.part8.setRotationPoint(0,-1+t,-4),
this.part9=this.model.part9=new ModelRenderer(this,14,0),this.part9.addBox(1,-5,-3,1,4,2,0),this.part9.setRotationPoint(0,-1+t,-4),this.part10=this.model.part10=new ModelRenderer(this,20,0),this.part10.addBox(-4,0,-3,2,3,2,0),this.part10.setRotationPoint(0,-1+t,-4),this.part11=this.model.part11=new ModelRenderer(this,20,0),this.part11.addBox(2,0,-3,2,3,2,0),this.part11.setRotationPoint(0,-1+t,-4),this.part2=this.model.part2=new ModelRenderer(this,0,10),this.part2.addBox(-3,-4,-3,6,8,6,0),this.part2.setRotationPoint(0,0+t,0),this.part3=this.model.part3=new ModelRenderer(this,0,24),this.part3.addBox(-2,4,-2,4,3,4,0),this.part3.setRotationPoint(0,0+t,0),this.part4=this.model.part4=new ModelRenderer(this,24,16),this.part4.addBox(-2,0,-1,2,2,2),this.part4.setRotationPoint(3,3+t,-3),this.part5=this.model.part5=new ModelRenderer(this,24,16),this.part5.addBox(0,0,-1,2,2,2),this.part5.setRotationPoint(-3,3+t,-3),this.part6=this.model.part6=new ModelRenderer(this,16,24),this.part6.addBox(-2,0,-4,2,2,4),this.part6.setRotationPoint(3,3+t,4),this.part7=this.model.part7=new ModelRenderer(this,16,24),this.part7.addBox(0,0,-4,2,2,4),this.part7.setRotationPoint(-3,3+t,4)},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.part1.render(r),this.part8.render(r),this.part9.render(r),this.part10.render(r),this.part11.render(r),this.part2.render(r),this.part3.render(r),this.part4.render(r),this.part5.render(r),this.part6.render(r),this.part7.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.part1.rotateAngleX=-(o/57.29578),this.part1.rotateAngleY=n/57.29578,this.part8.rotateAngleX=this.part1.rotateAngleX,this.part8.rotateAngleY=this.part1.rotateAngleY,this.part9.rotateAngleX=this.part1.rotateAngleX,this.part9.rotateAngleY=this.part1.rotateAngleY,this.part10.rotateAngleX=this.part1.rotateAngleX,this.part10.rotateAngleY=this.part1.rotateAngleY,this.part11.rotateAngleX=this.part1.rotateAngleX,this.part11.rotateAngleY=this.part1.rotateAngleY,this.part2.rotateAngleX=1.570796,this.part3.rotateAngleX=1.570796,this.part4.rotateAngleX=1*MathHelper.func_76134_b(.6662*t)*e,this.part6.rotateAngleX=1.2*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.part5.rotateAngleX=1*MathHelper.func_76134_b(.6662*t)*e,this.part7.rotateAngleX=1.2*MathHelper.func_76134_b(.6662*t+3.141593)*e}}),ModelMoCButterfly.prototype=$.extend({},ModelBase.prototype,{ModelMoCButterfly:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,11),this.Head.addBox(-.5,0,0,1,1,1),this.Head.setRotationPoint(0,21.9,-1.3),setRotation(this.Head,-2.171231,0,0),this.Mouth=this.model.Mouth=new ModelRenderer(this,0,8),this.Mouth.addBox(0,0,0,1,2,0),this.Mouth.setRotationPoint(-.2,22,-2.5),setRotation(this.Mouth,.65486,0,0),this.RightAntenna=this.model.RightAntenna=new ModelRenderer(this,0,7),this.RightAntenna.addBox(-.5,0,-1,1,0,1),this.RightAntenna.setRotationPoint(-.5,21.700001,-2.3),setRotation(this.RightAntenna,-1.041001,.7853982,0),this.LeftAntenna=this.model.LeftAntenna=new ModelRenderer(this,4,7),this.LeftAntenna.addBox(-.5,0,-1,1,0,1),this.LeftAntenna.setRotationPoint(.5,21.700001,-2.3),setRotation(this.LeftAntenna,-1.041001,-.7853982,0),this.Thorax=this.model.Thorax=new ModelRenderer(this,0,0),this.Thorax.addBox(-.5,1.5,-1,1,1,2),this.Thorax.setRotationPoint(0,20,-1),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,8,1),this.Abdomen.addBox(-.5,0,-1,1,3,1),this.Abdomen.setRotationPoint(0,21.5,0),setRotation(this.Abdomen,1.427659,0,0),this.FrontLegs=this.model.FrontLegs=new ModelRenderer(this,0,8),this.FrontLegs.addBox(-1,0,0,2,3,0),this.FrontLegs.setRotationPoint(0,21.5,-1.8),setRotation(this.FrontLegs,.1487144,0,0),this.MidLegs=this.model.MidLegs=new ModelRenderer(this,4,8),this.MidLegs.addBox(-1,0,0,2,3,0),this.MidLegs.setRotationPoint(0,22,-1.2),setRotation(this.MidLegs,.5948578,0,0),this.RearLegs=this.model.RearLegs=new ModelRenderer(this,0,8),this.RearLegs.addBox(-1,0,0,2,3,0),this.RearLegs.setRotationPoint(0,22.5,-.4),setRotation(this.RearLegs,1.070744,0,0),this.WingLeftFront=this.model.WingLeftFront=new ModelRenderer(this,4,20),this.WingLeftFront.addBox(0,0,-4,8,0,6),this.WingLeftFront.setRotationPoint(.3,21.4,-1),this.WingLeft=this.model.WingLeft=new ModelRenderer(this,4,26),this.WingLeft.addBox(0,0,-1,8,0,6),this.WingLeft.setRotationPoint(.3,21.5,-.5),this.WingLeftBack=this.model.WingLeftBack=new ModelRenderer(this,4,0),this.WingLeftBack.addBox(0,0,-1,5,0,8),this.WingLeftBack.setRotationPoint(.3,21.200001,-1),setRotation(this.WingLeftBack,0,0,.5934119),this.WingRightFront=this.model.WingRightFront=new ModelRenderer(this,4,8),this.WingRightFront.addBox(-8,0,-4,8,0,6),this.WingRightFront.setRotationPoint(-.3,21.4,-1),this.WingRight=this.model.WingRight=new ModelRenderer(this,4,14),this.WingRight.addBox(-8,0,-1,8,0,6),this.WingRight.setRotationPoint(-.3,21.5,-.5),this.WingRightBack=this.model.WingRightBack=new ModelRenderer(this,14,0),this.WingRightBack.addBox(-5,0,-1,5,0,8),this.WingRightBack.setRotationPoint(.3,21.200001,-1),setRotation(this.WingRightBack,0,0,-.5934119)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r);var a=t,h=a.getIsFlying()||a.isOnAir();setRotationAngles(e,i,n,o,s,r,!h),this.Abdomen.render(r),this.FrontLegs.render(r),this.RightAntenna.render(r),this.LeftAntenna.render(r),this.RearLegs.render(r),this.MidLegs.render(r),this.Head.render(r),this.Thorax.render(r),this.Mouth.render(r),GL11.glPushMatrix(),GL11.glEnable(3042);var l=.8;GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,l),this.WingRight.render(r),this.WingLeft.render(r),this.WingRightFront.render(r),this.WingLeftFront.render(r),this.WingRightBack.render(r),this.WingLeftBack.render(r),GL11.glDisable(3042),GL11.glPopMatrix()},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r){var a=i%100,h=0,l=0,d=0;r?(l=2*MathHelper.func_76134_b(1.5*t+3.141593)*e,d=2*MathHelper.func_76134_b(1.5*t)*e,0!=((a>40?1:0)&(a<60?1:0))&&(h=.9*MathHelper.func_76134_b(.15*i))):(h=.9*MathHelper.func_76134_b(.9*i),l=1.5*e,d=l);var c=.52359;this.WingLeft.rotateAngleZ=-c+h,this.WingRight.rotateAngleZ=c-h,this.WingLeftFront.rotateAngleZ=-c+h,this.WingLeftBack.rotateAngleZ=.5934119+-c+h,this.WingRightFront.rotateAngleZ=c-h,this.WingRightBack.rotateAngleZ=-.5934119+c-h,this.FrontLegs.rotateAngleX=.1487144+l,this.MidLegs.rotateAngleX=.5948578+d,this.RearLegs.rotateAngleX=1.070744+l}}),ModelMoCCrab.prototype=$.extend({},ModelBase.prototype,{ModelMoCCrab:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=64,this.Shell=this.model.Shell=new ModelRenderer(this,0,0),this.Shell.addBox(-5,0,-4,10,4,8),this.Shell.setRotationPoint(0,16,0),this.ShellRight=this.model.ShellRight=new ModelRenderer(this,0,23),this.ShellRight.addBox(4.6,-2,-4,3,3,8),this.ShellRight.setRotationPoint(0,16,0),setRotation(this.ShellRight,0,0,.418879),this.ShellLeft=this.model.ShellLeft=new ModelRenderer(this,0,12),this.ShellLeft.addBox(-7.6,-2,-4,3,3,8),this.ShellLeft.setRotationPoint(0,16,0),setRotation(this.ShellLeft,0,0,-.418879),this.ShellBack=this.model.ShellBack=new ModelRenderer(this,10,42),this.ShellBack.addBox(-5,-1.6,3.6,10,3,3),this.ShellBack.setRotationPoint(0,16,0),setRotation(this.ShellBack,-.418879,0,0),this.LeftEye=this.model.LeftEye=new ModelRenderer(this,0,4),this.LeftEye.addBox(1,-2,-4.5,1,3,1),this.LeftEye.setRotationPoint(0,16,0),setRotation(this.LeftEye,0,0,.1745329),this.LeftEyeBase=this.model.LeftEyeBase=new ModelRenderer(this,0,16),this.LeftEyeBase.addBox(1,1,-5,2,3,1),this.LeftEyeBase.setRotationPoint(0,16,0),setRotation(this.LeftEyeBase,0,0,.20944),this.RightEyeBase=this.model.RightEyeBase=new ModelRenderer(this,0,12),this.RightEyeBase.addBox(-3,1,-5,2,3,1),this.RightEyeBase.setRotationPoint(0,16,0),setRotation(this.RightEyeBase,0,0,-.20944),this.RightEye=this.model.RightEye=new ModelRenderer(this,0,0),this.RightEye.addBox(-2,-2,-4.5,1,3,1),this.RightEye.setRotationPoint(0,16,0),setRotation(this.RightEye,0,0,-.1745329),this.RightArmA=this.model.RightArmA=new ModelRenderer(this,0,34),this.RightArmA.addBox(-4,-1,-1,4,2,2),this.RightArmA.setRotationPoint(-4,19,-4),setRotation(this.RightArmA,0,-.5235988,0),this.RightArmB=new ModelRenderer(this,22,12),this.RightArmB.addBox(-4,-1.5,-1,4,3,2),this.RightArmB.setRotationPoint(-4,0,0),setRotation(this.RightArmB,0,-2.094395,0),this.RightArmA.addChild(this.RightArmB),this.RightArmC=new ModelRenderer(this,22,17),this.RightArmC.addBox(-3,-1.5,-1,3,1,2),this.RightArmC.setRotationPoint(-4,0,0),this.RightArmB.addChild(this.RightArmC),this.RightArmD=new ModelRenderer(this,16,12),this.RightArmD.addBox(-2,.5,-.5,2,1,1),this.RightArmD.setRotationPoint(-4,0,0),this.RightArmB.addChild(this.RightArmD),this.LeftArmA=this.model.LeftArmA=new ModelRenderer(this,0,38),this.LeftArmA.addBox(0,-1,-1,4,2,2),this.LeftArmA.setRotationPoint(4,19,-4),setRotation(this.LeftArmA,0,.5235988,0),this.LeftArmB=new ModelRenderer(this,22,20),this.LeftArmB.addBox(0,-1.5,-1,4,3,2),this.LeftArmB.setRotationPoint(4,0,0),setRotation(this.LeftArmB,0,2.094395,0),this.LeftArmA.addChild(this.LeftArmB),this.LeftArmC=new ModelRenderer(this,22,25),this.LeftArmC.addBox(0,-1.5,-1,3,1,2),this.LeftArmC.setRotationPoint(4,0,0),this.LeftArmB.addChild(this.LeftArmC),this.LeftArmD=new ModelRenderer(this,16,23),this.LeftArmD.addBox(0,.5,-.5,2,1,1),this.LeftArmD.setRotationPoint(4,0,0),this.LeftArmB.addChild(this.LeftArmD),this.RightLeg1A=this.model.RightLeg1A=new ModelRenderer(this,0,42),this.RightLeg1A.addBox(-4,-.5,-.5,4,1,1),this.RightLeg1A.setRotationPoint(-5,19.5,-2.5),setRotation(this.RightLeg1A,0,-.1745329,-.418879),this.RightLeg1B=new ModelRenderer(this,0,48),this.RightLeg1B.addBox(-4,-.5,-.5,4,1,1),this.RightLeg1B.setRotationPoint(-4,0,0),setRotation(this.RightLeg1B,0,0,-.5235988),this.RightLeg1A.addChild(this.RightLeg1B),this.RightLeg2A=this.model.RightLeg2A=new ModelRenderer(this,0,44),this.RightLeg2A.addBox(-4,-.5,-.5,4,1,1),this.RightLeg2A.setRotationPoint(-5,19.5,0),setRotation(this.RightLeg2A,0,.0872665,-.418879),this.RightLeg2B=new ModelRenderer(this,0,50),this.RightLeg2B.addBox(-4,-.5,-.5,4,1,1),this.RightLeg2B.setRotationPoint(-4,0,0),setRotation(this.RightLeg2B,0,0,-.5235988),this.RightLeg2A.addChild(this.RightLeg2B),this.RightLeg3A=this.model.RightLeg3A=new ModelRenderer(this,0,46),this.RightLeg3A.addBox(-4,-.5,-.5,4,1,1),this.RightLeg3A.setRotationPoint(-5,19.5,2.5),setRotation(this.RightLeg3A,0,.6981317,-.418879),this.RightLeg3B=new ModelRenderer(this,0,52),this.RightLeg3B.addBox(-4,-.5,-.5,4,1,1),this.RightLeg3B.setRotationPoint(-4,0,0),setRotation(this.RightLeg3B,0,0,-.5235988),this.RightLeg3A.addChild(this.RightLeg3B),this.RightLeg4A=this.model.RightLeg4A=new ModelRenderer(this,12,34),this.RightLeg4A.addBox(-4,-.5,-.5,4,1,1),this.RightLeg4A.setRotationPoint(-3,19.5,3.5),setRotation(this.RightLeg4A,0,.6108652,-.418879),this.RightLeg4B=new ModelRenderer(this,12,36),this.RightLeg4B.addBox(-3,-.5,-1,3,1,2),this.RightLeg4B.setRotationPoint(-4,0,0),setRotation(this.RightLeg4B,0,1.308997,-.418879),this.RightLeg4A.addChild(this.RightLeg4B),this.RightLeg4C=new ModelRenderer(this,12,39),this.RightLeg4C.addBox(-3,-.5,-1,3,1,2),this.RightLeg4C.setRotationPoint(-3,0,0),setRotation(this.RightLeg4C,0,.8726646,-.418879),this.RightLeg4C.field_78809_i=!0,this.RightLeg4B.addChild(this.RightLeg4C),this.LeftLeg1A=this.model.LeftLeg1A=new ModelRenderer(this,0,54),this.LeftLeg1A.addBox(0,-.5,-.5,4,1,1),this.LeftLeg1A.setRotationPoint(5,19.5,-2.5),setRotation(this.LeftLeg1A,0,.1745329,.418879),this.LeftLeg1B=new ModelRenderer(this,0,56),this.LeftLeg1B.addBox(0,-.5,-.5,4,1,1),this.LeftLeg1B.setRotationPoint(4,0,0),setRotation(this.LeftLeg1B,0,0,.5235988),this.LeftLeg1A.addChild(this.LeftLeg1B),this.LeftLeg2A=this.model.LeftLeg2A=new ModelRenderer(this,0,62),this.LeftLeg2A.addBox(0,-.5,-.5,4,1,1),this.LeftLeg2A.setRotationPoint(5,19.5,0),setRotation(this.LeftLeg2A,0,-.0872665,.418879),this.LeftLeg2B=new ModelRenderer(this,10,62),this.LeftLeg2B.addBox(0,-.5,-.5,4,1,1),this.LeftLeg2B.setRotationPoint(4,0,0),setRotation(this.LeftLeg2B,0,0,.5235988),this.LeftLeg2A.addChild(this.LeftLeg2B),this.LeftLeg3A=this.model.LeftLeg3A=new ModelRenderer(this,0,58),this.LeftLeg3A.addBox(0,-.5,-.5,4,1,1),this.LeftLeg3A.setRotationPoint(5,19.5,2.5),setRotation(this.LeftLeg3A,0,-.6981317,.418879),this.LeftLeg3B=new ModelRenderer(this,0,60),this.LeftLeg3B.addBox(0,-.5,-.5,4,1,1),this.LeftLeg3B.setRotationPoint(4,0,0),setRotation(this.LeftLeg3B,0,0,.5235988),this.LeftLeg3A.addChild(this.LeftLeg3B),this.LeftLeg4A=this.model.LeftLeg4A=new ModelRenderer(this,22,34),this.LeftLeg4A.addBox(0,-.5,-.5,4,1,1),this.LeftLeg4A.setRotationPoint(2,19.5,3.5),setRotation(this.LeftLeg4A,0,-.6108652,.418879),this.LeftLeg4B=new ModelRenderer(this,22,36),this.LeftLeg4B.addBox(0,-.5,-1,3,1,2),this.LeftLeg4B.setRotationPoint(4,0,0),setRotation(this.LeftLeg4B,0,-1.308997,.418879),this.LeftLeg4A.addChild(this.LeftLeg4B),this.LeftLeg4C=new ModelRenderer(this,22,39),this.LeftLeg4C.addBox(0,-.5,-1,3,1,2),this.LeftLeg4C.setRotationPoint(3,0,0),setRotation(this.LeftLeg4C,0,-.8726646,.418879),this.LeftLeg4B.addChild(this.LeftLeg4C)},func_78088_a:function(t,e,i,n,o,s,r){var a=t;setRotationAngles(e,i,n,o,s,r,a.isFleeing()),this.Shell.render(r),this.ShellRight.render(r),this.ShellLeft.render(r),this.ShellBack.render(r),this.LeftEye.render(r),this.LeftEyeBase.render(r),this.RightEyeBase.render(r),this.RightEye.render(r),this.RightArmA.render(r),this.LeftArmA.render(r),this.LeftLeg1A.render(r),this.LeftLeg2A.render(r),this.LeftLeg3A.render(r),this.LeftLeg4A.render(r),this.RightLeg1A.render(r),this.RightLeg2A.render(r),this.RightLeg3A.render(r),this.RightLeg4A.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},fleeing:!1,setRotationAngles:function(t,e,i,n,o,s){var r=this.fleeing;if(r?(this.LeftArmA.rotateAngleX=-90/57.29578,this.RightArmA.rotateAngleX=-90/57.29578):(this.LeftArmA.rotateAngleX=0,this.RightArmA.rotateAngleX=0),e<.1){this.RightArmA.rotateAngleY=-30/57.29578,this.RightArmB.rotateAngleY=-120/57.29578;var a=0,h=i%100;0!=((h>0?1:0)&(h<10?1:0))&&(a=2*h/57.29578),this.LeftArmA.rotateAngleY=30/57.29578+a,this.LeftArmB.rotateAngleY=120/57.29578+a;var l=0,d=i%75;0!=((d>30?1:0)&(d<40?1:0))&&(l=2*(d-29)/57.29578),this.RightArmA.rotateAngleY=-30/57.29578-l,this.RightArmB.rotateAngleY=-120/57.29578-l}var c=-MathHelper.func_76134_b(5*t)*e*2,u=-MathHelper.func_76134_b(5*t+3.141593)*e*2,g=-MathHelper.func_76134_b(5*t+1.570796)*e*2,f=-MathHelper.func_76134_b(5*t+4.712389)*e*2,p=Math.abs(.4*MathHelper.func_76126_a(.6662*t+0))*e*5,m=Math.abs(.4*MathHelper.func_76126_a(.6662*t+3.141593))*e,v=Math.abs(.4*MathHelper.func_76126_a(.6662*t+1.570796))*e,w=Math.abs(.4*MathHelper.func_76126_a(.6662*t+4.712389))*e;this.RightLeg1A.rotateAngleY=-.1745329,this.RightLeg1A.rotateAngleZ=-.418879,this.RightLeg1A.rotateAngleY+=c,this.RightLeg1A.rotateAngleZ+=p,this.RightLeg1B.rotateAngleZ=-.5235988,this.RightLeg1B.rotateAngleZ-=p,this.RightLeg2A.rotateAngleY=.0872665,this.RightLeg2A.rotateAngleZ=-.418879,this.RightLeg2A.rotateAngleY+=u,this.RightLeg2A.rotateAngleZ+=m,this.RightLeg2B.rotateAngleZ=-.5235988,this.RightLeg2B.rotateAngleZ-=m,this.RightLeg3A.rotateAngleY=.6981317,this.RightLeg3A.rotateAngleZ=-.418879,this.RightLeg3A.rotateAngleY+=g,this.RightLeg3A.rotateAngleZ+=v,this.RightLeg3B.rotateAngleZ=-.5235988,this.RightLeg3B.rotateAngleZ-=v,this.RightLeg4A.rotateAngleY=.6108652,this.RightLeg4A.rotateAngleZ=-.418879,this.RightLeg4A.rotateAngleY+=f,this.RightLeg4A.rotateAngleZ+=w,this.LeftLeg1A.rotateAngleY=.1745329,this.LeftLeg1A.rotateAngleZ=.418879,this.LeftLeg1A.rotateAngleY-=c,this.LeftLeg1A.rotateAngleZ-=p,this.LeftLeg1B.rotateAngleZ=.5235988,this.LeftLeg1B.rotateAngleZ+=p,this.LeftLeg2A.rotateAngleY=-.0872665,this.LeftLeg2A.rotateAngleZ=.418879,this.LeftLeg2A.rotateAngleY-=u,this.LeftLeg2A.rotateAngleZ-=m,this.LeftLeg2B.rotateAngleZ=.5235988,this.LeftLeg2B.rotateAngleZ+=m,this.LeftLeg3A.rotateAngleY=-.6981317,this.LeftLeg3A.rotateAngleZ=.418879,this.LeftLeg3A.rotateAngleY-=g,this.LeftLeg3A.rotateAngleZ-=v,this.LeftLeg3B.rotateAngleZ=.5235988,this.LeftLeg3B.rotateAngleZ+=v,this.LeftLeg4A.rotateAngleY=-.6108652,this.LeftLeg4A.rotateAngleZ=.418879,this.LeftLeg4A.rotateAngleY-=f,this.LeftLeg4A.rotateAngleZ-=w}}),ModelMoCCricket.prototype=$.extend({},ModelBase.prototype,{ModelMoCCricket:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,4),this.Head.addBox(-.5,0,-1,1,1,2),this.Head.setRotationPoint(0,22.5,-2),setRotation(this.Head,-2.171231,0,0),this.Antenna=this.model.Antenna=new ModelRenderer(this,0,11),this.Antenna.addBox(-1,0,0,2,2,0),this.Antenna.setRotationPoint(0,22.5,-3),setRotation(this.Antenna,-2.736346,0,0),this.AntennaB=this.model.AntennaB=new ModelRenderer(this,0,9),this.AntennaB.addBox(-1,0,0,2,2,0),this.AntennaB.setRotationPoint(0,20.700001,-3.8),setRotation(this.AntennaB,2.88506,0,0),this.Thorax=this.model.Thorax=new ModelRenderer(this,0,0),this.Thorax.addBox(-1,0,-1,2,2,2),this.Thorax.setRotationPoint(0,21,-1),setRotation(this.Thorax,0,0,0),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,8,0),this.Abdomen.addBox(-1,0,-1,2,3,2),this.Abdomen.setRotationPoint(0,22,0),setRotation(this.Abdomen,1.427659,0,0),this.TailA=this.model.TailA=new ModelRenderer(this,4,9),this.TailA.addBox(-1,0,0,2,3,0),this.TailA.setRotationPoint(0,22,2.8),setRotation(this.TailA,1.308687,0,0),this.TailB=this.model.TailB=new ModelRenderer(this,4,7),this.TailB.addBox(-1,0,0,2,2,0),this.TailB.setRotationPoint(0,23,2.8),setRotation(this.TailB,1.665602,0,0),this.FrontLegs=this.model.FrontLegs=new ModelRenderer(this,0,7),this.FrontLegs.addBox(-1,0,0,2,2,0),this.FrontLegs.setRotationPoint(0,23,-1.8),setRotation(this.FrontLegs,-.8328009,0,0),this.MidLegs=this.model.MidLegs=new ModelRenderer(this,0,13),this.MidLegs.addBox(-2,0,0,4,2,0),this.MidLegs.setRotationPoint(0,23,-1.2),setRotation(this.MidLegs,1.070744,0,0),this.ThighLeft=this.model.ThighLeft=new ModelRenderer(this,8,5),this.ThighLeft.addBox(0,-3,0,1,3,1),this.ThighLeft.setRotationPoint(.5,23,0),setRotation(this.ThighLeft,-.4886922,.261799,0),this.ThighLeftB=this.model.ThighLeftB=new ModelRenderer(this,8,5),this.ThighLeftB.addBox(0,-3,0,1,3,1),this.ThighLeftB.setRotationPoint(.5,22.5,0),setRotation(this.ThighLeftB,-1.762782,0,0),this.ThighRight=this.model.ThighRight=new ModelRenderer(this,12,5),this.ThighRight.addBox(-1,-3,0,1,3,1),this.ThighRight.setRotationPoint(-.5,23,0),setRotation(this.ThighRight,-.4886922,-.261799,0),this.ThighRightB=this.model.ThighRightB=new ModelRenderer(this,12,5),this.ThighRightB.addBox(-1,-3,0,1,3,1),this.ThighRightB.setRotationPoint(-.5,22.5,0),setRotation(this.ThighRightB,-1.762782,0,0),this.LegLeft=this.model.LegLeft=new ModelRenderer(this,0,15),this.LegLeft.addBox(0,0,-1,0,3,2),this.LegLeft.setRotationPoint(2,21,2.5),this.LegLeftB=this.model.LegLeftB=new ModelRenderer(this,4,15),this.LegLeftB.addBox(0,0,-1,0,3,2),this.LegLeftB.setRotationPoint(1.5,23,2.9),setRotation(this.LegLeftB,1.249201,0,0),this.LegRight=this.model.LegRight=new ModelRenderer(this,4,15),this.LegRight.addBox(0,0,-1,0,3,2),this.LegRight.setRotationPoint(-2,21,2.5),this.LegRightB=this.model.LegRightB=new ModelRenderer(this,4,15),this.LegRightB.addBox(0,0,-1,0,3,2),this.LegRightB.setRotationPoint(-1.5,23,2.9),setRotation(this.LegRightB,1.249201,0,0),this.LeftWing=this.model.LeftWing=new ModelRenderer(this,0,30),this.LeftWing.addBox(0,0,-1,6,0,2),this.LeftWing.setRotationPoint(0,20.9,-1),setRotation(this.LeftWing,0,-.191986,0),this.RightWing=this.model.RightWing=new ModelRenderer(this,0,28),this.RightWing.addBox(-6,0,-1,6,0,2),this.RightWing.setRotationPoint(0,20.9,-1),setRotation(this.RightWing,0,.191986,0),this.FoldedWings=this.model.FoldedWings=new ModelRenderer(this,0,26),this.FoldedWings.addBox(0,0,-1,6,0,2),this.FoldedWings.setRotationPoint(0,20.9,-2),setRotation(this.FoldedWings,0,-1.570796,0)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=a.getIsFlying()||a.isOnAir();if(setRotationAngles(e,i,n,o,s,r,h),this.Head.render(r),this.Antenna.render(r),this.AntennaB.render(r),this.Thorax.render(r),this.Abdomen.render(r),this.TailA.render(r),this.TailB.render(r),this.FrontLegs.render(r),this.MidLegs.render(r),h){this.ThighLeftB.render(r),this.ThighRightB.render(r),this.LegLeftB.render(r),this.LegRightB.render(r),GL11.glPushMatrix(),GL11.glEnable(3042);var l=.6;GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,l),this.LeftWing.render(r),this.RightWing.render(r),GL11.glDisable(3042),GL11.glPopMatrix()}else this.ThighLeft.render(r),this.ThighRight.render(r),this.LegLeft.render(r),this.LegRight.render(r),this.FoldedWings.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},isFlying:!1,setRotationAngles:function(t,e,i,n,o,s){var r=0,a=0,h=0;if(this.isFlying){var l=.7*MathHelper.func_76134_b(2*i);this.RightWing.rotateAngleZ=l,this.LeftWing.rotateAngleZ=-l,r=1.5*e,a=r,h=1.4}else r=2*MathHelper.func_76134_b(1.5*t+3.141593)*e,a=2*MathHelper.func_76134_b(1.5*t)*e;this.AntennaB.rotateAngleX=2.88506-r,this.FrontLegs.rotateAngleX=-.8328009+h+r,this.MidLegs.rotateAngleX=1.070744+a}}),ModelMoCCrocodile.prototype=$.extend({},ModelBase.prototype,{biteProgress:0,swimming:!1,resting:!1,ModelMoCCrocodile:function(){ModelBase.call(this),this.LJaw=this.model.LJaw=new ModelRenderer(this,42,0),this.LJaw.addBox(-2.5,1,-12,5,2,6),this.LJaw.setRotationPoint(0,18,-8),this.LJaw.rotateAngleX=0,this.LJaw.rotateAngleY=0,this.LJaw.rotateAngleZ=0,this.TailA=this.model.TailA=new ModelRenderer(this,0,0),this.TailA.addBox(-4,-.5,0,8,4,8),this.TailA.setRotationPoint(0,17,12),this.TailA.rotateAngleX=0,this.TailA.rotateAngleY=0,this.TailA.rotateAngleZ=0,this.TailB=this.model.TailB=new ModelRenderer(this,2,0),this.TailB.addBox(-3,0,8,6,3,8),this.TailB.setRotationPoint(0,17,12),this.TailB.rotateAngleX=0,this.TailB.rotateAngleY=0,this.TailB.rotateAngleZ=0,this.TailC=this.model.TailC=new ModelRenderer(this,6,2),this.TailC.addBox(-2,.5,16,4,2,6),this.TailC.setRotationPoint(0,17,12),this.TailC.rotateAngleX=0,this.TailC.rotateAngleY=0,this.TailC.rotateAngleZ=0,this.TailD=this.model.TailD=new ModelRenderer(this,7,2),this.TailD.addBox(-1.5,1,22,3,1,6),this.TailD.setRotationPoint(0,17,12),this.TailD.rotateAngleX=0,this.TailD.rotateAngleY=0,this.TailD.rotateAngleZ=0,this.UJaw=this.model.UJaw=new ModelRenderer(this,44,8),this.UJaw.addBox(-2,-1,-12,4,2,6),this.UJaw.setRotationPoint(0,18,-8),this.UJaw.rotateAngleX=0,this.UJaw.rotateAngleY=0,this.UJaw.rotateAngleZ=0,this.Head=this.model.Head=new ModelRenderer(this,0,16),this.Head.addBox(-3,-2,-6,6,5,6),this.Head.setRotationPoint(0,18,-8),this.Head.rotateAngleX=0,this.Head.rotateAngleY=0,this.Head.rotateAngleZ=0,this.Body=this.model.Body=new ModelRenderer(this,4,7),this.Body.addBox(0,0,0,10,5,20),this.Body.setRotationPoint(-5,16,-8),this.Body.rotateAngleX=0,this.Body.rotateAngleY=0,this.Body.rotateAngleZ=0,this.Leg1=this.model.Leg1=new ModelRenderer(this,49,21),this.Leg1.addBox(1,2,-3,3,2,4),this.Leg1.setRotationPoint(5,19,-3),this.Leg1.rotateAngleX=0,this.Leg1.rotateAngleY=0,this.Leg1.rotateAngleZ=0,this.Leg3=this.model.Leg3=new ModelRenderer(this,48,20),this.Leg3.addBox(1,2,-3,3,2,5),this.Leg3.setRotationPoint(5,19,9),this.Leg3.rotateAngleX=0,this.Leg3.rotateAngleY=0,this.Leg3.rotateAngleZ=0,this.Leg2=this.model.Leg2=new ModelRenderer(this,49,21),this.Leg2.addBox(-4,2,-3,3,2,4),this.Leg2.setRotationPoint(-5,19,-3),this.Leg2.rotateAngleX=0,this.Leg2.rotateAngleY=0,this.Leg2.rotateAngleZ=0,this.Leg4=this.model.Leg4=new ModelRenderer(this,48,20),this.Leg4.addBox(-4,2,-3,3,2,5),this.Leg4.setRotationPoint(-5,19,9),this.Leg4.rotateAngleX=0,this.Leg4.rotateAngleY=0,this.Leg4.rotateAngleZ=0,this.Leg1A=this.model.Leg1A=new ModelRenderer(this,7,9),this.Leg1A.addBox(0,-1,-2,3,3,3),this.Leg1A.setRotationPoint(5,19,-3),this.Leg1A.rotateAngleX=0,this.Leg1A.rotateAngleY=0,this.Leg1A.rotateAngleZ=0,this.Leg2A=this.model.Leg2A=new ModelRenderer(this,7,9),this.Leg2A.addBox(-3,-1,-2,3,3,3),this.Leg2A.setRotationPoint(-5,19,-3),this.Leg2A.rotateAngleX=0,this.Leg2A.rotateAngleY=0,this.Leg2A.rotateAngleZ=0,this.Leg3A=this.model.Leg3A=new ModelRenderer(this,6,8),this.Leg3A.addBox(0,-1,-2,3,3,4),this.Leg3A.setRotationPoint(5,19,9),this.Leg3A.rotateAngleX=0,this.Leg3A.rotateAngleY=0,this.Leg3A.rotateAngleZ=0,this.Leg4A=this.model.Leg4A=new ModelRenderer(this,6,8),this.Leg4A.addBox(-3,-1,-2,3,3,4),this.Leg4A.setRotationPoint(-5,19,9),this.Leg4A.rotateAngleX=0,this.Leg4A.rotateAngleY=0,this.Leg4A.rotateAngleZ=0,this.UJaw2=this.model.UJaw2=new ModelRenderer(this,37,0),this.UJaw2.addBox(-1.5,-1,-16,3,2,4),this.UJaw2.setRotationPoint(0,18,-8),this.UJaw2.rotateAngleX=0,this.UJaw2.rotateAngleY=0,this.UJaw2.rotateAngleZ=0,this.LJaw2=this.model.LJaw2=new ModelRenderer(this,24,1),this.LJaw2.addBox(-2,1,-16,4,2,4),this.LJaw2.setRotationPoint(0,18,-8),this.LJaw2.rotateAngleX=0,this.LJaw2.rotateAngleY=0,this.LJaw2.rotateAngleZ=0,this.TeethA=this.model.TeethA=new ModelRenderer(this,8,11),this.TeethA.addBox(1.6,0,-16,0,1,4),this.TeethA.setRotationPoint(0,18,-8),this.TeethA.rotateAngleX=0,this.TeethA.rotateAngleY=0,this.TeethA.rotateAngleZ=0,this.TeethB=this.model.TeethB=new ModelRenderer(this,8,11),this.TeethB.addBox(-1.6,0,-16,0,1,4),this.TeethB.setRotationPoint(0,18,-8),this.TeethB.rotateAngleX=0,this.TeethB.rotateAngleY=0,this.TeethB.rotateAngleZ=0,this.TeethC=this.model.TeethC=new ModelRenderer(this,6,9),this.TeethC.addBox(2.1,0,-12,0,1,6),this.TeethC.setRotationPoint(0,18,-8),this.TeethC.rotateAngleX=0,this.TeethC.rotateAngleY=0,this.TeethC.rotateAngleZ=0,this.TeethD=this.model.TeethD=new ModelRenderer(this,6,9),this.TeethD.addBox(-2.1,0,-12,0,1,6),this.TeethD.setRotationPoint(0,18,-8),this.TeethD.rotateAngleX=0,this.TeethD.rotateAngleY=0,this.TeethD.rotateAngleZ=0,this.Leg1A.rotateAngleX=0,this.Leg1A.rotateAngleY=0,this.Leg1A.rotateAngleZ=0,this.Leg2A.rotateAngleX=0,this.Leg2A.rotateAngleY=0,this.Leg2A.rotateAngleZ=0,this.Leg3A.rotateAngleX=0,this.Leg3A.rotateAngleY=0,this.Leg3A.rotateAngleZ=0,this.Leg4A.rotateAngleX=0,this.Leg4A.rotateAngleY=0,this.Leg4A.rotateAngleZ=0,this.TeethF=this.model.TeethF=new ModelRenderer(this,19,21),this.TeethF.addBox(-1,0,-16.1,2,1,0),this.TeethF.setRotationPoint(0,18,-8),this.Spike0=this.model.Spike0=new ModelRenderer(this,44,16),this.Spike0.addBox(-1,-1,23,0,2,4),this.Spike0.setRotationPoint(0,17,12),this.Spike1=this.model.Spike1=new ModelRenderer(this,44,16),this.Spike1.addBox(1,-1,23,0,2,4),this.Spike1.setRotationPoint(0,17,12),this.Spike2=this.model.Spike2=new ModelRenderer(this,44,16),this.Spike2.addBox(-1.5,-1.5,17,0,2,4),this.Spike2.setRotationPoint(0,17,12),this.Spike3=this.model.Spike3=new ModelRenderer(this,44,16),this.Spike3.addBox(1.5,-1.5,17,0,2,4),this.Spike3.setRotationPoint(0,17,12),this.Spike4=this.model.Spike4=new ModelRenderer(this,44,16),this.Spike4.addBox(-2,-2,12,0,2,4),this.Spike4.setRotationPoint(0,17,12),this.Spike5=this.model.Spike5=new ModelRenderer(this,44,16),this.Spike5.addBox(2,-2,12,0,2,4),this.Spike5.setRotationPoint(0,17,12),this.Spike6=this.model.Spike6=new ModelRenderer(this,44,16),this.Spike6.addBox(-2.5,-2,8,0,2,4),this.Spike6.setRotationPoint(0,17,12),this.Spike7=this.model.Spike7=new ModelRenderer(this,44,16),this.Spike7.addBox(2.5,-2,8,0,2,4),this.Spike7.setRotationPoint(0,17,12),this.Spike8=this.model.Spike8=new ModelRenderer(this,44,16),this.Spike8.addBox(-3,-2.5,4,0,2,4),this.Spike8.setRotationPoint(0,17,12),this.Spike9=this.model.Spike9=new ModelRenderer(this,44,16),this.Spike9.addBox(3,-2.5,4,0,2,4),this.Spike9.setRotationPoint(0,17,12),this.Spike10=this.model.Spike10=new ModelRenderer(this,44,16),this.Spike10.addBox(3.5,-2.5,0,0,2,4),this.Spike10.setRotationPoint(0,17,12),this.Spike11=this.model.Spike11=new ModelRenderer(this,44,16),this.Spike11.addBox(-3.5,-2.5,0,0,2,4),this.Spike11.setRotationPoint(0,17,12),this.SpikeBack0=this.model.SpikeBack0=new ModelRenderer(this,44,10),this.SpikeBack0.addBox(0,0,0,0,2,8),this.SpikeBack0.setRotationPoint(0,14,3),this.SpikeBack1=this.model.SpikeBack1=new ModelRenderer(this,44,10),this.SpikeBack1.addBox(0,0,0,0,2,8),this.SpikeBack1.setRotationPoint(0,14,-6),this.SpikeBack2=this.model.SpikeBack2=new ModelRenderer(this,44,10),this.SpikeBack2.addBox(0,0,0,0,2,8),this.SpikeBack2.setRotationPoint(4,14,-8),this.SpikeBack3=this.model.SpikeBack3=new ModelRenderer(this,44,10),this.SpikeBack3.addBox(0,0,0,0,2,8),this.SpikeBack3.setRotationPoint(-4,14,-8),this.SpikeBack4=this.model.SpikeBack4=new ModelRenderer(this,44,10),this.SpikeBack4.addBox(0,0,0,0,2,8),this.SpikeBack4.setRotationPoint(-4,14,1),this.SpikeBack5=this.model.SpikeBack5=new ModelRenderer(this,44,10),this.SpikeBack5.addBox(0,0,0,0,2,8),this.SpikeBack5.setRotationPoint(4,14,1),this.SpikeEye=this.model.SpikeEye=new ModelRenderer(this,44,14),this.SpikeEye.addBox(-3,-3,-6,0,1,2),this.SpikeEye.setRotationPoint(0,18,-8),this.SpikeEye1=this.model.SpikeEye1=new ModelRenderer(this,44,14),this.SpikeEye1.addBox(3,-3,-6,0,1,2),this.SpikeEye1.setRotationPoint(0,18,-8),this.TeethA1=this.model.TeethA1=new ModelRenderer(this,52,12),this.TeethA1.addBox(1.4,1,-16.4,0,1,4),this.TeethA1.setRotationPoint(0,18,-8),this.TeethB1=this.model.TeethB1=new ModelRenderer(this,52,12),this.TeethB1.addBox(-1.4,1,-16.4,0,1,4),this.TeethB1.setRotationPoint(0,18,-8),this.TeethC1=this.model.TeethC1=new ModelRenderer(this,50,10),this.TeethC1.addBox(1.9,1,-12.5,0,1,6),this.TeethC1.setRotationPoint(0,18,-8),this.TeethD1=this.model.TeethD1=new ModelRenderer(this,50,10),this.TeethD1.addBox(-1.9,1,-12.5,0,1,6),this.TeethD1.setRotationPoint(0,18,-8)},model2:function(){},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.LJaw.render(r),this.TailA.render(r),this.TailB.render(r),this.TailC.render(r),this.UJaw.render(r),this.Head.render(r),this.Body.render(r),this.Leg1.render(r),this.Leg3.render(r),this.Leg2.render(r),this.Leg4.render(r),this.TailD.render(r),this.Leg1A.render(r),this.Leg2A.render(r),this.Leg3A.render(r),this.Leg4A.render(r),this.UJaw2.render(r),this.LJaw2.render(r),this.TeethA.render(r),this.TeethB.render(r),this.TeethC.render(r),this.TeethD.render(r),this.TeethF.render(r),this.Spike0.render(r),this.Spike1.render(r),this.Spike2.render(r),this.Spike3.render(r),this.Spike4.render(r),this.Spike5.render(r),this.Spike6.render(r),this.Spike7.render(r),this.Spike8.render(r),this.Spike9.render(r),this.Spike10.render(r),this.Spike11.render(r),this.SpikeBack0.render(r),this.SpikeBack1.render(r),this.SpikeBack2.render(r),this.SpikeBack3.render(r),this.SpikeBack4.render(r),this.SpikeBack5.render(r),this.SpikeEye.render(r),this.SpikeEye1.render(r),this.TeethA1.render(r),this.TeethB1.render(r),this.TeethC1.render(r),this.TeethD1.render(r)},setRotationAngles:function(t,e,i,n,o,s){if(this.Head.rotateAngleX=o/57.29578,this.Head.rotateAngleY=n/57.29578,this.SpikeEye.rotateAngleX=this.Head.rotateAngleX,this.SpikeEye.rotateAngleY=this.Head.rotateAngleY,this.SpikeEye1.rotateAngleX=this.Head.rotateAngleX,this.SpikeEye1.rotateAngleY=this.Head.rotateAngleY,this.LJaw.rotateAngleY=this.Head.rotateAngleY,this.LJaw2.rotateAngleY=this.Head.rotateAngleY,this.UJaw.rotateAngleY=this.Head.rotateAngleY,this.UJaw2.rotateAngleY=this.Head.rotateAngleY,this.swimming)this.Leg1.c=9,this.Leg1.d=18,this.Leg1.e=0,this.Leg1.rotateAngleX=0,this.Leg1.rotateAngleY=-3.14159,this.Leg2.c=-9,this.Leg2.d=18,this.Leg2.e=0,this.Leg2.rotateAngleX=0,this.Leg2.rotateAngleY=-3.14159,this.Leg3.c=8,this.Leg3.d=18,this.Leg3.e=12,this.Leg3.rotateAngleX=0,this.Leg3.rotateAngleY=-3.14159,this.Leg4.c=-8,this.Leg4.d=18,this.Leg4.e=12,this.Leg4.rotateAngleX=0,this.Leg4.rotateAngleY=-3.14159,this.Leg1A.rotateAngleX=1.5708,this.Leg1A.c=5,this.Leg1A.d=19,this.Leg1A.e=-3,this.Leg2A.rotateAngleX=1.5708,this.Leg2A.c=-5,this.Leg2A.d=19,this.Leg2A.e=-3,this.Leg3A.rotateAngleX=1.5708,
this.Leg3A.c=5,this.Leg3A.d=19,this.Leg3A.e=9,this.Leg4A.rotateAngleX=1.5708,this.Leg4A.c=-5,this.Leg4A.d=19,this.Leg4A.e=9,this.Leg1.rotateAngleZ=0,this.Leg1A.rotateAngleZ=0,this.Leg3.rotateAngleZ=0,this.Leg3A.rotateAngleZ=0,this.Leg2.rotateAngleZ=0,this.Leg2A.rotateAngleZ=0,this.Leg4.rotateAngleZ=0,this.Leg4A.rotateAngleZ=0;else if(this.resting)this.Leg1.c=6,this.Leg1.d=17,this.Leg1.e=-6,this.Leg1.rotateAngleX=0,this.Leg1.rotateAngleY=-.7854,this.Leg2.rotateAngleY=.7854,this.Leg2.c=-6,this.Leg2.d=17,this.Leg2.e=-6,this.Leg2.rotateAngleX=0,this.Leg3.rotateAngleY=-.7854,this.Leg3.c=7,this.Leg3.d=17,this.Leg3.e=7,this.Leg3.rotateAngleX=0,this.Leg4.setRotationPoint(-7,17,7),this.Leg4.rotateAngleY=.7854,this.Leg4.c=-7,this.Leg4.d=17,this.Leg4.e=7,this.Leg4.rotateAngleX=0,this.Leg1A.c=5,this.Leg1A.d=17,this.Leg1A.e=-3,this.Leg1A.rotateAngleX=0,this.Leg2A.c=-5,this.Leg2A.d=17,this.Leg2A.e=-3,this.Leg2A.rotateAngleX=0,this.Leg3A.c=5,this.Leg3A.d=17,this.Leg3A.e=9,this.Leg3A.rotateAngleX=0,this.Leg4A.c=-5,this.Leg4A.d=17,this.Leg4A.e=9,this.Leg4A.rotateAngleX=0,this.Leg1.rotateAngleZ=0,this.Leg1A.rotateAngleZ=0,this.Leg3.rotateAngleZ=0,this.Leg3A.rotateAngleZ=0,this.Leg2.rotateAngleZ=0,this.Leg2A.rotateAngleZ=0,this.Leg4.rotateAngleZ=0,this.Leg4A.rotateAngleZ=0;else{this.Leg1.c=5,this.Leg1.d=19,this.Leg1.e=-3,this.Leg2.c=-5,this.Leg2.d=19,this.Leg2.e=-3,this.Leg3.c=5,this.Leg3.d=19,this.Leg3.e=9,this.Leg4.c=-5,this.Leg4.d=19,this.Leg4.e=9,this.Leg1A.c=5,this.Leg1A.d=19,this.Leg1A.e=-3,this.Leg2A.c=-5,this.Leg2A.d=19,this.Leg2A.e=-3,this.Leg3A.c=5,this.Leg3A.d=19,this.Leg3A.e=9,this.Leg4A.c=-5,this.Leg4A.d=19,this.Leg4A.e=9,this.Leg1.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Leg2.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg3.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg4.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Leg1.rotateAngleY=0,this.Leg2.rotateAngleY=0,this.Leg3.rotateAngleY=0,this.Leg4.rotateAngleY=0,this.Leg1A.rotateAngleX=this.Leg1.rotateAngleX,this.Leg2A.rotateAngleX=this.Leg2.rotateAngleX,this.Leg3A.rotateAngleX=this.Leg3.rotateAngleX,this.Leg4A.rotateAngleX=this.Leg4.rotateAngleX;var r=.261799*MathHelper.func_76134_b(t/1.919108)*e*5;this.Leg1.rotateAngleZ=r,this.Leg1A.rotateAngleZ=r,this.Leg4.rotateAngleZ=-r,this.Leg4A.rotateAngleZ=-r,this.Leg3.rotateAngleZ=r,this.Leg3A.rotateAngleZ=r,this.Leg2.rotateAngleZ=-r,this.Leg2A.rotateAngleZ=-r}this.TailA.rotateAngleY=.7*MathHelper.func_76134_b(.6662*t)*e,this.TailB.rotateAngleY=this.TailA.rotateAngleY,this.TailC.rotateAngleY=this.TailA.rotateAngleY,this.TailD.rotateAngleY=this.TailA.rotateAngleY,this.Spike0.rotateAngleY=this.TailA.rotateAngleY,this.Spike1.rotateAngleY=this.TailA.rotateAngleY,this.Spike2.rotateAngleY=this.TailA.rotateAngleY,this.Spike3.rotateAngleY=this.TailA.rotateAngleY,this.Spike4.rotateAngleY=this.TailA.rotateAngleY,this.Spike5.rotateAngleY=this.TailA.rotateAngleY,this.Spike6.rotateAngleY=this.TailA.rotateAngleY,this.Spike7.rotateAngleY=this.TailA.rotateAngleY,this.Spike8.rotateAngleY=this.TailA.rotateAngleY,this.Spike9.rotateAngleY=this.TailA.rotateAngleY,this.Spike10.rotateAngleY=this.TailA.rotateAngleY,this.Spike11.rotateAngleY=this.TailA.rotateAngleY;var a=this.biteProgress,h=a;a>=.5&&(h=.5-(a-.5)),this.UJaw.rotateAngleX=this.Head.rotateAngleX-h,this.UJaw2.rotateAngleX=this.UJaw.rotateAngleX,this.LJaw.rotateAngleX=this.Head.rotateAngleX+h/2,this.LJaw2.rotateAngleX=this.LJaw.rotateAngleX,this.TeethA.rotateAngleX=this.LJaw.rotateAngleX,this.TeethB.rotateAngleX=this.LJaw.rotateAngleX,this.TeethC.rotateAngleX=this.LJaw.rotateAngleX,this.TeethD.rotateAngleX=this.LJaw.rotateAngleX,this.TeethF.rotateAngleX=this.LJaw.rotateAngleX,this.TeethA.rotateAngleY=this.LJaw.rotateAngleY,this.TeethB.rotateAngleY=this.LJaw.rotateAngleY,this.TeethC.rotateAngleY=this.LJaw.rotateAngleY,this.TeethD.rotateAngleY=this.LJaw.rotateAngleY,this.TeethF.rotateAngleY=this.LJaw.rotateAngleY,this.TeethA1.rotateAngleX=this.UJaw.rotateAngleX,this.TeethB1.rotateAngleX=this.UJaw.rotateAngleX,this.TeethC1.rotateAngleX=this.UJaw.rotateAngleX,this.TeethD1.rotateAngleX=this.UJaw.rotateAngleX,this.TeethA1.rotateAngleY=this.UJaw.rotateAngleY,this.TeethB1.rotateAngleY=this.UJaw.rotateAngleY,this.TeethC1.rotateAngleY=this.UJaw.rotateAngleY,this.TeethD1.rotateAngleY=this.UJaw.rotateAngleY}}),ModelMoCDeer.prototype=$.extend({},ModelBase.prototype,{ModelMoCDeer:function(){ModelBase.call(this),this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-1.5,-6,-9.5,3,3,6,0),this.Head.setRotationPoint(1,11.5,-4.5),this.Neck=this.model.Neck=new ModelRenderer(this,0,9),this.Neck.addBox(-2,-2,-6,4,4,6,0),this.Neck.setRotationPoint(1,11.5,-4.5),this.Neck.rotateAngleX=-.7853981,this.LEar=this.model.LEar=new ModelRenderer(this,0,0),this.LEar.addBox(-4,-7.5,-5,2,3,1,0),this.LEar.setRotationPoint(1,11.5,-4.5),this.LEar.rotateAngleZ=.7853981,this.REar=this.model.REar=new ModelRenderer(this,0,0),this.REar.addBox(2,-7.5,-5,2,3,1,0),this.REar.setRotationPoint(1,11.5,-4.5),this.REar.rotateAngleZ=-.7853981,this.LeftAntler=this.model.LeftAntler=new ModelRenderer(this,54,0),this.LeftAntler.addBox(0,-14,-7,1,8,4,0),this.LeftAntler.setRotationPoint(1,11.5,-4.5),this.LeftAntler.rotateAngleZ=.20944,this.RightAntler=this.model.RightAntler=new ModelRenderer(this,54,0),this.RightAntler.addBox(0,-14,-7,1,8,4,0),this.RightAntler.setRotationPoint(1,11.5,-4.5),this.RightAntler.rotateAngleZ=-.20944,this.Body=this.model.Body=new ModelRenderer(this,24,12),this.Body.addBox(-2,-3,-6,6,6,14,0),this.Body.setRotationPoint(0,13,0),this.Leg1=this.model.Leg1=new ModelRenderer(this,9,20),this.Leg1.addBox(-1,0,-1,2,8,2,0),this.Leg1.setRotationPoint(3,16,-4),this.Leg2=this.model.Leg2=new ModelRenderer(this,0,20),this.Leg2.addBox(-1,0,-1,2,8,2,0),this.Leg2.setRotationPoint(-1,16,-4),this.Leg3=this.model.Leg3=new ModelRenderer(this,9,20),this.Leg3.addBox(-1,0,-1,2,8,2,0),this.Leg3.setRotationPoint(3,16,6),this.Leg4=this.model.Leg4=new ModelRenderer(this,0,20),this.Leg4.addBox(-1,0,-1,2,8,2,0),this.Leg4.setRotationPoint(-1,16,6),this.Tail=this.model.Tail=new ModelRenderer(this,50,20),this.Tail.addBox(-1.5,-1,0,3,2,4,0),this.Tail.setRotationPoint(1,11,7),this.Tail.rotateAngleX=.7854},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.Body.render(r),this.Neck.render(r),this.Head.render(r),this.Leg1.render(r),this.Leg2.render(r),this.Leg3.render(r),this.Leg4.render(r),this.Tail.render(r),this.LEar.render(r),this.REar.render(r),this.LeftAntler.render(r),this.RightAntler.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.Leg1.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Leg2.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg3.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg4.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e}}),ModelMoCDolphin.prototype=$.extend({},ModelBase.prototype,{ModelMoCDolphin:function(){ModelBase.call(this),this.Body=this.model.Body=new ModelRenderer(this,4,6),this.Body.addBox(0,0,0,6,8,18,0),this.Body.setRotationPoint(-4,17,-10),this.UHead=this.model.UHead=new ModelRenderer(this,0,0),this.UHead.addBox(0,0,0,5,7,8,0),this.UHead.addBox(0,0,0,5,7,8,1),this.UHead.setRotationPoint(-3.5,18,-16.5),this.DHead=this.model.DHead=new ModelRenderer(this,50,0),this.DHead.addBox(0,0,0,3,3,4,0),this.DHead.setRotationPoint(-2.5,21.5,-20.5),this.PTail=this.model.PTail=new ModelRenderer(this,34,9),this.PTail.addBox(0,0,0,5,5,10,0),this.PTail.setRotationPoint(-3.5,19,8),this.UpperFin=this.model.UpperFin=new ModelRenderer(this,4,12),this.UpperFin.addBox(0,0,0,1,4,8,0),this.UpperFin.setRotationPoint(-1.5,18,-4),this.UpperFin.rotateAngleX=.7853981,this.LTailFin=this.model.LTailFin=new ModelRenderer(this,34,0),this.LTailFin.addBox(0,0,0,4,1,8,.3),this.LTailFin.setRotationPoint(-2,21.5,18),this.LTailFin.rotateAngleY=.7853981,this.RTailFin=this.model.RTailFin=new ModelRenderer(this,34,0),this.RTailFin.addBox(0,0,0,4,1,8,.3),this.RTailFin.setRotationPoint(-3,21.5,15),this.RTailFin.rotateAngleY=-.7853981,this.LeftFin=this.model.LeftFin=new ModelRenderer(this,14,0),this.LeftFin.addBox(0,0,0,8,1,4,0),this.LeftFin.setRotationPoint(2,24,-7),this.LeftFin.rotateAngleY=-.5235988,this.LeftFin.rotateAngleZ=.5235988,this.RightFin=this.model.RightFin=new ModelRenderer(this,14,0),this.RightFin.addBox(0,0,0,8,1,4,0),this.RightFin.setRotationPoint(-10,27.5,-3),this.RightFin.rotateAngleY=.5235988,this.RightFin.rotateAngleZ=-.5235988},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.Body.render(r),this.PTail.render(r),this.UHead.render(r),this.DHead.render(r),this.UpperFin.render(r),this.LTailFin.render(r),this.RTailFin.render(r),this.LeftFin.render(r),this.RightFin.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.RTailFin.rotateAngleX=MathHelper.func_76134_b(.6662*t)*e,this.LTailFin.rotateAngleX=MathHelper.func_76134_b(.6662*t)*e}}),ModelMoCDragonfly.prototype=$.extend({},ModelBase.prototype,{ModelMoCDragonfly:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,4),this.Head.addBox(-1,0,-1,2,1,2),this.Head.setRotationPoint(0,21,-2),setRotation(this.Head,-2.171231,0,0),this.RAntenna=this.model.RAntenna=new ModelRenderer(this,0,7),this.RAntenna.addBox(-.5,0,-1,1,0,1),this.RAntenna.setRotationPoint(-.5,19.700001,-2.3),setRotation(this.RAntenna,-1.041001,.7853982,0),this.LAntenna=this.model.LAntenna=new ModelRenderer(this,4,7),this.LAntenna.addBox(-.5,0,-1,1,0,1),this.LAntenna.setRotationPoint(.5,19.700001,-2.3),setRotation(this.LAntenna,-1.041001,-.7853982,0),this.Mouth=this.model.Mouth=new ModelRenderer(this,0,11),this.Mouth.addBox(-.5,0,0,1,1,1),this.Mouth.setRotationPoint(0,21.1,-2.3),setRotation(this.Mouth,-2.171231,0,0),this.Thorax=this.model.Thorax=new ModelRenderer(this,0,0),this.Thorax.addBox(-1,0,-1,2,2,2),this.Thorax.setRotationPoint(0,20,-1),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,8,0),this.Abdomen.addBox(-.5,0,-1,1,7,1),this.Abdomen.setRotationPoint(0,20.5,0),setRotation(this.Abdomen,1.427659,0,0),this.FrontLegs=this.model.FrontLegs=new ModelRenderer(this,0,8),this.FrontLegs.addBox(-1,0,0,2,3,0),this.FrontLegs.setRotationPoint(0,21.5,-1.8),setRotation(this.FrontLegs,.1487144,0,0),this.MidLegs=this.model.MidLegs=new ModelRenderer(this,4,8),this.MidLegs.addBox(-1,0,0,2,3,0),this.MidLegs.setRotationPoint(0,22,-1.2),setRotation(this.MidLegs,.5948578,0,0),this.RearLegs=this.model.RearLegs=new ModelRenderer(this,8,8),this.RearLegs.addBox(-1,0,0,2,3,0),this.RearLegs.setRotationPoint(0,22,-.4),setRotation(this.RearLegs,1.070744,0,0),this.WingFrontRight=this.model.WingFrontRight=new ModelRenderer(this,0,28),this.WingFrontRight.addBox(-7,0,-1,7,0,2),this.WingFrontRight.setRotationPoint(-1,20,-1),setRotation(this.WingFrontRight,0,-.1396263,.0872665),this.WingFrontLeft=this.model.WingFrontLeft=new ModelRenderer(this,0,30),this.WingFrontLeft.addBox(0,0,-1,7,0,2),this.WingFrontLeft.setRotationPoint(1,20,-1),setRotation(this.WingFrontLeft,0,.1396263,-.0872665),this.WingRearRight=this.model.WingRearRight=new ModelRenderer(this,0,24),this.WingRearRight.addBox(-7,0,-1,7,0,2),this.WingRearRight.setRotationPoint(-1,20,-1),setRotation(this.WingRearRight,0,.349066,-.0872665),this.WingRearLeft=this.model.WingRearLeft=new ModelRenderer(this,0,26),this.WingRearLeft.addBox(0,0,-1,7,0,2),this.WingRearLeft.setRotationPoint(1,20,-1),setRotation(this.WingRearLeft,0,-.349066,.0872665)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r);var a=t,h=a.getIsFlying()||a.isOnAir();setRotationAngles(e,i,n,o,s,r,h),this.Head.render(r),this.Abdomen.render(r),this.FrontLegs.render(r),this.RAntenna.render(r),this.LAntenna.render(r),this.RearLegs.render(r),this.MidLegs.render(r),this.Mouth.render(r),this.Thorax.render(r),GL11.glPushMatrix(),GL11.glEnable(3042);var l=.6;GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,l),this.WingRearRight.render(r),this.WingFrontRight.render(r),this.WingFrontLeft.render(r),this.WingRearLeft.render(r),GL11.glDisable(3042),GL11.glPopMatrix()},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},flying:!1,setRotationAngles:function(t,e,i,n,o,s,r){var a=0,h=0,l=0;this.flying?(a=.5*MathHelper.func_76134_b(2*i),h=1.5*e,l=h):(h=2*MathHelper.func_76134_b(1.5*t+3.141593)*e,l=2*MathHelper.func_76134_b(1.5*t)*e),this.WingFrontRight.rotateAngleZ=a,this.WingRearLeft.rotateAngleZ=a,this.WingFrontLeft.rotateAngleZ=-a,this.WingRearRight.rotateAngleZ=-a,this.FrontLegs.rotateAngleX=.1487144+h,this.MidLegs.rotateAngleX=.5948578+l,this.RearLegs.rotateAngleX=1.070744+h}}),ModelMoCDuck.prototype=$.extend({},ModelBase.prototype,{ModelMoCDuck:function(){ModelBase.call(this);var t=16;this.head=this.model.head=new ModelRenderer(this,0,0),this.head.addBox(-2,-6,-2,4,6,3,0),this.head.setRotationPoint(0,-1+t,-4),this.bill=this.model.bill=new ModelRenderer(this,14,0),this.bill.addBox(-2,-4,-4,4,2,2,0),this.bill.setRotationPoint(0,-1+t,-4),this.chin=this.model.chin=new ModelRenderer(this,14,4),this.chin.addBox(-1,-2,-3,2,2,2,0),this.chin.setRotationPoint(0,-1+t,-4),this.body=this.model.body=new ModelRenderer(this,0,9),this.body.addBox(-3,-4,-3,6,8,6,0),this.body.setRotationPoint(0,t,0),this.rightLeg=this.model.rightLeg=new ModelRenderer(this,26,0),this.rightLeg.addBox(-1,0,-3,3,5,3),this.rightLeg.setRotationPoint(-2,3+t,1),this.leftLeg=this.model.leftLeg=new ModelRenderer(this,26,0),this.leftLeg.addBox(-1,0,-3,3,5,3),this.leftLeg.setRotationPoint(1,3+t,1),this.rightWing=this.model.rightWing=new ModelRenderer(this,24,13),this.rightWing.addBox(0,0,-3,1,4,6),this.rightWing.setRotationPoint(-4,-3+t,0),this.leftWing=this.model.leftWing=new ModelRenderer(this,24,13),this.leftWing.addBox(-1,0,-3,1,4,6),this.leftWing.setRotationPoint(4,-3+t,0)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=!a.field_70122_E;setRotationAngles(e,i,n,o,s,r,h),this.head.render(r),this.bill.render(r),this.chin.render(r),this.body.render(r),this.rightLeg.render(r),this.leftLeg.render(r),this.rightWing.render(r),this.leftWing.render(r)},fly:!1,setRotationAngles:function(t,e,i,n,o,s,r){if(this.head.rotateAngleX=-(o/57.295776),this.head.rotateAngleY=n/57.295776,this.bill.rotateAngleX=this.head.rotateAngleX,this.bill.rotateAngleY=this.head.rotateAngleY,this.chin.rotateAngleX=this.head.rotateAngleX,this.chin.rotateAngleY=this.head.rotateAngleY,this.body.rotateAngleX=1.570796,this.rightLeg.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.leftLeg.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.fly){var a=.6*MathHelper.func_76134_b(2.8*t+3.141593);this.rightWing.rotateAngleZ=.5+a,this.leftWing.rotateAngleZ=-.5-a}else this.rightWing.rotateAngleZ=0,this.leftWing.rotateAngleZ=0}}),ModelMoCEgg.prototype=$.extend({},ModelBase.prototype,{ModelMoCEgg:function(){ModelBase.call(this),this.Egg1=this.model.Egg1=new ModelRenderer(this,0,0),this.Egg1.addBox(0,0,0,3,3,3),this.Egg1.setRotationPoint(0,20,0),this.Egg2=this.model.Egg2=new ModelRenderer(this,10,0),this.Egg2.addBox(0,0,0,2,1,2),this.Egg2.setRotationPoint(.5,19.5,.5),this.Egg3=this.model.Egg3=new ModelRenderer(this,30,0),this.Egg3.addBox(0,0,0,2,1,2),this.Egg3.setRotationPoint(.5,22.5,.5),this.Egg4=this.model.Egg4=new ModelRenderer(this,24,0),this.Egg4.addBox(0,0,0,1,2,2),this.Egg4.setRotationPoint(-.5,20.5,.5),this.Egg5=this.model.Egg5=new ModelRenderer(this,18,0),this.Egg5.addBox(0,0,0,1,2,2),this.Egg5.setRotationPoint(2.5,20.5,.5)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Egg1.render(r),this.Egg2.render(r),this.Egg3.render(r),this.Egg4.render(r),this.Egg5.render(r)},setRotationAngles:function(t,e,i,n,o,s){}}),ModelMoCFirefly.prototype=$.extend({},ModelBase.prototype,{ModelMoCFirefly:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,4),this.Head.addBox(-1,0,-1,2,1,2),this.Head.setRotationPoint(0,22.5,-2),setRotation(this.Head,-2.171231,0,0),this.Antenna=this.model.Antenna=new ModelRenderer(this,0,7),this.Antenna.addBox(-1,0,0,2,1,0),this.Antenna.setRotationPoint(0,22.5,-3),setRotation(this.Antenna,-1.665602,0,0),this.Thorax=this.model.Thorax=new ModelRenderer(this,0,0),this.Thorax.addBox(-1,0,-1,2,2,2),this.Thorax.setRotationPoint(0,21,-1),setRotation(this.Thorax,0,0,0),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,8,0),this.Abdomen.addBox(-1,0,-1,2,2,2),this.Abdomen.setRotationPoint(0,22,0),setRotation(this.Abdomen,1.427659,0,0),this.Tail=this.model.Tail=new ModelRenderer(this,8,17),this.Tail.addBox(-1,.5,-1,2,2,1),this.Tail.setRotationPoint(0,21.299999,1.5),setRotation(this.Tail,1.13023,0,0),this.FrontLegs=this.model.FrontLegs=new ModelRenderer(this,0,7),this.FrontLegs.addBox(-1,0,0,2,2,0),this.FrontLegs.setRotationPoint(0,23,-1.8),setRotation(this.FrontLegs,-.8328009,0,0),this.MidLegs=this.model.MidLegs=new ModelRenderer(this,0,9),this.MidLegs.addBox(-1,0,0,2,2,0),this.MidLegs.setRotationPoint(0,23,-1.2),setRotation(this.MidLegs,1.070744,0,0),this.RearLegs=this.model.RearLegs=new ModelRenderer(this,0,9),this.RearLegs.addBox(-1,0,0,2,3,0),this.RearLegs.setRotationPoint(0,23,-.4),setRotation(this.RearLegs,1.249201,0,0),this.RightShellOpen=this.model.RightShellOpen=new ModelRenderer(this,0,12),this.RightShellOpen.addBox(-1,0,0,2,0,5),this.RightShellOpen.setRotationPoint(-1,21,-2),setRotation(this.RightShellOpen,1.22,0,-.645772),this.LeftShellOpen=this.model.LeftShellOpen=new ModelRenderer(this,0,12),this.LeftShellOpen.addBox(-1,0,0,2,0,5),this.LeftShellOpen.setRotationPoint(1,21,-2),setRotation(this.LeftShellOpen,1.22,0,.645772),this.RightShell=this.model.RightShell=new ModelRenderer(this,0,12),this.RightShell.addBox(-1,0,0,2,0,5),this.RightShell.setRotationPoint(-1,21,-2),setRotation(this.RightShell,.017453,0,-.645772),this.LeftShell=this.model.LeftShell=new ModelRenderer(this,0,12),this.LeftShell.addBox(-1,0,0,2,0,5),this.LeftShell.setRotationPoint(1,21,-2),setRotation(this.LeftShell,.017453,0,.645772),this.LeftWing=this.model.LeftWing=new ModelRenderer(this,15,12),this.LeftWing.addBox(-1,0,0,2,0,5),this.LeftWing.setRotationPoint(1,21,-1),setRotation(this.LeftWing,0,1.047198,0),this.RightWing=this.model.RightWing=new ModelRenderer(this,15,12),this.RightWing.addBox(-1,0,0,2,0,5),this.RightWing.setRotationPoint(-1,21,-1),setRotation(this.RightWing,0,-1.047198,0)},isFlying:!1,func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=a.getIsFlying()||a.isOnAir();if(setRotationAngles(e,i,n,o,s,r,h),this.Antenna.render(r),this.RearLegs.render(r),this.MidLegs.render(r),this.Head.render(r),this.Abdomen.render(r),this.FrontLegs.render(r),this.Thorax.render(r),this.Tail.render(r),this.isFlying)this.RightShell.render(r),this.LeftShell.render(r);else{this.RightShellOpen.render(r),this.LeftShellOpen.render(r),GL11.glPushMatrix(),GL11.glEnable(3042);var l=.6;GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,l),this.LeftWing.render(r),this.RightWing.render(r),GL11.glDisable(3042),GL11.glPopMatrix()}},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r){var a=0,h=0,l=0;if(this.isFlying){var d=.8*MathHelper.func_76134_b(1.8*i);this.RightWing.rotateAngleZ=d,this.LeftWing.rotateAngleZ=-d,a=1.5*e,h=a,l=1.4}else a=2*MathHelper.func_76134_b(1.5*t+3.141593)*e,h=2*MathHelper.func_76134_b(1.5*t)*e;this.FrontLegs.rotateAngleX=-.8328009+l+a,this.MidLegs.rotateAngleX=1.070744+h,this.RearLegs.rotateAngleX=1.249201+a}}),ModelMoCFishBowl.prototype=$.extend({},ModelBase.prototype,{numberFish:10,ModelMoCFishBowl:function(){ModelBase.call(this),this.texture.width=128,this.texture.height=64,this.Body=[],this.Tail=[],this.BowlTap=this.model.BowlTap=new ModelRenderer(this,64,24),this.BowlTap.addBox(-7.5,-7.5,-7.5,11,2,11),this.BowlTap.setRotationPoint(2,15,2),this.Bowl=this.model.Bowl=new ModelRenderer(this,0,33),this.Bowl.addBox(-8,-8,-6,16,15,16),this.Bowl.setRotationPoint(0,17,-2),this.Water=this.model.Water=new ModelRenderer(this,64,38),this.Water.addBox(-7.5,-7.5,-7.5,15,11,15),this.Water.setRotationPoint(0,20,0),this.Water.transparency=.6;for(var t=0,e=0;e<10;e++){var i=20*e;e>4&&(i-=100,t=10),this.Body[e]=new ModelRenderer(this,i,t),this.Body[e].addBox(3,-4,-4,1,5,5),this.Body[e].setRotationPoint(0,19,0),this.model["Body"+e]=this.Body[e],setRotation(this.Body[e],.7853982,e,0),this.Tail[e]=new ModelRenderer(this,i+12,t),this.Tail[e].addBox(2.9,0,0,1,3,3),this.Tail[e].setRotationPoint(0,19,0),this.model["Tail"+e]=this.Tail[e],setRotation(this.Tail[e],.7853982,e,0)}},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r);var a=t,h=a.getRotation(),l=a.getType();l<11&&l-1>=0&&(this.setRotationAngles(e,i,n,o,s,r,l-1,h),this.Body[l-1].render(r),this.Tail[l-1].render(r));var d=!1;if(GL11.glPushMatrix(),GL11.glEnable(3042),d)GL11.glBlendFunc(770,1);else{var c=.6;GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,c),this.BowlTap.render(r),this.Bowl.render(r),l>0&&this.Water.render(r)}GL11.glDisable(3042),GL11.glPopMatrix()},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r,a){}}),ModelMoCFishy.prototype=$.extend({},ModelBase.prototype,{ModelMoCFishy:function(){ModelBase.call(this),this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(0,0,-3.5,1,5,5,0),this.Body.setRotationPoint(0,18,-1),this.Body.rotateAngleX=.7853981,this.Tail=this.model.Tail=new ModelRenderer(this,12,0),this.Tail.addBox(0,0,0,1,3,3,0),this.Tail.setRotationPoint(0,20.5,3),this.Tail.rotateAngleX=.7853981},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.Body.render(r),this.Tail.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.Tail.rotateAngleY=1.4*MathHelper.func_76134_b(.6662*t)*e}}),ModelMoCFly.prototype=$.extend({},ModelBase.prototype,{ModelMoCFly:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,4),this.Head.addBox(-1,0,-1,2,1,2),this.Head.setRotationPoint(0,21.5,-2),setRotation(this.Head,-2.171231,0,0),this.Thorax=this.model.Thorax=new ModelRenderer(this,0,0),this.Thorax.addBox(-1,0,-1,2,2,2),this.Thorax.setRotationPoint(0,20.5,-1),setRotation(this.Thorax,0,0,0),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,8,0),this.Abdomen.addBox(-1,0,-1,2,2,2),this.Abdomen.setRotationPoint(0,21.5,0),setRotation(this.Abdomen,1.427659,0,0),this.Tail=this.model.Tail=new ModelRenderer(this,10,2),this.Tail.addBox(-1,0,-1,1,1,1),this.Tail.setRotationPoint(.5,21.200001,1.5),setRotation(this.Tail,1.427659,0,0),this.FrontLegs=this.model.FrontLegs=new ModelRenderer(this,0,7),this.FrontLegs.addBox(-1,0,0,2,2,0),this.FrontLegs.setRotationPoint(0,22.5,-1.8),setRotation(this.FrontLegs,.1487144,0,0),this.RearLegs=this.model.RearLegs=new ModelRenderer(this,0,11),this.RearLegs.addBox(-1,0,0,2,2,0),this.RearLegs.setRotationPoint(0,22.5,-.4),setRotation(this.RearLegs,1.070744,0,0),this.MidLegs=this.model.MidLegs=new ModelRenderer(this,0,9),this.MidLegs.addBox(-1,0,0,2,2,0),this.MidLegs.setRotationPoint(0,22.5,-1.2),setRotation(this.MidLegs,.5948578,0,0),this.LeftWing=this.model.LeftWing=new ModelRenderer(this,4,4),this.LeftWing.addBox(-1,0,.5,2,0,4),this.LeftWing.setRotationPoint(0,20.4,-1),setRotation(this.LeftWing,0,1.047198,0),this.RightWing=this.model.RightWing=new ModelRenderer(this,4,4),this.RightWing.addBox(-1,0,.5,2,0,4),this.RightWing.setRotationPoint(0,20.4,-1),setRotation(this.RightWing,0,-1.047198,0),this.FoldedWings=this.model.FoldedWings=new ModelRenderer(this,4,4),this.FoldedWings.addBox(-1,0,0,2,0,4),this.FoldedWings.setRotationPoint(0,20.5,-2),setRotation(this.FoldedWings,.0872665,0,0)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.func_78088_a.prototype.call(this,t,e,i,n,o,s,r);var a=t,h=a.getIsFlying()||a.isOnAir();if(setRotationAngles(e,i,n,o,s,r,!h),this.FrontLegs.render(r),this.RearLegs.render(r),this.MidLegs.render(r),this.Head.render(r),this.Tail.render(r),this.Abdomen.render(r),this.Thorax.render(r),h){GL11.glPushMatrix(),GL11.glEnable(3042);var l=.6;GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,l),this.LeftWing.render(r),this.RightWing.render(r),GL11.glDisable(3042),GL11.glPopMatrix()}else this.FoldedWings.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r){var a=.7*MathHelper.func_76134_b(3*i);this.RightWing.rotateAngleZ=a,this.LeftWing.rotateAngleZ=-a;var h=0,l=0;r?(h=2*MathHelper.func_76134_b(1.5*t+3.141593)*e,l=2*MathHelper.func_76134_b(1.5*t)*e):(h=1.5*e,l=h),this.FrontLegs.rotateAngleX=.1487144+h,this.MidLegs.rotateAngleX=.5948578+l,this.RearLegs.rotateAngleX=1.070744+h}}),ModelMoCFox.prototype=$.extend({},ModelBase.prototype,{ModelMoCFox:function(){ModelBase.call(this);var t=8;this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(0,0,0,6,6,12,0),this.Body.setRotationPoint(-4,10,-6),this.Head=this.model.Head=new ModelRenderer(this,0,20),this.Head.addBox(-3,-3,-4,6,6,4,0),this.Head.setRotationPoint(-1,11,-6),this.Snout=this.model.Snout=new ModelRenderer(this,20,20),this.Snout.addBox(-1,1,-7,2,2,4,0),this.Snout.setRotationPoint(-1,11,-6),this.Ears=this.model.Ears=new ModelRenderer(this,50,20),this.Ears.addBox(-3,-6,-2,6,4,1,0),this.Ears.setRotationPoint(-1,11,-6),this.Tail=this.model.Tail=new ModelRenderer(this,32,20),this.Tail.addBox(-5,-5,-2,3,3,8,0),this.Tail.setRotationPoint(2.5,15,5),this.Tail.rotateAngleX=-.5235988,this.Leg1=this.model.Leg1=new ModelRenderer(this,0,0),this.Leg1.addBox(-2,0,-2,3,t,3,0),this.Leg1.setRotationPoint(-2,24-t,5),this.Leg2=this.model.Leg2=new ModelRenderer(this,0,0),this.Leg2.addBox(-2,0,-2,3,t,3,0),this.Leg2.setRotationPoint(1,24-t,5),this.Leg3=this.model.Leg3=new ModelRenderer(this,0,0),this.Leg3.addBox(-2,0,-2,3,t,3,0),this.Leg3.setRotationPoint(-2,24-t,-4),this.Leg4=this.model.Leg4=new ModelRenderer(this,0,0),this.Leg4.addBox(-2,0,-2,3,t,3,0),this.Leg4.setRotationPoint(1,24-t,-4)},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.Body.render(r),this.Leg1.render(r),this.Leg2.render(r),this.Leg3.render(r),this.Leg4.render(r),this.Head.render(r),this.Snout.render(r),this.Tail.render(r),this.Ears.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.Head.rotateAngleY=n/57.29578,this.Head.rotateAngleX=o/57.29578,this.Snout.rotateAngleY=this.Head.rotateAngleY,this.Snout.rotateAngleX=this.Head.rotateAngleX,this.Ears.rotateAngleY=this.Head.rotateAngleY,this.Ears.rotateAngleX=this.Head.rotateAngleX,this.Leg1.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Leg2.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg3.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg4.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e}}),ModelMoCGoat.prototype=$.extend({},ModelBase.prototype,{typeInt:0,attacking:0,edad:0,bleat:!1,legMov:0,earMov:0,tailMov:0,eatMov:0,ModelMoCGoat:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=32,this.Leg1=this.model.Leg1=new ModelRenderer(this,0,23),this.Leg1.addBox(-1,0,-1,2,7,2),this.Leg1.setRotationPoint(2,17,-6),this.Leg2=this.model.Leg2=new ModelRenderer(this,0,23),this.Leg2.addBox(-1,0,-1,2,7,2),this.Leg2.setRotationPoint(-2,17,-6),this.Leg3=this.model.Leg3=new ModelRenderer(this,0,23),this.Leg3.addBox(-1,0,-1,2,7,2),this.Leg3.setRotationPoint(-2,17,6),this.Leg4=this.model.Leg4=new ModelRenderer(this,0,23),this.Leg4.addBox(-1,0,-1,2,7,2),this.Leg4.setRotationPoint(2,17,6),this.Body=this.model.Body=new ModelRenderer(this,20,8),this.Body.addBox(-3,-4,-8,6,8,16),this.Body.setRotationPoint(0,13,0),this.Tail=this.model.Tail=new ModelRenderer(this,22,8),this.Tail.addBox(-1.5,-1,0,3,2,4),this.Tail.setRotationPoint(0,10,8),this.LEar=this.model.LEar=new ModelRenderer(this,52,8),this.LEar.addBox(1.5,-2,0,2,1,1),this.LEar.setRotationPoint(0,8,-12),this.REar=this.model.REar=new ModelRenderer(this,52,8),this.REar.addBox(-3.5,-2,0,2,1,1),this.REar.setRotationPoint(0,8,-12),this.Head=this.model.Head=new ModelRenderer(this,52,16),this.Head.addBox(-1.5,-2,-2,3,5,3),this.Head.setRotationPoint(0,8,-12),this.Nose=this.model.Nose=new ModelRenderer(this,52,10),this.Nose.addBox(-1.5,-1,-5,3,3,3),this.Nose.setRotationPoint(0,8,-12),this.Tongue=this.model.Tongue=new ModelRenderer(this,56,5),this.Tongue.addBox(-.5,2,-5,1,0,3),this.Tongue.setRotationPoint(0,8,-12),this.Mouth=this.model.Mouth=new ModelRenderer(this,54,0),this.Mouth.addBox(-1,2,-5,2,1,3),this.Mouth.setRotationPoint(0,8,-12),this.RHorn1=this.model.RHorn1=new ModelRenderer(this,0,0),this.RHorn1.addBox(-1.5,-3,-.7,1,1,1,.1),this.RHorn1.setRotationPoint(0,8,-12),this.RHorn2=this.model.RHorn2=new ModelRenderer(this,0,0),this.RHorn2.addBox(-1.9,-4,-.2,1,1,1),this.RHorn2.setRotationPoint(0,8,-12),this.RHorn3=this.model.RHorn3=new ModelRenderer(this,0,0),this.RHorn3.addBox(-2.1,-4.8,.5,1,1,1,-.05),this.RHorn3.setRotationPoint(0,8,-12),this.RHorn4=this.model.RHorn4=new ModelRenderer(this,0,0),this.RHorn4.addBox(-2.3,-5.2,1.4,1,1,1,-.1),this.RHorn4.setRotationPoint(0,8,-12),this.RHorn5=this.model.RHorn5=new ModelRenderer(this,0,0),this.RHorn5.addBox(-2.6,-4.9,2,1,1,1,-.15),this.RHorn5.setRotationPoint(0,8,-12),this.LHorn1=this.model.LHorn1=new ModelRenderer(this,0,0),this.LHorn1.addBox(.5,-3,-.7,1,1,1,.1),this.LHorn1.setRotationPoint(0,8,-12),this.LHorn2=this.model.LHorn2=new ModelRenderer(this,0,0),this.LHorn2.addBox(.9,-4,-.2,1,1,1),this.LHorn2.setRotationPoint(0,8,-12),this.LHorn3=this.model.LHorn3=new ModelRenderer(this,0,0),this.LHorn3.addBox(1.2,-4.9,.5,1,1,1,-.05),this.LHorn3.setRotationPoint(0,8,-12),this.LHorn4=this.model.LHorn4=new ModelRenderer(this,0,0),this.LHorn4.addBox(1.4,-5.3,1.4,1,1,1,-.1),this.LHorn4.setRotationPoint(0,8,-12),this.LHorn5=this.model.LHorn5=new ModelRenderer(this,0,0),this.LHorn5.addBox(1.7,-4.9,2.1,1,1,1,-.15),this.LHorn5.setRotationPoint(0,8,-12),this.Goatie=this.model.Goatie=new ModelRenderer(this,52,5),this.Goatie.addBox(-.5,3,-4,1,2,1),this.Goatie.setRotationPoint(0,8,-12),this.Neck=this.model.Neck=new ModelRenderer(this,18,14),this.Neck.addBox(-1.5,-2,-5,3,4,6,-.2),this.Neck.setRotationPoint(0,11,-8),this.Neck.rotateAngleX=-.418879,this.Tits=this.model.Tits=new ModelRenderer(this,18,0),this.Tits.addBox(-2.5,0,-2,5,1,4),this.Tits.setRotationPoint(0,17,3)},func_78088_a:function(t,e,i,n,o,s,r){if(ModelBase.func_78088_a.prototype.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Leg1.render(r),this.Leg2.render(r),this.Leg3.render(r),this.Leg4.render(r),this.Body.render(r),this.Tail.render(r),this.Neck.render(r),this.oneHeadInt>1&&this.oneHeadInt<5&&this.Tits.render(r),GL11.glPushMatrix(),0!=this.attacking){var a=this.attacking/150-.2,h=this.attacking/450-.0666667;GL11.glTranslatef(0,a,-h)}this.LEar.render(r),this.REar.render(r),this.Head.render(r),this.Nose.render(r),this.oneHeadInt>1&&(this.edad>.7&&(this.RHorn1.render(r),this.LHorn1.render(r)),this.edad>.8&&(this.RHorn2.render(r),this.LHorn2.render(r))),this.oneHeadInt>4&&(this.edad>.8&&(this.RHorn3.render(r),this.LHorn3.render(r)),this.edad>.85&&(this.RHorn4.render(r),this.LHorn4.render(r)),this.edad>.9&&(this.RHorn5.render(r),this.LHorn5.render(r))),0==this.eatMov||this.bleat||GL11.glTranslatef(this.eatMov/100,0,0),this.oneHeadInt>4&&this.edad>.9&&this.Goatie.render(r),this.Tongue.render(r),this.Mouth.render(r),GL11.glPopMatrix()},setRotationAngles:function(t,e,i,n,o,s){this.Leg1.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Leg2.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg3.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg4.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e;var r=.5235988+o/57.29578;n>20&&(n=20),n<-20&&(n=-20),this.Head.rotateAngleY=n/57.29578,this.Neck.rotateAngleX=-.5235988,this.Tail.rotateAngleX=this.tailMov/57.29578,
this.Head.rotateAngleX=r,this.bleat&&(this.Head.rotateAngleX=-.261799),0!=this.attacking&&(this.Head.rotateAngleX=this.attacking/57.29578,this.Neck.rotateAngleX=(1.33*this.attacking-70)/57.29578,0!=this.legMov&&(this.Leg1.rotateAngleX=this.legMov/57.29578)),this.LEar.rotateAngleX=this.Head.rotateAngleX,this.REar.rotateAngleX=this.Head.rotateAngleX,this.bleat||0!=this.attacking||(this.LEar.rotateAngleX=r+this.earMov/57.29578,this.REar.rotateAngleX=r+this.earMov/57.29578),this.Nose.rotateAngleX=this.Head.rotateAngleX,this.Mouth.rotateAngleX=this.Head.rotateAngleX,this.Tongue.rotateAngleX=this.Head.rotateAngleX,this.Goatie.rotateAngleX=this.Head.rotateAngleX,this.RHorn1.rotateAngleX=this.Head.rotateAngleX,this.LHorn1.rotateAngleX=this.Head.rotateAngleX,this.RHorn2.rotateAngleX=this.Head.rotateAngleX,this.LHorn2.rotateAngleX=this.Head.rotateAngleX,this.RHorn3.rotateAngleX=this.Head.rotateAngleX,this.LHorn3.rotateAngleX=this.Head.rotateAngleX,this.RHorn4.rotateAngleX=this.Head.rotateAngleX,this.LHorn4.rotateAngleX=this.Head.rotateAngleX,this.RHorn5.rotateAngleX=this.Head.rotateAngleX,this.LHorn5.rotateAngleX=this.Head.rotateAngleX,this.bleat&&(this.Mouth.rotateAngleX=0,this.Tongue.rotateAngleX=-.0872665,this.Goatie.rotateAngleX=0),this.Nose.rotateAngleY=this.Head.rotateAngleY,this.Mouth.rotateAngleY=this.Head.rotateAngleY,this.Tongue.rotateAngleY=this.Head.rotateAngleY,this.LEar.rotateAngleY=this.Head.rotateAngleY,this.REar.rotateAngleY=this.Head.rotateAngleY,this.Goatie.rotateAngleY=this.Head.rotateAngleY,this.RHorn1.rotateAngleY=this.Head.rotateAngleY,this.LHorn1.rotateAngleY=this.Head.rotateAngleY,this.RHorn2.rotateAngleY=this.Head.rotateAngleY,this.LHorn2.rotateAngleY=this.Head.rotateAngleY,this.RHorn3.rotateAngleY=this.Head.rotateAngleY,this.LHorn3.rotateAngleY=this.Head.rotateAngleY,this.RHorn4.rotateAngleY=this.Head.rotateAngleY,this.LHorn4.rotateAngleY=this.Head.rotateAngleY,this.RHorn5.rotateAngleY=this.Head.rotateAngleY,this.LHorn5.rotateAngleY=this.Head.rotateAngleY}}),ModelMoCGolem.prototype=$.extend({},ModelBase.prototype,{w:32,h:16,ModelMoCGolem:function(){ModelBase.call(this),this.blocks=[],this.blocksText=[],this.texture.width=128,this.texture.height=128;for(var t=0;t<23;t+=1)this.blocks[t]=[],this.blocksText[t]=30;this.head=this.model.head=new ModelRenderer(this,96,64),this.head.addBox(-4,-4,-4,8,8,8),this.head.setRotationPoint(0,-10,0),setRotation(this.head,0,.7853982,0),this.chest=this.model.chest=new ModelRenderer(this,96,96),this.chest.addBox(-4,-4,-4,8,8,8),this.chest.setRotationPoint(0,-3,-7),setRotation(this.chest,0,.7853982,0),this.headb=new ModelRenderer(this,96,80),this.headb.addBox(-4,-4,-4,8,8,8),this.headb.setRotationPoint(0,-10,0),setRotation(this.headb,0,.7853982,0),this.chestb=new ModelRenderer(this,96,112),this.chestb.addBox(-4,-4,-4,8,8,8),this.chestb.setRotationPoint(0,-3,-7),setRotation(this.chestb,0,.7853982,0);for(var t=0;t<28;t+=1){var e=Math.floor(t/8)*this.w,i=t%8*this.h;this.blocks[0][t]=new ModelRenderer(this,e,i),this.blocks[0][t].addBox(-4,3,-4,8,8,8),this.blocks[0][t].setRotationPoint(0,-3,0),this.setRotationG(this.blocks[0][t],-97,0,-40),this.blocks[1][t]=new ModelRenderer(this,e,i),this.blocks[1][t].addBox(-4,3,-4,8,8,8),this.blocks[1][t].setRotationPoint(0,-3,0),this.setRotationG(this.blocks[1][t],-55,0,-41),this.blocks[2][t]=new ModelRenderer(this,e,i),this.blocks[2][t].addBox(-4,3,-4,8,8,8),this.blocks[2][t].setRotationPoint(0,-3,0),this.setRotationG(this.blocks[2][t],-97,0,40),this.blocks[3][t]=new ModelRenderer(this,e,i),this.blocks[3][t].addBox(-4,3,-4,8,8,8),this.blocks[3][t].setRotationPoint(0,-3,0),this.setRotationG(this.blocks[3][t],-55,0,41),this.blocks[4][t]=new ModelRenderer(this,e,i),this.blocks[4][t].addBox(-7,-14,-1,8,8,8),this.blocks[4][t].setRotationPoint(0,6,3),setRotation(this.blocks[4][t],0,.7853982,0),this.blocks[5][t]=new ModelRenderer(this,e,i),this.blocks[5][t].addBox(-4,3,-4,8,8,8),this.blocks[5][t].setRotationPoint(0,-3,0),setRotation(this.blocks[5][t],1.919862,0,.6981317),this.blocks[6][t]=new ModelRenderer(this,e,i),this.blocks[6][t].addBox(-4,3,-4,8,8,8),this.blocks[6][t].setRotationPoint(0,-3,0),setRotation(this.blocks[6][t],1.183003,0,.6981317),this.blocks[7][t]=new ModelRenderer(this,e,i),this.blocks[7][t].addBox(-4,3,-4,8,8,8),this.blocks[7][t].setRotationPoint(0,-3,0),setRotation(this.blocks[7][t],1.919862,0,-.6981317),this.blocks[8][t]=new ModelRenderer(this,e,i),this.blocks[8][t].addBox(-4,3,-4,8,8,8),this.blocks[8][t].setRotationPoint(0,-3,0),setRotation(this.blocks[8][t],1.183003,0,-.6981317),this.blocks[9][t]=new ModelRenderer(this,e,i),this.blocks[9][t].addBox(0,-2,-4,8,8,8),this.blocks[9][t].setRotationPoint(8,-3,0),setRotation(this.blocks[9][t],0,0,-.6981317),this.blocks[10][t]=new ModelRenderer(this,e,i),this.blocks[10][t].addBox(2,4,-4,8,8,8),this.blocks[10][t].setRotationPoint(8,-3,0),setRotation(this.blocks[10][t],0,0,-.20944),this.blocks[11][t]=new ModelRenderer(this,e,i),this.blocks[11][t].addBox(4.5,11,-4,8,8,8),this.blocks[11][t].setRotationPoint(8,-3,0),this.blocks[12][t]=new ModelRenderer(this,e,i),this.blocks[12][t].addBox(-8,-2,-4,8,8,8),this.blocks[12][t].setRotationPoint(-8,-3,0),setRotation(this.blocks[12][t],0,0,.6981317),this.blocks[13][t]=new ModelRenderer(this,e,i),this.blocks[13][t].addBox(-10,4,-4,8,8,8),this.blocks[13][t].setRotationPoint(-8,-3,0),setRotation(this.blocks[13][t],0,0,.20944),this.blocks[14][t]=new ModelRenderer(this,e,i),this.blocks[14][t].addBox(-12.5,11,-4,8,8,8),this.blocks[14][t].setRotationPoint(-8,-3,0),this.blocks[15][t]=new ModelRenderer(this,e,i),this.blocks[15][t].addBox(-3.5,0,-4,8,8,8),this.blocks[15][t].setRotationPoint(5,4,0),setRotation(this.blocks[15][t],-.349066,0,0),this.blocks[16][t]=new ModelRenderer(this,e,i),this.blocks[16][t].addBox(-4,6,-7,8,8,8),this.blocks[16][t].setRotationPoint(5,4,0),this.blocks[17][t]=new ModelRenderer(this,e,i),this.blocks[17][t].addBox(-3.5,12,-5,8,8,8),this.blocks[17][t].setRotationPoint(5,4,0),this.blocks[18][t]=new ModelRenderer(this,e,i),this.blocks[18][t].addBox(-4.5,0,-4,8,8,8),this.blocks[18][t].setRotationPoint(-5,4,0),setRotation(this.blocks[18][t],-.349066,0,0),this.blocks[19][t]=new ModelRenderer(this,e,i),this.blocks[19][t].addBox(-4,6,-7,8,8,8),this.blocks[19][t].setRotationPoint(-5,4,0),this.blocks[20][t]=new ModelRenderer(this,e,i),this.blocks[20][t].addBox(-4.5,12,-5,8,8,8),this.blocks[20][t].setRotationPoint(-5,4,0),this.blocks[21][t]=new ModelRenderer(this,e,i),this.blocks[21][t].addBox(0,-4,-8,8,8,8),this.blocks[21][t].setRotationPoint(0,6,3),setRotation(this.blocks[21][t],0,.7853982,0),this.blocks[22][t]=new ModelRenderer(this,e,i),this.blocks[22][t].addBox(-4,-4,-4,8,8,8),this.blocks[22][t].setRotationPoint(0,6,3),setRotation(this.blocks[22][t],-.7435722,0,0)}this.setBlockType()},func_78088_a:function(t,e,i,n,o,s,r){for(var a=t,h=a.openChest(),l=a.isMissingCubes(),d=a.getGolemState()>1,c=a.tcounter>25,u=0;u<23;u++)this.blocksText[u]=a.getBlockText(u);setRotationAngles(e,i,n,o,s,r,h,l,c);for(var u=0;u<23;u++)30!=this.blocksText[u]&&this.blocks[u][this.blocksText[u]].render(r);d?(this.headb.render(r),this.chestb.render(r)):(this.head.render(r),this.chest.render(r))},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationG:function(t,e,i,n){t.rotateAngleX=e/57.29578,t.rotateAngleY=i/57.29578,t.rotateAngleZ=n/57.29578},block:0,details:{block:{name:"Block Type",type:"select",options:{Stone:0,Dirt:1,Cobblestone:2,Planks:3,Sand:4,Gravel:5,Wood:6,Gold:7,Glass:8,Wool:9,Leaves:10,Iron:11,Briks:12,"Sand Stone":13,Obsidian:14,Diamond:15,Workbench:16,Furnace:17,Ice:18,Cactus:19,Clay:20,Esmerald:21,Pumpkin:22,Netherrack:23,"Diamond Ore":24,"Glow Stone":25,"Stone Bricks":26,"Nether Bricks":27},persistent:!0}},setBlockType:function(){for(var t=0;t<23;t++)this.blocksText[t]=this.block,this.model["block-"+t]=this.blocks[t][this.block]},setRotationAngles:function(t,e,i,n,o,s,r,a,h){this.block!=this.details.block.value&&(this.setBlockType(),this.needsRebuild="yes",this.details.block.value=this.block);var l=1.2*MathHelper.func_76134_b(.6662*t+3.141593)*e,d=1.2*MathHelper.func_76134_b(.6662*t)*e,c=-(.05*MathHelper.func_76134_b(.09*i))+.05,u=.05*MathHelper.func_76134_b(.09*i)-.05;this.head.rotateAngleY=(45+n)/57.29578,this.headb.rotateAngleY=(45+n)/57.29578,a?(this.chest.rotateAngleY=45/57.29578+i/2,this.chestb.rotateAngleY=45/57.29578+i/2):(this.chest.rotateAngleY=45/57.29578,this.chestb.rotateAngleY=45/57.29578),30!=this.blocksText[15]&&(this.blocks[15][this.blocksText[15]].rotateAngleX=-20/57.29578+d),30!=this.blocksText[16]&&(this.blocks[16][this.blocksText[16]].rotateAngleX=d),30!=this.blocksText[17]&&(this.blocks[17][this.blocksText[17]].rotateAngleX=d),30!=this.blocksText[18]&&(this.blocks[18][this.blocksText[18]].rotateAngleX=-20/57.29578+l),30!=this.blocksText[19]&&(this.blocks[19][this.blocksText[19]].rotateAngleX=l),30!=this.blocksText[20]&&(this.blocks[20][this.blocksText[20]].rotateAngleX=l),h&&(d=-90/57.29578,l=-90/57.29578,c=0,u=0),30!=this.blocksText[12]&&(this.blocks[12][this.blocksText[12]].rotateAngleZ=40/57.29578+c,this.blocks[12][this.blocksText[12]].rotateAngleX=d),30!=this.blocksText[13]&&(this.blocks[13][this.blocksText[13]].rotateAngleZ=12/57.29578+c,this.blocks[13][this.blocksText[13]].rotateAngleX=d),30!=this.blocksText[14]&&(this.blocks[14][this.blocksText[14]].rotateAngleZ=c,this.blocks[14][this.blocksText[14]].rotateAngleX=d),30!=this.blocksText[9]&&(this.blocks[9][this.blocksText[9]].rotateAngleZ=-40/57.29578+u,this.blocks[9][this.blocksText[9]].rotateAngleX=l),30!=this.blocksText[10]&&(this.blocks[10][this.blocksText[10]].rotateAngleZ=-12/57.29578+u,this.blocks[10][this.blocksText[10]].rotateAngleX=l),30!=this.blocksText[11]&&(this.blocks[11][this.blocksText[11]].rotateAngleZ=u,this.blocks[11][this.blocksText[11]].rotateAngleX=l)}}),ModelMoCJellyFish.prototype=$.extend({},ModelBase.prototype,{ModelMoCJellyFish:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=16,this.Top=this.model.Top=new ModelRenderer(this,0,10),this.Top.addBox(-2.5,0,-2.5,5,1,5),this.Top.setRotationPoint(0,11,0),this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-4,0,-4,8,2,8),this.Head.setRotationPoint(0,12,0),this.HeadSmall=this.model.HeadSmall=new ModelRenderer(this,24,0),this.HeadSmall.addBox(-2,0,-2,4,3,4),this.HeadSmall.setRotationPoint(0,12.5,0),this.Body=this.model.Body=new ModelRenderer(this,36,0),this.Body.addBox(-3.5,0,-3.5,7,7,7),this.Body.setRotationPoint(0,13.8,0),this.BodyCenter=this.model.BodyCenter=new ModelRenderer(this,0,0),this.BodyCenter.addBox(-1,0,-1,2,3,2),this.BodyCenter.setRotationPoint(0,15.5,0),this.BodyBottom=this.model.BodyBottom=new ModelRenderer(this,20,10),this.BodyBottom.addBox(-2,0,-2,4,2,4),this.BodyBottom.setRotationPoint(0,18.299999,0),this.Side1=this.model.Side1=new ModelRenderer(this,20,10),this.Side1.addBox(-2,5,0,4,2,4),this.Side1.setRotationPoint(0,12.5,0),setRotation(this.Side1,-.7679449,0,0),this.Side2=this.model.Side2=new ModelRenderer(this,20,10),this.Side2.addBox(-4,5,-2,4,2,4),this.Side2.setRotationPoint(0,12.5,0),setRotation(this.Side2,0,0,-.7679449),this.Side3=this.model.Side3=new ModelRenderer(this,20,10),this.Side3.addBox(0,5,-2,4,2,4),this.Side3.setRotationPoint(0,12.5,0),setRotation(this.Side3,0,0,.7679449),this.Side4=this.model.Side4=new ModelRenderer(this,20,10),this.Side4.addBox(-2,5,-4,4,2,4),this.Side4.setRotationPoint(0,12.5,0),setRotation(this.Side4,.7679449,0,0),this.LegSmall1=this.model.LegSmall1=new ModelRenderer(this,60,2),this.LegSmall1.addBox(-1,0,-1,1,3,1),this.LegSmall1.setRotationPoint(0,18.5,0),this.LegC1=this.model.LegC1=new ModelRenderer(this,15,10),this.LegC1.addBox(-1,0,-1,1,4,1),this.LegC1.setRotationPoint(-.5,15.5,-.5),setRotation(this.LegC1,-.26025,0,.1487144),this.LegC2=this.model.LegC2=new ModelRenderer(this,15,10),this.LegC2.addBox(-1,0,0,1,4,1),this.LegC2.setRotationPoint(.5,15.5,-.5),setRotation(this.LegC2,.1487144,1.747395,0),this.LegC3=this.model.LegC3=new ModelRenderer(this,15,10),this.LegC3.addBox(-1,0,0,1,4,1),this.LegC3.setRotationPoint(-.5,15.5,.5),setRotation(this.LegC3,.111536,.3717861,.2230717),this.Leg1=this.model.Leg1=new ModelRenderer(this,0,10),this.Leg1.addBox(-.5,0,-.5,1,4,1),this.Leg1.setRotationPoint(0,20,2.5),this.Leg2=this.model.Leg2=new ModelRenderer(this,0,10),this.Leg2.addBox(-.5,0,-.5,1,4,1),this.Leg2.setRotationPoint(0,20,-2.5),this.Leg3=this.model.Leg3=new ModelRenderer(this,0,10),this.Leg3.addBox(-.5,0,-.5,1,4,1),this.Leg3.setRotationPoint(2.5,20,0),this.Leg4=this.model.Leg4=new ModelRenderer(this,0,10),this.Leg4.addBox(-.5,0,-.5,1,4,1),this.Leg4.setRotationPoint(-2.5,20,0),this.Leg5=this.model.Leg5=new ModelRenderer(this,0,10),this.Leg5.addBox(-.5,0,-.5,1,4,1),this.Leg5.setRotationPoint(2,20,2),setRotation(this.Leg5,0,.7853982,0),this.Leg6=this.model.Leg6=new ModelRenderer(this,0,10),this.Leg6.addBox(-.5,0,-.5,1,4,1),this.Leg6.setRotationPoint(2,20,-2),setRotation(this.Leg6,0,.7853982,0),this.Leg7=this.model.Leg7=new ModelRenderer(this,0,10),this.Leg7.addBox(-.5,0,-.5,1,4,1),this.Leg7.setRotationPoint(-2,20,-2),setRotation(this.Leg7,0,.7853982,0),this.Leg8=this.model.Leg8=new ModelRenderer(this,60,0),this.Leg8.addBox(0,0,0,1,5,1),this.Leg8.setRotationPoint(0,18.5,0),this.Leg9=this.model.Leg9=new ModelRenderer(this,0,10),this.Leg9.addBox(-.5,0,-.5,1,4,1),this.Leg9.setRotationPoint(-2,20,2),setRotation(this.Leg9,0,.7853982,0)},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.Top.render(r),this.Head.render(r),this.HeadSmall.render(r),this.Body.render(r),this.BodyCenter.render(r),this.BodyBottom.render(r),this.Side1.render(r),this.Side2.render(r),this.Side3.render(r),this.Side4.render(r),this.LegSmall1.render(r),this.LegC1.render(r),this.LegC2.render(r),this.LegC3.render(r),this.Leg1.render(r),this.Leg2.render(r),this.Leg3.render(r),this.Leg4.render(r),this.Leg5.render(r),this.Leg6.render(r),this.Leg7.render(r),this.Leg8.render(r),this.Leg9.render(r)},setRotationAngles:function(t,e,i,n,o,s){var r=2*e;r>1&&(r=1),this.LegSmall1.rotateAngleX=r,this.LegC1.rotateAngleX=r,this.LegC2.rotateAngleX=r,this.LegC3.rotateAngleX=r,this.Leg1.rotateAngleX=r,this.Leg2.rotateAngleX=r,this.Leg3.rotateAngleX=r,this.Leg4.rotateAngleX=r,this.Leg5.rotateAngleX=r,this.Leg6.rotateAngleX=r,this.Leg7.rotateAngleX=r,this.Leg8.rotateAngleX=r,this.Leg9.rotateAngleX=r},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n}}),ModelMoCKitty.prototype=$.extend({},ModelBiped.prototype,{isSitting:!1,isSwinging:!1,swingProgress:0,parts:ModelMoCKitty.parts=9,kittystate:0,ModelMoCKitty:function(t,e){t=t||0,e=e||0,ModelBiped.call(this,t,e,64,32),this.field_78116_c=this.model.field_78116_c=new ModelRenderer(this,1,1),this.field_78116_c.addBox(-2.5,-3,-4,5,4,4,t),this.field_78116_c.setRotationPoint(0,0+e,-2),this.field_78114_d=this.model.field_78114_d=new ModelRenderer(this,0,0),this.field_78114_d.addBox(-4,-3,-4,1,1,1,t+.5),this.field_78114_d.setRotationPoint(0,0+e,-2),this.bipedHeadParts=[],this.bipedHeadParts[0]=new ModelRenderer(this,16,0),this.bipedHeadParts[0].addBox(-2,-5,-3,1,1,1,t),this.bipedHeadParts[0].setRotationPoint(0,0+e,-2),this.bipedHeadParts[1]=new ModelRenderer(this,16,0),this.bipedHeadParts[1].mirror=!0,this.bipedHeadParts[1].addBox(1,-5,-3,1,1,1,t),this.bipedHeadParts[1].setRotationPoint(0,0+e,-2),this.bipedHeadParts[2]=new ModelRenderer(this,20,0),this.bipedHeadParts[2].addBox(-2.5,-4,-3,2,1,1,t),this.bipedHeadParts[2].setRotationPoint(0,0+e,-2),this.bipedHeadParts[3]=new ModelRenderer(this,20,0),this.bipedHeadParts[3].mirror=!0,this.bipedHeadParts[3].addBox(.5,-4,-3,2,1,1,t),this.bipedHeadParts[3].setRotationPoint(0,0+e,-2),this.bipedHeadParts[4]=new ModelRenderer(this,40,0),this.bipedHeadParts[4].addBox(-4,-1.5,-5,3,3,1,t),this.bipedHeadParts[4].setRotationPoint(0,0+e,-2),this.bipedHeadParts[5]=new ModelRenderer(this,40,0),this.bipedHeadParts[5].mirror=!0,this.bipedHeadParts[5].addBox(1,-1.5,-5,3,3,1,t),this.bipedHeadParts[5].setRotationPoint(0,0+e,-2),this.bipedHeadParts[6]=new ModelRenderer(this,21,6),this.bipedHeadParts[6].addBox(-1,-1,-5,2,2,1,t),this.bipedHeadParts[6].setRotationPoint(0,0+e,-2),this.bipedHeadParts[7]=new ModelRenderer(this,50,0),this.bipedHeadParts[7].addBox(-2.5,.5,-1,5,4,1,t),this.bipedHeadParts[7].setRotationPoint(0,0+e,-2),this.bipedHeadParts[8]=new ModelRenderer(this,60,0),this.bipedHeadParts[8].addBox(-1.5,-2,-4.1,3,1,1,t),this.bipedHeadParts[8].setRotationPoint(0,0+e,-2);for(var i=0;i<9;i++)this.model["head-"+i]=this.bipedHeadParts[i];this.field_78115_e=this.model.field_78115_e=new ModelRenderer(this,20,0),this.field_78115_e.addBox(-2.5,-2,-0,5,5,10,t),this.field_78115_e.setRotationPoint(0,0+e,-2),this.field_78112_f=this.model.field_78112_f=new ModelRenderer(this,0,9),this.field_78112_f.addBox(-1,0,-1,2,6,2,t),this.field_78112_f.setRotationPoint(-1.5,3+e,-1),this.field_78113_g=this.model.field_78113_g=new ModelRenderer(this,0,9),this.field_78113_g.mirror=!0,this.field_78113_g.addBox(-1,0,-1,2,6,2,t),this.field_78113_g.setRotationPoint(1.5,3+e,-1),this.field_78123_h=this.model.field_78123_h=new ModelRenderer(this,8,9),this.field_78123_h.addBox(-1,0,-1,2,6,2,t),this.field_78123_h.setRotationPoint(-1.5,3+e,7),this.field_78124_i=this.model.field_78124_i=new ModelRenderer(this,8,9),this.field_78124_i.mirror=!0,this.field_78124_i.addBox(-1,0,-1,2,6,2,t),this.field_78124_i.setRotationPoint(1.5,3+e,7),this.bipedTail=this.model.bipedTail=new ModelRenderer(this,16,9),this.bipedTail.mirror=!0,this.bipedTail.addBox(-.5,-8,-1,1,8,1,t),this.bipedTail.setRotationPoint(0,-.5+e,7.5)},func_78088_a:function(t,e,i,n,o,s,r){GL11.glPushMatrix(),setRotationAngles(e,i,n,o,s,r),this.isSitting&&(GL11.glTranslatef(0,.25,0),this.bipedTail.rotateAngleZ=0,this.bipedTail.rotateAngleX=-2.3),this.field_78116_c.render(r);for(var a=0;a<7;a++)this.bipedHeadParts[a].render(r);if(this.kittystate>2&&this.bipedHeadParts[7].render(r),12==this.kittystate&&this.bipedHeadParts[8].render(r),this.field_78115_e.render(r),this.bipedTail.render(r),this.isSitting){GL11.glTranslatef(0,.0625,.0625);var h=-1.570796;this.field_78112_f.rotateAngleX=h,this.field_78113_g.rotateAngleX=h,this.field_78123_h.rotateAngleX=h,this.field_78124_i.rotateAngleX=h,this.field_78123_h.rotateAngleY=.1,this.field_78124_i.rotateAngleY=-.1}this.field_78112_f.render(r),this.field_78113_g.render(r),this.field_78123_h.render(r),this.field_78124_i.render(r),GL11.glPopMatrix()},setRotationAngles:function(t,e,i,n,o,s){this.field_78116_c.rotateAngleY=n/57.29578,this.field_78116_c.rotateAngleX=o/57.29578;for(var r=0;r<9;r++)this.bipedHeadParts[r].rotateAngleY=this.field_78116_c.rotateAngleY,this.bipedHeadParts[r].rotateAngleX=this.field_78116_c.rotateAngleX;this.field_78114_d.rotateAngleY=this.field_78116_c.rotateAngleY,this.field_78114_d.rotateAngleX=this.field_78116_c.rotateAngleX,this.field_78112_f.rotateAngleX=2*MathHelper.func_76134_b(.6662*t+3.141593)*e*.5,this.field_78113_g.rotateAngleX=2*MathHelper.func_76134_b(.6662*t)*e*.5,this.field_78112_f.rotateAngleZ=0,this.field_78113_g.rotateAngleZ=0,this.field_78123_h.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.field_78124_i.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.field_78123_h.rotateAngleY=0,this.field_78124_i.rotateAngleY=0,0!=this.field_78119_l&&(this.field_78113_g.rotateAngleX=.5*this.field_78113_g.rotateAngleX-.314159),0!=this.field_78120_m&&(this.field_78112_f.rotateAngleX=.5*this.field_78112_f.rotateAngleX-.314159),this.isSwinging?(this.field_78112_f.rotateAngleX=-2+this.swingProgress,this.field_78112_f.rotateAngleY=2.25-2*this.swingProgress):this.field_78112_f.rotateAngleY=0,this.field_78113_g.rotateAngleY=0,this.bipedTail.rotateAngleX=-.5,this.bipedTail.rotateAngleZ=.625*this.field_78124_i.rotateAngleX}}),ModelMoCKittyBed.prototype=$.extend({},ModelBase.prototype,{hasMilk:!1,hasFood:!1,pickedUp:!1,milklevel:0,ModelMoCKittyBed:function(){ModelBase.call(this);var t=0;this.TableL=this.model.TableL=new ModelRenderer(this,30,8),this.TableL.addBox(-8,0,7,16,6,1,t),this.TableL.setRotationPoint(0,18,0),this.TableR=this.model.TableR=new ModelRenderer(this,30,8),this.TableR.addBox(-8,18,-8,16,6,1,t),this.TableR.setRotationPoint(0,0,0),this.Table_B=this.model.Table_B=new ModelRenderer(this,30,0),this.Table_B.addBox(-8,-3,0,16,6,1,t),this.Table_B.setRotationPoint(8,21,0),this.Table_B.rotateAngleY=1.5708,this.FoodT=this.model.FoodT=new ModelRenderer(this,14,0),this.FoodT.addBox(1,1,1,4,1,4,t),this.FoodT.setRotationPoint(-16,22,0),this.FoodTraySide=this.model.FoodTraySide=new ModelRenderer(this,0,0),this.FoodTraySide.addBox(-16,21,5,5,3,1,t),this.FoodTraySide.setRotationPoint(0,0,0),this.FoodTraySideB=this.model.FoodTraySideB=new ModelRenderer(this,0,0),this.FoodTraySideB.addBox(-15,21,0,5,3,1,t),this.FoodTraySideB.setRotationPoint(0,0,0),this.FoodTraySideC=this.model.FoodTraySideC=new ModelRenderer(this,0,0),this.FoodTraySideC.addBox(-3,-1,0,5,3,1,t),this.FoodTraySideC.setRotationPoint(-16,22,2),this.FoodTraySideC.rotateAngleY=1.5708,this.FoodTraySideD=this.model.FoodTraySideD=new ModelRenderer(this,0,0),this.FoodTraySideD.addBox(-3,-1,0,5,3,1,t),this.FoodTraySideD.setRotationPoint(-11,22,3),this.FoodTraySideD.rotateAngleY=1.5708,this.Milk=this.model.Milk=new ModelRenderer(this,14,9),this.Milk.addBox(0,0,0,4,1,4,t),this.Milk.setRotationPoint(-15,21,1),this.PetFood=this.model.PetFood=new ModelRenderer(this,0,9),this.PetFood.addBox(0,0,0,4,1,4,t),this.PetFood.setRotationPoint(-15,21,1),this.Bottom=this.model.Bottom=new ModelRenderer(this,16,15),this.Bottom.addBox(-10,0,-7,16,1,14,t),this.Bottom.setRotationPoint(2,23,0)},func_78088_a:function(t,e,i,n,o,s,r){this.TableL.render(r),this.TableR.render(r),this.Table_B.render(r),this.Bottom.render(r),this.pickedUp||(this.FoodT.render(r),this.FoodTraySide.render(r),this.FoodTraySideB.render(r),this.FoodTraySideC.render(r),this.FoodTraySideD.render(r),this.hasMilk&&(this.Milk.d=21+this.milklevel,this.Milk.render(r)),this.hasFood&&(this.PetFood.d=21+this.milklevel,this.PetFood.render(r)))}}),ModelMoCKittyBed2.prototype=$.extend({},ModelBase.prototype,{ModelMoCKittyBed2:function(){ModelBase.call(this);var t=0;this.Sheet=this.model.Sheet=new ModelRenderer(this,0,15),this.Sheet.addBox(0,0,0,16,3,14,t),this.Sheet.setRotationPoint(-8,21,-7)},func_78088_a:function(t,e,i,n,o,s,r){this.Sheet.render(r)}}),ModelMoCKomodo.prototype=$.extend({},ModelBase.prototype,{ModelMoCKomodo:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=64,this.Head=this.model.Head=new ModelRenderer(this),this.Head.addBox(0,0,0,0,0,0),this.Head.setRotationPoint(0,13,-8),this.Neck=this.model.Neck=new ModelRenderer(this,22,34),this.Neck.addBox(-2,0,-6,4,5,6),this.Neck.setRotationPoint(0,0,0),this.Head.addChild(this.Neck),delete this.model.Neck,this.Nose=this.model.Nose=new ModelRenderer(this,24,45),this.Nose.addBox(-1.5,-1,-6.5,3,2,6),this.Nose.setRotationPoint(0,1,-5),this.Neck.addChild(this.Nose),delete this.model.Nose,this.Mouth=this.model.Mouth=new ModelRenderer(this,0,12),this.Mouth.addBox(-1,-.3,-5,2,1,6),this.Mouth.setRotationPoint(0,3,-5.8),this.Neck.addChild(this.Mouth),delete this.model.Mouth,this.Tongue=this.model.Tongue=new ModelRenderer(this,48,44),this.Tongue.addBox(-1.5,0,-5,3,0,5),this.Tongue.setRotationPoint(0,-.4,-4.7),this.Mouth.addChild(this.Tongue),delete this.model.Tongue,this.Chest=this.model.Chest=new ModelRenderer(this,36,2),this.Chest.addBox(-3,0,-8,6,6,7),this.Chest.setRotationPoint(0,13,0),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,36,49),this.Abdomen.addBox(-3,0,-1,6,7,8),this.Abdomen.setRotationPoint(0,13,0),this.Tail=this.model.Tail=new ModelRenderer(this),this.Tail.addBox(0,0,0,0,0,0),this.Tail.setRotationPoint(0,13,7),this.Tail1=this.model.Tail1=new ModelRenderer(this,0,21),this.Tail1.addBox(-2,0,0,4,5,8),this.Tail1.setRotationPoint(0,0,0),this.Tail.addChild(this.Tail1),delete this.model.Tail1,this.Tail2=this.model.Tail2=new ModelRenderer(this,0,34),this.Tail2.addBox(-1.5,0,0,3,4,8),this.Tail2.setRotationPoint(0,.1,7.7),this.Tail1.addChild(this.Tail2),delete this.model.Tail2,this.Tail3=this.model.Tail3=new ModelRenderer(this,0,46),this.Tail3.addBox(-1,0,0,2,3,8),this.Tail3.setRotationPoint(0,.1,7.3),this.Tail2.addChild(this.Tail3),delete this.model.Tail3,this.Tail4=this.model.Tail4=new ModelRenderer(this,24,21),this.Tail4.addBox(-.5,0,0,1,2,8),this.Tail4.setRotationPoint(0,.1,7),this.Tail3.addChild(this.Tail4),delete this.model.Tail4,this.LegFrontLeft=this.model.LegFrontLeft=new ModelRenderer(this),this.LegFrontLeft.addBox(0,0,0,0,0,0),this.LegFrontLeft.setRotationPoint(2,17,-7),this.LegFrontLeft1=this.model.LegFrontLeft1=new ModelRenderer(this,0,0),this.LegFrontLeft1.addBox(0,-1,-1.5,4,3,3),this.LegFrontLeft1.setRotationPoint(0,0,0),this.LegFrontLeft.addChild(this.LegFrontLeft1),delete this.model.LegFrontLeft1,this.LegFrontLeft2=this.model.LegFrontLeft2=new ModelRenderer(this,22,0),this.LegFrontLeft2.addBox(-1.5,0,-1.5,3,4,3),this.LegFrontLeft2.setRotationPoint(3,.5,0),this.LegFrontLeft1.addChild(this.LegFrontLeft2),delete this.model.LegFrontLeft2,this.LegFrontLeft3=this.model.LegFrontLeft3=new ModelRenderer(this,16,58),this.LegFrontLeft3.addBox(-1.5,0,-3.5,3,1,5),this.LegFrontLeft3.setRotationPoint(0,4,0),setRotation(this.LegFrontLeft3,0,-10/57.29578,0),this.LegFrontLeft2.addChild(this.LegFrontLeft3),delete this.model.LegFrontLeft3,this.LegBackLeft=this.model.LegBackLeft=new ModelRenderer(this),this.LegBackLeft.addBox(0,0,0,0,0,0),this.LegBackLeft.setRotationPoint(2,17,6),this.LegBackLeft1=this.model.LegBackLeft1=new ModelRenderer(this,0,0),this.LegBackLeft1.addBox(0,-1,-1.5,4,3,3),this.LegBackLeft1.setRotationPoint(0,0,0),this.LegBackLeft.addChild(this.LegBackLeft1),delete this.model.LegBackLeft1,this.LegBackLeft2=this.model.LegBackLeft2=new ModelRenderer(this,22,0),this.LegBackLeft2.addBox(-1.5,0,-1.5,3,4,3),this.LegBackLeft2.setRotationPoint(3,.5,0),this.LegBackLeft1.addChild(this.LegBackLeft2),delete this.model.LegBackLeft2,this.LegBackLeft3=this.model.LegBackLeft3=new ModelRenderer(this,16,58),this.LegBackLeft3.addBox(-1.5,0,-3.5,3,1,5),this.LegBackLeft3.setRotationPoint(0,4,0),setRotation(this.LegBackLeft3,0,-10/57.29578,0),this.LegBackLeft2.addChild(this.LegBackLeft3),delete this.model.LegBackLeft3,this.LegFrontRight=this.model.LegFrontRight=new ModelRenderer(this),this.LegFrontRight.addBox(0,0,0,0,0,0),this.LegFrontRight.setRotationPoint(-2,17,-7),this.LegFrontRight1=this.model.LegFrontRight1=new ModelRenderer(this,0,6),this.LegFrontRight1.addBox(-4,-1,-1.5,4,3,3),this.LegFrontRight1.setRotationPoint(0,0,0),this.LegFrontRight.addChild(this.LegFrontRight1),delete this.model.LegFrontRight1,this.LegFrontRight2=this.model.LegFrontRight2=new ModelRenderer(this,22,7),this.LegFrontRight2.addBox(-1.5,0,-1.5,3,4,3),this.LegFrontRight2.setRotationPoint(-3,.5,0),this.LegFrontRight1.addChild(this.LegFrontRight2),delete this.model.LegFrontRight2,this.LegFrontRight3=this.model.LegFrontRight3=new ModelRenderer(this,0,58),this.LegFrontRight3.addBox(-1.5,0,-3.5,3,1,5),this.LegFrontRight3.setRotationPoint(0,4,0),setRotation(this.LegFrontRight3,0,10/57.29578,0),this.LegFrontRight2.addChild(this.LegFrontRight3),delete this.model.LegFrontRight3,this.LegBackRight=this.model.LegBackRight=new ModelRenderer(this),this.LegBackRight.addBox(0,0,0,0,0,0),this.LegBackRight.setRotationPoint(-2,17,6),this.LegBackRight1=this.model.LegBackRight1=new ModelRenderer(this,0,6),this.LegBackRight1.addBox(-4,-1,-1.5,4,3,3),this.LegBackRight1.setRotationPoint(0,0,0),this.LegBackRight.addChild(this.LegBackRight1),delete this.model.LegBackRight1,this.LegBackRight2=this.model.LegBackRight2=new ModelRenderer(this,22,7),this.LegBackRight2.addBox(-1.5,0,-1.5,3,4,3),this.LegBackRight2.setRotationPoint(-3,.5,0),this.LegBackRight1.addChild(this.LegBackRight2),delete this.model.LegBackRight2,this.LegBackRight3=this.model.LegBackRight3=new ModelRenderer(this,0,58),this.LegBackRight3.addBox(-1.5,0,-3.5,3,1,5),this.LegBackRight3.setRotationPoint(0,4,0),setRotation(this.LegBackRight3,0,10/57.29578,0),this.LegBackRight2.addChild(this.LegBackRight3),delete this.model.LegBackRight3,this.SaddleA=this.model.SaddleA=new ModelRenderer(this,36,28),this.SaddleA.addBox(-2.5,.5,-4,5,1,8),this.SaddleA.setRotationPoint(0,12,0),this.SaddleA.setTextureSize(64,64),this.SaddleA.mirror=!0,setRotation(this.SaddleA,0,0,0),this.SaddleC=this.model.SaddleC=new ModelRenderer(this,36,37),this.SaddleC.addBox(-2.5,0,2,5,1,2),this.SaddleC.setRotationPoint(0,12,0),this.SaddleC.setTextureSize(64,64),this.SaddleC.mirror=!0,setRotation(this.SaddleC,0,0,0),this.SaddleB=this.model.SaddleB=new ModelRenderer(this,54,37),this.SaddleB.addBox(-1.5,0,-4,3,1,2),this.SaddleB.setRotationPoint(0,12,0),this.SaddleB.setTextureSize(64,64),this.SaddleB.mirror=!0,setRotation(this.SaddleB,0,0,0)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=0!=a.mouthCounter,l=0!=a.sitCounter,d=a.isSwimming(),c=0!=a.tailCounter,u=0!=a.tongueCounter;setRotationAngles(e,i,n,o,s,r,l,c,u,h,d),this.Tail.render(r),this.Head.render(r),this.Chest.render(r),this.LegFrontLeft.render(r),this.LegBackLeft.render(r),this.LegFrontRight.render(r),this.LegBackRight.render(r),this.Abdomen.render(r),a.getIsRideable()&&(this.SaddleA.render(r),this.SaddleC.render(r),this.SaddleB.render(r))},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},AdjustY:function(t){var e=t;this.Tail.d=e+13,this.Head.d=e+13,this.Chest.d=e+13,this.LegFrontLeft.d=e+17,this.LegBackLeft.d=e+17,this.LegFrontRight.d=e+17,this.LegBackRight.d=e+17,this.Abdomen.d=e+13,this.SaddleA.d=e+12,this.SaddleB.d=e+12,this.SaddleC.d=e+12},sitting:!1,movetail:!1,tongue:!1,mouth:!1,swimming:!1,setRotationAngles:function(t,e,i,n,o,s,r,a,h,l,d){r=this.sitting,a=this.movetail,h=this.tongue,l=this.mouth,d=this.swimming;var c=.2*MathHelper.func_76134_b(.4*t)*e,u=.9*MathHelper.func_76134_b(.6*t)*e,g=.9*MathHelper.func_76134_b(.6*t+3.141593)*e;n>60&&(n=60),n<-60&&(n=-60);var f=0;d?(f=4,this.Tail1.rotateAngleX=0-c,this.LegFrontLeft1.rotateAngleZ=0,this.LegFrontLeft2.rotateAngleZ=-65/57.29578,this.LegFrontLeft1.rotateAngleY=-80/57.29578,this.LegBackLeft1.rotateAngleZ=0,this.LegBackLeft2.rotateAngleZ=-65/57.29578,this.LegBackLeft1.rotateAngleY=-80/57.29578,this.LegFrontRight1.rotateAngleZ=0,this.LegFrontRight2.rotateAngleZ=65/57.29578,this.LegFrontRight1.rotateAngleY=80/57.29578,this.LegBackRight1.rotateAngleZ=0,this.LegBackRight2.rotateAngleZ=65/57.29578,this.LegBackRight1.rotateAngleY=80/57.29578):r?(f=4,this.Tail1.rotateAngleX=-5/57.29578-c,this.LegFrontLeft1.rotateAngleZ=-30/57.29578,this.LegFrontLeft2.rotateAngleZ=0,this.LegFrontLeft1.rotateAngleY=u,this.LegBackLeft1.rotateAngleZ=0,this.LegBackLeft2.rotateAngleZ=-65/57.29578,this.LegBackLeft1.rotateAngleY=-40/57.29578,this.LegFrontRight1.rotateAngleZ=30/57.29578,this.LegFrontRight2.rotateAngleZ=0,this.LegFrontRight1.rotateAngleY=-g,this.LegBackRight1.rotateAngleZ=0,this.LegBackRight2.rotateAngleZ=65/57.29578,this.LegBackRight1.rotateAngleY=40/57.29578):(this.Tail1.rotateAngleX=-15/57.29578-c,this.LegFrontLeft1.rotateAngleZ=30/57.29578,this.LegFrontLeft2.rotateAngleZ=-30/57.29578,this.LegFrontLeft1.rotateAngleY=u,this.LegFrontLeft2.rotateAngleX=-u,this.LegBackLeft1.rotateAngleZ=30/57.29578,this.LegBackLeft2.rotateAngleZ=-30/57.29578,this.LegBackLeft1.rotateAngleY=g,this.LegBackLeft2.rotateAngleX=-g,this.LegFrontRight1.rotateAngleZ=-30/57.29578,this.LegFrontRight2.rotateAngleZ=30/57.29578,this.LegFrontRight1.rotateAngleY=-g,this.LegFrontRight2.rotateAngleX=-g,this.LegBackRight1.rotateAngleZ=-30/57.29578,this.LegBackRight2.rotateAngleZ=30/57.29578,this.LegBackRight1.rotateAngleY=-u,this.LegBackRight2.rotateAngleX=-u),this.AdjustY(f);var p=0;!l&&h?(p=MathHelper.func_76134_b(3*i)/10,this.Tongue.e=-4.7):this.Tongue.e=.3;var m=0;l&&(m=35/57.29578,this.Tongue.e=-.8),this.Neck.rotateAngleX=11/57.29578+.33*o/57.29578,this.Nose.rotateAngleX=10.6/57.29578+.66*o/57.29578,this.Mouth.rotateAngleX=m+-3/57.29578+.66*o/57.29578,
this.Tongue.rotateAngleX=p,this.Neck.rotateAngleY=.33*n/57.29578,this.Nose.rotateAngleY=.66*n/57.29578,this.Mouth.rotateAngleY=.66*n/57.29578,this.Tail2.rotateAngleX=-17/57.29578+c,this.Tail3.rotateAngleX=13/57.29578+c,this.Tail4.rotateAngleX=11/57.29578+c;var v=t/2;a&&(v=i/4);var w=.35,y=.6,R=.6,A=0,b=0;b=w*MathHelper.func_76126_a(y*v-R*A++),this.Tail1.rotateAngleY=b,b=w*MathHelper.func_76126_a(y*v-R*A++),this.Tail2.rotateAngleY=b,b=w*MathHelper.func_76126_a(y*v-R*A++),this.Tail3.rotateAngleY=b,b=w*MathHelper.func_76126_a(y*v-R*A++),this.Tail4.rotateAngleY=b}}),ModelMoCLitterBox.prototype=$.extend({},ModelBase.prototype,{usedlitter:!1,ModelMoCLitterBox:function(){ModelBase.call(this);var t=0;this.Table1=this.model.Table1=new ModelRenderer(this,30,0),this.Table1.addBox(-8,0,7,16,6,1,t),this.Table1.setRotationPoint(0,18,0),this.Table3=this.model.Table3=new ModelRenderer(this,30,0),this.Table3.addBox(-8,18,-8,16,6,1,t),this.Table3.setRotationPoint(0,0,0),this.Table2=this.model.Table2=new ModelRenderer(this,30,0),this.Table2.addBox(-8,-3,0,16,6,1,t),this.Table2.setRotationPoint(8,21,0),this.Table2.rotateAngleY=1.5708,this.Litter=this.model.Litter=new ModelRenderer(this,0,15),this.Litter.addBox(0,0,0,16,2,14,t),this.Litter.setRotationPoint(-8,21,-7),this.Table4=this.model.Table4=new ModelRenderer(this,30,0),this.Table4.addBox(-8,-3,0,16,6,1,t),this.Table4.setRotationPoint(-9,21,0),this.Table4.rotateAngleY=1.5708,this.LitterUsed=this.model.LitterUsed=new ModelRenderer(this,16,15),this.LitterUsed.addBox(0,0,0,16,2,14,t),this.LitterUsed.setRotationPoint(-8,21,-7),this.Bottom=this.model.Bottom=new ModelRenderer(this,16,15),this.Bottom.addBox(-10,0,-7,16,1,14,t),this.Bottom.setRotationPoint(2,23,0)},func_78088_a:function(t,e,i,n,o,s,r){this.Table1.render(r),this.Table3.render(r),this.Table2.render(r),this.Table4.render(r),this.Bottom.render(r),this.usedlitter?this.LitterUsed.render(r):this.Litter.render(r)}}),ModelMoCMaggot.prototype=$.extend({},ModelBase.prototype,{ModelMoCMaggot:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,11),this.Head.addBox(-1,-1,-2,2,2,2),this.Head.setRotationPoint(0,23,-2),this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(-1.5,-2,0,3,3,4),this.Body.setRotationPoint(0,23,-2),this.Tail=this.model.Tail=new ModelRenderer(this,0,7),this.Tail.addBox(-1,-1,0,2,2,2),this.Tail.setRotationPoint(0,23,2),this.Tailtip=this.model.Tailtip=new ModelRenderer(this,8,7),this.Tailtip.addBox(-.5,0,0,1,1,1),this.Tailtip.setRotationPoint(0,23,4)},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),GL11.glPushMatrix(),GL11.glEnable(3042),GL11.glBlendFunc(770,771),GL11.glScalef(1,1,1+3*i),this.Head.render(r),this.Body.render(r),this.Tail.render(r),this.Tailtip.render(r),GL11.glDisable(3042),GL11.glPopMatrix()},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){}}),ModelMoCMediumFish.prototype=$.extend({},ModelBase.prototype,{ModelMoCMediumFish:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,10),this.Head.addBox(-5,0,-1.5,5,3,3),this.Head.setRotationPoint(-8,6,0),setRotation(this.Head,0,0,-.446143),this.LowerHead=this.model.LowerHead=new ModelRenderer(this,0,16),this.LowerHead.addBox(-4,-3,-1.5,4,3,3),this.LowerHead.setRotationPoint(-8,12,0),setRotation(this.LowerHead,0,0,.3346075),this.Nose=this.model.Nose=new ModelRenderer(this,14,17),this.Nose.addBox(-1,-1,-1,1,3,2),this.Nose.setRotationPoint(-11,8.2,0),setRotation(this.Nose,0,0,1.412787),this.MouthBottom=this.model.MouthBottom=new ModelRenderer(this,16,10),this.MouthBottom.addBox(-2,-.4,-1,2,1,2),this.MouthBottom.setRotationPoint(-11.5,10,0),setRotation(this.MouthBottom,0,0,.3346075),this.MouthBottomB=this.model.MouthBottomB=new ModelRenderer(this,16,13),this.MouthBottomB.addBox(-1.5,-2.4,-.5,1,1,1),this.MouthBottomB.setRotationPoint(-11.5,10,0),setRotation(this.MouthBottomB,0,0,-.7132579),this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(0,-3,-2,9,6,4),this.Body.setRotationPoint(-8,9,0),this.BackUp=this.model.BackUp=new ModelRenderer(this,26,0),this.BackUp.addBox(0,0,-1.5,8,3,3),this.BackUp.setRotationPoint(1,6,0),setRotation(this.BackUp,0,0,.185893),this.BackDown=this.model.BackDown=new ModelRenderer(this,26,6),this.BackDown.addBox(0,-3,-1.5,8,3,3),this.BackDown.setRotationPoint(1,12,0),setRotation(this.BackDown,0,0,-.191986),this.Tail=this.model.Tail=new ModelRenderer(this,48,0),this.Tail.addBox(0,-1.5,-1,4,3,2),this.Tail.setRotationPoint(8,9,0),this.TailFin=this.model.TailFin=new ModelRenderer(this,48,5),this.TailFin.addBox(3,-5.3,0,5,11,0),this.TailFin.setRotationPoint(8,9,0),this.RightPectoralFin=this.model.RightPectoralFin=new ModelRenderer(this,28,12),this.RightPectoralFin.addBox(0,-2,0,5,4,0),this.RightPectoralFin.setRotationPoint(-6.5,10,2),setRotation(this.RightPectoralFin,0,-.8726646,.185895),this.LeftPectoralFin=this.model.LeftPectoralFin=new ModelRenderer(this,38,12),this.LeftPectoralFin.addBox(0,-2,0,5,4,0),this.LeftPectoralFin.setRotationPoint(-6.5,10,-2),setRotation(this.LeftPectoralFin,0,.8726646,.185893),this.UpperFin=this.model.UpperFin=new ModelRenderer(this,0,22),this.UpperFin.addBox(0,-4,0,15,4,0),this.UpperFin.setRotationPoint(-7,6,0),setRotation(this.UpperFin,0,0,.10472),this.LowerFin=this.model.LowerFin=new ModelRenderer(this,46,20),this.LowerFin.addBox(0,0,0,9,4,0),this.LowerFin.setRotationPoint(0,12,0),setRotation(this.LowerFin,0,0,-.185893),this.RightLowerFin=this.model.RightLowerFin=new ModelRenderer(this,28,16),this.RightLowerFin.addBox(0,0,0,9,4,0),this.RightLowerFin.setRotationPoint(-7,12,1),setRotation(this.RightLowerFin,.5235988,0,0),this.LeftLowerFin=this.model.LeftLowerFin=new ModelRenderer(this,46,16),this.LeftLowerFin.addBox(0,0,0,9,4,0),this.LeftLowerFin.setRotationPoint(-7,12,-1),setRotation(this.LeftLowerFin,-.5235988,0,0)},func_78088_a:function(t,e,i,n,o,s,r){ModelBae.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Head.render(r),this.LowerHead.render(r),this.Nose.render(r),this.MouthBottom.render(r),this.MouthBottomB.render(r),this.Body.render(r),this.BackUp.render(r),this.BackDown.render(r),this.Tail.render(r),this.TailFin.render(r),this.RightPectoralFin.render(r),this.LeftPectoralFin.render(r),this.UpperFin.render(r),this.LowerFin.render(r),this.RightLowerFin.render(r),this.LeftLowerFin.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){var r=MathHelper.func_76134_b(.6662*t)*e*.6,a=.4*MathHelper.func_76134_b(.2*i),h=.2*MathHelper.func_76134_b(.3*i);this.Tail.rotateAngleY=r,this.TailFin.rotateAngleY=r,this.LeftPectoralFin.rotateAngleY=.8726646+a,this.RightPectoralFin.rotateAngleY=-.8726646-a,this.MouthBottom.rotateAngleZ=.3346075+h,this.MouthBottomB.rotateAngleZ=-.7132579+h}}),ModelMoCMiniGolem.prototype=$.extend({},ModelBase.prototype,{ModelMoCMiniGolem:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=64,this.Head=this.model.Head=new ModelRenderer(this,30,0),this.Head.addBox(-3,-3,-3,6,3,6),this.Head.setRotationPoint(0,8,0),setRotation(this.Head,0,-.7853982,0),this.HeadRed=this.model.HeadRed=new ModelRenderer(this,30,29),this.HeadRed.addBox(-3,-3,-3,6,3,6),this.HeadRed.setRotationPoint(0,8,0),setRotation(this.HeadRed,0,-.7853982,0),this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(-5,-10,-5,10,10,10),this.Body.setRotationPoint(0,18,0),this.BodyRed=this.model.BodyRed=new ModelRenderer(this,0,28),this.BodyRed.addBox(-5,-10,-5,10,10,10),this.BodyRed.setRotationPoint(0,18,0),this.LeftShoulder=this.model.LeftShoulder=new ModelRenderer(this,0,4),this.LeftShoulder.addBox(0,-1,-1,1,2,2),this.LeftShoulder.setRotationPoint(5,11,0),this.LeftArm=this.model.LeftArm=new ModelRenderer(this,0,48),this.LeftArm.addBox(1,-2,-2,4,12,4),this.LeftArm.setRotationPoint(5,11,0),this.LeftArmRingA=this.model.LeftArmRingA=new ModelRenderer(this,20,20),this.LeftArmRingA.addBox(.5,1,-2.5,5,3,5),this.LeftArmRingA.setRotationPoint(5,11,0),this.LeftArmRingB=this.model.LeftArmRingB=new ModelRenderer(this,20,20),this.LeftArmRingB.addBox(.5,5,-2.5,5,3,5),this.LeftArmRingB.setRotationPoint(5,11,0),this.RightShoulder=this.model.RightShoulder=new ModelRenderer(this,0,0),this.RightShoulder.addBox(-1,-1,-1,1,2,2),this.RightShoulder.setRotationPoint(-5,11,0),this.RightArm=this.model.RightArm=new ModelRenderer(this,16,48),this.RightArm.addBox(-5,-2,-2,4,12,4),this.RightArm.setRotationPoint(-5,11,0),this.RightArmRingA=this.model.RightArmRingA=new ModelRenderer(this,0,20),this.RightArmRingA.addBox(-5.5,1,-2.5,5,3,5),this.RightArmRingA.setRotationPoint(-5,11,0),this.RightArmRingB=this.model.RightArmRingB=new ModelRenderer(this,0,20),this.RightArmRingB.addBox(-5.5,5,-2.5,5,3,5),this.RightArmRingB.setRotationPoint(-5,11,0),this.RightLeg=this.model.RightLeg=new ModelRenderer(this,40,9),this.RightLeg.addBox(-2.5,0,-2,4,6,4),this.RightLeg.setRotationPoint(-2,18,0),this.RightFoot=this.model.RightFoot=new ModelRenderer(this,15,22),this.RightFoot.addBox(-2.5,5,-3,4,1,1),this.RightFoot.setRotationPoint(-2,18,0),this.LeftLeg=this.model.LeftLeg=new ModelRenderer(this,40,19),this.LeftLeg.addBox(-1.5,0,-2,4,6,4),this.LeftLeg.setRotationPoint(2,18,0),this.LeftFoot=this.model.LeftFoot=new ModelRenderer(this,15,20),this.LeftFoot.addBox(-1.5,5,-3,4,1,1),this.LeftFoot.setRotationPoint(2,18,0)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r);var a=t,h=a.getIsAngry(),l=a.getHasRock();setRotationAngles(e,i,n,o,s,r,l),h?(this.HeadRed.render(r),this.BodyRed.render(r)):(this.Head.render(r),this.Body.render(r)),this.LeftShoulder.render(r),this.LeftArm.render(r),this.LeftArmRingA.render(r),this.LeftArmRingB.render(r),this.RightShoulder.render(r),this.RightArm.render(r),this.RightArmRingA.render(r),this.RightArmRingB.render(r),this.RightLeg.render(r),this.RightFoot.render(r),this.LeftLeg.render(r),this.LeftFoot.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r){var a=n/57.29578,h=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,l=.8*MathHelper.func_76134_b(.6662*t)*e;this.RightLeg.rotateAngleX=h,this.RightFoot.rotateAngleX=h,this.LeftLeg.rotateAngleX=l,this.LeftFoot.rotateAngleX=l,this.Head.rotateAngleY=-.7853982+a,this.HeadRed.rotateAngleY=-.7853982+a,r?(this.LeftShoulder.rotateAngleZ=0,this.LeftShoulder.rotateAngleX=-180/57.29578,this.RightShoulder.rotateAngleZ=0,this.RightShoulder.rotateAngleX=-180/57.29578):(this.LeftShoulder.rotateAngleZ=.05*MathHelper.func_76134_b(.09*i)-.05,this.LeftShoulder.rotateAngleX=h,this.RightShoulder.rotateAngleZ=-(.05*MathHelper.func_76134_b(.09*i))+.05,this.RightShoulder.rotateAngleX=l),this.RightArm.rotateAngleX=this.RightArmRingA.rotateAngleX=this.RightArmRingB.rotateAngleX=this.RightShoulder.rotateAngleX,this.RightArm.rotateAngleZ=this.RightArmRingA.rotateAngleZ=this.RightArmRingB.rotateAngleZ=this.RightShoulder.rotateAngleZ,this.LeftArm.rotateAngleX=this.LeftArmRingA.rotateAngleX=this.LeftArmRingB.rotateAngleX=this.LeftShoulder.rotateAngleX,this.LeftArm.rotateAngleZ=this.LeftArmRingA.rotateAngleZ=this.LeftArmRingB.rotateAngleZ=this.LeftShoulder.rotateAngleZ}}),ModelMoCMouse.prototype=$.extend({},ModelBase.prototype,{ModelMoCMouse:function(){ModelBase.call(this),this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-1.5,-1,-6,3,4,6,0),this.Head.setRotationPoint(0,19,-9),this.EarR=this.model.EarR=new ModelRenderer(this,16,26),this.EarR.addBox(-3.5,-3,-2,3,3,1,0),this.EarR.setRotationPoint(0,19,-9),this.EarL=this.model.EarL=new ModelRenderer(this,24,26),this.EarL.addBox(.5,-3,-1,3,3,1,0),this.EarL.setRotationPoint(0,19,-10),this.WhiskerR=this.model.WhiskerR=new ModelRenderer(this,20,20),this.WhiskerR.addBox(-4.5,-1,-7,3,3,1,0),this.WhiskerR.setRotationPoint(0,19,-9),this.WhiskerL=this.model.WhiskerL=new ModelRenderer(this,24,20),this.WhiskerL.addBox(1.5,-1,-6,3,3,1,0),this.WhiskerL.setRotationPoint(0,19,-9),this.Tail=this.model.Tail=new ModelRenderer(this,56,0),this.Tail.addBox(-.5,0,-1,1,14,1,0),this.Tail.setRotationPoint(0,20,3),this.Tail.rotateAngleX=1.570796,this.FrontL=this.model.FrontL=new ModelRenderer(this,0,18),this.FrontL.addBox(-2,0,-3,2,1,4,0),this.FrontL.setRotationPoint(3,23,-7),this.FrontR=this.model.FrontR=new ModelRenderer(this,0,18),this.FrontR.addBox(0,0,-3,2,1,4,0),this.FrontR.setRotationPoint(-3,23,-7),this.RearL=this.model.RearL=new ModelRenderer(this,0,18),this.RearL.addBox(-2,0,-4,2,1,4,0),this.RearL.setRotationPoint(4,23,2),this.RearR=this.model.RearR=new ModelRenderer(this,0,18),this.RearR.addBox(0,0,-4,2,1,4,0),this.RearR.setRotationPoint(-4,23,2),this.BodyF=this.model.BodyF=new ModelRenderer(this,20,0),this.BodyF.addBox(-3,-3,-7,6,6,12,0),this.BodyF.setRotationPoint(0,20,-2)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Head.render(r),this.EarR.render(r),this.EarL.render(r),this.WhiskerR.render(r),this.WhiskerL.render(r),this.Tail.render(r),this.FrontL.render(r),this.FrontR.render(r),this.RearL.render(r),this.RearR.render(r),this.BodyF.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.Head.rotateAngleX=-(o/57.29578),this.Head.rotateAngleY=n/57.29578,this.EarR.rotateAngleX=this.Head.rotateAngleX,this.EarR.rotateAngleY=this.Head.rotateAngleY,this.EarL.rotateAngleX=this.Head.rotateAngleX,this.EarL.rotateAngleY=this.Head.rotateAngleY,this.WhiskerR.rotateAngleX=this.Head.rotateAngleX,this.WhiskerR.rotateAngleY=this.Head.rotateAngleY,this.WhiskerL.rotateAngleX=this.Head.rotateAngleX,this.WhiskerL.rotateAngleY=this.Head.rotateAngleY,this.FrontL.rotateAngleX=.6*MathHelper.func_76134_b(.6662*t)*e,this.RearL.rotateAngleX=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.RearR.rotateAngleX=.6*MathHelper.func_76134_b(.6662*t)*e,this.FrontR.rotateAngleX=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Tail.rotateAngleY=.625*this.FrontL.rotateAngleX}}),ModelMoCNewHorse.prototype=$.extend({},ModelBase.prototype,{ModelMoCNewHorse:function(){ModelBase.call(this),this.texture.width=128,this.texture.height=128,this.Body=this.model.Body=new ModelRenderer(this,0,34),this.Body.addBox(-5,-8,-19,10,10,24),this.Body.setRotationPoint(0,11,9),this.TailA=this.model.TailA=new ModelRenderer(this,44,0),this.TailA.addBox(-1,-1,0,2,2,3),this.TailA.setRotationPoint(0,3,14),setRotation(this.TailA,-1.134464,0,0),this.TailB=this.model.TailB=new ModelRenderer(this,38,7),this.TailB.addBox(-1.5,-2,3,3,4,7),this.TailB.setRotationPoint(0,3,14),setRotation(this.TailB,-1.134464,0,0),this.TailC=this.model.TailC=new ModelRenderer(this,24,3),this.TailC.addBox(-1.5,-4.5,9,3,4,7),this.TailC.setRotationPoint(0,3,14),setRotation(this.TailC,-1.40215,0,0),this.Leg1A=this.model.Leg1A=new ModelRenderer(this,78,29),this.Leg1A.addBox(-2.5,-2,-2.5,4,9,5),this.Leg1A.setRotationPoint(4,9,11),this.Leg1B=this.model.Leg1B=new ModelRenderer(this,78,43),this.Leg1B.addBox(-2,0,-1.5,3,5,3),this.Leg1B.setRotationPoint(4,16,11),this.Leg1C=this.model.Leg1C=new ModelRenderer(this,78,51),this.Leg1C.addBox(-2.5,5.1,-2,4,3,4),this.Leg1C.setRotationPoint(4,16,11),this.Leg2A=this.model.Leg2A=new ModelRenderer(this,96,29),this.Leg2A.addBox(-1.5,-2,-2.5,4,9,5),this.Leg2A.setRotationPoint(-4,9,11),this.Leg2B=this.model.Leg2B=new ModelRenderer(this,96,43),this.Leg2B.addBox(-1,0,-1.5,3,5,3),this.Leg2B.setRotationPoint(-4,16,11),this.Leg2C=this.model.Leg2C=new ModelRenderer(this,96,51),this.Leg2C.addBox(-1.5,5.1,-2,4,3,4),this.Leg2C.setRotationPoint(-4,16,11),this.Leg3A=this.model.Leg3A=new ModelRenderer(this,44,29),this.Leg3A.addBox(-1.9,-1,-2.1,3,8,4),this.Leg3A.setRotationPoint(4,9,-8),this.Leg3B=this.model.Leg3B=new ModelRenderer(this,44,41),this.Leg3B.addBox(-1.9,0,-1.6,3,5,3),this.Leg3B.setRotationPoint(4,16,-8),this.Leg3C=this.model.Leg3C=new ModelRenderer(this,44,51),this.Leg3C.addBox(-2.4,5.1,-2.1,4,3,4),this.Leg3C.setRotationPoint(4,16,-8),this.Leg4A=this.model.Leg4A=new ModelRenderer(this,60,29),this.Leg4A.addBox(-1.1,-1,-2.1,3,8,4),this.Leg4A.setRotationPoint(-4,9,-8),this.Leg4B=this.model.Leg4B=new ModelRenderer(this,60,41),this.Leg4B.addBox(-1.1,0,-1.6,3,5,3),this.Leg4B.setRotationPoint(-4,16,-8),this.Leg4C=this.model.Leg4C=new ModelRenderer(this,60,51),this.Leg4C.addBox(-1.6,5.1,-2.1,4,3,4),this.Leg4C.setRotationPoint(-4,16,-8),this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-2.5,-10,-1.5,5,5,7),this.Head.setRotationPoint(0,4,-10),setRotation(this.Head,.5235988,0,0),this.UMouth=this.model.UMouth=new ModelRenderer(this,24,18),this.UMouth.addBox(-2,-10,-7,4,3,6),this.UMouth.setRotationPoint(0,4,-10),setRotation(this.UMouth,.5235988,0,0),this.LMouth=this.model.LMouth=new ModelRenderer(this,24,27),this.LMouth.addBox(-2,-7,-6.5,4,2,5),this.LMouth.setRotationPoint(0,4,-10),setRotation(this.LMouth,.5235988,0,0),this.UMouth2=this.model.UMouth2=new ModelRenderer(this,24,18),this.UMouth2.addBox(-2,-10,-8,4,3,6),this.UMouth2.setRotationPoint(0,4,-10),setRotation(this.UMouth2,.4363323,0,0),this.LMouth2=this.model.LMouth2=new ModelRenderer(this,24,27),this.LMouth2.addBox(-2,-7,-5.5,4,2,5),this.LMouth2.setRotationPoint(0,4,-10),setRotation(this.LMouth2,.7853982,0,0),this.Unicorn=this.model.Unicorn=new ModelRenderer(this,24,0),this.Unicorn.addBox(-.5,-18,2,1,8,1),this.Unicorn.setRotationPoint(0,4,-10),setRotation(this.Unicorn,.5235988,0,0),this.Ear1=this.model.Ear1=new ModelRenderer(this,0,0),this.Ear1.addBox(.45,-12,4,2,3,1),this.Ear1.setRotationPoint(0,4,-10),setRotation(this.Ear1,.5235988,0,0),this.Ear2=this.model.Ear2=new ModelRenderer(this,0,0),this.Ear2.addBox(-2.45,-12,4,2,3,1),this.Ear2.setRotationPoint(0,4,-10),setRotation(this.Ear2,.5235988,0,0),this.MuleEarL=this.model.MuleEarL=new ModelRenderer(this,0,12),this.MuleEarL.addBox(-2,-16,4,2,7,1),this.MuleEarL.setRotationPoint(0,4,-10),setRotation(this.MuleEarL,.5235988,0,.261799),this.MuleEarR=this.model.MuleEarR=new ModelRenderer(this,0,12),this.MuleEarR.addBox(0,-16,4,2,7,1),this.MuleEarR.setRotationPoint(0,4,-10),setRotation(this.MuleEarR,.5235988,0,-.261799),this.Neck=this.model.Neck=new ModelRenderer(this,0,12),this.Neck.addBox(-2.05,-9.8,-2,4,14,8),this.Neck.setRotationPoint(0,4,-10),setRotation(this.Neck,.5235988,0,0),this.Bag1=this.model.Bag1=new ModelRenderer(this,0,34),this.Bag1.addBox(-3,0,0,8,8,3),this.Bag1.setRotationPoint(-7.5,3,10),setRotation(this.Bag1,0,1.570796,0),this.Bag2=this.model.Bag2=new ModelRenderer(this,0,47),this.Bag2.addBox(-3,0,0,8,8,3),this.Bag2.setRotationPoint(4.5,3,10),setRotation(this.Bag2,0,1.570796,0),this.Saddle=this.model.Saddle=new ModelRenderer(this,80,0),this.Saddle.addBox(-5,0,-3,10,1,8),this.Saddle.setRotationPoint(0,2,2),this.SaddleB=this.model.SaddleB=new ModelRenderer(this,106,9),this.SaddleB.addBox(-1.5,-1,-3,3,1,2),this.SaddleB.setRotationPoint(0,2,2),this.SaddleC=this.model.SaddleC=new ModelRenderer(this,80,9),this.SaddleC.addBox(-4,-1,3,8,1,2),this.SaddleC.setRotationPoint(0,2,2),this.SaddleL2=this.model.SaddleL2=new ModelRenderer(this,74,0),this.SaddleL2.addBox(-.5,6,-1,1,2,2),this.SaddleL2.setRotationPoint(5,3,2),this.SaddleL=this.model.SaddleL=new ModelRenderer(this,70,0),this.SaddleL.addBox(-.5,0,-.5,1,6,1),this.SaddleL.setRotationPoint(5,3,2),this.SaddleR2=this.model.SaddleR2=new ModelRenderer(this,74,4),this.SaddleR2.addBox(-.5,6,-1,1,2,2),this.SaddleR2.setRotationPoint(-5,3,2),this.SaddleR=this.model.SaddleR=new ModelRenderer(this,80,0),this.SaddleR.addBox(-.5,0,-.5,1,6,1),this.SaddleR.setRotationPoint(-5,3,2),this.SaddleMouthL=this.model.SaddleMouthL=new ModelRenderer(this,74,13),this.SaddleMouthL.addBox(1.5,-8,-4,1,2,2),this.SaddleMouthL.setRotationPoint(0,4,-10),setRotation(this.SaddleMouthL,.5235988,0,0),this.SaddleMouthR=this.model.SaddleMouthR=new ModelRenderer(this,74,13),this.SaddleMouthR.addBox(-2.5,-8,-4,1,2,2),this.SaddleMouthR.setRotationPoint(0,4,-10),setRotation(this.SaddleMouthR,.5235988,0,0),this.SaddleMouthLine=this.model.SaddleMouthLine=new ModelRenderer(this,44,10),this.SaddleMouthLine.addBox(2.6,-6,-6,0,3,16),this.SaddleMouthLine.setRotationPoint(0,4,-10),this.SaddleMouthLineR=this.model.SaddleMouthLineR=new ModelRenderer(this,44,5),this.SaddleMouthLineR.addBox(-2.6,-6,-6,0,3,16),this.SaddleMouthLineR.setRotationPoint(0,4,-10),this.Mane=this.model.Mane=new ModelRenderer(this,58,0),this.Mane.addBox(-1,-11.5,5,2,16,4),this.Mane.setRotationPoint(0,4,-10),setRotation(this.Mane,.5235988,0,0),this.HeadSaddle=this.model.HeadSaddle=new ModelRenderer(this,80,12),this.HeadSaddle.addBox(-2.5,-10.1,-7,5,5,12,.2),this.HeadSaddle.setRotationPoint(0,4,-10),setRotation(this.HeadSaddle,.5235988,0,0),this.MidWing=this.model.MidWing=new ModelRenderer(this,82,68),this.MidWing.addBox(1,.1,1,12,2,11),this.MidWing.setRotationPoint(5,3,-6),setRotation(this.MidWing,0,.0872665,0),this.InnerWing=this.model.InnerWing=new ModelRenderer(this,0,96),this.InnerWing.addBox(0,0,0,7,2,11),this.InnerWing.setRotationPoint(5,3,-6),setRotation(this.InnerWing,0,-.349066,0),this.OuterWing=this.model.OuterWing=new ModelRenderer(this,0,68),this.OuterWing.addBox(0,0,0,22,2,11),this.OuterWing.setRotationPoint(17,3,-6),setRotation(this.OuterWing,0,-.322886,0),this.InnerWingR=this.model.InnerWingR=new ModelRenderer(this,0,110),this.InnerWingR.addBox(-7,0,0,7,2,11),this.InnerWingR.setRotationPoint(-5,3,-6),setRotation(this.InnerWingR,0,.349066,0),this.MidWingR=this.model.MidWingR=new ModelRenderer(this,82,82),this.MidWingR.addBox(-13,.1,1,12,2,11),this.MidWingR.setRotationPoint(-5,3,-6),setRotation(this.MidWingR,0,-.0872665,0),this.OuterWingR=this.model.OuterWingR=new ModelRenderer(this,0,82),this.OuterWingR.addBox(-22,0,0,22,2,11),this.OuterWingR.setRotationPoint(-17,3,-6),setRotation(this.OuterWingR,0,.322886,0),this.ButterflyL=this.model.ButterflyL=new ModelRenderer(this,0,98),this.ButterflyL.addBox(-1,0,-14,26,0,30),this.ButterflyL.setRotationPoint(4.5,3,-2),setRotation(this.ButterflyL,0,0,-.78539),this.ButterflyR=this.model.ButterflyR=new ModelRenderer(this,0,68),this.ButterflyR.addBox(-25,0,-14,26,0,30),this.ButterflyR.setRotationPoint(-4.5,3,-2),setRotation(this.ButterflyR,0,0,.78539)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=a.getType(),l=a.getVanishC(),d=a.wingFlapCounter,c=0!=a.wingFlapCounter,u=0!=a.shuffleCounter,g=a.getIsRideable(),f=a.isFlyer()&&!a.isGhost()&&h<45,p=a.getEating(),m=0!=a.standCounter&&null==a.field_70153_n,v=0!=a.mouthCounter,w=0!=a.tailCounter,y=null!=a.field_70153_n,R=a.isGhost()||a.isFlyer()&&a.isOnAir();if(setRotationAngles(e,i,n,o,s,r,p,y,R,m,g,w,f,c,u,h),a.isGhost()||0!=l){var A,A;if(A=0!=l?1-l/100:a.tFloat(),GL11.glPushMatrix(),GL11.glEnable(3042),GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,A),GL11.glScalef(1.3,1,1.3),this.Ear1.render(r),this.Ear2.render(r),this.Neck.render(r),this.Head.render(r),v?(this.UMouth2.render(r),this.LMouth2.render(r)):(this.UMouth.render(r),this.LMouth.render(r)),this.Mane.render(r),this.Body.render(r),this.TailA.render(r),this.TailB.render(r),this.TailC.render(r),this.Leg1A.render(r),this.Leg1B.render(r),this.Leg1C.render(r),this.Leg2A.render(r),this.Leg2B.render(r),this.Leg2C.render(r),this.Leg3A.render(r),this.Leg3B.render(r),this.Leg3C.render(r),this.Leg4A.render(r),this.Leg4B.render(r),this.Leg4C.render(r),39!=h&&40!=h&&28!=h||(this.MidWing.render(r),this.InnerWing.render(r),this.OuterWing.render(r),this.InnerWingR.render(r),this.MidWingR.render(r),this.OuterWingR.render(r)),h>=50&&h<60&&(this.ButterflyL.render(r),this.ButterflyR.render(r)),g&&(this.HeadSaddle.render(r),this.Saddle.render(r),this.SaddleB.render(r),this.SaddleC.render(r),this.SaddleL.render(r),this.SaddleL2.render(r),this.SaddleR.render(r),this.SaddleR2.render(r),this.SaddleMouthL.render(r),this.SaddleMouthR.render(r),y&&(this.SaddleMouthLine.render(r),this.SaddleMouthLineR.render(r))),GL11.glDisable(3042),GL11.glPopMatrix(),21==h||22==h){var b=0;0!=d&&(b=1-d/25),b>A&&(b=A),GL11.glPushMatrix(),GL11.glEnable(3042),GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,b),GL11.glScalef(1.3,1,1.3),this.ButterflyL.render(r),this.ButterflyR.render(r),GL11.glDisable(3042),GL11.glPopMatrix()}}else if(g&&(this.HeadSaddle.render(r),this.Saddle.render(r),this.SaddleB.render(r),this.SaddleC.render(r),this.SaddleL.render(r),this.SaddleL2.render(r),this.SaddleR.render(r),this.SaddleR2.render(r),this.SaddleMouthL.render(r),this.SaddleMouthR.render(r),y&&(this.SaddleMouthLine.render(r),this.SaddleMouthLineR.render(r))),65==h||66==h||67==h?(this.MuleEarL.render(r),this.MuleEarR.render(r)):(this.Ear1.render(r),this.Ear2.render(r)),this.Neck.render(r),this.Head.render(r),v?(this.UMouth2.render(r),this.LMouth2.render(r)):(this.UMouth.render(r),this.LMouth.render(r)),this.Mane.render(r),this.Body.render(r),this.TailA.render(r),this.TailB.render(r),this.TailC.render(r),this.Leg1A.render(r),this.Leg1B.render(r),this.Leg1C.render(r),this.Leg2A.render(r),this.Leg2B.render(r),this.Leg2C.render(r),this.Leg3A.render(r),this.Leg3B.render(r),this.Leg3C.render(r),this.Leg4A.render(r),this.Leg4B.render(r),this.Leg4C.render(r),a.isUnicorned()&&this.Unicorn.render(r),a.getChestedHorse()&&(this.Bag1.render(r),this.Bag2.render(r)),a.isFlyer()&&h<45)this.MidWing.render(r),this.InnerWing.render(r),this.OuterWing.render(r),this.InnerWingR.render(r),this.MidWingR.render(r),this.OuterWingR.render(r);else if(h>44&&h<60){GL11.glPushMatrix(),GL11.glEnable(3042);var A=.9;GL11.glBlendFunc(770,771),GL11.glColor4(1.2,1.2,1.2,A),GL11.glScalef(1.3,1,1.3),this.ButterflyL.render(r),this.ButterflyR.render(r),GL11.glDisable(3042),GL11.glPopMatrix()}},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r,a,h,l,d,c,u,g,f,p){var m=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,v=.8*MathHelper.func_76134_b(.6662*t)*e,w=o/57.29578;if(n>20&&(n=20),n<-20&&(n=-20),f?w+=.15*MathHelper.func_76134_b(.4*i):e>.2&&!h&&(w+=.15*MathHelper.func_76134_b(.4*t)*e),this.Head.d=4,this.Head.e=-10,this.Head.rotateAngleX=.5235988+w,this.Head.rotateAngleY=n/57.29578,this.TailA.d=3,this.TailB.e=14,this.Bag2.d=3,this.Bag2.e=10,this.Body.rotateAngleX=0,l&&!f?(this.Head.d=-6,this.Head.e=-1,this.Head.rotateAngleX=.261799+w,this.Head.rotateAngleY=n/57.29578,this.TailA.d=9,this.TailB.e=18,this.Bag2.d=5.5,this.Bag2.e=15,this.Body.rotateAngleX=-.7853981):r&&!f&&(this.Head.d=11,this.Head.e=-10,this.Head.rotateAngleX=2.18166,this.Head.rotateAngleY=0),this.Ear1.d=this.Head.d,this.Ear2.d=this.Head.d,this.MuleEarL.d=this.Head.d,this.MuleEarR.d=this.Head.d,this.Neck.d=this.Head.d,this.UMouth.d=this.Head.d,this.UMouth2.d=this.Head.d,this.LMouth.d=this.Head.d,this.LMouth2.d=this.Head.d,this.Mane.d=this.Head.d,this.Unicorn.d=this.Head.d,this.Ear1.e=this.Head.e,this.Ear2.e=this.Head.e,this.MuleEarL.e=this.Head.e,this.MuleEarR.e=this.Head.e,this.Neck.e=this.Head.e,this.UMouth.e=this.Head.e,this.UMouth2.e=this.Head.e,this.LMouth.e=this.Head.e,this.LMouth2.e=this.Head.e,this.Mane.e=this.Head.e,this.Unicorn.e=this.Head.e,this.Ear1.rotateAngleX=this.Head.rotateAngleX,this.Ear2.rotateAngleX=this.Head.rotateAngleX,this.MuleEarL.rotateAngleX=this.Head.rotateAngleX,this.MuleEarR.rotateAngleX=this.Head.rotateAngleX,this.Neck.rotateAngleX=this.Head.rotateAngleX,this.UMouth.rotateAngleX=this.Head.rotateAngleX,this.UMouth2.rotateAngleX=this.Head.rotateAngleX-.087266,this.LMouth.rotateAngleX=this.Head.rotateAngleX,this.LMouth2.rotateAngleX=this.Head.rotateAngleX+.261799,this.Mane.rotateAngleX=this.Head.rotateAngleX,this.Unicorn.rotateAngleX=this.Head.rotateAngleX,this.Ear1.rotateAngleY=this.Head.rotateAngleY,this.Ear2.rotateAngleY=this.Head.rotateAngleY,this.MuleEarL.rotateAngleY=this.Head.rotateAngleY,this.MuleEarR.rotateAngleY=this.Head.rotateAngleY,this.Neck.rotateAngleY=this.Head.rotateAngleY,this.UMouth.rotateAngleY=this.Head.rotateAngleY,this.LMouth.rotateAngleY=this.Head.rotateAngleY,this.UMouth2.rotateAngleY=this.Head.rotateAngleY,this.LMouth2.rotateAngleY=this.Head.rotateAngleY,this.Mane.rotateAngleY=this.Head.rotateAngleY,this.Unicorn.rotateAngleY=this.Head.rotateAngleY,this.Bag1.rotateAngleX=m/5,this.Bag2.rotateAngleX=-m/5,u){this.InnerWing.rotateAngleX=this.Body.rotateAngleX,this.MidWing.rotateAngleX=this.Body.rotateAngleX,this.OuterWing.rotateAngleX=this.Body.rotateAngleX,this.InnerWingR.rotateAngleX=this.Body.rotateAngleX,this.MidWingR.rotateAngleX=this.Body.rotateAngleX,this.OuterWingR.rotateAngleX=this.Body.rotateAngleX,l?(this.InnerWing.d=-5,this.InnerWing.e=4):(this.InnerWing.d=3,this.InnerWing.e=-6);var y=0;y=g?1.2*MathHelper.func_76134_b(.3*i+3.141593):.1*MathHelper.func_76134_b(.5*t),h?(this.OuterWing.rotateAngleY=-.322886+y/2,this.OuterWingR.rotateAngleY=.322886-y/2):(y=1.047198,this.OuterWing.rotateAngleY=-1.570796,this.OuterWingR.rotateAngleY=1.570796),this.InnerWingR.d=this.InnerWing.d,this.InnerWingR.e=this.InnerWing.e,this.OuterWing.c=this.InnerWing.c+12*MathHelper.func_76134_b(y),this.OuterWingR.c=this.InnerWingR.c-12*MathHelper.func_76134_b(y),this.MidWing.d=this.InnerWing.d,this.MidWingR.d=this.InnerWing.d,this.OuterWing.d=this.InnerWing.d+12*MathHelper.func_76126_a(y),this.OuterWingR.d=this.InnerWingR.d+12*MathHelper.func_76126_a(y),this.MidWing.e=this.InnerWing.e,this.MidWingR.e=this.InnerWing.e,this.OuterWing.e=this.InnerWing.e,this.OuterWingR.e=this.InnerWing.e,this.MidWing.rotateAngleZ=y,this.InnerWing.rotateAngleZ=y,this.OuterWing.rotateAngleZ=y,this.InnerWingR.rotateAngleZ=-y,this.MidWingR.rotateAngleZ=-y,this.OuterWingR.rotateAngleZ=-y}if(p>44&&p<60||21==p){var R=i%100,y=0;21!=p?g?y=.9*MathHelper.func_76134_b(.9*i):h?y=.5*MathHelper.func_76134_b(.6662*i):0!=((R>40?1:0)&(R<60?1:0))&&(y=1.2*MathHelper.func_76134_b(.15*i)):y=MathHelper.func_76134_b(.1*i),l?(this.ButterflyL.d=-2.5,this.ButterflyL.e=6.5):(this.ButterflyL.d=3,this.ButterflyL.e=-2),this.ButterflyR.d=this.ButterflyL.d,this.ButterflyR.e=this.ButterflyL.e,this.ButterflyL.rotateAngleX=this.Body.rotateAngleX,this.ButterflyR.rotateAngleX=this.Body.rotateAngleX;var A=.52359;21==p&&(A=0),this.ButterflyL.rotateAngleZ=-A+y,this.ButterflyR.rotateAngleZ=A-y}var b=m,x=v,L=m,C=v;if(h&&(m=.261799,v=m,b=.7853981,L=b,x=b,C=b),l)this.Leg3A.d=-2,this.Leg3A.e=-2,this.Leg4A.d=this.Leg3A.d,this.Leg4A.e=this.Leg3A.e,m=-1.047198+MathHelper.func_76134_b(.4*i+3.141593),v=-1.047198+MathHelper.func_76134_b(.4*i),b=.7853981,x=b,L=-.261799,C=.261799,this.Leg3B.d=this.Leg3A.d+7*MathHelper.func_76126_a(1.570796+m),this.Leg3B.e=this.Leg3A.e+7*MathHelper.func_76134_b(4.712389+m),this.Leg4B.d=this.Leg4A.d+7*MathHelper.func_76126_a(1.570796+v),this.Leg4B.e=this.Leg4A.e+7*MathHelper.func_76134_b(4.712389+v),this.Leg1B.d=this.Leg1A.d+7*MathHelper.func_76126_a(1.570796+L),this.Leg1B.e=this.Leg1A.e+7*MathHelper.func_76134_b(4.712389+L),this.Leg2B.d=this.Leg1B.d,this.Leg2B.e=this.Leg1B.e,this.Leg1A.rotateAngleX=L,this.Leg1B.rotateAngleX=C,this.Leg1C.rotateAngleX=this.Leg1B.rotateAngleX,this.Leg2A.rotateAngleX=L,this.Leg2B.rotateAngleX=C,this.Leg2C.rotateAngleX=this.Leg2B.rotateAngleX,this.Leg3A.rotateAngleX=m,this.Leg3B.rotateAngleX=b,this.Leg3C.rotateAngleX=b,this.Leg4A.rotateAngleX=v,this.Leg4B.rotateAngleX=x,this.Leg4C.rotateAngleX=x;else{if(this.Leg3A.d=9,this.Leg3A.e=-8,this.Leg4A.d=this.Leg3A.d,this.Leg4A.e=this.Leg3A.e,!h&&e>.2){var k=.8*MathHelper.func_76134_b(.6662*(t+.1)+3.141593)*e,E=.8*MathHelper.func_76134_b(.6662*(t+.1))*e;m>k&&(b=m+.9599311),m<k&&(L=m+.261799),v>E&&(x=v+.9599311),v<E&&(C=v+.261799)}this.Leg1B.d=this.Leg1A.d+7*MathHelper.func_76126_a(1.570796+v),this.Leg1B.e=this.Leg1A.e+7*MathHelper.func_76134_b(4.712389+v),this.Leg2B.d=this.Leg2A.d+7*MathHelper.func_76126_a(1.570796+m),this.Leg2B.e=this.Leg2A.e+7*MathHelper.func_76134_b(4.712389+m),this.Leg3B.d=this.Leg3A.d+7*MathHelper.func_76126_a(1.570796+m),this.Leg3B.e=this.Leg3A.e+7*MathHelper.func_76134_b(4.712389+m),this.Leg4B.d=this.Leg4A.d+7*MathHelper.func_76126_a(1.570796+v),
this.Leg4B.e=this.Leg4A.e+7*MathHelper.func_76134_b(4.712389+v),this.Leg1A.rotateAngleX=v,this.Leg1B.rotateAngleX=C,this.Leg1C.rotateAngleX=C,this.Leg2A.rotateAngleX=m,this.Leg2B.rotateAngleX=L,this.Leg2C.rotateAngleX=L,this.Leg3A.rotateAngleX=m,this.Leg3B.rotateAngleX=b,this.Leg3C.rotateAngleX=b,this.Leg4A.rotateAngleX=v,this.Leg4B.rotateAngleX=x,this.Leg4C.rotateAngleX=x}60==p&&f&&(this.Leg3A.d=9,this.Leg3A.e=-8,this.Leg4A.d=this.Leg3A.d,this.Leg4A.e=this.Leg3A.e,h||(m=MathHelper.func_76134_b(.4*i),m>.1&&(m=.3),v=MathHelper.func_76134_b(.4*i+3.141593),v>.1&&(v=.3)),this.Leg1B.d=this.Leg1A.d+7*MathHelper.func_76126_a(1.570796+v),this.Leg1B.e=this.Leg1A.e+7*MathHelper.func_76134_b(4.712389+v),this.Leg2B.d=this.Leg2A.d+7*MathHelper.func_76126_a(1.570796+m),this.Leg2B.e=this.Leg2A.e+7*MathHelper.func_76134_b(4.712389+m),this.Leg3B.d=this.Leg3A.d+7*MathHelper.func_76126_a(1.570796+v),this.Leg3B.e=this.Leg3A.e+7*MathHelper.func_76134_b(4.712389+v),this.Leg4B.d=this.Leg4A.d+7*MathHelper.func_76126_a(1.570796+m),this.Leg4B.e=this.Leg4A.e+7*MathHelper.func_76134_b(4.712389+m),this.Leg1A.rotateAngleX=v,this.Leg1B.rotateAngleX=x,this.Leg1C.rotateAngleX=x,this.Leg3A.rotateAngleX=v,this.Leg3B.rotateAngleX=x,this.Leg3C.rotateAngleX=x,this.Leg2A.rotateAngleX=m,this.Leg2B.rotateAngleX=b,this.Leg2C.rotateAngleX=b,this.Leg4A.rotateAngleX=m,this.Leg4B.rotateAngleX=b,this.Leg4C.rotateAngleX=b),this.Leg1C.d=this.Leg1B.d,this.Leg1C.e=this.Leg1B.e,this.Leg2C.d=this.Leg2B.d,this.Leg2C.e=this.Leg2B.e,this.Leg3C.d=this.Leg3B.d,this.Leg3C.e=this.Leg3B.e,this.Leg4C.d=this.Leg4B.d,this.Leg4C.e=this.Leg4B.e,d&&(l?(this.Saddle.d=.5,this.Saddle.e=11):(this.Saddle.d=2,this.Saddle.e=2),this.SaddleB.d=this.Saddle.d,this.SaddleC.d=this.Saddle.d,this.SaddleL.d=this.Saddle.d,this.SaddleR.d=this.Saddle.d,this.SaddleL2.d=this.Saddle.d,this.SaddleR2.d=this.Saddle.d,this.Bag1.d=this.Bag2.d,this.SaddleB.e=this.Saddle.e,this.SaddleC.e=this.Saddle.e,this.SaddleL.e=this.Saddle.e,this.SaddleR.e=this.Saddle.e,this.SaddleL2.e=this.Saddle.e,this.SaddleR2.e=this.Saddle.e,this.Bag1.e=this.Bag2.e,this.Saddle.rotateAngleX=this.Body.rotateAngleX,this.SaddleB.rotateAngleX=this.Body.rotateAngleX,this.SaddleC.rotateAngleX=this.Body.rotateAngleX,this.SaddleMouthLine.d=this.Head.d,this.SaddleMouthLineR.d=this.Head.d,this.HeadSaddle.d=this.Head.d,this.SaddleMouthL.d=this.Head.d,this.SaddleMouthR.d=this.Head.d,this.SaddleMouthLine.e=this.Head.e,this.SaddleMouthLineR.e=this.Head.e,this.HeadSaddle.e=this.Head.e,this.SaddleMouthL.e=this.Head.e,this.SaddleMouthR.e=this.Head.e,this.SaddleMouthLine.rotateAngleX=w,this.SaddleMouthLineR.rotateAngleX=w,this.HeadSaddle.rotateAngleX=this.Head.rotateAngleX,this.SaddleMouthL.rotateAngleX=this.Head.rotateAngleX,this.SaddleMouthR.rotateAngleX=this.Head.rotateAngleX,this.HeadSaddle.rotateAngleY=this.Head.rotateAngleY,this.SaddleMouthL.rotateAngleY=this.Head.rotateAngleY,this.SaddleMouthLine.rotateAngleY=this.Head.rotateAngleY,this.SaddleMouthR.rotateAngleY=this.Head.rotateAngleY,this.SaddleMouthLineR.rotateAngleY=this.Head.rotateAngleY,a?(this.SaddleL.rotateAngleX=-1.047198,this.SaddleL2.rotateAngleX=-1.047198,this.SaddleR.rotateAngleX=-1.047198,this.SaddleR2.rotateAngleX=-1.047198,this.SaddleL.rotateAngleZ=0,this.SaddleL2.rotateAngleZ=0,this.SaddleR.rotateAngleZ=0,this.SaddleR2.rotateAngleZ=0):(this.SaddleL.rotateAngleX=m/3,this.SaddleL2.rotateAngleX=m/3,this.SaddleR.rotateAngleX=m/3,this.SaddleR2.rotateAngleX=m/3,this.SaddleL.rotateAngleZ=m/5,this.SaddleL2.rotateAngleZ=m/5,this.SaddleR.rotateAngleZ=-m/5,this.SaddleR2.rotateAngleZ=-m/5));var B=-1.3089+1.5*e;B>0&&(B=0),c?(this.TailA.rotateAngleY=MathHelper.func_76134_b(.7*i),B=0):this.TailA.rotateAngleY=0,this.TailB.rotateAngleY=this.TailA.rotateAngleY,this.TailC.rotateAngleY=this.TailA.rotateAngleY,this.TailB.d=this.TailA.d,this.TailC.d=this.TailA.d,this.TailB.e=this.TailA.e,this.TailC.e=this.TailA.e,this.TailA.rotateAngleX=B,this.TailB.rotateAngleX=B,this.TailC.rotateAngleX=-.2618+B}}),ModelMoCOgre.prototype=$.extend({},ModelBase.prototype,{ModelMoCOgre:function(){ModelBase.call(this),this.texture.width=128,this.texture.height=128,this.Head=this.model.Head=new ModelRenderer(this,80,0),this.Head.addBox(-6,-12,-6,12,12,12),this.Head.setRotationPoint(0,-13,0),this.Brow=this.model.Brow=new ModelRenderer(this,68,7),this.Brow.addBox(-5,-10.5,-8,10,3,2),this.Brow.setRotationPoint(0,-13,0),setRotation(this.Brow,-.0872665,0,0),this.NoseBridge=this.model.NoseBridge=new ModelRenderer(this,80,4),this.NoseBridge.addBox(-1,-7,-8,2,2,1),this.NoseBridge.setRotationPoint(0,-13,0),setRotation(this.NoseBridge,-.1745329,0,0),this.Nose=this.model.Nose=new ModelRenderer(this,80,0),this.Nose.addBox(-2,-7,-7,4,2,2),this.Nose.setRotationPoint(0,-13,0),setRotation(this.Nose,.0872665,0,0),this.RgtTusk=this.model.RgtTusk=new ModelRenderer(this,60,4),this.RgtTusk.addBox(-3.5,-6,-6.5,1,2,1),this.RgtTusk.setRotationPoint(0,-13,0),setRotation(this.RgtTusk,.1745329,0,0),this.RgtTooth=this.model.RgtTooth=new ModelRenderer(this,64,4),this.RgtTooth.addBox(-1.5,-5,-6.5,1,1,1),this.RgtTooth.setRotationPoint(0,-13,0),setRotation(this.RgtTooth,.1745329,0,0),this.LftTooth=this.model.LftTooth=new ModelRenderer(this,72,4),this.LftTooth.addBox(.5,-5,-6.5,1,1,1),this.LftTooth.setRotationPoint(0,-13,0),setRotation(this.LftTooth,.1745329,0,0),this.LftTusk=this.model.LftTusk=new ModelRenderer(this,76,4),this.LftTusk.addBox(2.5,-6,-6.5,1,2,1),this.LftTusk.setRotationPoint(0,-13,0),setRotation(this.LftTusk,.1745329,0,0),this.Lip=this.model.Lip=new ModelRenderer(this,60,0),this.Lip.addBox(-4,-4,-7,8,2,2),this.Lip.setRotationPoint(0,-13,0),setRotation(this.Lip,.1745329,0,0),this.RgtEar=this.model.RgtEar=new ModelRenderer(this,60,12),this.RgtEar.addBox(-9,-9,-1,3,5,2),this.RgtEar.setRotationPoint(0,-13,0),this.RgtRing=this.model.RgtRing=new ModelRenderer(this,32,58),this.RgtRing.addBox(-8,-6,-2,1,4,4),this.RgtRing.setRotationPoint(0,-13,0),this.RgtRingHole=this.model.RgtRingHole=new ModelRenderer(this,26,50),this.RgtRingHole.addBox(-8,-5,-1,1,2,2),this.RgtRingHole.setRotationPoint(0,-13,0),this.LftEar=this.model.LftEar=new ModelRenderer(this,70,12),this.LftEar.addBox(6,-9,-1,3,5,2),this.LftEar.setRotationPoint(0,-13,0),this.LftRing=this.model.LftRing=new ModelRenderer(this,32,58),this.LftRing.addBox(7,-6,-2,1,4,4),this.LftRing.setRotationPoint(0,-13,0),this.LftRingHole=this.model.LftRingHole=new ModelRenderer(this,26,50),this.LftRingHole.addBox(7,-5,-1,1,2,2),this.LftRingHole.setRotationPoint(0,-13,0),this.HairRope=this.model.HairRope=new ModelRenderer(this,82,83),this.HairRope.addBox(-2,-8,9,4,4,4),this.HairRope.setRotationPoint(0,-13,0),setRotation(this.HairRope,.6108652,0,0),this.Hair1=this.model.Hair1=new ModelRenderer(this,78,107),this.Hair1.addBox(-3,-9,13,6,8,3),this.Hair1.setRotationPoint(0,-13,0),setRotation(this.Hair1,.6108652,0,0),this.Hair2=this.model.Hair2=new ModelRenderer(this,60,107),this.Hair2.addBox(-3,-6.5,11.6,6,8,3),this.Hair2.setRotationPoint(0,-13,0),setRotation(this.Hair2,.261799,0,0),this.Hair3=this.model.Hair3=new ModelRenderer(this,42,107),this.Hair3.addBox(-3,-2.4,11.4,6,8,3),this.Hair3.setRotationPoint(0,-13,0),this.DiamondHorn=this.model.DiamondHorn=new ModelRenderer(this,120,31),this.DiamondHorn.addBox(-1,-17,-6,2,6,2),this.DiamondHorn.setRotationPoint(0,-13,0),setRotation(this.DiamondHorn,.0872665,0,0),this.RgtHorn=this.model.RgtHorn=new ModelRenderer(this,46,6),this.RgtHorn.addBox(-6,-12,-11,2,2,5),this.RgtHorn.setRotationPoint(0,-13,0),this.RgtHornTip=this.model.RgtHornTip=new ModelRenderer(this,44,13),this.RgtHornTip.addBox(-6,-15,-11,2,3,2),this.RgtHornTip.setRotationPoint(0,-13,0),this.LftHorn=this.model.LftHorn=new ModelRenderer(this,46,6),this.LftHorn.addBox(4,-12,-11,2,2,5),this.LftHorn.setRotationPoint(0,-13,0),this.LftHornTip=this.model.LftHornTip=new ModelRenderer(this,52,13),this.LftHornTip.addBox(4,-15,-11,2,3,2),this.LftHornTip.setRotationPoint(0,-13,0),this.NeckRest=this.model.NeckRest=new ModelRenderer(this,39,20),this.NeckRest.addBox(-7,-19,-3,14,3,11),this.NeckRest.setRotationPoint(0,5,0),this.Chest=this.model.Chest=new ModelRenderer(this,32,34),this.Chest.addBox(-9.5,-17.799999,-7.3,19,11,13),this.Chest.setRotationPoint(0,5,0),setRotation(this.Chest,-.1745329,0,0),this.Stomach=this.model.Stomach=new ModelRenderer(this,28,58),this.Stomach.addBox(-11,-8,-6,22,11,14),this.Stomach.setRotationPoint(0,5,0),this.ButtCover=this.model.ButtCover=new ModelRenderer(this,32,118),this.ButtCover.addBox(-4,0,0,8,8,2),this.ButtCover.setRotationPoint(0,8,6),this.LoinCloth=this.model.LoinCloth=new ModelRenderer(this,32,118),this.LoinCloth.addBox(-4,0,-2,8,8,2),this.LoinCloth.setRotationPoint(0,8,-4),this.RgtThigh=this.model.RgtThigh=new ModelRenderer(this,0,83),this.RgtThigh.addBox(-10,0,-5,10,11,10),this.RgtThigh.setRotationPoint(-2,4,1),this.RgtLeg=this.model.RgtLeg=new ModelRenderer(this,0,104),this.RgtLeg.addBox(-4,-1,-4,8,11,8),this.RgtLeg.setRotationPoint(-5,10,0),this.RgtThigh.addChild(this.RgtLeg),delete this.model.RgtLeg,this.RgtKnee=this.model.RgtKnee=new ModelRenderer(this,0,88),this.RgtKnee.addBox(-2,-2,-.5,4,4,1),this.RgtKnee.setRotationPoint(0,2,-4.25),this.RgtLeg.addChild(this.RgtKnee),delete this.model.RgtKnee,this.RgtToes=this.model.RgtToes=new ModelRenderer(this,0,123),this.RgtToes.addBox(-2.5,-1,-3,5,2,3),this.RgtToes.setRotationPoint(-1.5,9,-3.5),this.RgtLeg.addChild(this.RgtToes),delete this.model.RgtToes,this.RgtBigToe=this.model.RgtBigToe=new ModelRenderer(this,20,123),this.RgtBigToe.addBox(-1.5,-1,-3,3,2,3),this.RgtBigToe.setRotationPoint(2.5,9,-4),this.RgtLeg.addChild(this.RgtBigToe),delete this.model.RgtBigToe,this.LftThigh=this.model.LftThigh=new ModelRenderer(this,88,83),this.LftThigh.addBox(0,0,-5,10,11,10),this.LftThigh.setRotationPoint(2,4,1),this.LftLeg=this.model.LftLeg=new ModelRenderer(this,96,104),this.LftLeg.addBox(-4,-1,-4,8,11,8),this.LftLeg.setRotationPoint(5,10,0),this.LftThigh.addChild(this.LftLeg),delete this.model.LftLeg,this.LftKnee=this.model.LftKnee=new ModelRenderer(this,118,88),this.LftKnee.addBox(-2,-2,-.5,4,4,1),this.LftKnee.setRotationPoint(0,2,-4.25),this.LftLeg.addChild(this.LftKnee),delete this.model.LftKnee,this.LftToes=this.model.LftToes=new ModelRenderer(this,112,123),this.LftToes.addBox(-2.5,-1,-3,5,2,3),this.LftToes.setRotationPoint(1.5,9,-3.5),this.LftLeg.addChild(this.LftToes),delete this.model.LftToes,this.LftBigToe=this.model.LftBigToe=new ModelRenderer(this,96,123),this.LftBigToe.addBox(-1.5,-1,-3,3,2,3),this.LftBigToe.setRotationPoint(-2.5,9,-4),this.LftLeg.addChild(this.LftBigToe),delete this.model.LftBigToe,this.LftShoulder=this.model.LftShoulder=new ModelRenderer(this,96,31),this.LftShoulder.addBox(0,-3,-4,8,7,8),this.LftShoulder.setRotationPoint(7,-10,2),this.LftArm=this.model.LftArm=new ModelRenderer(this,100,66),this.LftArm.addBox(0,0,-4,6,9,8),this.LftArm.setRotationPoint(6,-1,1),this.LftShoulder.addChild(this.LftArm),delete this.model.LftArm,this.LftHand=this.model.LftHand=new ModelRenderer(this,96,46),this.LftHand.addBox(-4,0,-4,8,12,8),this.LftHand.setRotationPoint(3,8,-1),this.LftArm.addChild(this.LftHand),delete this.model.LftHand,this.LftElbow=this.model.LftElbow=new ModelRenderer(this,86,64),this.LftElbow.addBox(-2,-1.5,-.5,4,3,1),this.LftElbow.setRotationPoint(0,2.5,4),this.LftHand.addChild(this.LftElbow),delete this.model.LftElbow,this.LftWeaponRoot=this.model.LftWeaponRoot=new ModelRenderer(this,24,104),this.LftWeaponRoot.addBox(-1.5,-1.5,-4,3,3,4),this.LftWeaponRoot.setRotationPoint(-.5,8.5,-4),this.LftHand.addChild(this.LftWeaponRoot),delete this.model.LftWeaponRoot,this.LftWeaponEnd=this.model.LftWeaponEnd=new ModelRenderer(this,74,90),this.LftWeaponEnd.addBox(-1.5,-1.5,0,3,3,2),this.LftWeaponEnd.setRotationPoint(0,0,8),this.LftWeaponRoot.addChild(this.LftWeaponEnd),delete this.model.LftWeaponEnd,this.LftWeaponLump=this.model.LftWeaponLump=new ModelRenderer(this,30,83),this.LftWeaponLump.addBox(-2.5,-2.5,-4,5,5,4),this.LftWeaponLump.setRotationPoint(0,0,-4),this.LftWeaponRoot.addChild(this.LftWeaponLump),delete this.model.LftWeaponLump,this.LftWeaponBetween=this.model.LftWeaponBetween=new ModelRenderer(this,83,42),this.LftWeaponBetween.addBox(-1.5,-1.5,-2,3,3,2),this.LftWeaponBetween.setRotationPoint(0,0,-4),this.LftWeaponLump.addChild(this.LftWeaponBetween),delete this.model.LftWeaponBetween,this.LftWeaponTip=this.model.LftWeaponTip=new ModelRenderer(this,60,118),this.LftWeaponTip.addBox(-2.5,-2.5,-5,5,5,5),this.LftWeaponTip.setRotationPoint(0,0,-2),this.LftWeaponBetween.addChild(this.LftWeaponTip),delete this.model.LftWeaponTip,this.LftHammerNeck=this.model.LftHammerNeck=new ModelRenderer(this,32,39),this.LftHammerNeck.addBox(-.5,-4,-4,1,4,4),this.LftHammerNeck.setRotationPoint(0,-2.5,-1),this.LftWeaponTip.addChild(this.LftHammerNeck),delete this.model.LftHammerNeck,this.LftHammerHeadSupport=this.model.LftHammerHeadSupport=new ModelRenderer(this,0,0),this.LftHammerHeadSupport.addBox(-1,0,-2,2,2,4),this.LftHammerHeadSupport.setRotationPoint(0,2.5,-3),this.LftWeaponTip.addChild(this.LftHammerHeadSupport),delete this.model.LftHammerHeadSupport,this.LftHammerHead=this.model.LftHammerHead=new ModelRenderer(this,32,3),this.LftHammerHead.addBox(-2,0,-2.5,4,3,5),this.LftHammerHead.setRotationPoint(0,2,0),this.LftHammerHeadSupport.addChild(this.LftHammerHead),delete this.model.LftHammerHead,this.LftSpike=this.model.LftSpike=new ModelRenderer(this,52,118),this.LftSpike.addBox(-1,-1,-3,2,2,3),this.LftSpike.setRotationPoint(0,0,-5),this.LftWeaponTip.addChild(this.LftSpike),delete this.model.LftSpike,this.LftSpike1=this.model.LftSpike1=new ModelRenderer(this,52,118),this.LftSpike1.addBox(-3,-1,-1,3,2,2),this.LftSpike1.setRotationPoint(-2.5,0,-3),this.LftWeaponTip.addChild(this.LftSpike1),delete this.model.LftSpike1,this.LftSpike2=this.model.LftSpike2=new ModelRenderer(this,52,118),this.LftSpike2.addBox(3,-1,-1,3,2,2),this.LftSpike2.setRotationPoint(-.5,0,-3),this.LftWeaponTip.addChild(this.LftSpike2),delete this.model.LftSpike2,this.LftSpike3=this.model.LftSpike3=new ModelRenderer(this,52,118),this.LftSpike3.addBox(-1,0,-1,2,3,2),this.LftSpike3.setRotationPoint(0,2.5,-3),this.LftWeaponTip.addChild(this.LftSpike3),delete this.model.LftSpike3,this.LftSpike4=this.model.LftSpike4=new ModelRenderer(this,52,118),this.LftSpike4.addBox(-1,-3,-1,2,3,2),this.LftSpike4.setRotationPoint(0,-2.5,-3),this.LftWeaponTip.addChild(this.LftSpike4),delete this.model.LftSpike4,this.RgtShoulder=this.model.RgtShoulder=new ModelRenderer(this,0,31),this.RgtShoulder.addBox(0,-3,-4,8,7,8),this.RgtShoulder.setRotationPoint(-15,-10,2),this.RgtArm=this.model.RgtArm=new ModelRenderer(this,0,66),this.RgtArm.addBox(0,0,-4,6,9,8),this.RgtArm.setRotationPoint(-4,-1,1),this.RgtShoulder.addChild(this.RgtArm),delete this.model.RgtArm,this.RgtHand=this.model.RgtHand=new ModelRenderer(this,0,46),this.RgtHand.addBox(-4,0,-4,8,12,8),this.RgtHand.setRotationPoint(3,8,-1),this.RgtArm.addChild(this.RgtHand),delete this.model.RgtHand,this.RgtElbow=this.model.RgtElbow=new ModelRenderer(this,86,64),this.RgtElbow.addBox(-2,-1.5,-.5,4,3,1),this.RgtElbow.setRotationPoint(0,2.5,4),this.RgtHand.addChild(this.RgtElbow),delete this.model.RgtElbow,this.RgtWeaponRoot=this.model.RgtWeaponRoot=new ModelRenderer(this,24,104),this.RgtWeaponRoot.addBox(-1.5,-1.5,-4,3,3,4),this.RgtWeaponRoot.setRotationPoint(-.5,8.5,-4),this.RgtHand.addChild(this.RgtWeaponRoot),delete this.model.RgtWeaponRoot,this.RgtWeaponEnd=this.model.RgtWeaponEnd=new ModelRenderer(this,74,90),this.RgtWeaponEnd.addBox(-1.5,-1.5,0,3,3,2),this.RgtWeaponEnd.setRotationPoint(0,0,8),this.RgtWeaponRoot.addChild(this.RgtWeaponEnd),delete this.model.RgtWeaponEnd,this.RgtWeaponLump=this.model.RgtWeaponLump=new ModelRenderer(this,30,83),this.RgtWeaponLump.addBox(-2.5,-2.5,-4,5,5,4),this.RgtWeaponLump.setRotationPoint(0,0,-4),this.RgtWeaponRoot.addChild(this.RgtWeaponLump),delete this.model.RgtWeaponLump,this.RgtWeaponBetween=this.model.RgtWeaponBetween=new ModelRenderer(this,83,42),this.RgtWeaponBetween.addBox(-1.5,-1.5,-2,3,3,2),this.RgtWeaponBetween.setRotationPoint(0,0,-4),this.RgtWeaponLump.addChild(this.RgtWeaponBetween),delete this.model.RgtWeaponBetween,this.RgtWeaponTip=this.model.RgtWeaponTip=new ModelRenderer(this,60,118),this.RgtWeaponTip.addBox(-2.5,-2.5,-5,5,5,5),this.RgtWeaponTip.setRotationPoint(0,0,-2),this.RgtWeaponBetween.addChild(this.RgtWeaponTip),delete this.model.RgtWeaponTip,this.RgtHammerNeck=this.model.RgtHammerNeck=new ModelRenderer(this,32,39),this.RgtHammerNeck.addBox(-.5,-4,-4,1,4,4),this.RgtHammerNeck.setRotationPoint(0,-2.5,-1),this.RgtWeaponTip.addChild(this.RgtHammerNeck),delete this.model.RgtHammerNeck,this.RgtHammerHeadSupport=this.model.RgtHammerHeadSupport=new ModelRenderer(this,0,0),this.RgtHammerHeadSupport.addBox(-1,0,-2,2,2,4),this.RgtHammerHeadSupport.setRotationPoint(0,2.5,-3),this.RgtWeaponTip.addChild(this.RgtHammerHeadSupport),delete this.model.RgtHammerHeadSupport,this.RgtHammerHead=this.model.RgtHammerHead=new ModelRenderer(this,32,3),this.RgtHammerHead.addBox(-2,0,-2.5,4,3,5),this.RgtHammerHead.setRotationPoint(0,2,0),this.RgtHammerHeadSupport.addChild(this.RgtHammerHead),delete this.model.RgtHammerHead,this.RgtSpike=this.model.RgtSpike=new ModelRenderer(this,52,118),this.RgtSpike.addBox(-1,-1,-3,2,2,3),this.RgtSpike.setRotationPoint(0,0,-5),this.RgtWeaponTip.addChild(this.RgtSpike),delete this.model.RgtSpike,this.RgtSpike1=this.model.RgtSpike1=new ModelRenderer(this,52,118),this.RgtSpike1.addBox(-3,-1,-1,3,2,2),this.RgtSpike1.setRotationPoint(-2.5,0,-3),this.RgtWeaponTip.addChild(this.RgtSpike1),delete this.model.RgtSpike1,this.RgtSpike2=this.model.RgtSpike2=new ModelRenderer(this,52,118),this.RgtSpike2.addBox(3,-1,-1,3,2,2),this.RgtSpike2.setRotationPoint(-.5,0,-3),this.RgtWeaponTip.addChild(this.RgtSpike2),delete this.model.RgtSpike2,this.RgtSpike3=this.model.RgtSpike3=new ModelRenderer(this,52,118),this.RgtSpike3.addBox(-1,0,-1,2,3,2),this.RgtSpike3.setRotationPoint(0,2.5,-3),this.RgtWeaponTip.addChild(this.RgtSpike3),delete this.model.RgtSpike3,this.RgtSpike4=this.model.RgtSpike4=new ModelRenderer(this,52,118),this.RgtSpike4.addBox(-1,-3,-1,2,3,2),this.RgtSpike4.setRotationPoint(0,-2.5,-3),this.RgtWeaponTip.addChild(this.RgtSpike4),delete this.model.RgtSpike4,this.Head3RgtEar=this.model.Head3RgtEar=new ModelRenderer(this,110,24),this.Head3RgtEar.addBox(-8,-9,-1,3,5,2),this.Head3RgtEar.setRotationPoint(7,-13,0),this.Head3LftEar=this.model.Head3LftEar=new ModelRenderer(this,100,24),this.Head3LftEar.addBox(5,-9,-1,3,5,2),this.Head3LftEar.setRotationPoint(7,-13,0),this.Head3Eyelid=this.model.Head3Eyelid=new ModelRenderer(this,46,3),this.Head3Eyelid.addBox(-3,-8,-4.5,6,2,1),this.Head3Eyelid.setRotationPoint(7,-13,0),setRotation(this.Head3Eyelid,.261799,0,0),this.Head3Nose=this.model.Head3Nose=new ModelRenderer(this,60,9),this.Head3Nose.addBox(-1.5,-8.5,-3.5,3,2,1),this.Head3Nose.setRotationPoint(7,-13,0),setRotation(this.Head3Nose,.4886922,0,0),this.Head3=this.model.Head3=new ModelRenderer(this,42,83),this.Head3.addBox(-5,-12,-6,10,12,12),this.Head3.setRotationPoint(7,-13,0),this.Head3Brow=this.model.Head3Brow=new ModelRenderer(this,46,0),this.Head3Brow.addBox(-3,-9,-8.5,6,2,1),this.Head3Brow.setRotationPoint(7,-13,0),setRotation(this.Head3Brow,-.261799,0,0),this.Head3Hair=this.model.Head3Hair=new ModelRenderer(this,80,118),this.Head3Hair.addBox(-2,-17,-5,4,6,4),this.Head3Hair.setRotationPoint(7,-13,0),setRotation(this.Head3Hair,-.6108652,0,0),this.Head3Lip=this.model.Head3Lip=new ModelRenderer(this,22,68),this.Head3Lip.addBox(-4,-4,-7,8,2,2),this.Head3Lip.setRotationPoint(7,-13,0),setRotation(this.Head3Lip,.1745329,0,0),this.Head3RgtTusk=this.model.Head3RgtTusk=new ModelRenderer(this,83,34),this.Head3RgtTusk.addBox(-3.5,-6,-6.5,1,2,1),this.Head3RgtTusk.setRotationPoint(7,-13,0),setRotation(this.Head3RgtTusk,.1745329,0,0),this.Head3RgtTooth=this.model.Head3RgtTooth=new ModelRenderer(this,87,34),this.Head3RgtTooth.addBox(-1.5,-5,-6.5,1,1,1),this.Head3RgtTooth.setRotationPoint(7,-13,0),setRotation(this.Head3RgtTooth,.1745329,0,0),this.Head3LftTooth=this.model.Head3LftTooth=new ModelRenderer(this,96,34),this.Head3LftTooth.addBox(.5,-5,-6.5,1,1,1),this.Head3LftTooth.setRotationPoint(7,-13,0),setRotation(this.Head3LftTooth,.1745329,0,0),this.Head3LftTusk=this.model.Head3LftTusk=new ModelRenderer(this,100,34),this.Head3LftTusk.addBox(2.5,-6,-6.5,1,2,1),this.Head3LftTusk.setRotationPoint(7,-13,0),setRotation(this.Head3LftTusk,.1745329,0,0),this.Head3RingHole=this.model.Head3RingHole=new ModelRenderer(this,26,50),this.Head3RingHole.addBox(6,-5,-1,1,2,2),this.Head3RingHole.setRotationPoint(7,-13,0),this.Head3Ring=this.model.Head3Ring=new ModelRenderer(this,32,58),this.Head3Ring.addBox(6,-6,-2,1,4,4),this.Head3Ring.setRotationPoint(7,-13,0),this.Head2Chin=this.model.Head2Chin=new ModelRenderer(this,21,24),this.Head2Chin.addBox(-3,-5,-8,6,3,3),this.Head2Chin.setRotationPoint(-7,-13,0),setRotation(this.Head2Chin,.261799,0,0),this.Head2=this.model.Head2=new ModelRenderer(this,0,0),this.Head2.addBox(-5,-12,-6,10,12,12),this.Head2.setRotationPoint(-7,-13,0),this.Head2Lip=this.model.Head2Lip=new ModelRenderer(this,0,24),this.Head2Lip.addBox(-4,-5,-8,8,2,2),this.Head2Lip.setRotationPoint(-7,-13,0),this.Head2LftTusk=this.model.Head2LftTusk=new ModelRenderer(this,46,28),this.Head2LftTusk.addBox(2.5,-8,-6.5,1,2,1),this.Head2LftTusk.setRotationPoint(-7,-13,0),setRotation(this.Head2LftTusk,.1745329,0,0),this.Head2RgtTusk=this.model.Head2RgtTusk=new ModelRenderer(this,39,28),this.Head2RgtTusk.addBox(-3.5,-8,-6.5,1,2,1),this.Head2RgtTusk.setRotationPoint(-7,-13,0),setRotation(this.Head2RgtTusk,.1745329,0,0),this.Head2Nose=this.model.Head2Nose=new ModelRenderer(this,116,0),this.Head2Nose.addBox(-2,-7,-7,4,2,2),this.Head2Nose.setRotationPoint(-7,-13,0),setRotation(this.Head2Nose,.0872665,0,0),this.Head2NoseBridge=this.model.Head2NoseBridge=new ModelRenderer(this,116,4),this.Head2NoseBridge.addBox(-1,-7,-8,2,2,1),this.Head2NoseBridge.setRotationPoint(-7,-13,0),setRotation(this.Head2NoseBridge,-.1745329,0,0),this.Head2Brow=this.model.Head2Brow=new ModelRenderer(this,80,24),this.Head2Brow.addBox(-4,-10.5,-8,8,3,2),this.Head2Brow.setRotationPoint(-7,-13,0),setRotation(this.Head2Brow,-.0872665,0,0),this.Head2RgtHorn=this.model.Head2RgtHorn=new ModelRenderer(this,24,30),this.Head2RgtHorn.addBox(-4,-8,-15,2,2,5),this.Head2RgtHorn.setRotationPoint(-7,-13,0),setRotation(this.Head2RgtHorn,-.5235988,0,0),this.Head2LftHorn=this.model.Head2LftHorn=new ModelRenderer(this,24,30),this.Head2LftHorn.addBox(2,-8,-15,2,2,5),this.Head2LftHorn.setRotationPoint(-7,-13,0),setRotation(this.Head2LftHorn,-.5235988,0,0),this.Head2iamondHorn=this.model.Head2iamondHorn=new ModelRenderer(this,120,46),this.Head2iamondHorn.addBox(-1,-17,-6,2,6,2),this.Head2iamondHorn.setRotationPoint(-7,-13,0),setRotation(this.Head2iamondHorn,.0872665,0,0)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=a.getType(),l=a.attackCounterLeft,d=a.attackCounterRight,c=a.getMovingHead();setRotationAngles(e,i,n,o,s,r,c,h,l,d),1==h||3==h||5==h?(this.Head.render(r),this.Brow.render(r),this.NoseBridge.render(r),this.Nose.render(r),this.RgtTusk.render(r),this.RgtTooth.render(r),this.LftTooth.render(r),this.LftTusk.render(r),this.Lip.render(r),this.RgtEar.render(r),this.RgtRing.render(r),this.RgtRingHole.render(r),this.LftEar.render(r),this.LftRing.render(r),this.LftRingHole.render(r),this.HairRope.render(r),this.Hair1.render(r),this.Hair2.render(r),this.Hair3.render(r),this.DiamondHorn.render(r),this.RgtHorn.render(r),this.RgtHornTip.render(r),this.LftHorn.render(r),this.LftHornTip.render(r),this.LftWeaponRoot.field_78807_k=!0):(this.Head3RgtEar.render(r),this.Head3LftEar.render(r),this.Head3Eyelid.render(r),this.Head3Nose.render(r),this.Head3.render(r),this.Head3Brow.render(r),this.Head3Hair.render(r),this.Head3Lip.render(r),this.Head3RgtTusk.render(r),this.Head3RgtTooth.render(r),this.Head3LftTooth.render(r),this.Head3LftTusk.render(r),this.Head3RingHole.render(r),this.Head3Ring.render(r),this.Head2Chin.render(r),this.Head2.render(r),this.Head2Lip.render(r),this.Head2LftTusk.render(r),this.Head2RgtTusk.render(r),this.Head2Nose.render(r),this.Head2NoseBridge.render(r),this.Head2Brow.render(r),this.Head2RgtHorn.render(r),this.Head2LftHorn.render(r),this.Head2iamondHorn.render(r),this.LftWeaponRoot.field_78807_k=!1),this.NeckRest.render(r),this.Chest.render(r),this.Stomach.render(r),this.ButtCover.render(r),this.LoinCloth.render(r),this.RgtThigh.render(r),this.LftThigh.render(r),this.RgtShoulder.render(r),this.LftShoulder.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setoneHead:function(){this.oneHead?this.model.Head=this.Head:delete this.model.Head,this.oneHead?this.model.Brow=this.Brow:delete this.model.Brow,this.oneHead?this.model.NoseBridge=this.NoseBridge:delete this.model.NoseBridge,this.oneHead?this.model.Nose=this.Nose:delete this.model.Nose,this.oneHead?this.model.RgtTusk=this.RgtTusk:delete this.model.RgtTusk,this.oneHead?this.model.RgtTooth=this.RgtTooth:delete this.model.RgtTooth,this.oneHead?this.model.LftTooth=this.LftTooth:delete this.model.LftTooth,this.oneHead?this.model.LftTusk=this.LftTusk:delete this.model.LftTusk,this.oneHead?this.model.Lip=this.Lip:delete this.model.Lip,this.oneHead?this.model.RgtEar=this.RgtEar:delete this.model.RgtEar,this.oneHead?this.model.RgtRing=this.RgtRing:delete this.model.RgtRing,this.oneHead?this.model.RgtRingHole=this.RgtRingHole:delete this.model.RgtRingHole,this.oneHead?this.model.LftEar=this.LftEar:delete this.model.LftEar,this.oneHead?this.model.LftRing=this.LftRing:delete this.model.LftRing,this.oneHead?this.model.LftRingHole=this.LftRingHole:delete this.model.LftRingHole,this.oneHead?this.model.HairRope=this.HairRope:delete this.model.HairRope,this.oneHead?this.model.Hair1=this.Hair1:delete this.model.Hair1,this.oneHead?this.model.Hair2=this.Hair2:delete this.model.Hair2,this.oneHead?this.model.Hair3=this.Hair3:delete this.model.Hair3,this.oneHead?this.model.DiamondHorn=this.DiamondHorn:delete this.model.DiamondHorn,this.oneHead?this.model.RgtHorn=this.RgtHorn:delete this.model.RgtHorn,this.oneHead?this.model.RgtHornTip=this.RgtHornTip:delete this.model.RgtHornTip,this.oneHead?this.model.LftHorn=this.LftHorn:delete this.model.LftHorn,this.oneHead?this.model.LftHornTip=this.LftHornTip:delete this.model.LftHornTip,this.LftWeaponRoot.field_78807_k=!!this.oneHead,this.oneHead?delete this.model.Head3RgtEar:this.model.Head3RgtEar=this.Head3RgtEar,this.oneHead?delete this.model.Head3LftEar:this.model.Head3LftEar=this.Head3LftEar,this.oneHead?delete this.model.Head3Eyelid:this.model.Head3Eyelid=this.Head3Eyelid,this.oneHead?delete this.model.Head3Nose:this.model.Head3Nose=this.Head3Nose,this.oneHead?delete this.model.Head3:this.model.Head3=this.Head3,this.oneHead?delete this.model.Head3Brow:this.model.Head3Brow=this.Head3Brow,this.oneHead?delete this.model.Head3Hair:this.model.Head3Hair=this.Head3Hair,this.oneHead?delete this.model.Head3Lip:this.model.Head3Lip=this.Head3Lip,this.oneHead?delete this.model.Head3RgtTusk:this.model.Head3RgtTusk=this.Head3RgtTusk,this.oneHead?delete this.model.Head3RgtTooth:this.model.Head3RgtTooth=this.Head3RgtTooth,this.oneHead?delete this.model.Head3LftTooth:this.model.Head3LftTooth=this.Head3LftTooth,this.oneHead?delete this.model.Head3LftTusk:this.model.Head3LftTusk=this.Head3LftTusk,this.oneHead?delete this.model.Head3RingHole:this.model.Head3RingHole=this.Head3RingHole,this.oneHead?delete this.model.Head3Ring:this.model.Head3Ring=this.Head3Ring,this.oneHead?delete this.model.Head2Chin:this.model.Head2Chin=this.Head2Chin,this.oneHead?delete this.model.Head2:this.model.Head2=this.Head2,this.oneHead?delete this.model.Head2Lip:this.model.Head2Lip=this.Head2Lip,this.oneHead?delete this.model.Head2LftTusk:this.model.Head2LftTusk=this.Head2LftTusk,this.oneHead?delete this.model.Head2RgtTusk:this.model.Head2RgtTusk=this.Head2RgtTusk,this.oneHead?delete this.model.Head2Nose:this.model.Head2Nose=this.Head2Nose,this.oneHead?delete this.model.Head2NoseBridge:this.model.Head2NoseBridge=this.Head2NoseBridge,this.oneHead?delete this.model.Head2Brow:this.model.Head2Brow=this.Head2Brow,this.oneHead?delete this.model.Head2RgtHorn:this.model.Head2RgtHorn=this.Head2RgtHorn,this.oneHead?delete this.model.Head2LftHorn:this.model.Head2LftHorn=this.Head2LftHorn,this.oneHead?delete this.model.Head2iamondHorn:this.model.Head2iamondHorn=this.Head2iamondHorn},oneHead:0,details:{oneHead:{name:"Head Type",persistent:!0,type:"select",options:{"One Head":1,"Two Heads":0}}},setRotationAngles:function(t,e,i,n,o,s,r,a,h,l){this.oneHead!=this.details.oneHead.value&&(this.setoneHead(),this.needsRebuild="yes",this.details.oneHead.value=this.oneHead);var d=n/57.29578,c=o/57.29578,u=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,g=.8*MathHelper.func_76134_b(.6662*t)*e,f=.6*MathHelper.func_76134_b(.9*t)*e,p=u,m=g;this.RgtThigh.rotateAngleX=u,this.LftThigh.rotateAngleX=g;var v=.8*MathHelper.func_76134_b(.6662*(t+.1)+3.141593)*e,w=.8*MathHelper.func_76134_b(.6662*(t+.1))*e;if(e>.15&&(u>v&&(p=u+.4363323),g>w&&(m=g+.4363323)),this.LftLeg.rotateAngleX=m,this.RgtLeg.rotateAngleX=p,this.LoinCloth.rotateAngleX=f,this.ButtCover.rotateAngleX=f,0==h)this.LftShoulder.rotateAngleZ=.05*MathHelper.func_76134_b(.09*i)-.05,this.LftShoulder.rotateAngleX=u,this.LftHand.rotateAngleX=0;else{var y=2*MathHelper.func_76134_b(.18*h);this.LftShoulder.rotateAngleX=y,this.LftHand.rotateAngleX=-45/57.29578}if(0==l)this.RgtShoulder.rotateAngleZ=-(.05*MathHelper.func_76134_b(.09*i))+.05,this.RgtShoulder.rotateAngleX=g,this.RgtHand.rotateAngleX=0;else{var y=2*MathHelper.func_76134_b(.18*l);this.RgtShoulder.rotateAngleX=y,this.RgtHand.rotateAngleX=-45/57.29578}2==r&&(this.Head2.rotateAngleX=c,this.Head2.rotateAngleY=d),3==r&&(this.Head3.rotateAngleX=c,this.Head3.rotateAngleY=d),1==this.oneHead?(this.Head.rotateAngleX=c,this.Head.rotateAngleY=d,this.Brow.rotateAngleX=this.Head.rotateAngleX,this.NoseBridge.rotateAngleX=this.Head.rotateAngleX,this.Nose.rotateAngleX=this.Head.rotateAngleX,this.RgtTusk.rotateAngleX=this.Head.rotateAngleX,this.RgtTooth.rotateAngleX=this.Head.rotateAngleX,this.LftTooth.rotateAngleX=this.Head.rotateAngleX,this.LftTusk.rotateAngleX=this.Head.rotateAngleX,this.Lip.rotateAngleX=this.Head.rotateAngleX,this.RgtEar.rotateAngleX=this.Head.rotateAngleX,this.RgtRing.rotateAngleX=this.Head.rotateAngleX,this.RgtRingHole.rotateAngleX=this.Head.rotateAngleX,this.LftEar.rotateAngleX=this.Head.rotateAngleX,this.LftRing.rotateAngleX=this.Head.rotateAngleX,this.LftRingHole.rotateAngleX=this.Head.rotateAngleX,this.HairRope.rotateAngleX=.6108652+this.Head.rotateAngleX,this.Hair1.rotateAngleX=.6108652+this.Head.rotateAngleX,this.Hair2.rotateAngleX=.261799+this.Head.rotateAngleX,this.Hair3.rotateAngleX=this.Head.rotateAngleX,this.DiamondHorn.rotateAngleX=.0872665+this.Head.rotateAngleX,this.RgtHorn.rotateAngleX=this.Head.rotateAngleX,this.RgtHornTip.rotateAngleX=this.Head.rotateAngleX,this.LftHorn.rotateAngleX=this.Head.rotateAngleX,this.LftHornTip.rotateAngleX=this.Head.rotateAngleX,this.Brow.rotateAngleY=this.Head.rotateAngleY,this.NoseBridge.rotateAngleY=this.Head.rotateAngleY,this.Nose.rotateAngleY=this.Head.rotateAngleY,this.RgtTusk.rotateAngleY=this.Head.rotateAngleY,this.RgtTooth.rotateAngleY=this.Head.rotateAngleY,this.LftTooth.rotateAngleY=this.Head.rotateAngleY,this.LftTusk.rotateAngleY=this.Head.rotateAngleY,this.Lip.rotateAngleY=this.Head.rotateAngleY,this.RgtEar.rotateAngleY=this.Head.rotateAngleY,this.RgtRing.rotateAngleY=this.Head.rotateAngleY,this.RgtRingHole.rotateAngleY=this.Head.rotateAngleY,this.LftEar.rotateAngleY=this.Head.rotateAngleY,this.LftRing.rotateAngleY=this.Head.rotateAngleY,this.LftRingHole.rotateAngleY=this.Head.rotateAngleY,this.HairRope.rotateAngleY=this.Head.rotateAngleY,this.Hair1.rotateAngleY=this.Head.rotateAngleY,this.Hair2.rotateAngleY=this.Head.rotateAngleY,this.Hair3.rotateAngleY=this.Head.rotateAngleY,this.DiamondHorn.rotateAngleY=this.Head.rotateAngleY,
this.RgtHorn.rotateAngleY=this.Head.rotateAngleY,this.RgtHornTip.rotateAngleY=this.Head.rotateAngleY,this.LftHorn.rotateAngleY=this.Head.rotateAngleY,this.LftHornTip.rotateAngleY=this.Head.rotateAngleY):(this.Head3RgtEar.rotateAngleX=this.Head3.rotateAngleX,this.Head3LftEar.rotateAngleX=this.Head3.rotateAngleX,this.Head3Eyelid.rotateAngleX=.261799+this.Head3.rotateAngleX,this.Head3Nose.rotateAngleX=.4886922+this.Head3.rotateAngleX,this.Head3Brow.rotateAngleX=-.261799+this.Head3.rotateAngleX,this.Head3Hair.rotateAngleX=-.6108652+this.Head3.rotateAngleX,this.Head3Lip.rotateAngleX=.1745329+this.Head3.rotateAngleX,this.Head3RgtTusk.rotateAngleX=.1745329+this.Head3.rotateAngleX,this.Head3RgtTooth.rotateAngleX=.1745329+this.Head3.rotateAngleX,this.Head3LftTooth.rotateAngleX=.1745329+this.Head3.rotateAngleX,this.Head3LftTusk.rotateAngleX=.1745329+this.Head3.rotateAngleX,this.Head3RingHole.rotateAngleX=this.Head3.rotateAngleX,this.Head3Ring.rotateAngleX=this.Head3.rotateAngleX,this.Head3RgtEar.rotateAngleY=this.Head3.rotateAngleY,this.Head3LftEar.rotateAngleY=this.Head3.rotateAngleY,this.Head3Eyelid.rotateAngleY=this.Head3.rotateAngleY,this.Head3Nose.rotateAngleY=this.Head3.rotateAngleY,this.Head3Brow.rotateAngleY=this.Head3.rotateAngleY,this.Head3Hair.rotateAngleY=this.Head3.rotateAngleY,this.Head3Lip.rotateAngleY=this.Head3.rotateAngleY,this.Head3RgtTusk.rotateAngleY=this.Head3.rotateAngleY,this.Head3RgtTooth.rotateAngleY=this.Head3.rotateAngleY,this.Head3LftTooth.rotateAngleY=this.Head3.rotateAngleY,this.Head3LftTusk.rotateAngleY=this.Head3.rotateAngleY,this.Head3RingHole.rotateAngleY=this.Head3.rotateAngleY,this.Head3Ring.rotateAngleY=this.Head3.rotateAngleY,this.Head2Chin.rotateAngleX=.261799+this.Head2.rotateAngleX,this.Head2Lip.rotateAngleX=this.Head2.rotateAngleX,this.Head2LftTusk.rotateAngleX=.1745329+this.Head2.rotateAngleX,this.Head2RgtTusk.rotateAngleX=.1745329+this.Head2.rotateAngleX,this.Head2Nose.rotateAngleX=.0872665+this.Head2.rotateAngleX,this.Head2NoseBridge.rotateAngleX=-.1745329+this.Head2.rotateAngleX,this.Head2Brow.rotateAngleX=-.0872665+this.Head2.rotateAngleX,this.Head2RgtHorn.rotateAngleX=-.5235988+this.Head2.rotateAngleX,this.Head2LftHorn.rotateAngleX=-.5235988+this.Head2.rotateAngleX,this.Head2iamondHorn.rotateAngleX=.0872665+this.Head2.rotateAngleX,this.Head2Chin.rotateAngleY=this.Head2.rotateAngleY,this.Head2Lip.rotateAngleY=this.Head2.rotateAngleY,this.Head2LftTusk.rotateAngleY=this.Head2.rotateAngleY,this.Head2RgtTusk.rotateAngleY=this.Head2.rotateAngleY,this.Head2Nose.rotateAngleY=this.Head2.rotateAngleY,this.Head2NoseBridge.rotateAngleY=this.Head2.rotateAngleY,this.Head2Brow.rotateAngleY=this.Head2.rotateAngleY,this.Head2RgtHorn.rotateAngleY=this.Head2.rotateAngleY,this.Head2LftHorn.rotateAngleY=this.Head2.rotateAngleY,this.Head2iamondHorn.rotateAngleY=this.Head2.rotateAngleY)}}),ModelMoCOstrich.prototype=$.extend({},ModelBase.prototype,{helmet:0,typeI:0,flagColor:0,ModelMoCOstrich:function(){ModelBase.call(this),this.texture.width=128,this.texture.height=128,this.UBeak=this.model.UBeak=new ModelRenderer(this,12,16),this.UBeak.addBox(-1.5,-15,-5.5,3,1,1),this.UBeak.setRotationPoint(0,3,-6),this.UBeak2=this.model.UBeak2=new ModelRenderer(this,20,16),this.UBeak2.addBox(-1,-15,-7.5,2,1,2),this.UBeak2.setRotationPoint(0,3,-6),this.UBeakb=this.model.UBeakb=new ModelRenderer(this,12,16),this.UBeakb.addBox(-1.5,-15,-6.5,3,1,1),this.UBeakb.setRotationPoint(0,3,-6),setRotation(this.UBeakb,-.0698132,0,0),this.UBeak2b=this.model.UBeak2b=new ModelRenderer(this,20,16),this.UBeak2b.addBox(-1,-15,-8.5,2,1,2),this.UBeak2b.setRotationPoint(0,3,-6),setRotation(this.UBeak2b,-.0698132,0,0),this.LBeak=this.model.LBeak=new ModelRenderer(this,12,22),this.LBeak.addBox(-1.5,-14,-5.5,3,1,1),this.LBeak.setRotationPoint(0,3,-6),this.LBeakb=this.model.LBeakb=new ModelRenderer(this,12,22),this.LBeakb.addBox(-1.5,-14,-3.9,3,1,1),this.LBeakb.setRotationPoint(0,3,-6),setRotation(this.LBeakb,.122173,0,0),this.LBeak2=this.model.LBeak2=new ModelRenderer(this,20,22),this.LBeak2.addBox(-1,-14,-7.5,2,1,2),this.LBeak2.setRotationPoint(0,3,-6),this.LBeak2b=this.model.LBeak2b=new ModelRenderer(this,20,22),this.LBeak2b.addBox(-1,-14,-5.9,2,1,2),this.LBeak2b.setRotationPoint(0,3,-6),setRotation(this.LBeak2b,.122173,0,0),this.Body=this.model.Body=new ModelRenderer(this,0,38),this.Body.addBox(-4,1,0,8,10,16),this.Body.setRotationPoint(0,0,-6),this.LLegA=this.model.LLegA=new ModelRenderer(this,50,28),this.LLegA.addBox(-2,-1,-2.5,4,6,5),this.LLegA.setRotationPoint(4,5,4),setRotation(this.LLegA,.1745329,0,0),this.LLegB=this.model.LLegB=new ModelRenderer(this,50,39),this.LLegB.addBox(-1.5,5,-1.5,3,4,3),this.LLegB.setRotationPoint(4,5,4),setRotation(this.LLegB,.1745329,0,0),this.LLegC=this.model.LLegC=new ModelRenderer(this,8,38),this.LLegC.addBox(-1,8,2.5,2,10,2),this.LLegC.setRotationPoint(4,5,4),setRotation(this.LLegC,-.261799,0,0),this.LFoot=this.model.LFoot=new ModelRenderer(this,32,42),this.LFoot.addBox(-1,17,-9,2,1,5),this.LFoot.setRotationPoint(4,5,4),setRotation(this.LFoot,.1745329,0,0),this.RLegA=this.model.RLegA=new ModelRenderer(this,0,27),this.RLegA.addBox(-2,-1,-2.5,4,6,5),this.RLegA.setRotationPoint(-4,5,4),setRotation(this.RLegA,.1745329,0,0),this.RLegB=this.model.RLegB=new ModelRenderer(this,18,27),this.RLegB.addBox(-1.5,5,-1.5,3,4,3),this.RLegB.setRotationPoint(-4,5,4),setRotation(this.RLegB,.1745329,0,0),this.RLegC=this.model.RLegC=new ModelRenderer(this,0,38),this.RLegC.addBox(-1,8,2.5,2,10,2),this.RLegC.setRotationPoint(-4,5,4),setRotation(this.RLegC,-.261799,0,0),this.RFoot=this.model.RFoot=new ModelRenderer(this,32,48),this.RFoot.addBox(-1,17,-9,2,1,5),this.RFoot.setRotationPoint(-4,5,4),setRotation(this.RFoot,.1745329,0,0),this.Tail1=this.model.Tail1=new ModelRenderer(this,44,18),this.Tail1.addBox(-.5,-2,-2,1,4,6),this.Tail1.setRotationPoint(0,4,15),setRotation(this.Tail1,.349066,0,0),this.Tail2=this.model.Tail2=new ModelRenderer(this,58,18),this.Tail2.addBox(-2.6,-2,-2,1,4,6),this.Tail2.setRotationPoint(0,4,15),setRotation(this.Tail2,.349066,-.261799,0),this.Tail3=this.model.Tail3=new ModelRenderer(this,30,18),this.Tail3.addBox(1.6,-2,-2,1,4,6),this.Tail3.setRotationPoint(0,4,15),setRotation(this.Tail3,.349066,.261799,0),this.LWingB=this.model.LWingB=new ModelRenderer(this,68,46),this.LWingB.addBox(-.5,-3,0,1,4,14),this.LWingB.setRotationPoint(4,4,-3),setRotation(this.LWingB,.0872665,.0872665,0),this.LWingC=this.model.LWingC=new ModelRenderer(this,98,46),this.LWingC.addBox(-1,0,0,1,4,14),this.LWingC.setRotationPoint(4,4,-3),setRotation(this.LWingC,0,.0872665,0),this.LWingD=this.model.LWingD=new ModelRenderer(this,26,84),this.LWingD.addBox(0,-1,-1,15,2,2),this.LWingD.setRotationPoint(4,3,-3),setRotation(this.LWingD,0,0,-.349066),this.LWingE=this.model.LWingE=new ModelRenderer(this,0,103),this.LWingE.addBox(0,0,1,15,0,15),this.LWingE.setRotationPoint(4,3,-3),setRotation(this.LWingE,0,0,-.349066),this.RWingB=this.model.RWingB=new ModelRenderer(this,68,0),this.RWingB.addBox(-.5,-3,0,1,4,14),this.RWingB.setRotationPoint(-4,4,-3),setRotation(this.RWingB,.0872665,-.0872665,0),this.RWingC=this.model.RWingC=new ModelRenderer(this,98,0),this.RWingC.addBox(0,0,0,1,4,14),this.RWingC.setRotationPoint(-4,4,-3),setRotation(this.RWingC,0,-.0872665,0),this.RWingD=this.model.RWingD=new ModelRenderer(this,26,80),this.RWingD.addBox(-15,-1,-1,15,2,2),this.RWingD.setRotationPoint(-4,3,-3),setRotation(this.RWingD,0,0,.349066),this.RWingE=this.model.RWingE=new ModelRenderer(this,0,88),this.RWingE.addBox(-15,0,1,15,0,15),this.RWingE.setRotationPoint(-4,3,-3),setRotation(this.RWingE,0,0,.349066),this.SaddleA=this.model.SaddleA=new ModelRenderer(this,72,18),this.SaddleA.addBox(-4,.5,-3,8,1,8),this.SaddleA.setRotationPoint(0,0,0),this.SaddleB=this.model.SaddleB=new ModelRenderer(this,72,27),this.SaddleB.addBox(-1.5,0,-3,3,1,2),this.SaddleB.setRotationPoint(0,0,0),this.SaddleL=this.model.SaddleL=new ModelRenderer(this,72,30),this.SaddleL.addBox(-.5,0,-.5,1,6,1),this.SaddleL.setRotationPoint(4,1,0),this.SaddleR=this.model.SaddleR=new ModelRenderer(this,84,30),this.SaddleR.addBox(-.5,0,-.5,1,6,1),this.SaddleR.setRotationPoint(-4,1,0),this.SaddleL2=this.model.SaddleL2=new ModelRenderer(this,76,30),this.SaddleL2.addBox(-.5,6,-1,1,2,2),this.SaddleL2.setRotationPoint(4,1,0),this.SaddleR2=this.model.SaddleR2=new ModelRenderer(this,88,30),this.SaddleR2.addBox(-.5,6,-1,1,2,2),this.SaddleR2.setRotationPoint(-4,1,0),this.SaddleC=this.model.SaddleC=new ModelRenderer(this,84,27),this.SaddleC.addBox(-4,0,3,8,1,2),this.SaddleC.setRotationPoint(0,0,0),this.NeckLFeather=this.model.NeckLFeather=new ModelRenderer(this,8,73),this.NeckLFeather.addBox(0,-8,-.5,0,7,4),this.NeckLFeather.setRotationPoint(0,3,-6),setRotation(this.NeckLFeather,.200713,0,0),this.NeckUFeather=this.model.NeckUFeather=new ModelRenderer(this,0,73),this.NeckUFeather.addBox(0,-16,-2,0,9,4),this.NeckUFeather.setRotationPoint(0,3,-6),this.NeckD=this.model.NeckD=new ModelRenderer(this,0,16),this.NeckD.addBox(-1.5,-4,-2,3,8,3),this.NeckD.setRotationPoint(0,3,-6),setRotation(this.NeckD,.4363323,0,0),this.Saddlebag=this.model.Saddlebag=new ModelRenderer(this,32,7),this.Saddlebag.addBox(-4.5,-3,5,9,4,7),this.Saddlebag.setRotationPoint(0,0,0),setRotation(this.Saddlebag,-.26025,0,0),this.Flagpole=this.model.Flagpole=new ModelRenderer(this,28,0),this.Flagpole.addBox(-.5,-15,-.5,1,17,1),this.Flagpole.setRotationPoint(0,0,5),setRotation(this.Flagpole,-.26025,0,0),this.FlagBlack=this.model.FlagBlack=new ModelRenderer(this,108,8),this.FlagBlack.addBox(0,-2.1,0,0,4,10),this.FlagBlack.setRotationPoint(0,-12,8),setRotation(this.FlagBlack,-.26025,0,0),this.FlagDarkGrey=this.model.FlagDarkGrey=new ModelRenderer(this,108,12),this.FlagDarkGrey.addBox(0,-2.1,0,0,4,10),this.FlagDarkGrey.setRotationPoint(0,-12,8),setRotation(this.FlagDarkGrey,-.26025,0,0),this.FlagYellow=this.model.FlagYellow=new ModelRenderer(this,48,46),this.FlagYellow.addBox(0,-2.1,0,0,4,10),this.FlagYellow.setRotationPoint(0,-12,8),setRotation(this.FlagYellow,-.26025,0,0),this.FlagBrown=this.model.FlagBrown=new ModelRenderer(this,48,42),this.FlagBrown.addBox(0,-2.1,0,0,4,10),this.FlagBrown.setRotationPoint(0,-12,8),setRotation(this.FlagBrown,-.26025,0,0),this.FlagGreen=this.model.FlagGreen=new ModelRenderer(this,48,38),this.FlagGreen.addBox(0,-2.1,0,0,4,10),this.FlagGreen.setRotationPoint(0,-12,8),setRotation(this.FlagGreen,-.26025,0,0),this.FlagCyan=this.model.FlagCyan=new ModelRenderer(this,48,50),this.FlagCyan.addBox(0,-2.1,0,0,4,10),this.FlagCyan.setRotationPoint(0,-12,8),setRotation(this.FlagCyan,-.26025,0,0),this.FlagLightBlue=this.model.FlagLightBlue=new ModelRenderer(this,68,32),this.FlagLightBlue.addBox(0,-2.1,0,0,4,10),this.FlagLightBlue.setRotationPoint(0,-12,8),setRotation(this.FlagLightBlue,-.26025,0,0),this.FlagDarkBlue=this.model.FlagDarkBlue=new ModelRenderer(this,68,28),this.FlagDarkBlue.addBox(0,-2.1,0,0,4,10),this.FlagDarkBlue.setRotationPoint(0,-12,8),setRotation(this.FlagDarkBlue,-.26025,0,0),this.FlagPurple=this.model.FlagPurple=new ModelRenderer(this,88,32),this.FlagPurple.addBox(0,-2.1,0,0,4,10),this.FlagPurple.setRotationPoint(0,-12,8),setRotation(this.FlagPurple,-.26025,0,0),this.FlagDarkPurple=this.model.FlagDarkPurple=new ModelRenderer(this,88,28),this.FlagDarkPurple.addBox(0,-2.1,0,0,4,10),this.FlagDarkPurple.setRotationPoint(0,-12,8),setRotation(this.FlagDarkPurple,-.26025,0,0),this.FlagDarkGreen=this.model.FlagDarkGreen=new ModelRenderer(this,108,32),this.FlagDarkGreen.addBox(0,-2.1,0,0,4,10),this.FlagDarkGreen.setRotationPoint(0,-12,8),setRotation(this.FlagDarkGreen,-.26025,0,0),this.FlagLightRed=this.model.FlagLightRed=new ModelRenderer(this,108,28),this.FlagLightRed.addBox(0,-2.1,0,0,4,10),this.FlagLightRed.setRotationPoint(0,-12,8),setRotation(this.FlagLightRed,-.26025,0,0),this.FlagRed=this.model.FlagRed=new ModelRenderer(this,108,24),this.FlagRed.addBox(0,-2.1,0,0,4,10),this.FlagRed.setRotationPoint(0,-12,8),setRotation(this.FlagRed,-.26025,0,0),this.FlagWhite=this.model.FlagWhite=new ModelRenderer(this,108,20),this.FlagWhite.addBox(0,-2.1,0,0,4,10),this.FlagWhite.setRotationPoint(0,-12,8),setRotation(this.FlagWhite,-.26025,0,0),this.FlagGrey=this.model.FlagGrey=new ModelRenderer(this,108,16),this.FlagGrey.addBox(0,-2.1,0,0,4,10),this.FlagGrey.setRotationPoint(0,-12,8),setRotation(this.FlagGrey,-.26025,0,0),this.FlagOrange=this.model.FlagOrange=new ModelRenderer(this,88,24),this.FlagOrange.addBox(0,-2.1,0,0,4,10),this.FlagOrange.setRotationPoint(0,-12,8),setRotation(this.FlagOrange,-.26025,0,0),this.NeckU=this.model.NeckU=new ModelRenderer(this,20,0),this.NeckU.addBox(-1,-12,-4,2,5,2),this.NeckU.setRotationPoint(0,3,-6),this.NeckL=this.model.NeckL=new ModelRenderer(this,20,7),this.NeckL.addBox(-1,-8,-2.5,2,5,2),this.NeckL.setRotationPoint(0,3,-6),setRotation(this.NeckL,.200713,0,0),this.NeckHarness=this.model.NeckHarness=new ModelRenderer(this,0,11),this.NeckHarness.addBox(-2,-3,-2.5,4,1,4),this.NeckHarness.setRotationPoint(0,3,-6),setRotation(this.NeckHarness,.4363323,0,0),this.NeckHarness2=this.model.NeckHarness2=new ModelRenderer(this,84,55),this.NeckHarness2.addBox(-3,-2.5,-2,6,1,1),this.NeckHarness2.setRotationPoint(0,3,-6),this.NeckHarnessRight=this.model.NeckHarnessRight=new ModelRenderer(this,84,45),this.NeckHarnessRight.addBox(-2.3,-3.5,-.5,0,3,12),this.NeckHarnessRight.setRotationPoint(0,3,-6),setRotation(this.NeckHarnessRight,.89838,0,0),this.NeckHarnessLeft=this.model.NeckHarnessLeft=new ModelRenderer(this,84,45),this.NeckHarnessLeft.addBox(2.3,-3.5,-.5,0,3,12),this.NeckHarnessLeft.setRotationPoint(0,3,-6),setRotation(this.NeckHarnessLeft,.89838,0,0),this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-1.5,-16,-4.5,3,4,3),this.Head.setRotationPoint(0,3,-6),this.UniHorn=this.model.UniHorn=new ModelRenderer(this,0,8),this.UniHorn.addBox(-.5,-21,.5,1,6,1),this.UniHorn.setRotationPoint(0,3,-6),setRotation(this.UniHorn,.317154,0,0),this.HelmetLeather=this.model.HelmetLeather=new ModelRenderer(this,66,0),this.HelmetLeather.addBox(-2,-16.5,-5,4,5,4),this.HelmetLeather.setRotationPoint(0,3,-6),this.HelmetIron=this.model.HelmetIron=new ModelRenderer(this,84,46),this.HelmetIron.addBox(-2,-16.5,-5,4,5,4),this.HelmetIron.setRotationPoint(0,3,-6),this.HelmetGold=this.model.HelmetGold=new ModelRenderer(this,112,64),this.HelmetGold.addBox(-2,-16.5,-5,4,5,4),this.HelmetGold.setRotationPoint(0,3,-6),this.HelmetDiamond=this.model.HelmetDiamond=new ModelRenderer(this,96,64),this.HelmetDiamond.addBox(-2,-16.5,-5,4,5,4),this.HelmetDiamond.setRotationPoint(0,3,-6),this.HelmetHide=this.model.HelmetHide=new ModelRenderer(this,96,5),this.HelmetHide.addBox(-2,-16.5,-5,4,5,4),this.HelmetHide.setRotationPoint(0,3,-6),this.HelmetNeckHide=this.model.HelmetNeckHide=new ModelRenderer(this,58,0),this.HelmetNeckHide.addBox(-1.5,-12,-4.5,3,1,3),this.HelmetNeckHide.setRotationPoint(0,3,-6),this.HelmetHideEar1=this.model.HelmetHideEar1=new ModelRenderer(this,84,9),this.HelmetHideEar1.addBox(-2.5,-18,-3,2,2,1),this.HelmetHideEar1.setRotationPoint(0,3,-6),this.HelmetHideEar2=this.model.HelmetHideEar2=new ModelRenderer(this,90,9),this.HelmetHideEar2.addBox(.5,-18,-3,2,2,1),this.HelmetHideEar2.setRotationPoint(0,3,-6),this.HelmetFur=this.model.HelmetFur=new ModelRenderer(this,84,0),this.HelmetFur.addBox(-2,-16.5,-5,4,5,4),this.HelmetFur.setRotationPoint(0,3,-6),this.HelmetNeckFur=this.model.HelmetNeckFur=new ModelRenderer(this,96,0),this.HelmetNeckFur.addBox(-1.5,-12,-4.5,3,1,3),this.HelmetNeckFur.setRotationPoint(0,3,-6),this.HelmetFurEar1=this.model.HelmetFurEar1=new ModelRenderer(this,66,9),this.HelmetFurEar1.addBox(-2.5,-18,-3,2,2,1),this.HelmetFurEar1.setRotationPoint(0,3,-6),this.HelmetFurEar2=this.model.HelmetFurEar2=new ModelRenderer(this,76,9),this.HelmetFurEar2.addBox(.5,-18,-3,2,2,1),this.HelmetFurEar2.setRotationPoint(0,3,-6),this.HelmetReptile=this.model.HelmetReptile=new ModelRenderer(this,64,64),this.HelmetReptile.addBox(-2,-16.5,-5,4,5,4),this.HelmetReptile.setRotationPoint(0,3,-6),this.HelmetReptileEar2=this.model.HelmetReptileEar2=new ModelRenderer(this,114,45),this.HelmetReptileEar2.addBox(2.5,-16.5,-2,0,5,5),this.HelmetReptileEar2.setRotationPoint(0,3,-6),setRotation(this.HelmetReptileEar2,0,.6108652,0),this.HelmetReptileEar1=this.model.HelmetReptileEar1=new ModelRenderer(this,114,50),this.HelmetReptileEar1.addBox(-2.5,-16.5,-2,0,5,5),this.HelmetReptileEar1.setRotationPoint(0,3,-6),setRotation(this.HelmetReptileEar1,0,-.6108652,0),this.HelmetGreenChitin=this.model.HelmetGreenChitin=new ModelRenderer(this,80,64),this.HelmetGreenChitin.addBox(-2,-16.5,-5,4,5,4),this.HelmetGreenChitin.setRotationPoint(0,3,-6),this.HelmetYellowChitin=this.model.HelmetYellowChitin=new ModelRenderer(this,0,64),this.HelmetYellowChitin.addBox(-2,-16.5,-5,4,5,4),this.HelmetYellowChitin.setRotationPoint(0,3,-6),this.HelmetBlueChitin=this.model.HelmetBlueChitin=new ModelRenderer(this,16,64),this.HelmetBlueChitin.addBox(-2,-16.5,-5,4,5,4),this.HelmetBlueChitin.setRotationPoint(0,3,-6),this.HelmetBlackChitin=this.model.HelmetBlackChitin=new ModelRenderer(this,32,64),this.HelmetBlackChitin.addBox(-2,-16.5,-5,4,5,4),this.HelmetBlackChitin.setRotationPoint(0,3,-6),this.HelmetRedChitin=this.model.HelmetRedChitin=new ModelRenderer(this,48,64),this.HelmetRedChitin.addBox(-2,-16.5,-5,4,5,4),this.HelmetRedChitin.setRotationPoint(0,3,-6),this.Tail=this.model.Tail=new ModelRenderer(this,30,28),this.Tail.addBox(-2.5,-1,0,5,5,5),this.Tail.setRotationPoint(0,4,10),this.Tailpart1=this.model.Tailpart1=new ModelRenderer(this,30,28),this.Tailpart1.addBox(-2.5,-2.2,5,5,5,5),this.Tailpart1.setRotationPoint(0,4,10),setRotation(this.Tailpart1,-.2974289,0,0),this.Tailpart2=this.model.Tailpart2=new ModelRenderer(this,60,73),this.Tailpart2.addBox(-2.5,-4.3,9,5,5,8),this.Tailpart2.setRotationPoint(0,4,10),setRotation(this.Tailpart2,-.520501,0,0),this.Tailpart3=this.model.Tailpart3=new ModelRenderer(this,60,86),this.Tailpart3.addBox(-2,1,16,4,4,7),this.Tailpart3.setRotationPoint(0,4,10),setRotation(this.Tailpart3,-.2230717,0,0),this.Tailpart4=this.model.Tailpart4=new ModelRenderer(this,60,97),this.Tailpart4.addBox(-1.5,8,20.6,3,3,7),this.Tailpart4.setRotationPoint(0,4,10),setRotation(this.Tailpart4,.0743572,0,0),this.Tailpart5=this.model.Tailpart5=new ModelRenderer(this,60,107),this.Tailpart5.addBox(-1,16.5,22.9,2,2,5),this.Tailpart5.setRotationPoint(0,4,10),setRotation(this.Tailpart5,.4089647,0,0)},func_78088_a:function(t,e,i,n,o,s,r){var a=t;this.oneHeadI=a.getType();var h=0!=a.mouthCounter,l=a.getIsRideable(),d=a.getHiding(),c=0!=a.wingCounter,u=a.getIsChested(),g=null!=a.field_70153_n,f=a.jumpCounter,p=a.isFlyer()&&a.isOnAir();if(this.helmet=a.getHelmet(),this.flagColor=a.getFlagColor(),setRotationAngles(e,i,n,o,s,r,d,c,g,f,p),this.Head.render(r),this.NeckU.render(r),this.NeckD.render(r),this.NeckL.render(r),this.Body.render(r),this.Tail.render(r),this.LLegA.render(r),this.LLegB.render(r),this.LLegC.render(r),this.LFoot.render(r),this.RLegA.render(r),this.RLegB.render(r),this.RLegC.render(r),this.RFoot.render(r),8==this.oneHeadI&&this.UniHorn.render(r),5==this.oneHeadI||6==this.oneHeadI?(this.LWingD.render(r),this.LWingE.render(r),this.RWingD.render(r),this.RWingE.render(r),this.NeckUFeather.render(r),this.NeckLFeather.render(r)):(this.LWingB.render(r),this.LWingC.render(r),this.RWingB.render(r),this.RWingC.render(r)),6==this.oneHeadI?(this.Tailpart1.render(r),this.Tailpart2.render(r),this.Tailpart3.render(r),this.Tailpart4.render(r),this.Tailpart5.render(r)):(this.Tail1.render(r),this.Tail2.render(r),this.Tail3.render(r)),h?(this.UBeakb.render(r),this.UBeak2b.render(r),this.LBeakb.render(r),this.LBeak2b.render(r)):(this.UBeak.render(r),this.UBeak2.render(r),this.LBeak.render(r),this.LBeak2.render(r)),l&&(this.SaddleA.render(r),this.SaddleB.render(r),this.SaddleC.render(r),this.SaddleL.render(r),this.SaddleR.render(r),this.SaddleL2.render(r),this.SaddleR2.render(r),this.NeckHarness.render(r),this.NeckHarness2.render(r),g&&(this.NeckHarnessLeft.render(r),this.NeckHarnessRight.render(r))),u)switch(this.Saddlebag.render(r),this.Flagpole.render(r),this.flagColor){case 1:this.FlagOrange.render(r);break;case 2:this.FlagPurple.render(r);break;case 3:this.FlagLightBlue.render(r);break;case 4:this.FlagYellow.render(r);break;case 5:this.FlagGreen.render(r);break;case 6:this.FlagLightRed.render(r);break;case 7:this.FlagDarkGrey.render(r);break;case 8:this.FlagGrey.render(r);break;case 9:this.FlagCyan.render(r);break;case 10:this.FlagDarkPurple.render(r);break;case 11:this.FlagDarkBlue.render(r);break;case 12:this.FlagBrown.render(r);break;case 13:this.FlagDarkGreen.render(r);break;case 14:this.FlagRed.render(r);break;case 15:this.FlagBlack.render(r);break;case 16:this.FlagWhite.render(r)}switch(this.helmet){case 1:this.HelmetLeather.render(r);break;case 2:this.HelmetIron.render(r);break;case 3:this.HelmetGold.render(r);break;case 4:this.HelmetDiamond.render(r);break;case 5:this.HelmetHide.render(r),this.HelmetNeckHide.render(r),this.HelmetHideEar1.render(r),this.HelmetHideEar2.render(r);break;case 6:this.HelmetFur.render(r),this.HelmetNeckFur.render(r),this.HelmetFurEar1.render(r),this.HelmetFurEar2.render(r);break;case 7:this.HelmetReptile.render(r),this.HelmetReptileEar1.render(r),this.HelmetReptileEar2.render(r);break;case 8:this.HelmetGreenChitin.render(r);break;case 9:this.HelmetYellowChitin.render(r);break;case 10:this.HelmetBlueChitin.render(r);break;case 11:this.HelmetBlackChitin.render(r);break;case 12:this.HelmetRedChitin.render(r)}},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r,a,h,l,d){var c=1.1*MathHelper.func_76134_b(.4*t)*e,u=1.1*MathHelper.func_76134_b(.4*t+3.141593)*e;switch(r?(this.Head.d=9,this.Head.rotateAngleX=2.61799,this.Head.rotateAngleY=0):(this.Head.d=3,this.Head.rotateAngleX=u/20+-o/57.295776,this.Head.rotateAngleY=n/57.295776),h&&(d?this.Head.rotateAngleX=0:this.Head.rotateAngleX=u/20),this.UBeak.d=this.Head.d,this.UBeakb.d=this.Head.d,this.UBeak2.d=this.Head.d,this.UBeak2b.d=this.Head.d,this.LBeak.d=this.Head.d,this.LBeakb.d=this.Head.d,this.LBeak2.d=this.Head.d,this.LBeak2b.d=this.Head.d,this.NeckU.d=this.Head.d,this.NeckD.d=this.Head.d,this.NeckL.d=this.Head.d,this.UBeak.rotateAngleX=this.Head.rotateAngleX,this.UBeak.rotateAngleY=this.Head.rotateAngleY,this.UBeak2.rotateAngleX=this.Head.rotateAngleX,this.UBeak2.rotateAngleY=this.Head.rotateAngleY,this.LBeak.rotateAngleX=this.Head.rotateAngleX,this.LBeak.rotateAngleY=this.Head.rotateAngleY,this.LBeak2.rotateAngleX=this.Head.rotateAngleX,this.LBeak2.rotateAngleY=this.Head.rotateAngleY,this.NeckU.rotateAngleX=this.Head.rotateAngleX,this.NeckU.rotateAngleY=this.Head.rotateAngleY,this.NeckD.rotateAngleX=.4363323+this.Head.rotateAngleX,this.NeckD.rotateAngleY=this.Head.rotateAngleY,this.NeckL.rotateAngleX=11.5/57.29578+this.Head.rotateAngleX,this.NeckL.rotateAngleY=this.Head.rotateAngleY,this.UBeakb.rotateAngleX=-.0698132+this.Head.rotateAngleX,this.UBeakb.rotateAngleY=this.Head.rotateAngleY,this.UBeak2b.rotateAngleX=-.0698132+this.Head.rotateAngleX,this.UBeak2b.rotateAngleY=this.Head.rotateAngleY,this.LBeakb.rotateAngleX=7/57.29578+this.Head.rotateAngleX,this.LBeakb.rotateAngleY=this.Head.rotateAngleY,this.LBeak2b.rotateAngleX=7/57.29578+this.Head.rotateAngleX,this.LBeak2b.rotateAngleY=this.Head.rotateAngleY,this.NeckUFeather.d=this.Head.d,this.NeckLFeather.d=this.Head.d,this.UniHorn.d=this.Head.d,this.NeckUFeather.rotateAngleX=this.Head.rotateAngleX,this.NeckUFeather.rotateAngleY=this.Head.rotateAngleY,this.NeckLFeather.rotateAngleX=11.5/57.29578+this.Head.rotateAngleX,this.NeckLFeather.rotateAngleY=this.Head.rotateAngleY,this.UniHorn.rotateAngleX=18/57.29578+this.Head.rotateAngleX,this.UniHorn.rotateAngleY=this.Head.rotateAngleY,this.NeckHarness.d=this.Head.d,this.NeckHarness2.d=this.Head.d,this.NeckHarnessLeft.d=this.Head.d,this.NeckHarnessRight.d=this.Head.d,this.NeckHarness.rotateAngleX=25/57.29578+this.Head.rotateAngleX,this.NeckHarness.rotateAngleY=this.Head.rotateAngleY,this.NeckHarness2.rotateAngleX=this.Head.rotateAngleX,this.NeckHarness2.rotateAngleY=this.Head.rotateAngleY,this.NeckHarnessLeft.rotateAngleX=50/57.29578+this.Head.rotateAngleX,this.NeckHarnessLeft.rotateAngleY=this.Head.rotateAngleY,this.NeckHarnessRight.rotateAngleX=50/57.29578+this.Head.rotateAngleX,this.NeckHarnessRight.rotateAngleY=this.Head.rotateAngleY,this.helmet){case 1:this.HelmetLeather.d=this.Head.d,this.HelmetLeather.rotateAngleX=this.Head.rotateAngleX,this.HelmetLeather.rotateAngleY=this.Head.rotateAngleY;break;case 2:this.HelmetIron.d=this.Head.d,this.HelmetIron.rotateAngleX=this.Head.rotateAngleX,this.HelmetIron.rotateAngleY=this.Head.rotateAngleY;break;case 3:this.HelmetGold.d=this.Head.d,this.HelmetGold.rotateAngleX=this.Head.rotateAngleX,this.HelmetGold.rotateAngleY=this.Head.rotateAngleY;break;case 4:this.HelmetDiamond.d=this.Head.d,this.HelmetDiamond.rotateAngleX=this.Head.rotateAngleX,this.HelmetDiamond.rotateAngleY=this.Head.rotateAngleY;break;case 5:this.HelmetHide.d=this.Head.d,this.HelmetHide.rotateAngleX=this.Head.rotateAngleX,this.HelmetHide.rotateAngleY=this.Head.rotateAngleY,this.HelmetNeckHide.d=this.Head.d,this.HelmetNeckHide.rotateAngleX=this.Head.rotateAngleX,this.HelmetNeckHide.rotateAngleY=this.Head.rotateAngleY,this.HelmetHideEar1.d=this.Head.d,this.HelmetHideEar1.rotateAngleX=this.Head.rotateAngleX,this.HelmetHideEar1.rotateAngleY=this.Head.rotateAngleY,this.HelmetHideEar2.d=this.Head.d,this.HelmetHideEar2.rotateAngleX=this.Head.rotateAngleX,this.HelmetHideEar2.rotateAngleY=this.Head.rotateAngleY;break;case 6:this.HelmetFur.d=this.Head.d,this.HelmetFur.rotateAngleX=this.Head.rotateAngleX,this.HelmetFur.rotateAngleY=this.Head.rotateAngleY,this.HelmetNeckFur.d=this.Head.d,this.HelmetNeckFur.rotateAngleX=this.Head.rotateAngleX,this.HelmetNeckFur.rotateAngleY=this.Head.rotateAngleY,this.HelmetFurEar1.d=this.Head.d,this.HelmetFurEar1.rotateAngleX=this.Head.rotateAngleX,this.HelmetFurEar1.rotateAngleY=this.Head.rotateAngleY,this.HelmetFurEar2.d=this.Head.d,this.HelmetFurEar2.rotateAngleX=this.Head.rotateAngleX,this.HelmetFurEar2.rotateAngleY=this.Head.rotateAngleY;break;case 7:this.HelmetReptile.d=this.Head.d,this.HelmetReptile.rotateAngleX=this.Head.rotateAngleX,this.HelmetReptile.rotateAngleY=this.Head.rotateAngleY,this.HelmetReptileEar1.d=this.Head.d,this.HelmetReptileEar1.rotateAngleX=this.Head.rotateAngleX,this.HelmetReptileEar1.rotateAngleY=-35/57.29578+this.Head.rotateAngleY,this.HelmetReptileEar2.d=this.Head.d,this.HelmetReptileEar2.rotateAngleX=this.Head.rotateAngleX,this.HelmetReptileEar2.rotateAngleY=35/57.29578+this.Head.rotateAngleY;break;case 8:this.HelmetGreenChitin.d=this.Head.d,this.HelmetGreenChitin.rotateAngleX=this.Head.rotateAngleX,this.HelmetGreenChitin.rotateAngleY=this.Head.rotateAngleY;break;case 9:this.HelmetYellowChitin.d=this.Head.d,this.HelmetYellowChitin.rotateAngleX=this.Head.rotateAngleX,this.HelmetYellowChitin.rotateAngleY=this.Head.rotateAngleY;break;case 10:this.HelmetBlueChitin.d=this.Head.d,this.HelmetBlueChitin.rotateAngleX=this.Head.rotateAngleX,this.HelmetBlueChitin.rotateAngleY=this.Head.rotateAngleY;break;case 11:this.HelmetBlackChitin.d=this.Head.d,this.HelmetBlackChitin.rotateAngleX=this.Head.rotateAngleX,this.HelmetBlackChitin.rotateAngleY=this.Head.rotateAngleY;break;case 12:this.HelmetRedChitin.d=this.Head.d,this.HelmetRedChitin.rotateAngleX=this.Head.rotateAngleX,this.HelmetRedChitin.rotateAngleY=this.Head.rotateAngleY}var g=.1*MathHelper.func_76134_b(.8*t)*e;switch(this.flagColor){case 1:this.FlagOrange.rotateAngleY=g;break;case 2:this.FlagPurple.rotateAngleY=g;break;case 3:this.FlagLightBlue.rotateAngleY=g;break;case 4:this.FlagYellow.rotateAngleY=g;break;case 5:this.FlagGreen.rotateAngleY=g;break;case 6:this.FlagLightRed.rotateAngleY=g;break;case 7:this.FlagDarkGrey.rotateAngleY=g;break;case 8:this.FlagGrey.rotateAngleY=g;break;case 9:this.FlagCyan.rotateAngleY=g;break;case 10:this.FlagDarkPurple.rotateAngleY=g;break;case 11:this.FlagDarkBlue.rotateAngleY=g;break;case 12:this.FlagBrown.rotateAngleY=g;break;case 13:this.FlagDarkGreen.rotateAngleY=g;break;case 14:this.FlagRed.rotateAngleY=g;break;case 15:this.FlagBlack.rotateAngleY=g;break;case 16:this.FlagWhite.rotateAngleY=g}5!=this.oneHeadI&&6!=this.oneHeadI||!d?(this.LLegC.d=5,this.LLegC.e=4,this.RLegC.d=5,this.RLegC.e=4,this.LFoot.d=5,this.LFoot.e=4,this.RFoot.d=5,this.RFoot.e=4,this.LLegA.rotateAngleX=.1745329+c,this.LLegB.rotateAngleX=this.LLegA.rotateAngleX,this.LLegC.rotateAngleX=-.261799+c,this.LFoot.rotateAngleX=this.LLegA.rotateAngleX,this.RLegA.rotateAngleX=.1745329+u,this.RLegB.rotateAngleX=this.RLegA.rotateAngleX,this.RLegC.rotateAngleX=-.261799+u,this.RFoot.rotateAngleX=this.RLegA.rotateAngleX):(this.LLegC.d=8,this.LLegC.e=17,this.RLegC.d=8,this.RLegC.e=17,this.LFoot.d=-5,this.LFoot.e=-3,this.RFoot.d=-5,this.RFoot.e=-3,this.LLegA.rotateAngleX=40/57.29578,this.LLegB.rotateAngleX=this.LLegA.rotateAngleX,this.LLegC.rotateAngleX=-85/57.29578,this.LFoot.rotateAngleX=25/57.29578,this.RLegA.rotateAngleX=40/57.29578,this.RLegB.rotateAngleX=this.RLegA.rotateAngleX,this.RLegC.rotateAngleX=-85/57.29578,this.RFoot.rotateAngleX=25/57.29578);var f=0;if(5==this.oneHeadI||6==this.oneHeadI?(f=0!=l?-40/57.29578+1.3*MathHelper.func_76134_b(.3*l):h&&d?.2*MathHelper.func_76134_b(.8*i):MathHelper.func_76134_b(.3*t)*e,this.LWingD.rotateAngleZ=-20/57.29578-f,this.LWingE.rotateAngleZ=-20/57.29578-f,this.RWingD.rotateAngleZ=20/57.29578+f,this.RWingE.rotateAngleZ=20/57.29578+f):(f=10/57.29578+.2*MathHelper.func_76134_b(.6*t)*e,a&&(f+=.8726646),this.LWingB.rotateAngleY=.0872665+f,this.LWingC.rotateAngleY=.0872665+f,this.RWingB.rotateAngleY=-.0872665-f,this.RWingC.rotateAngleY=-.0872665-f,this.LWingB.rotateAngleX=.0872665+u/10,this.LWingC.rotateAngleX=u/10,this.RWingB.rotateAngleX=.0872665+u/10,this.RWingC.rotateAngleX=u/10),h?(this.SaddleL.rotateAngleX=-60/57.29578,this.SaddleL2.rotateAngleX=this.SaddleL.rotateAngleX,this.SaddleR.rotateAngleX=-60/57.29578,this.SaddleR2.rotateAngleX=this.SaddleR.rotateAngleX,this.SaddleL.rotateAngleZ=-40/57.29578,this.SaddleL2.rotateAngleZ=this.SaddleL.rotateAngleZ,this.SaddleR.rotateAngleZ=40/57.29578,this.SaddleR2.rotateAngleZ=this.SaddleR.rotateAngleZ):(this.SaddleL.rotateAngleX=u/3,this.SaddleL2.rotateAngleX=u/3,this.SaddleR.rotateAngleX=u/3,this.SaddleR2.rotateAngleX=u/3,this.SaddleL.rotateAngleZ=u/5,this.SaddleL2.rotateAngleZ=u/5,this.SaddleR.rotateAngleZ=-u/5,this.SaddleR2.rotateAngleZ=-u/5),6==this.oneHeadI){var p=15,m=.3*MathHelper.func_76134_b(.5*t)*e;this.Tail.rotateAngleY=m,m+=m/p,this.Tailpart1.rotateAngleY=m,m+=m/p,this.Tailpart1.rotateAngleY=m,m+=m/p,this.Tailpart2.rotateAngleY=m,m+=m/p,this.Tailpart3.rotateAngleY=m,m+=m/p,this.Tailpart4.rotateAngleY=m,m+=m/p,this.Tailpart5.rotateAngleY=m}}}),ModelMoCRaccoon.prototype=$.extend({},ModelBase.prototype,{ModelMoCRaccoon:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=64,this.Head=this.model.Head=new ModelRenderer(this,38,21),this.Head.addBox(-4,-3.5,-6.5,8,6,5),this.Head.setRotationPoint(0,17,-4),this.RightSideburn=this.model.RightSideburn=new ModelRenderer(this,0,32),this.RightSideburn.addBox(-3,-2,-2,3,4,4),this.RightSideburn.setRotationPoint(-2.5,.5,-3.2),setRotation(this.RightSideburn,0,-.5235988,0),this.Head.addChild(this.RightSideburn),delete this.model.RightSideburn,this.LeftSideburn=this.model.LeftSideburn=new ModelRenderer(this,0,40),this.LeftSideburn.addBox(0,-2,-2,3,4,4),this.LeftSideburn.setRotationPoint(2.5,.5,-3.2),setRotation(this.LeftSideburn,0,.5235988,0),this.Head.addChild(this.LeftSideburn),delete this.model.LeftSideburn,this.Snout=this.model.Snout=new ModelRenderer(this,24,25),this.Snout.addBox(-1.5,-.5,-10.5,3,3,4),this.Snout.setRotationPoint(0,17,-4),this.RightEar=this.model.RightEar=new ModelRenderer(this,24,22),this.RightEar.addBox(-4,-5.5,-3.5,3,2,1),this.RightEar.setRotationPoint(0,17,-4),this.LeftEar=this.model.LeftEar=new ModelRenderer(this,24,18),
this.LeftEar.addBox(1,-5.5,-3.5,3,2,1),this.LeftEar.setRotationPoint(0,17,-4),this.RightRearFoot=this.model.RightRearFoot=new ModelRenderer(this,46,0),this.RightRearFoot.addBox(-5,5,-2,3,1,3),this.RightRearFoot.setRotationPoint(0,18,4),this.Neck=this.model.Neck=new ModelRenderer(this,46,4),this.Neck.addBox(-2.5,-2,-3,5,4,3),this.Neck.setRotationPoint(0,17,-4),setRotation(this.Neck,-.446143,0,0),this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(-3,0,-3,6,6,12),this.Body.setRotationPoint(0,15,-2),this.TailA=this.model.TailA=new ModelRenderer(this,0,3),this.TailA.addBox(-1.5,-6,-1.5,3,6,3),this.TailA.setRotationPoint(0,16.5,6.5),setRotation(this.TailA,-2.024582,0,0),this.TailB=this.model.TailB=new ModelRenderer(this,24,3),this.TailB.addBox(-1.5,-11,.3,3,6,3),this.TailB.setRotationPoint(0,16.5,6.5),setRotation(this.TailB,-1.689974,0,0),this.RightFrontLegA=this.model.RightFrontLegA=new ModelRenderer(this,36,0),this.RightFrontLegA.addBox(-4,-1,-1,2,5,3),this.RightFrontLegA.setRotationPoint(0,18,-4),setRotation(this.RightFrontLegA,.520501,0,0),this.RightFrontLegB=this.model.RightFrontLegB=new ModelRenderer(this,46,11),this.RightFrontLegB.addBox(-3.5,1,2,2,4,2),this.RightFrontLegB.setRotationPoint(0,18,-4),setRotation(this.RightFrontLegB,-.3717861,0,0),this.RightFrontFoot=this.model.RightFrontFoot=new ModelRenderer(this,46,0),this.RightFrontFoot.addBox(-4,5,-1,3,1,3),this.RightFrontFoot.setRotationPoint(0,18,-4),this.LeftFrontLegA=this.model.LeftFrontLegA=new ModelRenderer(this,36,8),this.LeftFrontLegA.addBox(2,-1,-1,2,5,3),this.LeftFrontLegA.setRotationPoint(0,18,-4),setRotation(this.LeftFrontLegA,.520501,0,0),this.LeftFrontLegB=this.model.LeftFrontLegB=new ModelRenderer(this,54,11),this.LeftFrontLegB.addBox(1.5,1,2,2,4,2),this.LeftFrontLegB.setRotationPoint(0,18,-4),setRotation(this.LeftFrontLegB,-.3717861,0,0),this.LeftFrontFoot=this.model.LeftFrontFoot=new ModelRenderer(this,46,0),this.LeftFrontFoot.addBox(1,5,-1,3,1,3),this.LeftFrontFoot.setRotationPoint(0,18,-4),this.RightRearLegA=this.model.RightRearLegA=new ModelRenderer(this,12,18),this.RightRearLegA.addBox(-5,-2,-3,2,5,4),this.RightRearLegA.setRotationPoint(0,18,4),setRotation(this.RightRearLegA,.9294653,0,0),this.RightRearLegB=this.model.RightRearLegB=new ModelRenderer(this,0,27),this.RightRearLegB.addBox(-4.5,2,-5,2,2,3),this.RightRearLegB.setRotationPoint(0,18,4),setRotation(this.RightRearLegB,.9294653,0,0),this.LeftRearLegB=this.model.LeftRearLegB=new ModelRenderer(this,10,27),this.LeftRearLegB.addBox(2.5,2,-5,2,2,3),this.LeftRearLegB.setRotationPoint(0,18,4),setRotation(this.LeftRearLegB,.9294653,0,0),this.LeftRearLegA=this.model.LeftRearLegA=new ModelRenderer(this,0,18),this.LeftRearLegA.addBox(3,-2,-3,2,5,4),this.LeftRearLegA.setRotationPoint(0,18,4),setRotation(this.LeftRearLegA,.9294653,0,0),this.LeftRearFoot=this.model.LeftRearFoot=new ModelRenderer(this,46,0),this.LeftRearFoot.addBox(2,5,-2,3,1,3),this.LeftRearFoot.setRotationPoint(0,18,4)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Head.render(r),this.Snout.render(r),this.RightEar.render(r),this.LeftEar.render(r),this.RightRearFoot.render(r),this.Neck.render(r),this.Body.render(r),this.TailA.render(r),this.TailB.render(r),this.RightFrontLegA.render(r),this.RightFrontLegB.render(r),this.RightFrontFoot.render(r),this.LeftFrontLegA.render(r),this.LeftFrontLegB.render(r),this.LeftFrontFoot.render(r),this.RightRearLegA.render(r),this.RightRearLegB.render(r),this.LeftRearLegB.render(r),this.LeftRearLegA.render(r),this.LeftRearFoot.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){this.Head.rotateAngleY=n/57.29578,this.Head.rotateAngleX=o/57.29578,this.Snout.rotateAngleY=this.Head.rotateAngleY,this.Snout.rotateAngleX=this.Head.rotateAngleX,this.RightEar.rotateAngleX=this.Head.rotateAngleX,this.RightEar.rotateAngleY=this.Head.rotateAngleY,this.LeftEar.rotateAngleX=this.Head.rotateAngleX,this.LeftEar.rotateAngleY=this.Head.rotateAngleY;var r=.8*MathHelper.func_76134_b(1*t+3.141593)*e,a=.8*MathHelper.func_76134_b(1*t)*e;this.RightFrontLegA.rotateAngleX=30/57.29578+r,this.LeftFrontLegA.rotateAngleX=30/57.29578+a,this.RightRearLegA.rotateAngleX=53/57.29578+a,this.LeftRearLegA.rotateAngleX=53/57.29578+r,this.RightFrontLegB.rotateAngleX=-21/57.29578+r,this.RightFrontFoot.rotateAngleX=r,this.LeftFrontLegB.rotateAngleX=-21/57.29578+a,this.LeftFrontFoot.rotateAngleX=a,this.RightRearLegB.rotateAngleX=53/57.29578+a,this.RightRearFoot.rotateAngleX=a,this.LeftRearLegB.rotateAngleX=53/57.29578+r,this.LeftRearFoot.rotateAngleX=r,this.TailA.rotateAngleY=.7*MathHelper.func_76134_b(.6662*t)*e,this.TailB.rotateAngleY=this.TailA.rotateAngleY}}),ModelMoCRat.prototype=$.extend({},ModelBase.prototype,{ModelMoCRat:function(){ModelBase.call(this),this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-1.5,-1,-6,3,4,6,0),this.Head.setRotationPoint(0,18,-9),this.EarR=this.model.EarR=new ModelRenderer(this,16,26),this.EarR.addBox(-3.5,-3,-2,3,3,1,0),this.EarR.setRotationPoint(0,18,-9),this.EarL=this.model.EarL=new ModelRenderer(this,24,26),this.EarL.addBox(.5,-3,-2,3,3,1,0),this.EarL.setRotationPoint(0,18,-9),this.WhiskerR=this.model.WhiskerR=new ModelRenderer(this,24,16),this.WhiskerR.addBox(-4.5,-1,-6,3,3,1,0),this.WhiskerR.setRotationPoint(0,18,-9),this.WhiskerL=this.model.WhiskerL=new ModelRenderer(this,24,20),this.WhiskerL.addBox(1.5,-1,-6,3,3,1,0),this.WhiskerL.setRotationPoint(0,18,-9),this.Body=this.model.Body=new ModelRenderer(this,24,0),this.Body.addBox(-4,-3,-3,8,8,8,0),this.Body.setRotationPoint(0,19,0),this.Body.rotateAngleX=1.570796,this.Tail=this.model.Tail=new ModelRenderer(this,56,0),this.Tail.addBox(-1,0,-1,2,18,2,0),this.Tail.setRotationPoint(0,19,5),this.Tail.rotateAngleX=1.570796,this.FrontL=this.model.FrontL=new ModelRenderer(this,0,18),this.FrontL.addBox(-2,0,-3,2,1,4,0),this.FrontL.setRotationPoint(3,22,-7),this.FrontR=this.model.FrontR=new ModelRenderer(this,0,18),this.FrontR.addBox(0,0,-3,2,1,4,0),this.FrontR.setRotationPoint(-3,22,-7),this.RearL=this.model.RearL=new ModelRenderer(this,0,24),this.RearL.addBox(-2,0,-4,2,1,5,0),this.RearL.setRotationPoint(4,22,2),this.RearR=this.model.RearR=new ModelRenderer(this,0,24),this.RearR.addBox(0,0,-4,2,1,5,0),this.RearR.setRotationPoint(-4,22,2),this.BodyF=this.model.BodyF=new ModelRenderer(this,32,16),this.BodyF.addBox(-3,-3,-7,6,6,6,0),this.BodyF.setRotationPoint(0,19,-2)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Head.render(r),this.EarR.render(r),this.EarL.render(r),this.WhiskerR.render(r),this.WhiskerL.render(r),this.Body.render(r),this.Tail.render(r),this.FrontL.render(r),this.FrontR.render(r),this.RearL.render(r),this.RearR.render(r),this.BodyF.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.Head.rotateAngleX=-(o/57.29578),this.Head.rotateAngleY=n/57.29578,this.EarR.rotateAngleX=this.Head.rotateAngleX,this.EarR.rotateAngleY=this.Head.rotateAngleY,this.EarL.rotateAngleX=this.Head.rotateAngleX,this.EarL.rotateAngleY=this.Head.rotateAngleY,this.WhiskerR.rotateAngleX=this.Head.rotateAngleX,this.WhiskerR.rotateAngleY=this.Head.rotateAngleY,this.WhiskerL.rotateAngleX=this.Head.rotateAngleX,this.WhiskerL.rotateAngleY=this.Head.rotateAngleY,this.FrontL.rotateAngleX=.6*MathHelper.func_76134_b(.6662*t)*e,this.RearL.rotateAngleX=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.RearR.rotateAngleX=.6*MathHelper.func_76134_b(.6662*t)*e,this.FrontR.rotateAngleX=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Tail.rotateAngleY=.625*this.FrontL.rotateAngleX}}),ModelMoCRay.prototype=$.extend({},ModelBase.prototype,{typeInt:0,attacking:!1,ModelMoCRay:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=32,this.Body=this.model.Body=new ModelRenderer(this,26,0),this.Body.addBox(-4,-1,0,8,2,11),this.Body.setRotationPoint(0,22,-5),this.Right=this.model.Right=new ModelRenderer(this,10,26),this.Right.addBox(-.5,-1,-4,1,2,4),this.Right.setRotationPoint(-3,22,-4.8),this.Left=this.model.Left=new ModelRenderer(this,0,26),this.Left.addBox(-.5,-1,-4,1,2,4),this.Left.setRotationPoint(3,22,-4.8),this.BodyU=this.model.BodyU=new ModelRenderer(this,0,11),this.BodyU.addBox(-3,-1,0,6,1,8),this.BodyU.setRotationPoint(0,21,-4),this.Tail=this.model.Tail=new ModelRenderer(this,30,15),this.Tail.addBox(-.5,-.5,1,1,1,16),this.Tail.setRotationPoint(0,22,8),this.BodyTail=this.model.BodyTail=new ModelRenderer(this,0,20),this.BodyTail.addBox(-1.8,-.5,-3.2,5,1,5),this.BodyTail.setRotationPoint(0,22,7),setRotation(this.BodyTail,0,1,0),this.RWingA=this.model.RWingA=new ModelRenderer(this,0,0),this.RWingA.addBox(-3,-.5,-5,3,1,10),this.RWingA.setRotationPoint(-4,22,1),this.RWingB=this.model.RWingB=new ModelRenderer(this,2,2),this.RWingB.addBox(-6,-.5,-4,3,1,8),this.RWingB.setRotationPoint(-4,22,1),this.RWingC=this.model.RWingC=new ModelRenderer(this,5,4),this.RWingC.addBox(-8,-.5,-3,2,1,6),this.RWingC.setRotationPoint(-4,22,1),this.RWingD=this.model.RWingD=new ModelRenderer(this,6,5),this.RWingD.addBox(-10,-.5,-2.5,2,1,5),this.RWingD.setRotationPoint(-4,22,1),this.RWingE=this.model.RWingE=new ModelRenderer(this,7,6),this.RWingE.addBox(-12,-.5,-2,2,1,4),this.RWingE.setRotationPoint(-4,22,1),this.RWingF=this.model.RWingF=new ModelRenderer(this,8,7),this.RWingF.addBox(-14,-.5,-1.5,2,1,3),this.RWingF.setRotationPoint(-4,22,1),this.RWingG=this.model.RWingG=new ModelRenderer(this,9,8),this.RWingG.addBox(-16,-.5,-1,2,1,2),this.RWingG.setRotationPoint(-4,22,1),this.LWingA=this.model.LWingA=new ModelRenderer(this,0,0),this.LWingA.addBox(0,-.5,-5,3,1,10),this.LWingA.setRotationPoint(4,22,1),this.LWingA.mirror=!0,this.LWingB=this.model.LWingB=new ModelRenderer(this,2,2),this.LWingB.addBox(3,-.5,-4,3,1,8),this.LWingB.setRotationPoint(4,22,1),this.LWingB.mirror=!0,this.LWingC=this.model.LWingC=new ModelRenderer(this,5,4),this.LWingC.addBox(6,-.5,-3,2,1,6),this.LWingC.setRotationPoint(4,22,1),this.LWingC.mirror=!0,this.LWingD=this.model.LWingD=new ModelRenderer(this,6,5),this.LWingD.addBox(8,-.5,-2.5,2,1,5),this.LWingD.setRotationPoint(4,22,1),this.LWingD.mirror=!0,this.LWingE=this.model.LWingE=new ModelRenderer(this,7,6),this.LWingE.addBox(10,-.5,-2,2,1,4),this.LWingE.setRotationPoint(4,22,1),this.LWingE.mirror=!0,this.LWingF=this.model.LWingF=new ModelRenderer(this,8,7),this.LWingF.addBox(12,-.5,-1.5,2,1,3),this.LWingF.setRotationPoint(4,22,1),this.LWingF.mirror=!0,this.LWingG=this.model.LWingG=new ModelRenderer(this,9,8),this.LWingG.addBox(14,-.5,-1,2,1,2),this.LWingG.setRotationPoint(4,22,1),this.LWingG.mirror=!0,this.LEye=this.model.LEye=new ModelRenderer(this,0,0),this.LEye.addBox(-3,-2,1,1,1,2),this.LEye.setRotationPoint(0,21,-4),this.REye=this.model.REye=new ModelRenderer(this,0,3),this.REye.addBox(2,-2,1,1,1,2),this.REye.setRotationPoint(0,21,-4)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r);var a=t;this.attacking=a.isPoisoning(),this.oneHeadInt=a.getType(),setRotationAngles(e,i,n,o,s,r),this.Tail.render(r),this.Body.render(r),this.BodyU.render(r),this.BodyTail.render(r),this.RWingA.render(r),this.RWingB.render(r),this.LWingA.render(r),this.LWingB.render(r),1==this.oneHeadInt?(this.Right.render(r),this.Left.render(r),this.RWingC.render(r),this.LWingC.render(r),this.RWingD.render(r),this.RWingE.render(r),this.RWingF.render(r),this.RWingG.render(r),this.LWingD.render(r),this.LWingE.render(r),this.LWingF.render(r),this.LWingG.render(r)):(this.REye.render(r),this.LEye.render(r))},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){var r=1.5*MathHelper.func_76134_b(.6662*t)*e,a=20;this.Tail.rotateAngleY=r,this.RWingA.rotateAngleZ=r,this.LWingA.rotateAngleZ=-r,r+=r/a,this.RWingB.rotateAngleZ=r,this.LWingB.rotateAngleZ=-r,r+=r/a,this.RWingC.rotateAngleZ=r,this.LWingC.rotateAngleZ=-r,r+=r/a,this.RWingD.rotateAngleZ=r,this.LWingD.rotateAngleZ=-r,r+=r/a,this.RWingE.rotateAngleZ=r,this.LWingE.rotateAngleZ=-r,r+=r/a,this.RWingF.rotateAngleZ=r,this.LWingF.rotateAngleZ=-r,r+=r/a,this.RWingG.rotateAngleZ=r,this.LWingG.rotateAngleZ=-r,this.attacking?this.Tail.rotateAngleX=.5:this.Tail.rotateAngleX=0}}),ModelMoCRoach.prototype=$.extend({},ModelBase.prototype,{ModelMoCRoach:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-.5,0,-1,1,1,2),this.Head.setRotationPoint(0,23,-2),setRotation(this.Head,-2.171231,0,0),this.LAnthenna=this.model.LAnthenna=new ModelRenderer(this,3,21),this.LAnthenna.addBox(0,0,0,4,0,1),this.LAnthenna.setRotationPoint(.5,0,0),setRotation(this.LAnthenna,-90/57.29578,.4363323,0),this.Head.addChild(this.LAnthenna),delete this.model.LAnthenna,this.LAnthennaB=this.model.LAnthennaB=new ModelRenderer(this,4,21),this.LAnthennaB.addBox(0,0,1,3,0,1),this.LAnthennaB.setRotationPoint(2.5,0,-.5),setRotation(this.LAnthennaB,0,45/57.29578,0),this.LAnthenna.addChild(this.LAnthennaB),delete this.model.LAnthennaB,this.RAnthenna=this.model.RAnthenna=new ModelRenderer(this,3,19),this.RAnthenna.addBox(-4.5,0,0,4,0,1),this.RAnthenna.setRotationPoint(0,0,0),setRotation(this.RAnthenna,-90/57.29578,-.4363323,0),this.Head.addChild(this.RAnthenna),delete this.model.RAnthenna,this.RAnthennaB=this.model.RAnthennaB=new ModelRenderer(this,4,19),this.RAnthennaB.addBox(-4,0,1,3,0,1),this.RAnthennaB.setRotationPoint(-2.5,0,.5),setRotation(this.RAnthennaB,0,-45/57.29578,0),this.RAnthenna.addChild(this.RAnthennaB),delete this.model.RAnthennaB,this.Thorax=this.model.Thorax=new ModelRenderer(this,0,3),this.Thorax.addBox(-1,0,-1,2,1,2),this.Thorax.setRotationPoint(0,22,-1),this.FrontLegs=this.model.FrontLegs=new ModelRenderer(this,0,11),this.FrontLegs.addBox(-2,0,0,4,2,0),this.FrontLegs.setRotationPoint(0,23,-1.8),setRotation(this.FrontLegs,-1.115358,0,0),this.MidLegs=this.model.MidLegs=new ModelRenderer(this,0,13),this.MidLegs.addBox(-2.5,0,0,5,2,0),this.MidLegs.setRotationPoint(0,23,-1.2),setRotation(this.MidLegs,1.264073,0,0),this.RearLegs=this.model.RearLegs=new ModelRenderer(this,0,15),this.RearLegs.addBox(-2,0,0,4,4,0),this.RearLegs.setRotationPoint(0,23,-.4),setRotation(this.RearLegs,1.368173,0,0),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,0,6),this.Abdomen.addBox(-1,0,-1,2,4,1),this.Abdomen.setRotationPoint(0,22,0),setRotation(this.Abdomen,1.427659,0,0),this.TailL=this.model.TailL=new ModelRenderer(this,2,29),this.TailL.addBox(-.5,0,0,1,2,0),this.TailL.setRotationPoint(0,23,3.6),setRotation(this.TailL,1.554066,.645772,0),this.TailR=this.model.TailR=new ModelRenderer(this,0,29),this.TailR.addBox(-.5,0,0,1,2,0),this.TailR.setRotationPoint(0,23,3.6),setRotation(this.TailR,1.554066,-.645772,0),this.LShellClosed=this.model.LShellClosed=new ModelRenderer(this,4,23),this.LShellClosed.addBox(0,0,0,2,0,6),this.LShellClosed.setRotationPoint(0,21.5,-1.5),setRotation(this.LShellClosed,-.1487144,-.0872665,.191986),this.RShellClosed=this.model.RShellClosed=new ModelRenderer(this,0,23),this.RShellClosed.addBox(-2,0,0,2,0,6),this.RShellClosed.setRotationPoint(0,21.5,-1.5),setRotation(this.RShellClosed,-.1487144,.0872665,-.191986),this.LShellOpen=this.model.LShellOpen=new ModelRenderer(this,4,23),this.LShellOpen.addBox(0,0,0,2,0,6),this.LShellOpen.setRotationPoint(0,21.5,-1.5),setRotation(this.LShellOpen,1.117011,-.0872665,1.047198),this.RShellOpen=this.model.RShellOpen=new ModelRenderer(this,0,23),this.RShellOpen.addBox(-2,0,0,2,0,6),this.RShellOpen.setRotationPoint(0,21.5,-1.5),setRotation(this.RShellOpen,1.117011,.0872665,-1.047198),this.LeftWing=this.model.LeftWing=new ModelRenderer(this,11,21),this.LeftWing.addBox(0,1,-1,6,0,2),this.LeftWing.setRotationPoint(0,21.5,-1.5),this.LeftWing.setTextureSize(32,32),this.LeftWing.mirror=!0,setRotation(this.LeftWing,0,-1.047198,-.4363323),this.RightWing=this.model.RightWing=new ModelRenderer(this,11,19),this.RightWing.addBox(-6,1,-1,6,0,2),this.RightWing.setRotationPoint(0,21.5,-1.5),this.RightWing.setTextureSize(32,32),this.RightWing.mirror=!0,setRotation(this.RightWing,0,1.047198,.4363323)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=a.getIsFlying()||a.isOnAir();if(setRotationAngles(e,i,n,o,s,r,h),this.Head.render(r),this.Thorax.render(r),this.FrontLegs.render(r),this.MidLegs.render(r),this.RearLegs.render(r),this.Abdomen.render(r),this.TailL.render(r),this.TailR.render(r),h){this.LShellOpen.render(r),this.RShellOpen.render(r),GL11.glPushMatrix(),GL11.glEnable(3042);var l=.6;GL11.glBlendFunc(770,771),GL11.glColor4(.8,.8,.8,l),this.LeftWing.render(r),this.RightWing.render(r),GL11.glDisable(3042),GL11.glPopMatrix()}else this.LShellClosed.render(r),this.RShellClosed.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r){return}}),ModelMoCScorpion.prototype=$.extend({},ModelBase.prototype,{ModelMoCScorpion:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=64,this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-5,0,0,10,5,13),this.Head.setRotationPoint(0,14,-9),this.MouthL=this.model.MouthL=new ModelRenderer(this,18,58),this.MouthL.addBox(-3,-2,-1,4,4,2),this.MouthL.setRotationPoint(3,17,-9),setRotation(this.MouthL,0,-.3839724,0),this.MouthR=this.model.MouthR=new ModelRenderer(this,30,58),this.MouthR.addBox(-1,-2,-1,4,4,2),this.MouthR.setRotationPoint(-3,17,-9),setRotation(this.MouthR,0,.3839724,0),this.Body=this.model.Body=new ModelRenderer(this,0,18),this.Body.addBox(-4,-2,0,8,4,10),this.Body.setRotationPoint(0,17,3),setRotation(this.Body,.0872665,0,0),this.Tail1=this.model.Tail1=new ModelRenderer(this,0,32),this.Tail1.addBox(-3,-2,0,6,4,6),this.Tail1.setRotationPoint(0,16,12),setRotation(this.Tail1,.6108652,0,0),this.Tail2=this.model.Tail2=new ModelRenderer(this,0,42),this.Tail2.addBox(-2,-2,0,4,4,6),this.Tail2.setRotationPoint(0,13,16.5),setRotation(this.Tail2,1.134464,0,0),this.Tail3=this.model.Tail3=new ModelRenderer(this,0,52),this.Tail3.addBox(-1.5,-1.5,0,3,3,6),this.Tail3.setRotationPoint(0,8,18.5),setRotation(this.Tail3,1.692143,0,0),this.Tail4=this.model.Tail4=new ModelRenderer(this,24,32),this.Tail4.addBox(-1.5,-1.5,0,3,3,6),this.Tail4.setRotationPoint(0,3,18),setRotation(this.Tail4,2.510073,0,0),this.Tail5=this.model.Tail5=new ModelRenderer(this,24,41),this.Tail5.addBox(-1.5,-1.5,0,3,3,6),this.Tail5.setRotationPoint(0,-.2,14),setRotation(this.Tail5,3.067752,0,0),this.Sting1=this.model.Sting1=new ModelRenderer(this,30,50),this.Sting1.addBox(-1.5,0,-1.5,3,5,3),this.Sting1.setRotationPoint(0,-1,7),setRotation(this.Sting1,.4089647,0,0),this.Sting2=this.model.Sting2=new ModelRenderer(this,26,50),this.Sting2.addBox(-.5,0,.5,1,4,1),this.Sting2.setRotationPoint(0,2.6,8.8),setRotation(this.Sting2,-.2230717,0,0),this.LArm1=this.model.LArm1=new ModelRenderer(this,26,18),this.LArm1.addBox(-1,-7,-1,2,7,2),this.LArm1.setRotationPoint(5,18,-8),setRotation(this.LArm1,-.349066,0,.8726646),this.LArm2=this.model.LArm2=new ModelRenderer(this,42,55),this.LArm2.addBox(-1.5,-1.5,-6,3,3,6),this.LArm2.setRotationPoint(10,14,-6),setRotation(this.LArm2,.1745329,-.349066,-.261799),this.LArm3=this.model.LArm3=new ModelRenderer(this,42,39),this.LArm3.addBox(-.5,-.5,-7,2,1,7),this.LArm3.setRotationPoint(12,15,-11),setRotation(this.LArm3,.261799,.1570796,-.1570796),this.LArm4=this.model.LArm4=new ModelRenderer(this,42,31),this.LArm4.addBox(-1.5,-.5,-6,1,1,7),this.LArm4.setRotationPoint(11,15,-11),setRotation(this.LArm4,.261799,0,-.1570796),this.RArm1=this.model.RArm1=new ModelRenderer(this,0,18),this.RArm1.addBox(-1,-7,-1,2,7,2),this.RArm1.setRotationPoint(-5,18,-8),setRotation(this.RArm1,-.349066,0,-.8726646),this.RArm2=this.model.RArm2=new ModelRenderer(this,42,55),this.RArm2.addBox(-1.5,-1.5,-6,3,3,6),this.RArm2.setRotationPoint(-10,14,-6),setRotation(this.RArm2,.1745329,.349066,.261799),this.RArm3=this.model.RArm3=new ModelRenderer(this,42,47),this.RArm3.addBox(-1.5,-.5,-7,2,1,7),this.RArm3.setRotationPoint(-12,15,-11),setRotation(this.RArm3,.261799,-.1570796,.1570796),this.RArm4=this.model.RArm4=new ModelRenderer(this,42,31),this.RArm4.addBox(.5,-.5,-6,1,1,7),this.RArm4.setRotationPoint(-11,15,-11),setRotation(this.RArm4,.261799,0,.1570796),this.Leg1A=this.model.Leg1A=new ModelRenderer(this,38,0),this.Leg1A.addBox(-1,-7,-1,2,7,2),this.Leg1A.setRotationPoint(5,18,-5),this.setRotationG(this.Leg1A,-10,0,75),this.Leg1B=this.model.Leg1B=new ModelRenderer(this,50,0),this.Leg1B.addBox(2,-8,-1,5,2,2),this.Leg1B.setRotationPoint(5,18,-5),this.setRotationG(this.Leg1B,-10,0,60),this.Leg1C=this.model.Leg1C=new ModelRenderer(this,52,16),this.Leg1C.addBox(4.5,-9,-.7,5,1,1),this.Leg1C.setRotationPoint(5,18,-5),this.setRotationG(this.Leg1C,-10,0,75),this.Leg2A=this.model.Leg2A=new ModelRenderer(this,38,0),this.Leg2A.addBox(-1,-7,-1,2,7,2),this.Leg2A.setRotationPoint(5,18,-2),this.setRotationG(this.Leg2A,-30,0,70),this.Leg2B=this.model.Leg2B=new ModelRenderer(this,50,4),this.Leg2B.addBox(1,-8,-1,5,2,2),this.Leg2B.setRotationPoint(5,18,-2),this.setRotationG(this.Leg2B,-30,0,60),this.Leg2C=this.model.Leg2C=new ModelRenderer(this,50,18),this.Leg2C.addBox(4,-8.5,-1,6,1,1),this.Leg2C.setRotationPoint(5,18,-2),this.setRotationG(this.Leg2C,-30,0,70),this.Leg3A=this.model.Leg3A=new ModelRenderer(this,38,0),this.Leg3A.addBox(-1,-7,-1,2,7,2),this.Leg3A.setRotationPoint(5,17.5,1),this.setRotationG(this.Leg3A,-45,0,70),this.Leg3B=this.model.Leg3B=new ModelRenderer(this,48,8),this.Leg3B.addBox(1,-8,-1,6,2,2),this.Leg3B.setRotationPoint(5,17.5,1),this.setRotationG(this.Leg3B,-45,0,60),this.Leg3C=this.model.Leg3C=new ModelRenderer(this,50,20),this.Leg3C.addBox(4.5,-8.2,-1.3,6,1,1),this.Leg3C.setRotationPoint(5,17.5,1),this.setRotationG(this.Leg3C,-45,0,70),this.Leg4A=this.model.Leg4A=new ModelRenderer(this,38,0),this.Leg4A.addBox(-1,-7,-1,2,7,2),this.Leg4A.setRotationPoint(5,17,4),this.setRotationG(this.Leg4A,-60,0,70),this.Leg4B=this.model.Leg4B=new ModelRenderer(this,46,12),this.Leg4B.addBox(.5,-8.5,-1,7,2,2),this.Leg4B.setRotationPoint(5,17,4),this.setRotationG(this.Leg4B,-60,0,60),this.Leg4C=this.model.Leg4C=new ModelRenderer(this,48,22),this.Leg4C.addBox(3.5,-8.5,-1.5,7,1,1),this.Leg4C.setRotationPoint(5,17,4),this.setRotationG(this.Leg4C,-60,0,70),this.Leg5A=this.model.Leg5A=new ModelRenderer(this,0,0),this.Leg5A.addBox(-1,-7,-1,2,7,2),this.Leg5A.setRotationPoint(-5,18,-5),this.setRotationG(this.Leg5A,-10,0,-75),this.Leg5B=this.model.Leg5B=new ModelRenderer(this,50,0),this.Leg5B.addBox(-7,-8,-1,5,2,2),this.Leg5B.setRotationPoint(-5,18,-5),this.setRotationG(this.Leg5B,-10,0,-60),this.Leg5C=this.model.Leg5C=new ModelRenderer(this,52,16),this.Leg5C.addBox(-9.5,-9,-.7,5,1,1),this.Leg5C.setRotationPoint(-5,18,-5),this.setRotationG(this.Leg5C,-10,0,-75),this.Leg6A=this.model.Leg6A=new ModelRenderer(this,0,0),this.Leg6A.addBox(-1,-7,-1,2,7,2),this.Leg6A.setRotationPoint(-5,18,-2),this.setRotationG(this.Leg6A,-30,0,-70),this.Leg6B=this.model.Leg6B=new ModelRenderer(this,50,4),this.Leg6B.addBox(-6,-8,-1,5,2,2),this.Leg6B.setRotationPoint(-5,18,-2),this.setRotationG(this.Leg6B,-30,0,-60),this.Leg6C=this.model.Leg6C=new ModelRenderer(this,50,18),this.Leg6C.addBox(-10,-8.5,-1,6,1,1),this.Leg6C.setRotationPoint(-5,18,-2),this.setRotationG(this.Leg6C,-30,0,-60),this.Leg7A=this.model.Leg7A=new ModelRenderer(this,0,0),this.Leg7A.addBox(-1,-7,-1,2,7,2),this.Leg7A.setRotationPoint(-5,17.5,1),this.setRotationG(this.Leg7A,-45,0,-70),this.Leg7B=this.model.Leg7B=new ModelRenderer(this,48,8),this.Leg7B.addBox(-7,-8.5,-1,6,2,2),this.Leg7B.setRotationPoint(-5,17.5,1),this.setRotationG(this.Leg7B,-45,0,-60),this.Leg7C=this.model.Leg7C=new ModelRenderer(this,50,20),this.Leg7C.addBox(-10.5,-8.7,-1.3,6,1,1),this.Leg7C.setRotationPoint(-5,17.5,1),this.setRotationG(this.Leg7C,-45,0,-70),this.Leg8A=this.model.Leg8A=new ModelRenderer(this,0,0),this.Leg8A.addBox(-1,-7,-1,2,7,2),this.Leg8A.setRotationPoint(-5,17,4),this.setRotationG(this.Leg8A,-60,0,-70),this.Leg8B=this.model.Leg8B=new ModelRenderer(this,46,12),this.Leg8B.addBox(-7.5,-8.5,-1,7,2,2),this.Leg8B.setRotationPoint(-5,17,4),this.setRotationG(this.Leg8B,-60,0,-60),this.Leg8C=this.model.Leg8C=new ModelRenderer(this,48,22),this.Leg8C.addBox(-10.5,-8.5,-1.5,7,1,1),this.Leg8C.setRotationPoint(-5,17,4),this.setRotationG(this.Leg8C,-60,0,-70),this.baby1=this.model.baby1=new ModelRenderer(this,48,24),this.baby1.addBox(-1.5,0,-2.5,3,2,5),this.baby1.setRotationPoint(0,12,0),this.baby2=this.model.baby2=new ModelRenderer(this,48,24),this.baby2.addBox(-1.5,0,-2.5,3,2,5),this.baby2.setRotationPoint(-5,13.4,-1),setRotation(this.baby2,.446143,2.490967,.520501),this.baby3=this.model.baby3=new ModelRenderer(this,48,24),this.baby3.addBox(-1.5,0,-2.5,3,2,5),this.baby3.setRotationPoint(-2,13,4),setRotation(this.baby3,0,.8551081,0),this.baby4=this.model.baby4=new ModelRenderer(this,48,24),this.baby4.addBox(-1.5,0,-2.5,3,2,5),this.baby4.setRotationPoint(4,13,2),setRotation(this.baby4,0,2.714039,-.3717861),this.baby5=this.model.baby5=new ModelRenderer(this,48,24),this.baby5.addBox(-1.5,0,-2.5,3,2,5),this.baby5.setRotationPoint(1,13,8),setRotation(this.baby5,0,-1.189716,0)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=a.swingingTail(),l=0!=a.mouthCounter,d=a.getHasBabies(),c=a.armCounter;setRotationAngles(e,i,n,o,s,r,h,l,c,d),this.Head.render(r),this.MouthL.render(r),this.MouthR.render(r),this.Body.render(r),this.Tail1.render(r),this.Tail2.render(r),this.Tail3.render(r),this.Tail4.render(r),this.Tail5.render(r),this.Sting1.render(r),this.Sting2.render(r),this.LArm1.render(r),this.LArm2.render(r),this.LArm3.render(r),this.LArm4.render(r),this.RArm1.render(r),this.RArm2.render(r),this.RArm3.render(r),this.RArm4.render(r),this.Leg1A.render(r),this.Leg1B.render(r),this.Leg1C.render(r),this.Leg2A.render(r),this.Leg2B.render(r),this.Leg2C.render(r),this.Leg3A.render(r),this.Leg3B.render(r),this.Leg3C.render(r),this.Leg4A.render(r),this.Leg4B.render(r),this.Leg4C.render(r),this.Leg5A.render(r),this.Leg5B.render(r),this.Leg5C.render(r),this.Leg6A.render(r),this.Leg6B.render(r),this.Leg6C.render(r),this.Leg7A.render(r),this.Leg7B.render(r),this.Leg7C.render(r),this.Leg8A.render(r),this.Leg8B.render(r),this.Leg8C.render(r),d&&(this.baby1.render(r),this.baby2.render(r),this.baby3.render(r),this.baby4.render(r),this.baby5.render(r))},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationG:function(t,e,i,n){t.rotateAngleX=e/57.29578,t.rotateAngleY=i/57.29578,t.rotateAngleZ=n/57.29578},poisoning:!1,isTalking:!1,attacking:0,babies:!0,setRotationAngles:function(t,e,i,n,o,s,r,a,h,l){this.poisoning?(this.Body.rotateAngleX=50/57.29578,this.Tail1.rotateAngleX=100/57.29578,this.Tail1.d=9,this.Tail1.e=10,this.Tail2.rotateAngleX=160/57.29578,this.Tail2.d=3,this.Tail2.e=9.5,this.Tail3.rotateAngleX=-170/57.29578,this.Tail3.d=1,this.Tail3.e=3.5,this.Tail4.rotateAngleX=-156/57.29578,this.Tail4.d=1.8,this.Tail4.e=-2,this.Tail5.rotateAngleX=-154/57.29578,this.Tail5.d=3.8,this.Tail5.e=-7,this.Sting1.rotateAngleX=-57/57.29578,this.Sting1.d=6,this.Sting1.e=-12,this.Sting2.rotateAngleX=-1.6353734428608877,this.Sting2.d=8,this.Sting2.e=-15.2):(this.Body.rotateAngleX=5/57.29578,this.Tail1.rotateAngleX=35/57.29578,this.Tail1.d=16,this.Tail1.e=12,this.Tail2.rotateAngleX=65/57.29578,this.Tail2.d=13,this.Tail2.e=16.5,this.Tail3.rotateAngleX=90/57.29578,this.Tail3.d=8,this.Tail3.e=18.5,this.Tail4.rotateAngleX=143/57.29578,this.Tail4.d=3,this.Tail4.e=18,this.Tail5.rotateAngleX=175/57.29578,this.Tail5.d=-.2,this.Tail5.e=14,this.Sting1.rotateAngleX=24/57.29578,this.Sting1.d=-1,this.Sting1.e=7,this.Sting2.rotateAngleX=-12/57.29578,this.Sting2.d=2.6,this.Sting2.e=8.8);var d=0;if(this.isTalking&&(d=.2*MathHelper.func_76134_b(1.1*i)),this.MouthR.rotateAngleY=22/57.29578+d,this.MouthL.rotateAngleY=-22/57.29578-d,this.LArm1.rotateAngleX=-20/57.29578,this.LArm2.c=10,this.LArm2.d=14,this.LArm2.e=-6,this.LArm3.c=12,this.LArm3.d=15,this.LArm3.e=-11,this.LArm4.c=11,this.LArm4.d=15,this.LArm4.e=-11,this.LArm4.rotateAngleY=0,this.RArm1.rotateAngleX=-20/57.29578,this.RArm2.c=-10,this.RArm2.d=14,this.RArm2.e=-6,this.RArm3.c=-12,this.RArm3.d=15,this.RArm3.e=-11,this.RArm4.c=-11,this.RArm4.d=15,this.RArm4.e=-11,this.RArm4.rotateAngleY=0,0==this.attacking){var c=0,u=i%100;0!=((u>0?1:0)&(u<20?1:0))&&(c=u/57.29578),this.LArm3.rotateAngleY=9/57.29578-c,this.LArm4.rotateAngleY=c;var g=0,f=i%75;0!=((f>30?1:0)&(f<50?1:0))&&(g=(f-29)/57.29578),this.RArm3.rotateAngleY=-9/57.29578+g,this.RArm4.rotateAngleY=-g}else this.attacking>0&&this.attacking<5&&(this.LArm1.rotateAngleX=50/57.29578,this.LArm2.c=8,this.LArm2.d=15,this.LArm2.e=-13,this.LArm3.c=10,this.LArm3.d=16,this.LArm3.e=-18,this.LArm4.c=9,this.LArm4.d=16,this.LArm4.e=-18,this.LArm4.rotateAngleY=40/57.29578),this.attacking>=5&&this.attacking<10&&(this.LArm1.rotateAngleX=70/57.29578,this.LArm2.c=7,this.LArm2.d=16,this.LArm2.e=-14,this.LArm3.c=9,this.LArm3.d=17,this.LArm3.e=-19,this.LArm4.c=8,this.LArm4.d=17,this.LArm4.e=-19,this.LArm4.rotateAngleY=0),this.attacking>=10&&this.attacking<15&&(this.RArm1.rotateAngleX=50/57.29578,this.RArm2.c=-8,this.RArm2.d=15,this.RArm2.e=-13,this.RArm3.c=-10,this.RArm3.d=16,this.RArm3.e=-18,this.RArm4.c=-9,this.RArm4.d=16,this.RArm4.e=-18,this.RArm4.rotateAngleY=-40/57.29578),this.attacking>=15&&this.attacking<20&&(this.RArm1.rotateAngleX=70/57.29578,this.RArm2.c=-7,this.RArm2.d=16,this.RArm2.e=-14,this.RArm3.c=-9,this.RArm3.d=17,this.RArm3.e=-19,this.RArm4.c=-8,this.RArm4.d=17,this.RArm4.e=-19,this.RArm4.rotateAngleY=0);if(this.babies){var p=i%100,m=0,v=142/57.29578,w=49/57.29578,y=155/57.29578,R=-68/57.29578;p>0&&p<20&&(v-=.3*MathHelper.func_76134_b(.8*i),w-=.2*MathHelper.func_76134_b(.6*i),m+=.4*MathHelper.func_76134_b(.4*i),R+=.5*MathHelper.func_76134_b(.7*i)),p>30&&p<50&&(y-=.4*MathHelper.func_76134_b(.8*i),m+=.1*MathHelper.func_76134_b(.7*i),w-=.2*MathHelper.func_76134_b(.6*i)),p>80&&(R+=.4*MathHelper.func_76134_b(.2*i),v-=.3*MathHelper.func_76134_b(.6*i),y-=.2*MathHelper.func_76134_b(.4*i)),this.baby1.rotateAngleY=m,this.baby2.rotateAngleY=v,this.baby3.rotateAngleY=w,this.baby4.rotateAngleY=y,this.baby5.rotateAngleY=R}var A=-(.4*MathHelper.func_76134_b(.6662*t*2+0))*e,b=-(.4*MathHelper.func_76134_b(.6662*t*2+3.141593))*e,x=-(.4*MathHelper.func_76134_b(.6662*t*2+1.570796))*e,L=-(.4*MathHelper.func_76134_b(.6662*t*2+4.712389))*e,C=Math.abs(.4*MathHelper.func_76126_a(.6662*t+0))*e,k=Math.abs(.4*MathHelper.func_76126_a(.6662*t+3.141593))*e,E=Math.abs(.4*MathHelper.func_76126_a(.6662*t+1.570796))*e,B=Math.abs(.4*MathHelper.func_76126_a(.6662*t+4.712389))*e;this.Leg1A.rotateAngleX=-10/57.29578,this.Leg1A.rotateAngleZ=75/57.29578,this.Leg1B.rotateAngleZ=60/57.29578,this.Leg1C.rotateAngleZ=75/57.29578,this.Leg1A.rotateAngleX+=A,this.Leg1B.rotateAngleX=this.Leg1A.rotateAngleX,this.Leg1C.rotateAngleX=this.Leg1A.rotateAngleX,this.Leg1A.rotateAngleZ+=C,this.Leg1B.rotateAngleZ+=C,this.Leg1C.rotateAngleZ+=C,this.Leg2A.rotateAngleX=-30/57.29578,this.Leg2A.rotateAngleZ=70/57.29578,this.Leg2B.rotateAngleZ=60/57.29578,this.Leg2C.rotateAngleZ=70/57.29578,this.Leg2A.rotateAngleX+=b,this.Leg2B.rotateAngleX=this.Leg2A.rotateAngleX,this.Leg2C.rotateAngleX=this.Leg2A.rotateAngleX,this.Leg2A.rotateAngleZ+=k,this.Leg2B.rotateAngleZ+=k,this.Leg2C.rotateAngleZ+=k,this.Leg3A.rotateAngleX=-45/57.29578,this.Leg3A.rotateAngleZ=70/57.29578,this.Leg3B.rotateAngleZ=60/57.29578,this.Leg3C.rotateAngleZ=70/57.29578,this.Leg3A.rotateAngleX+=x,this.Leg3B.rotateAngleX=this.Leg3A.rotateAngleX,this.Leg3C.rotateAngleX=this.Leg3A.rotateAngleX,this.Leg3A.rotateAngleZ+=E,this.Leg3B.rotateAngleZ+=E,this.Leg3C.rotateAngleZ+=E,this.Leg4A.rotateAngleX=-60/57.29578,this.Leg4A.rotateAngleZ=70/57.29578,this.Leg4B.rotateAngleZ=60/57.29578,this.Leg4C.rotateAngleZ=70/57.29578,this.Leg4A.rotateAngleX+=L,this.Leg4B.rotateAngleX=this.Leg4A.rotateAngleX,
this.Leg4C.rotateAngleX=this.Leg4A.rotateAngleX,this.Leg4A.rotateAngleZ+=B,this.Leg4B.rotateAngleZ+=B,this.Leg4C.rotateAngleZ+=B,this.Leg5A.rotateAngleX=-10/57.29578,this.Leg5A.rotateAngleZ=-75/57.29578,this.Leg5B.rotateAngleZ=-60/57.29578,this.Leg5C.rotateAngleZ=-75/57.29578,this.Leg5A.rotateAngleX-=A,this.Leg5B.rotateAngleX=this.Leg5A.rotateAngleX,this.Leg5C.rotateAngleX=this.Leg5A.rotateAngleX,this.Leg5A.rotateAngleZ-=C,this.Leg5B.rotateAngleZ-=C,this.Leg5C.rotateAngleZ-=C,this.Leg6A.rotateAngleX=-30/57.29578,this.Leg6A.rotateAngleZ=-70/57.29578,this.Leg6B.rotateAngleZ=-60/57.29578,this.Leg6C.rotateAngleZ=-70/57.29578,this.Leg6A.rotateAngleX-=b,this.Leg6B.rotateAngleX=this.Leg6A.rotateAngleX,this.Leg6C.rotateAngleX=this.Leg6A.rotateAngleX,this.Leg6A.rotateAngleZ-=k,this.Leg6B.rotateAngleZ-=k,this.Leg6C.rotateAngleZ-=k,this.Leg7A.rotateAngleX=-45/57.29578,this.Leg7A.rotateAngleZ=-70/57.29578,this.Leg7B.rotateAngleZ=-60/57.29578,this.Leg7C.rotateAngleZ=-70/57.29578,this.Leg7A.rotateAngleX-=x,this.Leg7B.rotateAngleX=this.Leg7A.rotateAngleX,this.Leg7C.rotateAngleX=this.Leg7A.rotateAngleX,this.Leg7A.rotateAngleZ-=E,this.Leg7B.rotateAngleZ-=E,this.Leg7C.rotateAngleZ-=E,this.Leg8A.rotateAngleX=-60/57.29578,this.Leg8A.rotateAngleZ=-70/57.29578,this.Leg8B.rotateAngleZ=-60/57.29578,this.Leg8C.rotateAngleZ=-70/57.29578,this.Leg8A.rotateAngleX-=L,this.Leg8B.rotateAngleX=this.Leg8A.rotateAngleX,this.Leg8C.rotateAngleX=this.Leg8A.rotateAngleX,this.Leg8A.rotateAngleZ-=B,this.Leg8B.rotateAngleZ-=B,this.Leg8C.rotateAngleZ-=B}}),ModelMoCShark.prototype=$.extend({},ModelBase.prototype,{ModelMoCShark:function(){ModelBase.call(this),this.Body=this.model.Body=new ModelRenderer(this,6,6),this.Body.addBox(0,0,0,6,8,18,0),this.Body.setRotationPoint(-4,17,-10),this.UHead=this.model.UHead=new ModelRenderer(this,0,0),this.UHead.addBox(0,0,0,5,2,8,0),this.UHead.setRotationPoint(-3.5,21,-16.5),this.UHead.rotateAngleX=.5235988,this.DHead=this.model.DHead=new ModelRenderer(this,44,0),this.DHead.addBox(0,0,0,5,2,5,0),this.DHead.setRotationPoint(-3.5,21.5,-13.5),this.DHead.rotateAngleX=-.261799,this.RHead=this.model.RHead=new ModelRenderer(this,0,3),this.RHead.addBox(0,0,0,1,6,6,0),this.RHead.setRotationPoint(-3.45,21.299999,-13.85),this.RHead.rotateAngleX=.7853981,this.LHead=this.model.LHead=new ModelRenderer(this,0,3),this.LHead.addBox(0,0,0,1,6,6,0),this.LHead.setRotationPoint(.45,21.299999,-13.8),this.LHead.rotateAngleX=.7853981,this.PTail=this.model.PTail=new ModelRenderer(this,36,8),this.PTail.addBox(0,0,0,4,6,10,0),this.PTail.setRotationPoint(-3,18,8),this.UpperFin=this.model.UpperFin=new ModelRenderer(this,6,12),this.UpperFin.addBox(0,0,0,1,4,8,0),this.UpperFin.setRotationPoint(-1.5,17,-1),this.UpperFin.rotateAngleX=.7853981,this.UpperTailFin=this.model.UpperTailFin=new ModelRenderer(this,6,12),this.UpperTailFin.addBox(0,0,0,1,4,8,0),this.UpperTailFin.setRotationPoint(-1.5,18,16),this.UpperTailFin.rotateAngleX=.5235988,this.LowerTailFin=this.model.LowerTailFin=new ModelRenderer(this,8,14),this.LowerTailFin.addBox(0,0,0,1,4,6,0),this.LowerTailFin.setRotationPoint(-1.5,21,18),this.LowerTailFin.rotateAngleX=-.7853981,this.LeftFin=this.model.LeftFin=new ModelRenderer(this,18,0),this.LeftFin.addBox(0,0,0,8,1,4,0),this.LeftFin.setRotationPoint(2,24,-5),this.LeftFin.rotateAngleY=-.5235988,this.LeftFin.rotateAngleZ=.5235988,this.RightFin=this.model.RightFin=new ModelRenderer(this,18,0),this.RightFin.addBox(0,0,0,8,1,4,0),this.RightFin.setRotationPoint(-10,27.5,-1),this.RightFin.rotateAngleY=.5235988,this.RightFin.rotateAngleZ=-.5235988},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.Body.render(r),this.PTail.render(r),this.UHead.render(r),this.DHead.render(r),this.RHead.render(r),this.LHead.render(r),this.UpperFin.render(r),this.UpperTailFin.render(r),this.LowerTailFin.render(r),this.LeftFin.render(r),this.RightFin.render(r)},setRotationAngles:function(t,e,i,n,o,s){this.UpperTailFin.rotateAngleY=MathHelper.func_76134_b(.6662*t)*e,this.LowerTailFin.rotateAngleY=MathHelper.func_76134_b(.6662*t)*e}}),ModelMoCSilverSkeleton.prototype=$.extend({},ModelBase.prototype,{ModelMoCSilverSkeleton:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=64,this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-4,-8,-4,8,8,8),this.Head.setRotationPoint(0,-2,0),this.Body=this.model.Body=new ModelRenderer(this,32,0),this.Body.addBox(-4,0,-2,8,12,4),this.Body.setRotationPoint(0,-2,0),this.Back=this.model.Back=new ModelRenderer(this,44,54),this.Back.addBox(-4,-4,.5,8,8,2),this.Back.setRotationPoint(0,2,2),setRotation(this.Back,-.1570796,0,0),this.RightArm=this.model.RightArm=new ModelRenderer(this,48,31),this.RightArm.addBox(-3,-2.5,-2.5,4,11,4),this.RightArm.setRotationPoint(-5,1,0),this.RightHand=this.model.RightHand=new ModelRenderer(this,24,16),this.RightHand.addBox(-2.5,-2,-2,3,12,3),this.RightHand.setRotationPoint(-5,1,0),this.RightSwordA=this.model.RightSwordA=new ModelRenderer(this,52,46),this.RightSwordA.addBox(-1.5,8.5,-3,1,1,5),this.RightSwordA.setRotationPoint(-5,1,0),this.RightSwordB=this.model.RightSwordB=new ModelRenderer(this,48,50),this.RightSwordB.addBox(-1.5,7.5,-4,1,3,1),this.RightSwordB.setRotationPoint(-5,1,0),this.RightSwordC=this.model.RightSwordC=new ModelRenderer(this,28,28),this.RightSwordC.addBox(-1,7.5,-14,0,3,10),this.RightSwordC.setRotationPoint(-5,1,0),this.LeftArm=this.model.LeftArm=new ModelRenderer(this,48,16),this.LeftArm.addBox(-1,-2.5,-2.5,4,11,4),this.LeftArm.setRotationPoint(5,1,0),this.LeftHand=this.model.LeftHand=new ModelRenderer(this,36,16),this.LeftHand.addBox(-.5,-2,-2,3,12,3),this.LeftHand.setRotationPoint(5,1,0),this.LeftSwordA=this.model.LeftSwordA=new ModelRenderer(this,52,46),this.LeftSwordA.addBox(.5,8.5,-3,1,1,5),this.LeftSwordA.setRotationPoint(5,1,0),this.LeftSwordB=this.model.LeftSwordB=new ModelRenderer(this,48,46),this.LeftSwordB.addBox(.5,7.5,-4,1,3,1),this.LeftSwordB.setRotationPoint(5,1,0),this.LeftSwordC=this.model.LeftSwordC=new ModelRenderer(this,28,31),this.LeftSwordC.addBox(1,7.5,-14,0,3,10),this.LeftSwordC.setRotationPoint(5,1,0),this.RightThigh=this.model.RightThigh=new ModelRenderer(this,0,16),this.RightThigh.addBox(-1.5,0,-1.5,3,6,3),this.RightThigh.setRotationPoint(-2,10.5,0),this.RightKnee=this.model.RightKnee=new ModelRenderer(this,0,46),this.RightKnee.addBox(-2,1,-2,4,4,4),this.RightKnee.setRotationPoint(-2,10.5,0),this.RightLeg=this.model.RightLeg=new ModelRenderer(this,0,25),this.RightLeg.addBox(-1.5,0,-1.5,3,6,3),this.RightLeg.setRotationPoint(0,6,0),this.RightThigh.addChild(this.RightLeg),delete this.model.RightLeg,this.RightFoot=this.model.RightFoot=new ModelRenderer(this,0,54),this.RightFoot.addBox(-2,0,-2,4,6,4),this.RightFoot.setRotationPoint(0,2,0),this.RightLeg.addChild(this.RightFoot),delete this.model.RightFoot,this.LeftThigh=this.model.LeftThigh=new ModelRenderer(this,12,16),this.LeftThigh.addBox(-1.5,0,-1.5,3,6,3),this.LeftThigh.setRotationPoint(2,10.5,0),this.LeftKnee=this.model.LeftKnee=new ModelRenderer(this,16,46),this.LeftKnee.addBox(-2,1,-2,4,4,4),this.LeftKnee.setRotationPoint(2,10.5,0),this.LeftLeg=this.model.LeftLeg=new ModelRenderer(this,12,25),this.LeftLeg.addBox(-1.5,0,-1.5,3,6,3),this.LeftLeg.setRotationPoint(0,6,0),this.LeftThigh.addChild(this.LeftLeg),delete this.model.LeftLeg,this.LeftFoot=this.model.LeftFoot=new ModelRenderer(this,16,54),this.LeftFoot.addBox(-2,0,-2,4,6,4),this.LeftFoot.setRotationPoint(0,2,0),this.LeftLeg.addChild(this.LeftFoot),delete this.model.LeftFoot},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r);var a=t,h=a.func_70051_ag(),l=a.attackCounterLeft,d=a.attackCounterRight;setRotationAngles(e,i,n,o,s,r,l,d),h&&i>.3?(GL11.glPushMatrix(),GL11.glRotatef(float(i*-25),-1,0,0),renderParts(r),GL11.glPopMatrix()):renderParts(r)},renderParts:function(t){this.Head.render(t),this.Body.render(t),this.Back.render(t),this.RightArm.render(t),this.RightHand.render(t),this.RightSwordA.render(t),this.RightSwordB.render(t),this.RightSwordC.render(t),this.LeftArm.render(t),this.LeftHand.render(t),this.LeftSwordA.render(t),this.LeftSwordB.render(t),this.LeftSwordC.render(t),this.RightThigh.render(t),this.RightKnee.render(t),this.LeftThigh.render(t),this.LeftKnee.render(t)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},leftAttack:0,rightAttack:0,setRotationAngles:function(t,e,i,n,o,s){var r=n/57.29578,a=o/57.29578;this.Head.rotateAngleX=a,this.Head.rotateAngleY=r;var h=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,l=.8*MathHelper.func_76134_b(.6662*t)*e,d=(.6*MathHelper.func_76134_b(.9*t)*e,h),c=l;this.RightThigh.rotateAngleX=h,this.LeftThigh.rotateAngleX=l,this.RightKnee.rotateAngleX=this.RightThigh.rotateAngleX,this.LeftKnee.rotateAngleX=this.LeftThigh.rotateAngleX;var u=.8*MathHelper.func_76134_b(.6662*(t+.1)+3.141593)*e,g=.8*MathHelper.func_76134_b(.6662*(t+.1))*e;if(e>.15&&(h>u&&(d=h+.4363323),l>g&&(c=l+.4363323)),0==this.leftAttack)this.LeftArm.rotateAngleZ=.05*MathHelper.func_76134_b(.09*i)-.05,this.LeftArm.rotateAngleX=h;else{var f=-(3*MathHelper.func_76134_b(.18*this.leftAttack));this.LeftArm.rotateAngleX=f}if(0==this.rightAttack)this.RightArm.rotateAngleZ=-(.05*MathHelper.func_76134_b(.09*i))+.05,this.RightArm.rotateAngleX=l;else{var f=-(3*MathHelper.func_76134_b(.18*this.rightAttack));this.RightArm.rotateAngleX=f}this.LeftHand.rotateAngleX=this.LeftSwordA.rotateAngleX=this.LeftSwordB.rotateAngleX=this.LeftSwordC.rotateAngleX=this.LeftArm.rotateAngleX,this.LeftHand.rotateAngleZ=this.LeftSwordA.rotateAngleZ=this.LeftSwordB.rotateAngleZ=this.LeftSwordC.rotateAngleZ=this.LeftArm.rotateAngleZ,this.RightHand.rotateAngleX=this.RightSwordA.rotateAngleX=this.RightSwordB.rotateAngleX=this.RightSwordC.rotateAngleX=this.RightArm.rotateAngleX,this.RightHand.rotateAngleZ=this.RightSwordA.rotateAngleZ=this.RightSwordB.rotateAngleZ=this.RightSwordC.rotateAngleZ=this.RightArm.rotateAngleZ}}),ModelMoCSmallFish.prototype=$.extend({},ModelBase.prototype,{ModelMoCSmallFish:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.BodyFlat=this.model.BodyFlat=new ModelRenderer(this,0,2),this.BodyFlat.addBox(0,-1.5,-1,5,3,2),this.BodyFlat.setRotationPoint(-3,15,0),this.BodyRomboid=this.model.BodyRomboid=new ModelRenderer(this,0,7),this.BodyRomboid.addBox(0,0,-.5,4,4,1),this.BodyRomboid.setRotationPoint(-4,15,0),setRotation(this.BodyRomboid,0,0,-.7853982),this.MidBodyFin=this.model.MidBodyFin=new ModelRenderer(this,0,12),this.MidBodyFin.addBox(0,-.5,0,4,2,4),this.MidBodyFin.setRotationPoint(-3,15,0),setRotation(this.MidBodyFin,0,.7853982,0),this.UpperFinA=this.model.UpperFinA=new ModelRenderer(this,10,0),this.UpperFinA.addBox(-.5,-1.3,-.5,2,1,1),this.UpperFinA.setRotationPoint(-.65,13.5,0),this.UpperFinB=this.model.UpperFinB=new ModelRenderer(this,0,0),this.UpperFinB.addBox(-2.5,-1,-.5,4,1,1),this.UpperFinB.setRotationPoint(0,13.5,0),this.UpperFinB.setTextureSize(32,32),this.UpperFinC=this.model.UpperFinC=new ModelRenderer(this,0,18),this.UpperFinC.addBox(-5,-2,0,8,3,0),this.UpperFinC.setRotationPoint(0,13.5,0),this.LowerFinA=this.model.LowerFinA=new ModelRenderer(this,16,0),this.LowerFinA.addBox(-.5,-.3,-.5,2,1,1),this.LowerFinA.setRotationPoint(-.65,17.200001,0),this.LowerFinB=this.model.LowerFinB=new ModelRenderer(this,0,21),this.LowerFinB.addBox(0,0,-3,5,0,6),this.LowerFinB.setRotationPoint(-3,16,0),this.LowerFinC=this.model.LowerFinC=new ModelRenderer(this,16,18),this.LowerFinC.addBox(-5,0,0,8,3,0),this.LowerFinC.setRotationPoint(0,15.5,0),this.Tail=this.model.Tail=new ModelRenderer(this,10,7),this.Tail.addBox(0,0,-.5,3,3,1),this.Tail.setRotationPoint(1.3,15,0),setRotation(this.Tail,0,0,-.7853982)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.BodyFlat.render(r),this.BodyRomboid.render(r),this.MidBodyFin.render(r),this.UpperFinA.render(r),this.UpperFinB.render(r),this.UpperFinC.render(r),this.LowerFinA.render(r),this.LowerFinB.render(r),this.LowerFinC.render(r),this.Tail.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){var r=MathHelper.func_76134_b(.8*t)*e*.6,a=.2*MathHelper.func_76134_b(.4*i);this.Tail.rotateAngleY=r,this.MidBodyFin.rotateAngleY=.7853982+a,this.LowerFinB.rotateAngleZ=a}}),ModelMoCSnail.prototype=$.extend({},ModelBase.prototype,{ModelMoCSnail:function(){ModelBase.call(this),this.texture.width=32,this.texture.height=32,this.Head=this.model.Head=new ModelRenderer(this,0,6),this.Head.addBox(-1,0,-1,2,2,2),this.Head.setRotationPoint(0,21.799999,-1),setRotation(this.Head,-.453786,0,0),this.Antenna=this.model.Antenna=new ModelRenderer(this,8,0),this.Antenna.addBox(-1.5,0,-1,3,2,0),this.Antenna.setRotationPoint(0,19.4,-1),setRotation(this.Antenna,.0523599,0,0),this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(-1,0,-1,2,2,4),this.Body.setRotationPoint(0,22,0),this.ShellUp=this.model.ShellUp=new ModelRenderer(this,12,0),this.ShellUp.addBox(-1,-3,0,2,3,3),this.ShellUp.setRotationPoint(0,22.299999,-.2),setRotation(this.ShellUp,.226893,0,0),this.ShellDown=this.model.ShellDown=new ModelRenderer(this,12,0),this.ShellDown.addBox(-1,0,0,2,3,3),this.ShellDown.setRotationPoint(0,21,0),this.Tail=this.model.Tail=new ModelRenderer(this,1,2),this.Tail.addBox(-1,0,0,2,1,3),this.Tail.setRotationPoint(0,23,3)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=a.getIsHiding(),l=a.getType();setRotationAngles(e,i,n,o,s,r),h&&l<5?this.ShellDown.render(r):(this.Head.render(r),this.Antenna.render(r),this.Body.render(r),this.ShellUp.render(r),this.Tail.render(r))},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){var r=.8*MathHelper.func_76134_b(.3*i);e<.1&&(r=0),this.Tail.e=2+r,this.ShellUp.rotateAngleX=.226893+r/10}}),ModelMoCTurkey.prototype=$.extend({},ModelBase.prototype,{ModelMoCTurkey:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=64,this.Beak=this.model.Beak=new ModelRenderer(this,17,17),this.Beak.addBox(-.5,-1.866667,-3.366667,1,1,2),this.Beak.setRotationPoint(0,9.7,-5.1),setRotation(this.Beak,.7807508,0,0),this.Head=this.model.Head=new ModelRenderer(this,0,27),this.Head.addBox(-1,-2,-2,2,2,3),this.Head.setRotationPoint(0,9.7,-5.1),setRotation(this.Head,.4833219,0,0),this.Neck=this.model.Neck=new ModelRenderer(this,0,32),this.Neck.addBox(-1,-6,-1,2,6,2),this.Neck.setRotationPoint(0,14.7,-6.5),setRotation(this.Neck,-.224621,0,0),this.Chest=this.model.Chest=new ModelRenderer(this,0,17),this.Chest.addBox(-3,0,-4,6,6,4),this.Chest.setRotationPoint(0,12.5,-4),setRotation(this.Chest,.5934119,0,0),this.RWing=this.model.RWing=new ModelRenderer(this,32,30),this.RWing.addBox(-1,-2,0,1,6,7),this.RWing.setRotationPoint(-4,14,-3),setRotation(this.RWing,-.3346075,0,0),this.LWing=this.model.LWing=new ModelRenderer(this,48,30),this.LWing.addBox(0,-2,0,1,6,7),this.LWing.setRotationPoint(4,14,-3),setRotation(this.LWing,-.3346075,0,0),this.UBody=this.model.UBody=new ModelRenderer(this,34,0),this.UBody.addBox(-2.5,-4,0,5,7,9),this.UBody.setRotationPoint(0,15,-3),this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(-4,-4,0,8,8,9),this.Body.setRotationPoint(0,16,-4),this.Tail=this.model.Tail=new ModelRenderer(this,32,17),this.Tail.addBox(-8,-9,0,16,12,0),this.Tail.setRotationPoint(0,14,6),setRotation(this.Tail,-.2974289,0,0),this.RLeg=this.model.RLeg=new ModelRenderer(this,27,17),this.RLeg.addBox(-.5,0,-.5,1,5,1),this.RLeg.setRotationPoint(-2,19,.5),this.RFoot=this.model.RFoot=new ModelRenderer(this,20,23),this.RFoot.addBox(-1.5,5,-2.5,3,0,3),this.RFoot.setRotationPoint(-2,19,.5),this.LLeg=this.model.LLeg=new ModelRenderer(this,23,17),this.LLeg.addBox(-.5,0,-.5,1,5,1),this.LLeg.setRotationPoint(2,19,.5),this.LFoot=this.model.LFoot=new ModelRenderer(this,20,26),this.LFoot.addBox(-1.5,5,-2.5,3,0,3),this.LFoot.setRotationPoint(2,19,.5)},func_78088_a:function(t,e,i,n,o,s,r){ModelBase.prototype.func_78088_a.call(this,t,e,i,n,o,s,r),setRotationAngles(e,i,n,o,s,r),this.Beak.render(r),this.Head.render(r),this.Neck.render(r),this.Chest.render(r),this.RWing.render(r),this.LWing.render(r),this.UBody.render(r),this.Body.render(r),this.Tail.render(r),this.RLeg.render(r),this.RFoot.render(r),this.LLeg.render(r),this.LFoot.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){var r=1.4*MathHelper.func_76134_b(.6662*t)*e,a=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,h=1.4*MathHelper.func_76134_b(.6662*t)*e/4;this.Head.rotateAngleX=.4833219+o/57.29578,this.Head.rotateAngleY=n/57.295776,this.Beak.rotateAngleX=.2974+this.Head.rotateAngleX,this.Beak.rotateAngleY=this.Head.rotateAngleY,this.LLeg.rotateAngleX=r,this.LFoot.rotateAngleX=this.LLeg.rotateAngleX,this.RLeg.rotateAngleX=a,this.RFoot.rotateAngleX=this.RLeg.rotateAngleX,this.LWing.rotateAngleY=h,this.RWing.rotateAngleY=-h,this.Tail.rotateAngleX=-.2974289+h}}),ModelMoCTurtle.prototype=$.extend({},ModelBase.prototype,{isHiding:!1,upsidedown:!1,swingProgress:0,ModelMoCTurtle:function(){ModelBase.call(this),this.Shell=this.model.Shell=new ModelRenderer(this,28,0),this.Shell.addBox(0,0,0,9,1,9),this.Shell.setRotationPoint(-4.5,19,-4.5),this.ShellUp=this.model.ShellUp=new ModelRenderer(this,0,22),this.ShellUp.addBox(0,0,0,8,2,8),this.ShellUp.setRotationPoint(-4,17,-4),this.ShellTop=this.model.ShellTop=new ModelRenderer(this,40,10),this.ShellTop.addBox(0,0,0,6,1,6),this.ShellTop.setRotationPoint(-3,16,-3),this.Belly=this.model.Belly=new ModelRenderer(this,0,12),this.Belly.addBox(0,0,0,8,1,8),this.Belly.setRotationPoint(-4,20,-4),this.Leg1=this.model.Leg1=new ModelRenderer(this,0,0),this.Leg1.addBox(-1,0,-1,2,3,2),this.Leg1.setRotationPoint(3.5,20,-3.5),this.Leg2=this.model.Leg2=new ModelRenderer(this,0,9),this.Leg2.addBox(-1,0,-1,2,3,2),this.Leg2.setRotationPoint(-3.5,20,-3.5),this.Leg3=this.model.Leg3=new ModelRenderer(this,0,0),this.Leg3.addBox(-1,0,-1,2,3,2),this.Leg3.setRotationPoint(3.5,20,3.5),this.Leg4=this.model.Leg4=new ModelRenderer(this,0,9),this.Leg4.addBox(-1,0,-1,2,3,2),this.Leg4.setRotationPoint(-3.5,20,3.5),this.Head=this.model.Head=new ModelRenderer(this,10,0),this.Head.addBox(-1.5,-1,-4,3,2,4),this.Head.setRotationPoint(0,20,-4.5),this.Tail=this.model.Tail=new ModelRenderer(this,0,5),this.Tail.addBox(-1,-1,0,2,1,3),this.Tail.setRotationPoint(0,21,4)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=a.isTMNT();setRotationAngles(e,i,n,o,s,r),this.Shell.render(r),this.ShellUp.render(r),h||this.ShellTop.render(r),this.Belly.render(r),this.Leg1.render(r),this.Leg2.render(r),this.Leg3.render(r),this.Leg4.render(r),this.Head.render(r),this.Tail.render(r)},setRotationAngles:function(t,e,i,n,o,s){if(this.Leg1.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Leg2.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg3.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg4.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Tail.rotateAngleY=.7*MathHelper.func_76134_b(.6662*t)*e,this.upsidedown){var r=this.swingProgress,a=r;r>=.8&&(a=.6-(r-.8)),a>1.6&&(a=1.6),a<-1.6&&(a=-1.6),this.Leg1.rotateAngleX=0-a,this.Leg2.rotateAngleX=0+a,this.Leg3.rotateAngleX=0+a,this.Leg4.rotateAngleX=0-a,this.Tail.rotateAngleY=0-a}else this.Leg1.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Leg2.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg3.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e,this.Leg4.rotateAngleX=1.4*MathHelper.func_76134_b(.6662*t)*e,this.Tail.rotateAngleY=.7*MathHelper.func_76134_b(.6662*t)*e;this.isHiding?(this.Head.rotateAngleX=0,this.Head.rotateAngleY=0,this.Leg1.c=2.9,this.Leg1.d=18.5,this.Leg1.e=-2.9,this.Leg2.c=-2.9,this.Leg2.d=18.5,this.Leg2.e=-2.9,this.Leg3.c=2.9,this.Leg3.d=18.5,this.Leg3.e=2.9,this.Leg4.c=-2.9,this.Leg4.d=18.5,this.Leg4.e=2.9,this.Head.d=19.5,this.Head.e=-1,this.Tail.e=2):(this.Head.rotateAngleX=o/57.29578,this.Head.rotateAngleY=n/57.29578,this.Leg1.c=3.5,this.Leg1.d=20,this.Leg1.e=-3.5,this.Leg2.c=-3.5,this.Leg2.d=20,this.Leg2.e=-3.5,this.Leg3.c=3.5,this.Leg3.d=20,this.Leg3.e=3.5,this.Leg4.c=-3.5,this.Leg4.d=20,this.Leg4.e=3.5,this.Head.d=20,this.Head.e=-4.5,this.Tail.e=4)}}),ModelMoCWere.prototype=$.extend({},ModelBase.prototype,{hunched:!1,ModelMoCWere:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=128,this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-4,-3,-6,8,8,6),this.Head.setRotationPoint(0,-8,-6),this.Head.setTextureSize(64,128),this.Nose=this.model.Nose=new ModelRenderer(this,44,33),this.Nose.addBox(-1.5,-1.7,-12.3,3,2,7),this.Nose.setRotationPoint(0,-8,-6),setRotation(this.Nose,.2792527,0,0),this.Snout=this.model.Snout=new ModelRenderer(this,0,25),this.Snout.addBox(-2,2,-12,4,2,6),this.Snout.setRotationPoint(0,-8,-6),this.TeethU=this.model.TeethU=new ModelRenderer(this,46,18),this.TeethU.addBox(-2,4.01,-12,4,2,5),this.TeethU.setRotationPoint(0,-8,-6),this.TeethL=this.model.TeethL=new ModelRenderer(this,20,109),this.TeethL.addBox(-1.5,-12.5,2.01,3,5,2),this.TeethL.setRotationPoint(0,-8,-6),setRotation(this.TeethL,2.530727,0,0),this.Mouth=this.model.Mouth=new ModelRenderer(this,42,69),this.Mouth.addBox(-1.5,-12.5,0,3,9,2),this.Mouth.setRotationPoint(0,-8,-6),setRotation(this.Mouth,2.530727,0,0),this.LEar=this.model.LEar=new ModelRenderer(this,13,14),this.LEar.addBox(.5,-7.5,-1,3,5,1),this.LEar.setRotationPoint(0,-8,-6),setRotation(this.LEar,0,0,.1745329),this.REar=this.model.REar=new ModelRenderer(this,22,0),this.REar.addBox(-3.5,-7.5,-1,3,5,1),this.REar.setRotationPoint(0,-8,-6),setRotation(this.REar,0,0,-.1745329),this.Neck=this.model.Neck=new ModelRenderer(this,28,0),this.Neck.addBox(-3.5,-3,-7,7,8,7),this.Neck.setRotationPoint(0,-5,-2),setRotation(this.Neck,-.6025001,0,0),this.Neck2=this.model.Neck2=new ModelRenderer(this,0,14),this.Neck2.addBox(-1.5,-2,-5,3,4,7),this.Neck2.setRotationPoint(0,-1,-6),setRotation(this.Neck2,-.453786,0,0),this.SideburnL=this.model.SideburnL=new ModelRenderer(this,28,33),this.SideburnL.addBox(3,0,-2,2,6,6),this.SideburnL.setRotationPoint(0,-8,-6),setRotation(this.SideburnL,-.20944,.418879,-.0872665),this.SideburnR=this.model.SideburnR=new ModelRenderer(this,28,45),this.SideburnR.addBox(-5,0,-2,2,6,6),this.SideburnR.setRotationPoint(0,-8,-6),setRotation(this.SideburnR,-.20944,-.418879,.0872665),this.Chest=this.model.Chest=new ModelRenderer(this,20,15),this.Chest.addBox(-4,0,-7,8,8,10),this.Chest.setRotationPoint(0,-6,-2.5),setRotation(this.Chest,.641331,0,0),this.Abdomen=this.model.Abdomen=new ModelRenderer(this,0,40),this.Abdomen.addBox(-3,-8,-8,6,14,8),this.Abdomen.setRotationPoint(0,4.5,5),setRotation(this.Abdomen,.269545,0,0),this.TailA=this.model.TailA=new ModelRenderer(this,52,42),this.TailA.addBox(-1.5,-1,-2,3,4,3),this.TailA.setRotationPoint(0,9.5,6),setRotation(this.TailA,1.064651,0,0),this.TailC=this.model.TailC=new ModelRenderer(this,48,59),this.TailC.addBox(-2,6.8,-4.6,4,6,4),this.TailC.setRotationPoint(0,9.5,6),setRotation(this.TailC,1.099557,0,0),this.TailB=this.model.TailB=new ModelRenderer(this,48,49),this.TailB.addBox(-2,2,-2,4,6,4),this.TailB.setRotationPoint(0,9.5,6),setRotation(this.TailB,.7504916,0,0),this.TailD=this.model.TailD=new ModelRenderer(this,52,69),this.TailD.addBox(-1.5,9.8,-4.1,3,5,3),this.TailD.setRotationPoint(0,9.5,6),setRotation(this.TailD,1.099557,0,0),this.RLegA=this.model.RLegA=new ModelRenderer(this,12,64),this.RLegA.addBox(-2.5,-1.5,-3.5,3,8,5),this.RLegA.setRotationPoint(-3,9.5,3),setRotation(this.RLegA,-.8126625,0,0),this.RFoot=this.model.RFoot=new ModelRenderer(this,14,93),this.RFoot.addBox(-2.506667,12.5,-5,3,2,3),this.RFoot.setRotationPoint(-3,9.5,3),this.RLegB=this.model.RLegB=new ModelRenderer(this,14,76),this.RLegB.addBox(-1.9,4.2,.5,2,2,5),this.RLegB.setRotationPoint(-3,9.5,3),setRotation(this.RLegB,-.8445741,0,0),this.RLegC=this.model.RLegC=new ModelRenderer(this,14,83),this.RLegC.addBox(-2,6.2,.5,2,8,2),this.RLegC.setRotationPoint(-3,9.5,3),setRotation(this.RLegC,-.286069,0,0),this.LLegB=this.model.LLegB=new ModelRenderer(this,0,76),this.LLegB.addBox(-.1,4.2,.5,2,2,5),this.LLegB.setRotationPoint(3,9.5,3),setRotation(this.LLegB,-.8445741,0,0),this.LFoot=this.model.LFoot=new ModelRenderer(this,0,93),this.LFoot.addBox(-.5066667,12.5,-5,3,2,3),this.LFoot.setRotationPoint(3,9.5,3),this.LLegC=this.model.LLegC=new ModelRenderer(this,0,83),this.LLegC.addBox(0,6.2,.5,2,8,2),this.LLegC.setRotationPoint(3,9.5,3),setRotation(this.LLegC,-.286069,0,0),this.LLegA=this.model.LLegA=new ModelRenderer(this,0,64),this.LLegA.addBox(-.5,-1.5,-3.5,3,8,5),this.LLegA.setRotationPoint(3,9.5,3),setRotation(this.LLegA,-.8126625,0,0),this.RArmB=this.model.RArmB=new ModelRenderer(this,48,77),this.RArmB.addBox(-3.5,1,-1.5,4,8,4),this.RArmB.setRotationPoint(-4,-4,-2),setRotation(this.RArmB,.261799,0,.349066),this.RArmC=this.model.RArmC=new ModelRenderer(this,48,112),this.RArmC.addBox(-6,5,3,4,7,4),this.RArmC.setRotationPoint(-4,-4,-2),setRotation(this.RArmC,-.349066,0,0),this.LArmB=this.model.LArmB=new ModelRenderer(this,48,89),this.LArmB.addBox(-.5,1,-1.5,4,8,4),this.LArmB.setRotationPoint(4,-4,-2),setRotation(this.LArmB,.261799,0,-.349066),this.RHand=this.model.RHand=new ModelRenderer(this,32,118),this.RHand.addBox(-6,12.5,-1.5,4,3,4),this.RHand.setRotationPoint(-4,-4,-2),this.RArmA=this.model.RArmA=new ModelRenderer(this,0,108),this.RArmA.addBox(-5,-3,-2,5,5,5),this.RArmA.setRotationPoint(-4,-4,-2),setRotation(this.RArmA,.6320364,0,0),this.LArmA=this.model.LArmA=new ModelRenderer(this,0,98),this.LArmA.addBox(0,-3,-2,5,5,5),this.LArmA.setRotationPoint(4,-4,-2),setRotation(this.LArmA,.6320364,0,0),this.LArmC=this.model.LArmC=new ModelRenderer(this,48,101),this.LArmC.addBox(2,5,3,4,7,4),this.LArmC.setRotationPoint(4,-4,-2),setRotation(this.LArmC,-.349066,0,0),this.LHand=this.model.LHand=new ModelRenderer(this,32,111),this.LHand.addBox(2,12.5,-1.5,4,3,4),this.LHand.setRotationPoint(4,-4,-2),this.RFinger1=this.model.RFinger1=new ModelRenderer(this,8,120),this.RFinger1.addBox(-.5,0,-.5,1,3,1),this.RFinger1.setRotationPoint(-6.5,11.5,-.5),this.RFinger1=this.model.RFinger1=new ModelRenderer(this,8,120),this.RFinger1.addBox(-3,15.5,1,1,3,1),this.RFinger1.setRotationPoint(-4,-4,-2),this.RFinger2=this.model.RFinger2=new ModelRenderer(this,12,124),this.RFinger2.addBox(-3.5,15.5,-1.5,1,3,1),this.RFinger2.setRotationPoint(-4,-4,-2),this.RFinger3=this.model.RFinger3=new ModelRenderer(this,12,119),this.RFinger3.addBox(-4.8,15.5,-1.5,1,4,1),this.RFinger3.setRotationPoint(-4,-4,-2),this.RFinger4=this.model.RFinger4=new ModelRenderer(this,16,119),this.RFinger4.addBox(-6,15.5,-.5,1,4,1),this.RFinger4.setRotationPoint(-4,-4,-2),this.RFinger5=this.model.RFinger5=new ModelRenderer(this,16,124),this.RFinger5.addBox(-6,15.5,1,1,3,1),this.RFinger5.setRotationPoint(-4,-4,-2),this.LFinger1=this.model.LFinger1=new ModelRenderer(this,8,124),this.LFinger1.addBox(2,15.5,1,1,3,1),this.LFinger1.setRotationPoint(4,-4,-2),this.LFinger2=this.model.LFinger2=new ModelRenderer(this,0,124),this.LFinger2.addBox(2.5,15.5,-1.5,1,3,1),this.LFinger2.setRotationPoint(4,-4,-2),this.LFinger3=this.model.LFinger3=new ModelRenderer(this,0,119),this.LFinger3.addBox(3.8,15.5,-1.5,1,4,1),this.LFinger3.setRotationPoint(4,-4,-2),this.LFinger4=this.model.LFinger4=new ModelRenderer(this,4,119),this.LFinger4.addBox(5,15.5,-.5,1,4,1),this.LFinger4.setRotationPoint(4,-4,-2),this.LFinger5=this.model.LFinger5=new ModelRenderer(this,4,124),this.LFinger5.addBox(5,15.5,1,1,3,1),this.LFinger5.setRotationPoint(4,-4,-2)},func_78088_a:function(t,e,i,n,o,s,r){setRotationAngles(e,i,n,o,s,r),this.Head.render(r),this.Nose.render(r),this.Snout.render(r),this.TeethU.render(r),this.TeethL.render(r),this.Mouth.render(r),this.LEar.render(r),this.REar.render(r),this.Neck.render(r),this.Neck2.render(r),this.SideburnL.render(r),this.SideburnR.render(r),this.Chest.render(r),this.Abdomen.render(r),this.TailA.render(r),this.TailC.render(r),this.TailB.render(r),this.TailD.render(r),this.RLegA.render(r),this.RFoot.render(r),this.RLegB.render(r),this.RLegC.render(r),this.LLegB.render(r),this.LFoot.render(r),this.LLegC.render(r),this.LLegA.render(r),this.RArmB.render(r),this.RArmC.render(r),this.LArmB.render(r),this.RHand.render(r),this.RArmA.render(r),this.LArmA.render(r),this.LArmC.render(r),this.LHand.render(r),this.RFinger1.render(r),this.RFinger2.render(r),this.RFinger3.render(r),this.RFinger4.render(r),this.RFinger5.render(r),this.LFinger1.render(r),this.LFinger2.render(r),this.LFinger3.render(r),this.LFinger4.render(r),this.LFinger5.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s){var r=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,a=.8*MathHelper.func_76134_b(.6662*t)*e;this.Head.rotateAngleY=n/57.29578,this.hunched?(this.Head.d=0,this.Head.e=-11,this.Head.rotateAngleX=(15+o)/57.29578,this.Neck.rotateAngleX=-10/57.29578,this.Neck.d=2,this.Neck.e=-6,this.Neck2.d=9,this.Neck2.e=-9,this.Chest.d=1,this.Chest.e=-7.5,this.Chest.rotateAngleX=60/57.29578,this.Abdomen.rotateAngleX=75/57.29578,this.LLegA.e=7,this.LArmA.d=4.5,this.LArmA.e=-6,this.TailA.d=7.5,this.TailA.e=10):(this.Head.d=-8,this.Head.e=-6,this.Head.rotateAngleX=o/57.29578,this.Neck.rotateAngleX=-34/57.29578,this.Neck.d=-5,this.Neck.e=-2,this.Neck2.d=-1,this.Neck2.e=-6,this.Chest.d=-6,this.Chest.e=-2.5,this.Chest.rotateAngleX=36/57.29578,this.Abdomen.rotateAngleX=15/57.29578,this.LLegA.e=3,this.LArmA.d=-4,this.LArmA.e=-2,this.TailA.d=9.5,this.TailA.e=6),this.Nose.d=this.Head.d,this.Snout.d=this.Head.d,this.TeethU.d=this.Head.d,this.LEar.d=this.Head.d,this.REar.d=this.Head.d,this.TeethL.d=this.Head.d,this.Mouth.d=this.Head.d,this.SideburnL.d=this.Head.d,this.SideburnR.d=this.Head.d,this.Nose.e=this.Head.e,this.Snout.e=this.Head.e,this.TeethU.e=this.Head.e,this.LEar.e=this.Head.e,this.REar.e=this.Head.e,this.TeethL.e=this.Head.e,this.Mouth.e=this.Head.e,this.SideburnL.e=this.Head.e,this.SideburnR.e=this.Head.e,this.LArmB.d=this.LArmA.d,this.LArmC.d=this.LArmA.d,this.LHand.d=this.LArmA.d,this.LFinger1.d=this.LArmA.d,this.LFinger2.d=this.LArmA.d,this.LFinger3.d=this.LArmA.d,this.LFinger4.d=this.LArmA.d,this.LFinger5.d=this.LArmA.d,this.RArmA.d=this.LArmA.d,this.RArmB.d=this.LArmA.d,this.RArmC.d=this.LArmA.d,this.RHand.d=this.LArmA.d,this.RFinger1.d=this.LArmA.d,this.RFinger2.d=this.LArmA.d,this.RFinger3.d=this.LArmA.d,this.RFinger4.d=this.LArmA.d,this.RFinger5.d=this.LArmA.d,this.LArmB.e=this.LArmA.e,this.LArmC.e=this.LArmA.e,this.LHand.e=this.LArmA.e,this.LFinger1.e=this.LArmA.e,this.LFinger2.e=this.LArmA.e,this.LFinger3.e=this.LArmA.e,this.LFinger4.e=this.LArmA.e,this.LFinger5.e=this.LArmA.e,this.RArmA.e=this.LArmA.e,this.RArmB.e=this.LArmA.e,this.RArmC.e=this.LArmA.e,this.RHand.e=this.LArmA.e,this.RFinger1.e=this.LArmA.e,this.RFinger2.e=this.LArmA.e,this.RFinger3.e=this.LArmA.e,this.RFinger4.e=this.LArmA.e,this.RFinger5.e=this.LArmA.e,this.RLegA.e=this.LLegA.e,this.RLegB.e=this.LLegA.e,this.RLegC.e=this.LLegA.e,this.RFoot.e=this.LLegA.e,this.LLegB.e=this.LLegA.e,this.LLegC.e=this.LLegA.e,this.LFoot.e=this.LLegA.e,this.TailB.d=this.TailA.d,this.TailB.e=this.TailA.e,this.TailC.d=this.TailA.d,this.TailC.e=this.TailA.e,this.TailD.d=this.TailA.d,this.TailD.e=this.TailA.e,this.Nose.rotateAngleY=this.Head.rotateAngleY,this.Snout.rotateAngleY=this.Head.rotateAngleY,this.TeethU.rotateAngleY=this.Head.rotateAngleY,this.LEar.rotateAngleY=this.Head.rotateAngleY,this.REar.rotateAngleY=this.Head.rotateAngleY,this.TeethL.rotateAngleY=this.Head.rotateAngleY,this.Mouth.rotateAngleY=this.Head.rotateAngleY,this.TeethL.rotateAngleX=this.Head.rotateAngleX+2.530727,this.Mouth.rotateAngleX=this.Head.rotateAngleX+2.530727,this.SideburnL.rotateAngleX=-.20944+this.Head.rotateAngleX,this.SideburnL.rotateAngleY=.418879+this.Head.rotateAngleY,
this.SideburnR.rotateAngleX=-.20944+this.Head.rotateAngleX,this.SideburnR.rotateAngleY=-.418879+this.Head.rotateAngleY,this.Nose.rotateAngleX=.2792527+this.Head.rotateAngleX,this.Snout.rotateAngleX=this.Head.rotateAngleX,this.TeethU.rotateAngleX=this.Head.rotateAngleX,this.LEar.rotateAngleX=this.Head.rotateAngleX,this.REar.rotateAngleX=this.Head.rotateAngleX,this.RLegA.rotateAngleX=-.8126625+r,this.RLegB.rotateAngleX=-.8445741+r,this.RLegC.rotateAngleX=-.286069+r,this.RFoot.rotateAngleX=r,this.LLegA.rotateAngleX=-.8126625+a,this.LLegB.rotateAngleX=-.8445741+a,this.LLegC.rotateAngleX=-.286069+a,this.LFoot.rotateAngleX=a,this.RArmA.rotateAngleZ=-(.05*MathHelper.func_76134_b(.09*i))+.05,this.LArmA.rotateAngleZ=.05*MathHelper.func_76134_b(.09*i)-.05,this.RArmA.rotateAngleX=a,this.LArmA.rotateAngleX=r,this.RArmB.rotateAngleZ=.349066+this.RArmA.rotateAngleZ,this.LArmB.rotateAngleZ=-.349066+this.LArmA.rotateAngleZ,this.RArmB.rotateAngleX=.261799+this.RArmA.rotateAngleX,this.LArmB.rotateAngleX=.261799+this.LArmA.rotateAngleX,this.RArmC.rotateAngleZ=this.RArmA.rotateAngleZ,this.LArmC.rotateAngleZ=this.LArmA.rotateAngleZ,this.RArmC.rotateAngleX=-.349066+this.RArmA.rotateAngleX,this.LArmC.rotateAngleX=-.349066+this.LArmA.rotateAngleX,this.RHand.rotateAngleZ=this.RArmA.rotateAngleZ,this.LHand.rotateAngleZ=this.LArmA.rotateAngleZ,this.RHand.rotateAngleX=this.RArmA.rotateAngleX,this.LHand.rotateAngleX=this.LArmA.rotateAngleX,this.RFinger1.rotateAngleX=this.RArmA.rotateAngleX,this.RFinger2.rotateAngleX=this.RArmA.rotateAngleX,this.RFinger3.rotateAngleX=this.RArmA.rotateAngleX,this.RFinger4.rotateAngleX=this.RArmA.rotateAngleX,this.RFinger5.rotateAngleX=this.RArmA.rotateAngleX,this.LFinger1.rotateAngleX=this.LArmA.rotateAngleX,this.LFinger2.rotateAngleX=this.LArmA.rotateAngleX,this.LFinger3.rotateAngleX=this.LArmA.rotateAngleX,this.LFinger4.rotateAngleX=this.LArmA.rotateAngleX,this.LFinger5.rotateAngleX=this.LArmA.rotateAngleX,this.RFinger1.rotateAngleZ=this.RArmA.rotateAngleZ,this.RFinger2.rotateAngleZ=this.RArmA.rotateAngleZ,this.RFinger3.rotateAngleZ=this.RArmA.rotateAngleZ,this.RFinger4.rotateAngleZ=this.RArmA.rotateAngleZ,this.RFinger5.rotateAngleZ=this.RArmA.rotateAngleZ,this.LFinger1.rotateAngleZ=this.LArmA.rotateAngleZ,this.LFinger2.rotateAngleZ=this.LArmA.rotateAngleZ,this.LFinger3.rotateAngleZ=this.LArmA.rotateAngleZ,this.LFinger4.rotateAngleZ=this.LArmA.rotateAngleZ,this.LFinger5.rotateAngleZ=this.LArmA.rotateAngleZ}}),ModelMoCMoCWolf.prototype=$.extend({},ModelBase.prototype,{ModelMoCMoCWolf:function(){ModelBase.call(this),this.texture.width=64,this.texture.height=128,this.Head=this.model.Head=new ModelRenderer(this,0,0),this.Head.addBox(-4,-3,-6,8,8,6),this.Head.setRotationPoint(0,7,-10),this.MouthB=this.model.MouthB=new ModelRenderer(this,16,33),this.MouthB.addBox(-2,4,-7,4,1,2),this.MouthB.setRotationPoint(0,7,-10),this.Nose2=this.model.Nose2=new ModelRenderer(this,0,25),this.Nose2.addBox(-2,2,-12,4,2,6),this.Nose2.setRotationPoint(0,7,-10),this.Neck=this.model.Neck=new ModelRenderer(this,28,0),this.Neck.addBox(-3.5,-3,-7,7,8,7),this.Neck.setRotationPoint(0,10,-6),setRotation(this.Neck,-.453786,0,0),this.Neck2=this.model.Neck2=new ModelRenderer(this,0,14),this.Neck2.addBox(-1.5,-2,-5,3,4,7),this.Neck2.setRotationPoint(0,14,-10),setRotation(this.Neck2,-.453786,0,0),this.LSide=this.model.LSide=new ModelRenderer(this,28,33),this.LSide.addBox(3,-.5,-2,2,6,6),this.LSide.setRotationPoint(0,7,-10),setRotation(this.LSide,-.20944,.418879,-.0872665),this.RSide=this.model.RSide=new ModelRenderer(this,28,45),this.RSide.addBox(-5,-.5,-2,2,6,6),this.RSide.setRotationPoint(0,7,-10),setRotation(this.RSide,-.20944,-.418879,.0872665),this.Nose=this.model.Nose=new ModelRenderer(this,44,33),this.Nose.addBox(-1.5,-1.8,-12.4,3,2,7),this.Nose.setRotationPoint(0,7,-10),setRotation(this.Nose,.2792527,0,0),this.Mouth=this.model.Mouth=new ModelRenderer(this,1,34),this.Mouth.addBox(-2,4,-11.5,4,1,5),this.Mouth.setRotationPoint(0,7,-10),this.MouthOpen=this.model.MouthOpen=new ModelRenderer(this,1,34),this.MouthOpen.addBox(-2,0,-12.5,4,1,5),this.MouthOpen.setRotationPoint(0,7,-10),setRotation(this.MouthOpen,.6108652,0,0),this.REar=this.model.REar=new ModelRenderer(this,22,0),this.REar.addBox(-3.5,-7,-1.5,3,5,1),this.REar.setRotationPoint(0,7,-10),setRotation(this.REar,0,0,-.1745329),this.LEar=this.model.LEar=new ModelRenderer(this,13,14),this.LEar.addBox(.5,-7,-1.5,3,5,1),this.LEar.setRotationPoint(0,7,-10),setRotation(this.LEar,0,0,.1745329),this.Chest=this.model.Chest=new ModelRenderer(this,20,15),this.Chest.addBox(-4,-11,-12,8,8,10),this.Chest.setRotationPoint(0,5,2),setRotation(this.Chest,1.570796,0,0),this.Body=this.model.Body=new ModelRenderer(this,0,40),this.Body.addBox(-3,-8,-9,6,16,8),this.Body.setRotationPoint(0,6.5,2),setRotation(this.Body,1.570796,0,0),this.TailA=this.model.TailA=new ModelRenderer(this,52,42),this.TailA.addBox(-1.5,0,-1.5,3,4,3),this.TailA.setRotationPoint(0,8.5,9),setRotation(this.TailA,1.064651,0,0),this.TailB=this.model.TailB=new ModelRenderer(this,48,49),this.TailB.addBox(-2,3,-1,4,6,4),this.TailB.setRotationPoint(0,8.5,9),setRotation(this.TailB,.7504916,0,0),this.TailC=this.model.TailC=new ModelRenderer(this,48,59),this.TailC.addBox(-2,7.8,-4.1,4,6,4),this.TailC.setRotationPoint(0,8.5,9),setRotation(this.TailC,1.099557,0,0),this.TailD=this.model.TailD=new ModelRenderer(this,52,69),this.TailD.addBox(-1.5,9.8,-3.6,3,5,3),this.TailD.setRotationPoint(0,8.5,9),setRotation(this.TailD,1.099557,0,0),this.Leg1A=this.model.Leg1A=new ModelRenderer(this,28,57),this.Leg1A.addBox(.01,-4,-2.5,2,8,4),this.Leg1A.setRotationPoint(4,12.5,-5.5),setRotation(this.Leg1A,.261799,0,0),this.Leg1B=this.model.Leg1B=new ModelRenderer(this,28,69),this.Leg1B.addBox(0,3.2,.5,2,8,2),this.Leg1B.setRotationPoint(4,12.5,-5.5),setRotation(this.Leg1B,-.1745329,0,0),this.Leg1C=this.model.Leg1C=new ModelRenderer(this,28,79),this.Leg1C.addBox(-.5066667,9.5,-2.5,3,2,3),this.Leg1C.setRotationPoint(4,12.5,-5.5),this.Leg2A=this.model.Leg2A=new ModelRenderer(this,28,84),this.Leg2A.addBox(-2.01,-4,-2.5,2,8,4),this.Leg2A.setRotationPoint(-4,12.5,-5.5),setRotation(this.Leg2A,.261799,0,0),this.Leg2B=this.model.Leg2B=new ModelRenderer(this,28,96),this.Leg2B.addBox(-2,3.2,.5,2,8,2),this.Leg2B.setRotationPoint(-4,12.5,-5.5),setRotation(this.Leg2B,-.1745329,0,0),this.Leg2C=this.model.Leg2C=new ModelRenderer(this,28,106),this.Leg2C.addBox(-2.506667,9.5,-2.5,3,2,3),this.Leg2C.setRotationPoint(-4,12.5,-5.5),this.Leg3A=this.model.Leg3A=new ModelRenderer(this,0,64),this.Leg3A.addBox(0,-3.8,-3.5,2,7,5),this.Leg3A.setRotationPoint(3,12.5,7),setRotation(this.Leg3A,-.3665191,0,0),this.Leg3B=this.model.Leg3B=new ModelRenderer(this,0,76),this.Leg3B.addBox(-.1,1.9,-1.8,2,2,5),this.Leg3B.setRotationPoint(3,12.5,7),setRotation(this.Leg3B,-.7330383,0,0),this.Leg3C=this.model.Leg3C=new ModelRenderer(this,0,83),this.Leg3C.addBox(0,3.2,0,2,8,2),this.Leg3C.setRotationPoint(3,12.5,7),setRotation(this.Leg3C,-.1745329,0,0),this.Leg3=this.model.Leg3=new ModelRenderer(this,0,93),this.Leg3.addBox(-.5066667,9.5,-3,3,2,3),this.Leg3.setRotationPoint(3,12.5,7),this.Leg4A=this.model.Leg4A=new ModelRenderer(this,14,64),this.Leg4A.addBox(-2,-3.8,-3.5,2,7,5),this.Leg4A.setRotationPoint(-3,12.5,7),setRotation(this.Leg4A,-.3665191,0,0),this.Leg4B=this.model.Leg4B=new ModelRenderer(this,14,76),this.Leg4B.addBox(-1.9,1.9,-1.8,2,2,5),this.Leg4B.setRotationPoint(-3,12.5,7),setRotation(this.Leg4B,-.7330383,0,0),this.Leg4C=this.model.Leg4C=new ModelRenderer(this,14,83),this.Leg4C.addBox(-2,3.2,0,2,8,2),this.Leg4C.setRotationPoint(-3,12.5,7),setRotation(this.Leg4C,-.1745329,0,0),this.Leg4=this.model.Leg4=new ModelRenderer(this,14,93),this.Leg4.addBox(-2.506667,9.5,-3,3,2,3),this.Leg4.setRotationPoint(-3,12.5,7)},func_78088_a:function(t,e,i,n,o,s,r){var a=t,h=0!=a.mouthCounter,l=0!=a.tailCounter;setRotationAngles(e,i,n,o,s,r,l),this.Head.render(r),this.Nose2.render(r),this.Neck.render(r),this.Neck2.render(r),this.LSide.render(r),this.RSide.render(r),this.Nose.render(r),h?this.MouthOpen.render(r):(this.Mouth.render(r),this.MouthB.render(r)),this.REar.render(r),this.LEar.render(r),this.Chest.render(r),this.Body.render(r),this.TailA.render(r),this.TailB.render(r),this.TailC.render(r),this.TailD.render(r),this.Leg4A.render(r),this.Leg4.render(r),this.Leg4B.render(r),this.Leg4C.render(r),this.Leg3B.render(r),this.Leg2A.render(r),this.Leg2B.render(r),this.Leg2C.render(r),this.Leg3.render(r),this.Leg3C.render(r),this.Leg3A.render(r),this.Leg1A.render(r),this.Leg1B.render(r),this.Leg1C.render(r)},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},setRotationAngles:function(t,e,i,n,o,s,r){this.Head.rotateAngleX=o/57.29578,this.Head.rotateAngleY=n/57.29578;var a=1.4*MathHelper.func_76134_b(.6662*t)*e,h=1.4*MathHelper.func_76134_b(.6662*t+3.141593)*e;this.Mouth.rotateAngleX=this.Head.rotateAngleX,this.Mouth.rotateAngleY=this.Head.rotateAngleY,this.MouthB.rotateAngleX=this.Head.rotateAngleX,this.MouthB.rotateAngleY=this.Head.rotateAngleY,this.MouthOpen.rotateAngleX=.6108652+this.Head.rotateAngleX,this.MouthOpen.rotateAngleY=this.Head.rotateAngleY,this.Nose.rotateAngleX=.2792527+this.Head.rotateAngleX,this.Nose.rotateAngleY=this.Head.rotateAngleY,this.Nose2.rotateAngleX=this.Head.rotateAngleX,this.Nose2.rotateAngleY=this.Head.rotateAngleY,this.LSide.rotateAngleX=-.20944+this.Head.rotateAngleX,this.LSide.rotateAngleY=.418879+this.Head.rotateAngleY,this.RSide.rotateAngleX=-.20944+this.Head.rotateAngleX,this.RSide.rotateAngleY=-.418879+this.Head.rotateAngleY,this.REar.rotateAngleX=this.Head.rotateAngleX,this.REar.rotateAngleY=this.Head.rotateAngleY,this.LEar.rotateAngleX=this.Head.rotateAngleX,this.LEar.rotateAngleY=this.Head.rotateAngleY,this.Leg1A.rotateAngleX=.261799+a,this.Leg1B.rotateAngleX=-.1745329+a,this.Leg1C.rotateAngleX=a,this.Leg2A.rotateAngleX=.261799+h,this.Leg2B.rotateAngleX=-.1745329+h,this.Leg2C.rotateAngleX=h,this.Leg3A.rotateAngleX=-.3665192+h,this.Leg3B.rotateAngleX=-.7330383+h,this.Leg3C.rotateAngleX=-.1745329+h,this.Leg3.rotateAngleX=h,this.Leg4A.rotateAngleX=-.3665192+a,this.Leg4B.rotateAngleX=-.7330383+a,this.Leg4C.rotateAngleX=-.1745329+a,this.Leg4.rotateAngleX=a;var l=-1.3089+1.5*e;r?(this.TailA.rotateAngleY=MathHelper.func_76134_b(.5*i),l=0):this.TailA.rotateAngleY=0,this.TailA.rotateAngleX=1.064758-l,this.TailB.rotateAngleX=.7505673-l,this.TailC.rotateAngleX=1.099668-l,this.TailD.rotateAngleX=1.099668-l,this.TailB.rotateAngleY=this.TailA.rotateAngleY,this.TailC.rotateAngleY=this.TailA.rotateAngleY,this.TailD.rotateAngleY=this.TailA.rotateAngleY}}),ModelMoCWraith.prototype=$.extend({},ModelBiped.prototype,{ModelMoCWraith:function(){ModelBiped.call(this,12,0,64,32),this.g=new acf(this,0,40),this.g.a(-4,-8,-4,1,1,1,0),this.g.a(0,0,0),this.h=new acf(this,0,0),this.h.a(-5,-8,-4,8,8,8,0),this.h.a(0,0,0),this.i=new acf(this,36,0),this.i.a(-6,0,-2,10,20,4,0),this.i.a(0,0,0),this.j=new acf(this,16,16),this.j.a(-5,-2,-2,4,12,4,0),this.j.a(-5,2,0),this.k=new acf(this,16,16),this.k.i=!0,this.k.a(-1,-2,-2,4,12,4,0),this.k.a(5,2,0),this.l=new acf(this,0,16),this.l.a(-2,0,-2,2,2,2,0),this.l.a(-2,12,0),this.m=new acf(this,0,16),this.m.i=!0,this.m.a(-2,0,-2,2,2,2,0),this.m.a(2,12,0),this.remapDecompiledModel()}}),ModelMoCWyvern.prototype=$.extend({},ModelBase.prototype,{ModelMoCWyvern:function(){ModelBase.call(this),this.texture.width=128,this.texture.height=256,this.Tail=this.model.Tail=new ModelRenderer(this),this.Tail.addBox(0,0,0,0,0,0),this.Tail.setRotationPoint(0,0,0),this.back1=this.model.back1=new ModelRenderer(this,92,0),this.back1.addBox(-3,-2,-12,6,2,12),this.back1.setRotationPoint(0,0,0),this.tail1=this.model.tail1=new ModelRenderer(this,0,22),this.tail1.addBox(-4,0,0,8,8,10),this.tail1.setRotationPoint(0,0,0),this.Tail.addChild(this.tail1),delete this.model.tail1,this.back2=this.model.back2=new ModelRenderer(this,100,14),this.back2.addBox(-2,-2,0,4,2,10),this.back2.setRotationPoint(0,0,0),this.tail1.addChild(this.back2),delete this.model.back2,this.tail2=this.model.tail2=new ModelRenderer(this,0,40),this.tail2.addBox(-3,0,0,6,6,9),this.tail2.setRotationPoint(0,0,10),this.tail1.addChild(this.tail2),delete this.model.tail2,this.back3=this.model.back3=new ModelRenderer(this,104,26),this.back3.addBox(-1.5,-2,0,3,2,9),this.back3.setRotationPoint(0,0,0),this.tail2.addChild(this.back3),delete this.model.back3,this.tail3=this.model.tail3=new ModelRenderer(this,0,55),this.tail3.addBox(-2,0,0,4,5,8),this.tail3.setRotationPoint(0,0,8),this.tail2.addChild(this.tail3),delete this.model.tail3,this.back4=this.model.back4=new ModelRenderer(this,108,37),this.back4.addBox(-1,-2,0,2,2,8),this.back4.setRotationPoint(0,0,0),this.tail3.addChild(this.back4),delete this.model.back4,this.tail4=this.model.tail4=new ModelRenderer(this,0,68),this.tail4.addBox(-1,0,0,2,5,7),this.tail4.setRotationPoint(0,-1,7),this.tail3.addChild(this.tail4),delete this.model.tail4,this.tail5=this.model.tail5=new ModelRenderer(this,0,80),this.tail5.addBox(-.5,0,0,1,3,7),this.tail5.setRotationPoint(0,1,6),this.tail4.addChild(this.tail5),delete this.model.tail5,this.chest=this.model.chest=new ModelRenderer(this,44,0),this.chest.addBox(-4.5,2.7,-13,9,10,4),this.chest.setRotationPoint(0,0,0),setRotation(this.chest,-.26025,0,0),this.neckplate3=this.model.neckplate3=new ModelRenderer(this,112,64),this.neckplate3.addBox(-2,-2,-2,4,2,4),this.neckplate3.setRotationPoint(0,0,-12),setRotation(this.neckplate3,-.669215,0,0),this.neck3=this.model.neck3=new ModelRenderer(this,100,113),this.neck3.addBox(-3,0,-2,6,7,8),this.neck3.setRotationPoint(0,0,-12),setRotation(this.neck3,-.669215,0,0),this.MainHead=this.model.MainHead=new ModelRenderer(this),this.MainHead.addBox(0,0,0,0,0,0),this.MainHead.setRotationPoint(0,3,-15),this.neck2=this.model.neck2=new ModelRenderer(this,102,99),this.neck2.addBox(-2.5,-3,-8,5,6,8),this.neck2.setRotationPoint(0,0,0),this.MainHead.addChild(this.neck2),delete this.model.neck2,this.neckplate2=this.model.neckplate2=new ModelRenderer(this,106,54),this.neckplate2.addBox(-1.5,-2,-8,3,2,8),this.neckplate2.setRotationPoint(0,-3,0),this.neck2.addChild(this.neckplate2),delete this.model.neckplate2,this.neck1=this.model.neck1=new ModelRenderer(this,104,85),this.neck1.addBox(-2,-3,-8,4,6,8),this.neck1.setRotationPoint(0,-.5,-5.5),this.neck2.addChild(this.neck1),delete this.model.neck1,this.neckplate1=this.model.neckplate1=new ModelRenderer(this,80,108),this.neckplate1.addBox(-1,-2,-8,2,2,8),this.neckplate1.setRotationPoint(0,-3,0),this.neck1.addChild(this.neckplate1),delete this.model.neckplate1,this.head=this.model.head=new ModelRenderer(this,98,70),this.head.addBox(-3.5,-3.5,-8,7,7,8),this.head.setRotationPoint(0,0,-7),this.neck1.addChild(this.head),delete this.model.head,this.snout=this.model.snout=new ModelRenderer(this,72,70),this.snout.addBox(-2,-1.5,-9,4,3,9),this.snout.setRotationPoint(0,-1.5,-8),setRotation(this.snout,2/57.29578,0,0),this.head.addChild(this.snout),delete this.model.snout,this.headplate=this.model.headplate=new ModelRenderer(this,80,118),this.headplate.addBox(-1,-1,-4,2,2,8),this.headplate.setRotationPoint(0,-3,-1),setRotation(this.headplate,10/57.29578,0,0),this.head.addChild(this.headplate),delete this.model.headplate,this.beak=this.model.beak=new ModelRenderer(this,60,85),this.beak.addBox(-1.5,-2.5,-1.5,3,5,3),this.beak.setRotationPoint(0,.8,-8),setRotation(this.beak,-6/57.29578,45/57.29578,-6/57.29578),this.snout.addChild(this.beak),delete this.model.beak,this.righteyesock=this.model.righteyesock=new ModelRenderer(this,70,108),this.righteyesock.addBox(0,0,0,1,2,4),this.righteyesock.setRotationPoint(-3.5,-2.5,-8),this.head.addChild(this.righteyesock),delete this.model.righteyesock,this.lefteyesock=this.model.lefteyesock=new ModelRenderer(this,70,114),this.lefteyesock.addBox(0,0,0,1,2,4),this.lefteyesock.setRotationPoint(2.5,-2.5,-8),this.head.addChild(this.lefteyesock),delete this.model.lefteyesock,this.Jaw=this.model.Jaw=new ModelRenderer(this,72,82),this.Jaw.addBox(-2,-1,-9,4,2,9),this.Jaw.setRotationPoint(0,2.5,-7.5),setRotation(this.Jaw,-10/57.29578,0,0),this.head.addChild(this.Jaw),delete this.model.Jaw,this.leftupjaw=this.model.leftupjaw=new ModelRenderer(this,42,93),this.leftupjaw.addBox(-1,-1,-6.5,2,2,13),this.leftupjaw.setRotationPoint(2,0,-10.5),setRotation(this.leftupjaw,-10/57.29578,10/57.29578,0),this.head.addChild(this.leftupjaw),delete this.model.leftupjaw,this.rightupjaw=this.model.rightupjaw=new ModelRenderer(this,72,93),this.rightupjaw.addBox(-1,-1,-6.5,2,2,13),this.rightupjaw.setRotationPoint(-2,0,-10.5),setRotation(this.rightupjaw,-10/57.29578,-10/57.29578,0),this.head.addChild(this.rightupjaw),delete this.model.rightupjaw,this.mouthrod=this.model.mouthrod=new ModelRenderer(this,104,50),this.mouthrod.addBox(-5,-1,-1,10,2,2),this.mouthrod.setRotationPoint(0,1,-8),this.head.addChild(this.mouthrod),delete this.model.mouthrod,this.helmetstrap1=this.model.helmetstrap1=new ModelRenderer(this,32,146),this.helmetstrap1.addBox(-4,-2,0,8,4,1),this.helmetstrap1.setRotationPoint(0,2,-7.5),this.head.addChild(this.helmetstrap1),delete this.model.helmetstrap1,this.helmetstrap2=this.model.helmetstrap2=new ModelRenderer(this,32,141),this.helmetstrap2.addBox(-4,-2,0,8,4,1),this.helmetstrap2.setRotationPoint(0,2,-3.5),this.head.addChild(this.helmetstrap2),delete this.model.helmetstrap2,this.controlrope1=this.model.controlrope1=new ModelRenderer(this,66,43),this.controlrope1.addBox(0,-2,0,0,4,23),this.controlrope1.setRotationPoint(4.5,1,0),this.mouthrod.addChild(this.controlrope1),delete this.model.controlrope1,this.controlrope2=this.model.controlrope2=new ModelRenderer(this,66,43),this.controlrope2.addBox(0,-2,0,0,4,23),this.controlrope2.setRotationPoint(-4.5,1,0),this.mouthrod.addChild(this.controlrope2),delete this.model.controlrope2,this.rightearskin=this.model.rightearskin=new ModelRenderer(this,112,201),this.rightearskin.addBox(0,-4,0,0,8,8),this.rightearskin.setRotationPoint(-3,-.5,0),this.head.addChild(this.rightearskin),delete this.model.rightearskin,this.leftearskin=this.model.leftearskin=new ModelRenderer(this,96,201),this.leftearskin.addBox(0,-4,0,0,8,8),this.leftearskin.setRotationPoint(3,-.5,0),this.head.addChild(this.leftearskin),delete this.model.leftearskin,this.rightspine1=this.model.rightspine1=new ModelRenderer(this,50,141),this.rightspine1.addBox(-.5,-1,0,1,2,8),this.rightspine1.setRotationPoint(0,-2,0),setRotation(this.rightspine1,15/57.29578,0,0),this.rightearskin.addChild(this.rightspine1),delete this.model.rightspine1,this.rightspine2=this.model.rightspine2=new ModelRenderer(this,50,141),this.rightspine2.addBox(-.5,-1,0,1,2,8),this.rightspine2.setRotationPoint(0,0,0),this.rightearskin.addChild(this.rightspine2),delete this.model.rightspine2,this.rightspine3=this.model.rightspine3=new ModelRenderer(this,50,141),this.rightspine3.addBox(-.5,-1,0,1,2,8),this.rightspine3.setRotationPoint(0,2,0),setRotation(this.rightspine3,-15/57.29578,0,0),this.rightearskin.addChild(this.rightspine3),delete this.model.rightspine3,this.leftspine1=this.model.leftspine1=new ModelRenderer(this,68,141),this.leftspine1.addBox(-.5,-1,0,1,2,8),this.leftspine1.setRotationPoint(0,-2,0),setRotation(this.leftspine1,15/57.29578,0,0),this.leftearskin.addChild(this.leftspine1),delete this.model.leftspine1,this.leftspine2=this.model.leftspine2=new ModelRenderer(this,68,141),this.leftspine2.addBox(-.5,-1,0,1,2,8),this.leftspine2.setRotationPoint(0,0,0),this.leftearskin.addChild(this.leftspine2),delete this.model.leftspine2,this.leftspine3=this.model.leftspine3=new ModelRenderer(this,68,141),this.leftspine3.addBox(-.5,-1,0,1,2,8),this.leftspine3.setRotationPoint(0,2,0),setRotation(this.leftspine3,-15/57.29578,0,0),this.leftearskin.addChild(this.leftspine3),delete this.model.leftspine3,this.ironhelmethorn1=this.model.ironhelmethorn1=new ModelRenderer(this,106,139),this.ironhelmethorn1.addBox(-1.5,-1.5,0,3,3,8),this.ironhelmethorn1.setRotationPoint(-.5,0,.1),this.leftspine1.addChild(this.ironhelmethorn1),delete this.model.ironhelmethorn1,this.ironhelmethorn2=this.model.ironhelmethorn2=new ModelRenderer(this,106,128),this.ironhelmethorn2.addBox(-1.5,-1.5,0,3,3,8),this.ironhelmethorn2.setRotationPoint(.5,0,.1),this.rightspine1.addChild(this.ironhelmethorn2),delete this.model.ironhelmethorn2,this.ironhelmet=this.model.ironhelmet=new ModelRenderer(this,32,128),this.ironhelmet.addBox(-4,-4,-9,8,4,9),this.ironhelmet.setRotationPoint(0,0,0),this.head.addChild(this.ironhelmet),delete this.model.ironhelmet,this.ironhelmetsnout=this.model.ironhelmetsnout=new ModelRenderer(this,0,144),this.ironhelmetsnout.addBox(-2.5,-2,-7,5,2,7),this.ironhelmetsnout.setRotationPoint(0,0,-1),this.snout.addChild(this.ironhelmetsnout),delete this.model.ironhelmetsnout,this.goldhelmethorn1=this.model.goldhelmethorn1=new ModelRenderer(this,106,161),this.goldhelmethorn1.addBox(-1.5,-1.5,0,3,3,8),this.goldhelmethorn1.setRotationPoint(-.5,0,.1),this.leftspine1.addChild(this.goldhelmethorn1),delete this.model.goldhelmethorn1,this.goldhelmethorn2=this.model.goldhelmethorn2=new ModelRenderer(this,106,150),this.goldhelmethorn2.addBox(-1.5,-1.5,0,3,3,8),this.goldhelmethorn2.setRotationPoint(.5,0,.1),this.rightspine1.addChild(this.goldhelmethorn2),delete this.model.goldhelmethorn2,this.goldhelmet=this.model.goldhelmet=new ModelRenderer(this,94,226),this.goldhelmet.addBox(-4,-4,-9,8,4,9),this.goldhelmet.setRotationPoint(0,0,0),this.head.addChild(this.goldhelmet),delete this.model.goldhelmet,this.goldhelmetsnout=this.model.goldhelmetsnout=new ModelRenderer(this,71,235),this.goldhelmetsnout.addBox(-2.5,-2,-7,5,2,7),this.goldhelmetsnout.setRotationPoint(0,0,-1),this.snout.addChild(this.goldhelmetsnout),delete this.model.goldhelmetsnout,this.diamondhelmet=this.model.diamondhelmet=new ModelRenderer(this,23,226),this.diamondhelmet.addBox(-4,-4,-9,8,4,9),this.diamondhelmet.setRotationPoint(0,0,0),this.head.addChild(this.diamondhelmet),delete this.model.diamondhelmet,this.diamondhelmethorn2=this.model.diamondhelmethorn2=new ModelRenderer(this,49,234),this.diamondhelmethorn2.addBox(-1.5,-1.5,0,3,3,8),this.diamondhelmethorn2.setRotationPoint(.5,0,.1),this.rightspine1.addChild(this.diamondhelmethorn2),delete this.model.diamondhelmethorn2,this.diamondhelmethorn1=this.model.diamondhelmethorn1=new ModelRenderer(this,49,245),this.diamondhelmethorn1.addBox(-1.5,-1.5,0,3,3,8),this.diamondhelmethorn1.setRotationPoint(-.5,0,.1),this.leftspine1.addChild(this.diamondhelmethorn1),delete this.model.diamondhelmethorn1,this.diamondhelmetsnout=this.model.diamondhelmetsnout=new ModelRenderer(this,0,235),this.diamondhelmetsnout.addBox(-2.5,-2,-7,5,2,7),this.diamondhelmetsnout.setRotationPoint(0,0,-1),this.snout.addChild(this.diamondhelmetsnout),delete this.model.diamondhelmetsnout,this.torso=this.model.torso=new ModelRenderer(this,0,0),this.torso.addBox(-5,0,-12,10,10,12),this.torso.setRotationPoint(0,0,0),this.saddle=this.model.saddle=new ModelRenderer(this,38,70),this.saddle.addBox(-3.5,-2.5,-8,7,3,10),this.saddle.setRotationPoint(0,0,0),this.rightshoulder=this.model.rightshoulder=new ModelRenderer(this,42,83),this.rightshoulder.addBox(-6,1,-12.5,4,5,5),this.rightshoulder.setRotationPoint(0,0,0),setRotation(this.rightshoulder,-.261799,0,0),this.leftshoulder=this.model.leftshoulder=new ModelRenderer(this,24,83),this.leftshoulder.addBox(2,1,-12.5,4,5,5),this.leftshoulder.setRotationPoint(0,0,0),setRotation(this.leftshoulder,-.261799,0,0),this.LeftWing=this.model.LeftWing=new ModelRenderer(this),this.LeftWing.addBox(0,0,0,0,0,0),this.LeftWing.setRotationPoint(4,1,-11),this.leftuparm=this.model.leftuparm=new ModelRenderer(this,44,14),this.leftuparm.addBox(0,-2,-2,10,4,4),this.leftuparm.setRotationPoint(0,0,0),setRotation(this.leftuparm,0,-10/57.29578,0),this.LeftWing.addChild(this.leftuparm),delete this.model.leftuparm,this.leftlowarm=this.model.leftlowarm=new ModelRenderer(this,72,14),this.leftlowarm.addBox(0,-2,-2,10,4,4),this.leftlowarm.setRotationPoint(9,0,0),setRotation(this.leftlowarm,0,10/57.29578,0),this.leftuparm.addChild(this.leftlowarm),delete this.model.leftlowarm,this.leftfing1a=this.model.leftfing1a=new ModelRenderer(this,52,30),this.leftfing1a.addBox(0,0,-1,2,15,2),this.leftfing1a.setRotationPoint(9,1,0),setRotation(this.leftfing1a,90/57.29578,70/57.29578,0),this.leftlowarm.addChild(this.leftfing1a),delete this.model.leftfing1a,this.leftfing1b=this.model.leftfing1b=new ModelRenderer(this,52,47),this.leftfing1b.addBox(0,0,-1,2,10,2),this.leftfing1b.setRotationPoint(0,14,0),setRotation(this.leftfing1b,0,0,35/57.29578),this.leftfing1a.addChild(this.leftfing1b),delete this.model.leftfing1b,this.leftfing2a=this.model.leftfing2a=new ModelRenderer(this,44,30),this.leftfing2a.addBox(-1,0,0,2,15,2),this.leftfing2a.setRotationPoint(9,1,0),setRotation(this.leftfing2a,90/57.29578,35/57.29578,0),this.leftlowarm.addChild(this.leftfing2a),delete this.model.leftfing2a,this.leftfing2b=this.model.leftfing2b=new ModelRenderer(this,44,47),this.leftfing2b.addBox(-1,0,0,2,10,2),this.leftfing2b.setRotationPoint(0,14,0),setRotation(this.leftfing2b,0,0,30/57.29578),this.leftfing2a.addChild(this.leftfing2b),delete this.model.leftfing2b,this.leftfing3a=this.model.leftfing3a=new ModelRenderer(this,36,30),this.leftfing3a.addBox(-1,0,1,2,15,2),this.leftfing3a.setRotationPoint(9,1,0),setRotation(this.leftfing3a,90/57.29578,-5/57.29578,0),this.leftlowarm.addChild(this.leftfing3a),delete this.model.leftfing3a,this.leftfing3b=this.model.leftfing3b=new ModelRenderer(this,36,47),this.leftfing3b.addBox(-1,0,1,2,10,2),this.leftfing3b.setRotationPoint(0,14,0),setRotation(this.leftfing3b,0,0,30/57.29578),this.leftfing3a.addChild(this.leftfing3b),delete this.model.leftfing3b,this.leftwingflap1=this.model.leftwingflap1=new ModelRenderer(this,74,153),this.leftwingflap1.addBox(3.5,-3,.95,14,24,0),this.leftwingflap1.setRotationPoint(0,0,0),setRotation(this.leftwingflap1,0,0,70/57.29578),this.leftfing1a.addChild(this.leftwingflap1),delete this.model.leftwingflap1,this.leftwingflap2=this.model.leftwingflap2=new ModelRenderer(this,36,153),this.leftwingflap2.addBox(-7,1.05,1.05,19,24,0),this.leftwingflap2.setRotationPoint(0,0,0),setRotation(this.leftwingflap2,0,0,40/57.29578),this.leftfing2a.addChild(this.leftwingflap2),delete this.model.leftwingflap2,this.leftwingflap3=this.model.leftwingflap3=new ModelRenderer(this,0,153),this.leftwingflap3.addBox(-17.5,1,1.1,18,24,0),this.leftwingflap3.setRotationPoint(0,0,0),this.leftfing3a.addChild(this.leftwingflap3),delete this.model.leftwingflap3,this.RightWing=this.model.RightWing=new ModelRenderer(this),this.RightWing.addBox(0,0,0,0,0,0),this.RightWing.setRotationPoint(-4,1,-11),this.rightuparm=this.model.rightuparm=new ModelRenderer(this,44,22),this.rightuparm.addBox(-10,-2,-2,10,4,4),this.rightuparm.setRotationPoint(0,0,0),setRotation(this.rightuparm,0,10/57.29578,0),this.RightWing.addChild(this.rightuparm),delete this.model.rightuparm,this.rightlowarm=this.model.rightlowarm=new ModelRenderer(this,72,22),this.rightlowarm.addBox(-10,-2,-2,10,4,4),this.rightlowarm.setRotationPoint(-9,0,0),setRotation(this.rightlowarm,0,-10/57.29578,0),this.rightuparm.addChild(this.rightlowarm),delete this.model.rightlowarm,this.rightfing1a=this.model.rightfing1a=new ModelRenderer(this,36,30),this.rightfing1a.addBox(-1,0,-1,2,15,2),this.rightfing1a.setRotationPoint(-9,1,-1),setRotation(this.rightfing1a,90/57.29578,-70/57.29578,0),this.rightlowarm.addChild(this.rightfing1a),delete this.model.rightfing1a,this.rightfing1b=this.model.rightfing1b=new ModelRenderer(this,36,47),this.rightfing1b.addBox(-1,0,-1,2,10,2),this.rightfing1b.setRotationPoint(0,14,0),setRotation(this.rightfing1b,0,0,-35/57.29578),this.rightfing1a.addChild(this.rightfing1b),delete this.model.rightfing1b,this.rightwingflap1=this.model.rightwingflap1=new ModelRenderer(this,74,177),this.rightwingflap1.addBox(-17.5,-3,.95,14,24,0),this.rightwingflap1.setRotationPoint(0,0,0),setRotation(this.rightwingflap1,0,0,-70/57.29578),this.rightfing1a.addChild(this.rightwingflap1),delete this.model.rightwingflap1,this.rightfing2a=this.model.rightfing2a=new ModelRenderer(this,44,30),this.rightfing2a.addBox(-1,0,0,2,15,2),this.rightfing2a.setRotationPoint(-9,1,0),setRotation(this.rightfing2a,90/57.29578,-35/57.29578,0),this.rightlowarm.addChild(this.rightfing2a),delete this.model.rightfing2a,this.rightfing2b=this.model.rightfing2b=new ModelRenderer(this,44,47),this.rightfing2b.addBox(-1,0,0,2,10,2),this.rightfing2b.setRotationPoint(0,14,0),setRotation(this.rightfing2b,0,0,-30/57.29578),this.rightfing2a.addChild(this.rightfing2b),delete this.model.rightfing2b,this.rightwingflap2=this.model.rightwingflap2=new ModelRenderer(this,36,177),this.rightwingflap2.addBox(-19,1.05,1.05,19,24,0),this.rightwingflap2.setRotationPoint(0,0,0),setRotation(this.rightwingflap2,0,0,-40/57.29578),this.rightfing2a.addChild(this.rightwingflap2),delete this.model.rightwingflap2,this.rightfing3a=this.model.rightfing3a=new ModelRenderer(this,52,30),this.rightfing3a.addBox(-1,0,1,2,15,2),this.rightfing3a.setRotationPoint(-9,1,0),setRotation(this.rightfing3a,90/57.29578,5/57.29578,0),this.rightlowarm.addChild(this.rightfing3a),delete this.model.rightfing3a,this.rightfing3b=this.model.rightfing3b=new ModelRenderer(this,52,47),this.rightfing3b.addBox(-1,0,1,2,10,2),this.rightfing3b.setRotationPoint(0,14,0),setRotation(this.rightfing3b,0,0,-30/57.29578),this.rightfing3a.addChild(this.rightfing3b),delete this.model.rightfing3b,this.rightwingflap3=this.model.rightwingflap3=new ModelRenderer(this,0,177),this.rightwingflap3.addBox(-.5,1,1.1,18,24,0),this.rightwingflap3.setRotationPoint(0,0,0),this.rightfing3a.addChild(this.rightwingflap3),delete this.model.rightwingflap3,this.leftupleg=this.model.leftupleg=new ModelRenderer(this,0,111),this.leftupleg.addBox(-2,-3,-3,4,10,7),this.leftupleg.setRotationPoint(5,6,-5),setRotation(this.leftupleg,-25/57.29578,0,0),this.leftmidleg=this.model.leftmidleg=new ModelRenderer(this,0,102),this.leftmidleg.addBox(-1.5,-2,0,3,4,5),this.leftmidleg.setRotationPoint(0,5,4),this.leftupleg.addChild(this.leftmidleg),delete this.model.leftmidleg,this.leftlowleg=this.model.leftlowleg=new ModelRenderer(this,0,91),this.leftlowleg.addBox(-1.5,0,-1.5,3,8,3),this.leftlowleg.setRotationPoint(0,2,3.5),this.leftmidleg.addChild(this.leftlowleg),delete this.model.leftlowleg,this.leftfoot=this.model.leftfoot=new ModelRenderer(this,44,121),this.leftfoot.addBox(-2,-1,-3,4,3,4),this.leftfoot.setRotationPoint(0,7,.5),setRotation(this.leftfoot,25/57.29578,0,0),this.leftlowleg.addChild(this.leftfoot),delete this.model.leftfoot,this.lefttoe1=this.model.lefttoe1=new ModelRenderer(this,96,35),this.lefttoe1.addBox(-.5,-1,-3,1,2,3),this.lefttoe1.setRotationPoint(-1.5,1,-3),this.leftfoot.addChild(this.lefttoe1),delete this.model.lefttoe1,this.lefttoe3=this.model.lefttoe3=new ModelRenderer(this,96,30),this.lefttoe3.addBox(-.5,-1,-3,1,2,3),this.lefttoe3.setRotationPoint(1.5,1,-3),this.leftfoot.addChild(this.lefttoe3),delete this.model.lefttoe3,this.lefttoe2=this.model.lefttoe2=new ModelRenderer(this,84,30),this.lefttoe2.addBox(-1,-1.5,-4,2,3,4),this.lefttoe2.setRotationPoint(0,.5,-3),this.leftfoot.addChild(this.lefttoe2),delete this.model.lefttoe2,this.leftclaw1=this.model.leftclaw1=new ModelRenderer(this,100,26),this.leftclaw1.addBox(-.5,0,-.5,1,2,1),this.leftclaw1.setRotationPoint(.5,-.5,-2.5),setRotation(this.leftclaw1,-25/57.29578,0,0),this.lefttoe1.addChild(this.leftclaw1),delete this.model.leftclaw1,this.leftclaw2=this.model.leftclaw2=new ModelRenderer(this,100,26),this.leftclaw2.addBox(-.5,0,-.5,1,3,1),this.leftclaw2.setRotationPoint(0,-1,-3.5),setRotation(this.leftclaw2,-25/57.29578,0,0),this.lefttoe2.addChild(this.leftclaw2),delete this.model.leftclaw2,this.leftclaw3=this.model.leftclaw3=new ModelRenderer(this,100,26),this.leftclaw3.addBox(-.5,0,-.5,1,2,1),this.leftclaw3.setRotationPoint(-.5,-.5,-2.5),setRotation(this.leftclaw3,-25/57.29578,0,0),this.lefttoe3.addChild(this.leftclaw3),delete this.model.leftclaw3,this.ironleftlegarmor=this.model.ironleftlegarmor=new ModelRenderer(this,39,97),
this.ironleftlegarmor.addBox(-2,-2.5,-2,4,5,4),this.ironleftlegarmor.setRotationPoint(0,2.5,0),this.leftlowleg.addChild(this.ironleftlegarmor),delete this.model.ironleftlegarmor,this.goldleftlegarmor=this.model.goldleftlegarmor=new ModelRenderer(this,112,181),this.goldleftlegarmor.addBox(-2,-2.5,-2,4,5,4),this.goldleftlegarmor.setRotationPoint(0,2.5,0),this.leftlowleg.addChild(this.goldleftlegarmor),delete this.model.goldleftlegarmor,this.diamondleftlegarmor=this.model.diamondleftlegarmor=new ModelRenderer(this,43,215),this.diamondleftlegarmor.addBox(-2,-2.5,-2,4,5,4),this.diamondleftlegarmor.setRotationPoint(0,2.5,0),this.leftlowleg.addChild(this.diamondleftlegarmor),delete this.model.diamondleftlegarmor,this.rightupleg=this.model.rightupleg=new ModelRenderer(this,0,111),this.rightupleg.addBox(-2,-3,-3,4,10,7),this.rightupleg.setRotationPoint(-5,6,-5),setRotation(this.rightupleg,-25/57.29578,0,0),this.rightmidleg=this.model.rightmidleg=new ModelRenderer(this,0,102),this.rightmidleg.addBox(-1.5,-2,0,3,4,5),this.rightmidleg.setRotationPoint(0,5,4),this.rightupleg.addChild(this.rightmidleg),delete this.model.rightmidleg,this.rightlowleg=this.model.rightlowleg=new ModelRenderer(this,0,91),this.rightlowleg.addBox(-1.5,0,-1.5,3,8,3),this.rightlowleg.setRotationPoint(0,2,3.5),this.rightmidleg.addChild(this.rightlowleg),delete this.model.rightlowleg,this.rightfoot=this.model.rightfoot=new ModelRenderer(this,44,121),this.rightfoot.addBox(-2,-1,-3,4,3,4),this.rightfoot.setRotationPoint(0,7,.5),setRotation(this.rightfoot,25/57.29578,0,0),this.rightlowleg.addChild(this.rightfoot),delete this.model.rightfoot,this.righttoe1=this.model.righttoe1=new ModelRenderer(this,96,35),this.righttoe1.addBox(-.5,-1,-3,1,2,3),this.righttoe1.setRotationPoint(-1.5,1,-3),this.rightfoot.addChild(this.righttoe1),delete this.model.righttoe1,this.righttoe3=this.model.righttoe3=new ModelRenderer(this,96,30),this.righttoe3.addBox(-.5,-1,-3,1,2,3),this.righttoe3.setRotationPoint(1.5,1,-3),this.rightfoot.addChild(this.righttoe3),delete this.model.righttoe3,this.righttoe2=this.model.righttoe2=new ModelRenderer(this,84,30),this.righttoe2.addBox(-1,-1.5,-4,2,3,4),this.righttoe2.setRotationPoint(0,.5,-3),this.rightfoot.addChild(this.righttoe2),delete this.model.righttoe2,this.rightclaw1=this.model.rightclaw1=new ModelRenderer(this,100,26),this.rightclaw1.addBox(-.5,0,-.5,1,2,1),this.rightclaw1.setRotationPoint(.5,-.5,-2.5),setRotation(this.rightclaw1,-25/57.29578,0,0),this.righttoe1.addChild(this.rightclaw1),delete this.model.rightclaw1,this.rightclaw2=this.model.rightclaw2=new ModelRenderer(this,100,26),this.rightclaw2.addBox(-.5,0,-.5,1,3,1),this.rightclaw2.setRotationPoint(0,-1,-3.5),setRotation(this.rightclaw2,-25/57.29578,0,0),this.righttoe2.addChild(this.rightclaw2),delete this.model.rightclaw2,this.rightclaw3=this.model.rightclaw3=new ModelRenderer(this,100,26),this.rightclaw3.addBox(-.5,0,-.5,1,2,1),this.rightclaw3.setRotationPoint(-.5,-.5,-2.5),setRotation(this.rightclaw3,-25/57.29578,0,0),this.righttoe3.addChild(this.rightclaw3),delete this.model.rightclaw3,this.ironrightlegarmor=this.model.ironrightlegarmor=new ModelRenderer(this,39,97),this.ironrightlegarmor.addBox(-2,-2.5,-2,4,5,4),this.ironrightlegarmor.setRotationPoint(0,2.5,0),this.rightlowleg.addChild(this.ironrightlegarmor),delete this.model.ironrightlegarmor,this.goldrightlegarmor=this.model.goldrightlegarmor=new ModelRenderer(this,112,181),this.goldrightlegarmor.addBox(-2,-2.5,-2,4,5,4),this.goldrightlegarmor.setRotationPoint(0,2.5,0),this.rightlowleg.addChild(this.goldrightlegarmor),delete this.model.goldrightlegarmor,this.diamondrightlegarmor=this.model.diamondrightlegarmor=new ModelRenderer(this,43,215),this.diamondrightlegarmor.addBox(-2,-2.5,-2,4,5,4),this.diamondrightlegarmor.setRotationPoint(0,2.5,0),this.rightlowleg.addChild(this.diamondrightlegarmor),delete this.model.diamondrightlegarmor,this.storage=this.model.storage=new ModelRenderer(this,28,59),this.storage.addBox(-5,-4.5,1.5,10,5,6),this.storage.setRotationPoint(0,0,0),setRotation(this.storage,-.226893,0,0),this.chestbelt=this.model.chestbelt=new ModelRenderer(this,0,201),this.chestbelt.addBox(-5.5,-.5,-9,11,11,2),this.chestbelt.setRotationPoint(0,0,0),this.stomachbelt=this.model.stomachbelt=new ModelRenderer(this,0,201),this.stomachbelt.addBox(-5.5,-.5,-3,11,11,2),this.stomachbelt.setRotationPoint(0,0,0),this.ironchestarmor=this.model.ironchestarmor=new ModelRenderer(this,0,128),this.ironchestarmor.addBox(-5.5,2.2,-13.5,11,11,5),this.ironchestarmor.setRotationPoint(0,0,0),setRotation(this.ironchestarmor,-.26025,0,0),this.ironrightshoulderpad=this.model.ironrightshoulderpad=new ModelRenderer(this,74,201),this.ironrightshoulderpad.addBox(-6.5,.5,-13,5,6,6),this.ironrightshoulderpad.setRotationPoint(0,0,0),setRotation(this.ironrightshoulderpad,-.261799,0,0),this.ironleftshoulderpad=this.model.ironleftshoulderpad=new ModelRenderer(this,26,201),this.ironleftshoulderpad.addBox(1.5,.5,-13,5,6,6),this.ironleftshoulderpad.setRotationPoint(0,0,0),setRotation(this.ironleftshoulderpad,-.261799,0,0),this.goldleftshoulder=this.model.goldleftshoulder=new ModelRenderer(this,71,244),this.goldleftshoulder.addBox(1.5,.5,-13,5,6,6),this.goldleftshoulder.setRotationPoint(0,0,0),setRotation(this.goldleftshoulder,-.261799,0,0),this.goldchestarmor=this.model.goldchestarmor=new ModelRenderer(this,71,219),this.goldchestarmor.addBox(-5.5,2.2,-13.5,11,11,5),this.goldchestarmor.setRotationPoint(0,0,0),setRotation(this.goldchestarmor,-.26025,0,0),this.goldrightshoulder=this.model.goldrightshoulder=new ModelRenderer(this,93,244),this.goldrightshoulder.addBox(-6.5,.5,-13,5,6,6),this.goldrightshoulder.setRotationPoint(0,0,0),setRotation(this.goldrightshoulder,-.261799,0,0),this.diamondleftshoulder=this.model.diamondleftshoulder=new ModelRenderer(this,0,244),this.diamondleftshoulder.addBox(1.5,.5,-13,5,6,6),this.diamondleftshoulder.setRotationPoint(0,0,0),setRotation(this.diamondleftshoulder,-.261799,0,0),this.diamondrightshoulder=this.model.diamondrightshoulder=new ModelRenderer(this,22,244),this.diamondrightshoulder.addBox(-6.5,.5,-13,5,6,6),this.diamondrightshoulder.setRotationPoint(0,0,0),setRotation(this.diamondrightshoulder,-.261799,0,0),this.diamondchestarmor=this.model.diamondchestarmor=new ModelRenderer(this,0,219),this.diamondchestarmor.addBox(-5.5,2.2,-13.5,11,11,5),this.diamondchestarmor.setRotationPoint(0,0,0),setRotation(this.diamondchestarmor,-.26025,0,0)},func_78088_a:function(t,e,i,n,o,s,r){},setRotation:function(t,e,i,n){t.rotateAngleX=e,t.rotateAngleY=i,t.rotateAngleZ=n},isChested:!0,isSaddled:!0,armor:0,onAir:!1,flapwings:!1,rider:!1,openMouth:0,diving:!1,sitting:!1,details:{armor:{name:"armor",type:"select",options:{none:0,iron:1,golder:2,diamond:3},persistent:!0}},setRotationAngles:function(t,e,i,n,o,s,r,a,h,l,d,c){switch(r=this.onAir,a=this.flapwings,h=this.rider,l=this.openMouth,d=this.diving,c=this.sitting,this.storage.showModel=this.isChested,this.saddle.showModel=this.isSaddled,this.mouthrod.showModel=this.isSaddled,this.helmetstrap1.showModel=this.isSaddled&&this.isRidden,this.helmetstrap2.showModel=this.isSaddled&&this.isRidden,this.chestbelt.showModel=this.isSaddled,this.stomachbelt.showModel=this.isSaddled,this.ironhelmethorn1.showModel=!1,this.ironhelmethorn2.showModel=!1,this.ironhelmet.showModel=!1,this.ironhelmetsnout.showModel=!1,this.ironrightlegarmor.showModel=!1,this.ironleftlegarmor.showModel=!1,this.ironchestarmor.showModel=!1,this.ironrightshoulderpad.showModel=!1,this.ironleftshoulderpad.showModel=!1,this.goldleftshoulder.showModel=!1,this.goldchestarmor.showModel=!1,this.goldrightshoulder.showModel=!1,this.goldleftlegarmor.showModel=!1,this.goldrightlegarmor.showModel=!1,this.goldhelmethorn1.showModel=!1,this.goldhelmethorn2.showModel=!1,this.goldhelmet.showModel=!1,this.goldhelmetsnout.showModel=!1,this.diamondleftshoulder.showModel=!1,this.diamondrightshoulder.showModel=!1,this.diamondchestarmor.showModel=!1,this.diamondleftlegarmor.showModel=!1,this.diamondrightlegarmor.showModel=!1,this.diamondhelmet.showModel=!1,this.diamondhelmethorn2.showModel=!1,this.diamondhelmethorn1.showModel=!1,this.diamondhelmetsnout.showModel=!1,this.armor){case 1:this.ironhelmethorn1.showModel=!0,this.ironhelmethorn2.showModel=!0,this.ironhelmet.showModel=!0,this.ironhelmetsnout.showModel=!0,this.ironrightlegarmor.showModel=!0,this.ironleftlegarmor.showModel=!0,this.ironchestarmor.showModel=!0,this.ironrightshoulderpad.showModel=!0,this.ironleftshoulderpad.showModel=!0;break;case 2:this.goldleftshoulder.showModel=!0,this.goldchestarmor.showModel=!0,this.goldrightshoulder.showModel=!0,this.goldleftlegarmor.showModel=!0,this.goldrightlegarmor.showModel=!0,this.goldhelmethorn1.showModel=!0,this.goldhelmethorn2.showModel=!0,this.goldhelmet.showModel=!0,this.goldhelmetsnout.showModel=!0;break;case 3:this.diamondleftshoulder.showModel=!0,this.diamondrightshoulder.showModel=!0,this.diamondchestarmor.showModel=!0,this.diamondleftlegarmor.showModel=!0,this.diamondrightlegarmor.showModel=!0,this.diamondhelmet.showModel=!0,this.diamondhelmethorn2.showModel=!0,this.diamondhelmethorn1.showModel=!0,this.diamondhelmetsnout.showModel=!0}var u=.8*MathHelper.func_76134_b(.6662*t+3.141593)*e,g=.8*MathHelper.func_76134_b(.6662*t)*e,f=60;n>f&&(n=f),n<-f&&(n=-f),this.neck2.rotateAngleX=-66/57.29578+1*o/3/57.29578,this.neck1.rotateAngleX=30/57.29578+2*o/3/57.29578,this.head.rotateAngleX=45/57.29578,this.neck2.rotateAngleY=2*n/3/57.29578,this.neck1.rotateAngleY=1*n/3/57.29578,this.head.rotateAngleY=0,this.head.rotateAngleZ=0,h&&(this.neck1.rotateAngleY=0,this.neck2.rotateAngleY=0,r?(this.neck1.rotateAngleX=0,this.neck2.rotateAngleX=0):(this.neck2.rotateAngleX=-66/57.29578+1*u/60,this.neck1.rotateAngleX=30/57.29578+2*u/60));.2*MathHelper.func_76134_b(.4*t)*e;this.tail1.rotateAngleX=-19/57.29578,this.tail2.rotateAngleX=-16/57.29578,this.tail3.rotateAngleX=7/57.29578,this.tail4.rotateAngleX=11/57.29578,this.tail5.rotateAngleX=8/57.29578;var p=t/2,m=.15,v=.9,w=.6,y=0,R=0;R=m*MathHelper.func_76126_a(v*p-w*y++),this.tail1.rotateAngleY=R,R=m*MathHelper.func_76126_a(v*p-w*y++),this.tail2.rotateAngleY=R,R=m*MathHelper.func_76126_a(v*p-w*y++),this.tail3.rotateAngleY=R,R=m*MathHelper.func_76126_a(v*p-w*y++),this.tail4.rotateAngleY=R,R=m*MathHelper.func_76126_a(v*p-w*y++),this.tail5.rotateAngleY=R;var A=.9*MathHelper.func_76134_b(.3*t)*e;if(A=a?1.2*MathHelper.func_76134_b(.3*i+3.141593):.1*MathHelper.func_76134_b(.5*t),r){var b=.5*e;this.leftuparm.rotateAngleZ=2*A/3,this.rightuparm.rotateAngleZ=2*-A/3,this.leftlowarm.rotateAngleZ=.1*A,this.leftfing1a.rotateAngleZ=1*A,this.leftfing2a.rotateAngleZ=.8*A,this.rightlowarm.rotateAngleZ=.1*-A,this.rightfing1a.rotateAngleZ=1*-A,this.rightfing2a.rotateAngleZ=.8*-A,this.leftuparm.rotateAngleY=-10/57.29578-A/2.5,this.leftlowarm.rotateAngleY=15/57.29578+A/2.5,this.leftfing1a.rotateAngleY=70/57.29578,this.leftfing2a.rotateAngleY=35/57.29578,this.leftfing3a.rotateAngleY=-5/57.29578,this.rightuparm.rotateAngleY=10/57.29578+A/2.5,this.rightlowarm.rotateAngleY=-15/57.29578-A/2.5,this.rightfing1a.rotateAngleY=-70/57.29578,this.rightfing2a.rotateAngleY=-35/57.29578,this.rightfing3a.rotateAngleY=5/57.29578,this.leftupleg.rotateAngleX=b,this.leftmidleg.rotateAngleX=b,this.leftfoot.rotateAngleX=25/57.29578,this.lefttoe1.rotateAngleX=b,this.lefttoe2.rotateAngleX=b,this.lefttoe3.rotateAngleX=b,this.rightfoot.rotateAngleX=25/57.29578,this.rightupleg.rotateAngleX=b,this.rightmidleg.rotateAngleX=b,this.righttoe1.rotateAngleX=b,this.righttoe2.rotateAngleX=b,this.righttoe3.rotateAngleX=b}else this.leftlowarm.rotateAngleZ=0,this.leftfing1a.rotateAngleZ=0,this.leftfing2a.rotateAngleZ=0,this.rightlowarm.rotateAngleZ=0,this.rightfing1a.rotateAngleZ=0,this.rightfing2a.rotateAngleZ=0,this.leftuparm.rotateAngleZ=30/57.29578,this.leftuparm.rotateAngleY=-60/57.29578+g/5,this.leftlowarm.rotateAngleY=105/57.29578,this.leftfing1a.rotateAngleY=-20/57.29578,this.leftfing2a.rotateAngleY=-26/57.29578,this.leftfing3a.rotateAngleY=-32/57.29578,this.rightuparm.rotateAngleY=60/57.29578-u/5,this.rightuparm.rotateAngleZ=-30/57.29578,this.rightlowarm.rotateAngleY=-105/57.29578,this.rightfing1a.rotateAngleY=16/57.29578,this.rightfing2a.rotateAngleY=26/57.29578,this.rightfing3a.rotateAngleY=32/57.29578,this.leftupleg.rotateAngleX=-25/57.29578+g,this.rightupleg.rotateAngleX=-25/57.29578+u,this.leftmidleg.rotateAngleX=0,this.leftlowleg.rotateAngleX=0,this.leftfoot.rotateAngleX=25/57.29578-g,this.lefttoe1.rotateAngleX=g,this.lefttoe2.rotateAngleX=g,this.lefttoe3.rotateAngleX=g,this.rightmidleg.rotateAngleX=0,this.rightlowleg.rotateAngleX=0,this.rightfoot.rotateAngleX=25/57.29578-u,this.righttoe1.rotateAngleX=u,this.righttoe2.rotateAngleX=u,this.righttoe3.rotateAngleX=u;if(c&&(this.leftupleg.rotateAngleX=45/57.29578+g,this.rightupleg.rotateAngleX=45/57.29578+u,this.leftmidleg.rotateAngleX=30,this.rightmidleg.rotateAngleX=30,this.neck2.rotateAngleX=-36/57.29578+1*o/3/57.29578,this.neck1.rotateAngleX=30/57.29578+2*o/3/57.29578),d&&(this.leftuparm.rotateAngleZ=-40/57.29578,this.rightuparm.rotateAngleZ=40/57.29578,this.leftlowarm.rotateAngleZ=0,this.leftfing1a.rotateAngleZ=0,this.leftfing2a.rotateAngleZ=0,this.rightlowarm.rotateAngleZ=0,this.rightfing1a.rotateAngleZ=0,this.rightfing2a.rotateAngleZ=0,this.leftuparm.rotateAngleY=-50/57.29578,this.leftlowarm.rotateAngleY=30/57.29578,this.leftfing1a.rotateAngleY=50/57.29578,this.leftfing2a.rotateAngleY=30/57.29578,this.leftfing3a.rotateAngleY=10/57.29578,this.rightuparm.rotateAngleY=50/57.29578,this.rightlowarm.rotateAngleY=-30/57.29578,this.rightfing1a.rotateAngleY=-50/57.29578,this.rightfing2a.rotateAngleY=-30/57.29578,this.rightfing3a.rotateAngleY=-10/57.29578),0!=l){var x=.8*MathHelper.func_76134_b(.11*(l-15));this.Jaw.rotateAngleX=-10/57.29578+x,this.leftearskin.rotateAngleY=x,this.rightearskin.rotateAngleY=-x}else this.Jaw.rotateAngleX=-10/57.29578,this.leftearskin.rotateAngleY=0,this.rightearskin.rotateAngleY=0}}),ModelMoCElephant.prototype=$.extend({},ModelBase.prototype,{ModelMoCElephant:function(){ModelBase.call(this),this.texture.width=128,this.texture.height=256,this.Head=this.model.Head=new ModelRenderer(this,60,0),this.Head.addBox(-5.5,-6,-8,11,15,10),this.Head.setRotationPoint(0,-10,-16.5),setRotation(this.Head,-.1745329,0,0),this.Neck=this.model.Neck=new ModelRenderer(this,46,48),this.Neck.addBox(-4.95,-6,-8,10,14,8),this.Neck.setRotationPoint(0,-8,-10),setRotation(this.Neck,-.261799,0,0),this.HeadBump=this.model.HeadBump=new ModelRenderer(this,104,41),this.HeadBump.addBox(-3,-9,-6,6,3,6),this.HeadBump.setRotationPoint(0,-10,-16.5),setRotation(this.HeadBump,-.1745329,0,0),this.Chin=this.model.Chin=new ModelRenderer(this,86,56),this.Chin.addBox(-1.5,-6,-10.7,3,5,4),this.Chin.setRotationPoint(0,-10,-16.5),setRotation(this.Chin,2.054118,0,0),this.LowerLip=this.model.LowerLip=new ModelRenderer(this,80,65),this.LowerLip.addBox(-2,-2,-14,4,2,6),this.LowerLip.setRotationPoint(0,-10,-16.5),setRotation(this.LowerLip,1.570796,0,0),this.Back=this.model.Back=new ModelRenderer(this,0,48),this.Back.addBox(-5,-10,-10,10,2,26),this.Back.setRotationPoint(0,-4,-3),this.LeftSmallEar=this.model.LeftSmallEar=new ModelRenderer(this,102,0),this.LeftSmallEar.addBox(2,-8,-5,8,10,1),this.LeftSmallEar.setRotationPoint(0,-10,-16.5),setRotation(this.LeftSmallEar,-.1745329,-.5235988,.5235988),this.LeftBigEar=this.model.LeftBigEar=new ModelRenderer(this,102,0),this.LeftBigEar.addBox(2,-8,-5,12,14,1),this.LeftBigEar.setRotationPoint(0,-10,-16.5),setRotation(this.LeftBigEar,-.1745329,-.5235988,.5235988),this.RightSmallEar=this.model.RightSmallEar=new ModelRenderer(this,106,15),this.RightSmallEar.addBox(-10,-8,-5,8,10,1),this.RightSmallEar.setRotationPoint(0,-10,-16.5),setRotation(this.RightSmallEar,-.1745329,.5235988,-.5235988),this.RightBigEar=this.model.RightBigEar=new ModelRenderer(this,102,15),this.RightBigEar.addBox(-14,-8,-5,12,14,1),this.RightBigEar.setRotationPoint(0,-10,-16.5),setRotation(this.RightBigEar,-.1745329,.5235988,-.5235988),this.Hump=this.model.Hump=new ModelRenderer(this,88,30),this.Hump.addBox(-6,-2,-3,12,3,8),this.Hump.setRotationPoint(0,-13,-5.5),this.Body=this.model.Body=new ModelRenderer(this,0,0),this.Body.addBox(-8,-10,-10,16,20,28),this.Body.setRotationPoint(0,-2,-3),this.Skirt=this.model.Skirt=new ModelRenderer(this,28,94),this.Skirt.addBox(-8,-10,-6,16,28,6),this.Skirt.setRotationPoint(0,8,-3),setRotation(this.Skirt,1.570796,0,0),this.RightTuskA=this.model.RightTuskA=new ModelRenderer(this,2,60),this.RightTuskA.addBox(-3.8,-3.5,-19,2,2,10),this.RightTuskA.setRotationPoint(0,-10,-16.5),setRotation(this.RightTuskA,1.22173,0,.1745329),this.RightTuskB=this.model.RightTuskB=new ModelRenderer(this,0,0),this.RightTuskB.addBox(-3.8,6.2,-24.200001,2,2,7),this.RightTuskB.setRotationPoint(0,-10,-16.5),setRotation(this.RightTuskB,.6981317,0,.1745329),this.RightTuskC=this.model.RightTuskC=new ModelRenderer(this,0,18),this.RightTuskC.addBox(-3.8,17.1,-21.9,2,2,5),this.RightTuskC.setRotationPoint(0,-10,-16.5),setRotation(this.RightTuskC,.1745329,0,.1745329),this.RightTuskD=this.model.RightTuskD=new ModelRenderer(this,14,18),this.RightTuskD.addBox(-3.8,25.5,-14.5,2,2,5),this.RightTuskD.setRotationPoint(0,-10,-16.5),setRotation(this.RightTuskD,-.349066,0,.1745329),this.LeftTuskA=this.model.LeftTuskA=new ModelRenderer(this,2,48),this.LeftTuskA.addBox(1.8,-3.5,-19,2,2,10),this.LeftTuskA.setRotationPoint(0,-10,-16.5),setRotation(this.LeftTuskA,1.22173,0,-.1745329),this.LeftTuskB=this.model.LeftTuskB=new ModelRenderer(this,0,9),this.LeftTuskB.addBox(1.8,6.2,-24.200001,2,2,7),this.LeftTuskB.setRotationPoint(0,-10,-16.5),setRotation(this.LeftTuskB,.6981317,0,-.1745329),this.LeftTuskC=this.model.LeftTuskC=new ModelRenderer(this,0,18),this.LeftTuskC.addBox(1.8,17.1,-21.9,2,2,5),this.LeftTuskC.setRotationPoint(0,-10,-16.5),setRotation(this.LeftTuskC,.1745329,0,-.1745329),this.LeftTuskD=this.model.LeftTuskD=new ModelRenderer(this,14,18),this.LeftTuskD.addBox(1.8,25.5,-14.5,2,2,5),this.LeftTuskD.setRotationPoint(0,-10,-16.5),setRotation(this.LeftTuskD,-.349066,0,-.1745329),this.TrunkA=this.model.TrunkA=new ModelRenderer(this,0,76),this.TrunkA.addBox(-4,-2.5,-18,8,7,10),this.TrunkA.setRotationPoint(0,-3,-22.466669),setRotation(this.TrunkA,1.570796,0,0),this.TrunkB=this.model.TrunkB=new ModelRenderer(this,0,93),this.TrunkB.addBox(-3,-2.5,-7,6,5,7),this.TrunkB.setRotationPoint(0,6.5,-22.5),setRotation(this.TrunkB,1.658063,0,0),this.TrunkC=this.model.TrunkC=new ModelRenderer(this,0,105),this.TrunkC.addBox(-2.5,-2,-4,5,4,5),this.TrunkC.setRotationPoint(0,13,-22),setRotation(this.TrunkC,1.919862,0,0),this.TrunkD=this.model.TrunkD=new ModelRenderer(this,0,114),this.TrunkD.addBox(-2,-1.5,-5,4,3,5),this.TrunkD.setRotationPoint(0,16,-21.5),setRotation(this.TrunkD,2.216568,0,0),this.TrunkE=this.model.TrunkE=new ModelRenderer(this,0,122),this.TrunkE.addBox(-1.5,-1,-4,3,2,4),this.TrunkE.setRotationPoint(0,19.5,-19),setRotation(this.TrunkE,2.530727,0,0),this.FrontRightUpperLeg=this.model.FrontRightUpperLeg=new ModelRenderer(this,100,109),this.FrontRightUpperLeg.addBox(-3.5,0,-3.5,7,12,7),this.FrontRightUpperLeg.setRotationPoint(-4.6,4,-9.6),this.FrontRightLowerLeg=this.model.FrontRightLowerLeg=new ModelRenderer(this,100,73),this.FrontRightLowerLeg.addBox(-3.5,0,-3.5,7,10,7),this.FrontRightLowerLeg.setRotationPoint(-4.6,14,-9.6),this.FrontLeftUpperLeg=this.model.FrontLeftUpperLeg=new ModelRenderer(this,100,90),this.FrontLeftUpperLeg.addBox(-3.5,0,-3.5,7,12,7),this.FrontLeftUpperLeg.setRotationPoint(4.6,4,-9.6),this.FrontLeftLowerLeg=this.model.FrontLeftLowerLeg=new ModelRenderer(this,72,73),this.FrontLeftLowerLeg.addBox(-3.5,0,-3.5,7,10,7),this.FrontLeftLowerLeg.setRotationPoint(4.6,14,-9.6),this.BackRightUpperLeg=this.model.BackRightUpperLeg=new ModelRenderer(this,72,109),this.BackRightUpperLeg.addBox(-3.5,0,-3.5,7,12,7),this.BackRightUpperLeg.setRotationPoint(-4.6,4,11.6),this.BackRightLowerLeg=this.model.BackRightLowerLeg=new ModelRenderer(this,100,56),this.BackRightLowerLeg.addBox(-3.5,0,-3.5,7,10,7),this.BackRightLowerLeg.setRotationPoint(-4.6,14,11.6),this.BackLeftUpperLeg=this.model.BackLeftUpperLeg=new ModelRenderer(this,72,90),this.BackLeftUpperLeg.addBox(-3.5,0,-3.5,7,12,7),this.BackLeftUpperLeg.setRotationPoint(4.6,4,11.6),this.BackLeftLowerLeg=this.model.BackLeftLowerLeg=new ModelRenderer(this,44,77),this.BackLeftLowerLeg.addBox(-3.5,0,-3.5,7,10,7),this.BackLeftLowerLeg.setRotationPoint(4.6,14,11.6),this.TailRoot=this.model.TailRoot=new ModelRenderer(this,20,105),this.TailRoot.addBox(-1,0,-2,2,10,2),this.TailRoot.setRotationPoint(0,-8,15),setRotation(this.TailRoot,.296706,0,0),this.Tail=this.model.Tail=new ModelRenderer(this,20,117),this.Tail.addBox(-1,9.7,-.2,2,6,2),this.Tail.setRotationPoint(0,-8,15),setRotation(this.Tail,.113446,0,0),this.TailPlush=this.model.TailPlush=new ModelRenderer(this,26,76),this.TailPlush.addBox(-1.5,15.5,-.7,3,6,3),this.TailPlush.setRotationPoint(0,-8,15),setRotation(this.TailPlush,.113446,0,0),this.StorageRightBedroll=this.model.StorageRightBedroll=new ModelRenderer(this,90,231),this.StorageRightBedroll.addBox(-2.5,8,-8,3,3,16),this.StorageRightBedroll.setRotationPoint(-9,-10.2,1),setRotation(this.StorageRightBedroll,0,0,.418879),this.StorageLeftBedroll=this.model.StorageLeftBedroll=new ModelRenderer(this,90,231),this.StorageLeftBedroll.addBox(-.5,8,-8,3,3,16),this.StorageLeftBedroll.setRotationPoint(9,-10.2,1),setRotation(this.StorageLeftBedroll,0,0,-.418879),this.StorageFrontRightChest=this.model.StorageFrontRightChest=new ModelRenderer(this,76,208),this.StorageFrontRightChest.addBox(-3.5,0,-5,5,8,10),this.StorageFrontRightChest.setRotationPoint(-11,-1.2,-4.5),setRotation(this.StorageFrontRightChest,0,0,-.261799),this.StorageBackRightChest=this.model.StorageBackRightChest=new ModelRenderer(this,76,208),this.StorageBackRightChest.addBox(-3.5,0,-5,5,8,10),this.StorageBackRightChest.setRotationPoint(-11,-1.2,6.5),setRotation(this.StorageBackRightChest,0,0,-.261799),this.StorageFrontLeftChest=this.model.StorageFrontLeftChest=new ModelRenderer(this,76,226),this.StorageFrontLeftChest.addBox(-1.5,0,-5,5,8,10),this.StorageFrontLeftChest.setRotationPoint(11,-1.2,-4.5),setRotation(this.StorageFrontLeftChest,0,0,.261799),this.StorageBackLeftChest=this.model.StorageBackLeftChest=new ModelRenderer(this,76,226),this.StorageBackLeftChest.addBox(-1.5,0,-5,5,8,10),this.StorageBackLeftChest.setRotationPoint(11,-1.2,6.5),setRotation(this.StorageBackLeftChest,0,0,.261799),this.StorageRightBlankets=this.model.StorageRightBlankets=new ModelRenderer(this,0,228),this.StorageRightBlankets.addBox(-4.5,-1,-7,5,10,14),this.StorageRightBlankets.setRotationPoint(-9,-10.2,1),this.StorageLeftBlankets=this.model.StorageLeftBlankets=new ModelRenderer(this,38,228),this.StorageLeftBlankets.addBox(-.5,-1,-7,5,10,14),this.StorageLeftBlankets.setRotationPoint(9,-10.2,1),this.HarnessBlanket=this.model.HarnessBlanket=new ModelRenderer(this,0,196),this.HarnessBlanket.addBox(-8.5,-2,-3,17,14,18),this.HarnessBlanket.setRotationPoint(0,-13.2,-3.5),this.HarnessUpperBelt=this.model.HarnessUpperBelt=new ModelRenderer(this,70,196),this.HarnessUpperBelt.addBox(-8.5,.5,-2,17,10,2),this.HarnessUpperBelt.setRotationPoint(0,-2,-2.5),this.HarnessLowerBelt=this.model.HarnessLowerBelt=new ModelRenderer(this,70,196),this.HarnessLowerBelt.addBox(-8.5,.5,-2.5,17,10,2),this.HarnessLowerBelt.setRotationPoint(0,-2,7),this.CabinPillow=this.model.CabinPillow=new ModelRenderer(this,76,146),this.CabinPillow.addBox(-6.5,0,-6.5,13,4,13),this.CabinPillow.setRotationPoint(0,-16,2),this.CabinLeftRail=this.model.CabinLeftRail=new ModelRenderer(this,56,147),this.CabinLeftRail.addBox(-7,0,7,14,1,1),this.CabinLeftRail.setRotationPoint(0,-23,1.5),setRotation(this.CabinLeftRail,0,1.570796,0),this.Cabin=this.model.Cabin=new ModelRenderer(this,0,128),this.Cabin.addBox(-7,0,-7,14,20,14),this.Cabin.setRotationPoint(0,-35,2),this.CabinRightRail=this.model.CabinRightRail=new ModelRenderer(this,56,147),this.CabinRightRail.addBox(-7,0,7,14,1,1),this.CabinRightRail.setRotationPoint(0,-23,1.5),setRotation(this.CabinRightRail,0,-1.570796,0),this.CabinBackRail=this.model.CabinBackRail=new ModelRenderer(this,56,147),this.CabinBackRail.addBox(-7,0,7,14,1,1),this.CabinBackRail.setRotationPoint(0,-23,1.5),this.CabinRoof=this.model.CabinRoof=new ModelRenderer(this,56,128),this.CabinRoof.addBox(-7.5,0,-7.5,15,4,15),this.CabinRoof.setRotationPoint(0,-34,2),this.FortNeckBeam=this.model.FortNeckBeam=new ModelRenderer(this,26,180),this.FortNeckBeam.addBox(-12,0,-20.5,24,4,4),this.FortNeckBeam.setRotationPoint(0,-16,10),this.FortBackBeam=this.model.FortBackBeam=new ModelRenderer(this,26,180),this.FortBackBeam.addBox(-12,0,0,24,4,4),this.FortBackBeam.setRotationPoint(0,-16,10),this.TuskLD1=this.model.TuskLD1=new ModelRenderer(this,108,207),this.TuskLD1.addBox(1.3,5.5,-24.200001,3,3,7),this.TuskLD1.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLD1,.6981317,0,-.1745329),this.TuskLD2=this.model.TuskLD2=new ModelRenderer(this,112,199),this.TuskLD2.addBox(1.29,16.5,-21.9,3,3,5),this.TuskLD2.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLD2,.1745329,0,-.1745329),this.TuskLD3=this.model.TuskLD3=new ModelRenderer(this,110,190),this.TuskLD3.addBox(1.3,24.9,-15.5,3,3,6),this.TuskLD3.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLD3,-.349066,0,-.1745329),this.TuskLD4=this.model.TuskLD4=new ModelRenderer(this,86,175),this.TuskLD4.addBox(2.7,14.5,-21.9,0,7,5),this.TuskLD4.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLD4,.1745329,0,-.1745329),this.TuskLD5=this.model.TuskLD5=new ModelRenderer(this,112,225),this.TuskLD5.addBox(2.7,22.9,-17.5,0,7,8),this.TuskLD5.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLD5,-.349066,0,-.1745329),this.TuskRD1=this.model.TuskRD1=new ModelRenderer(this,108,207),this.TuskRD1.addBox(-4.3,5.5,-24.200001,3,3,7),this.TuskRD1.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRD1,.6981317,0,.1745329),this.TuskRD2=this.model.TuskRD2=new ModelRenderer(this,112,199),this.TuskRD2.addBox(-4.29,16.5,-21.9,3,3,5),this.TuskRD2.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRD2,.1745329,0,.1745329),this.TuskRD3=this.model.TuskRD3=new ModelRenderer(this,110,190),this.TuskRD3.addBox(-4.3,24.9,-15.5,3,3,6),this.TuskRD3.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRD3,-.349066,0,.1745329),this.TuskRD4=this.model.TuskRD4=new ModelRenderer(this,86,163),this.TuskRD4.addBox(-2.8,14.5,-21.9,0,7,5),this.TuskRD4.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRD4,.1745329,0,.1745329),this.TuskRD5=this.model.TuskRD5=new ModelRenderer(this,112,232),this.TuskRD5.addBox(-2.8,22.9,-17.5,0,7,8),this.TuskRD5.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRD5,-.349066,0,.1745329),this.TuskLI1=this.model.TuskLI1=new ModelRenderer(this,108,180),this.TuskLI1.addBox(1.3,5.5,-24.200001,3,3,7),this.TuskLI1.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLI1,.6981317,0,-.1745329),this.TuskLI2=this.model.TuskLI2=new ModelRenderer(this,112,172),this.TuskLI2.addBox(1.29,16.5,-21.9,3,3,5),this.TuskLI2.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLI2,.1745329,0,-.1745329),this.TuskLI3=this.model.TuskLI3=new ModelRenderer(this,110,163),this.TuskLI3.addBox(1.3,24.9,-15.5,3,3,6),this.TuskLI3.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLI3,-.349066,0,-.1745329),this.TuskLI4=this.model.TuskLI4=new ModelRenderer(this,96,175),this.TuskLI4.addBox(2.7,14.5,-21.9,0,7,5),this.TuskLI4.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLI4,.1745329,0,-.1745329),this.TuskLI5=this.model.TuskLI5=new ModelRenderer(this,112,209),this.TuskLI5.addBox(2.7,22.9,-17.5,0,7,8),this.TuskLI5.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLI5,-.349066,0,-.1745329),this.TuskRI1=this.model.TuskRI1=new ModelRenderer(this,108,180),this.TuskRI1.addBox(-4.3,5.5,-24.200001,3,3,7),this.TuskRI1.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRI1,.6981317,0,.1745329),this.TuskRI2=this.model.TuskRI2=new ModelRenderer(this,112,172),this.TuskRI2.addBox(-4.29,16.5,-21.9,3,3,5),this.TuskRI2.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRI2,.1745329,0,.1745329),this.TuskRI3=this.model.TuskRI3=new ModelRenderer(this,110,163),this.TuskRI3.addBox(-4.3,24.9,-15.5,3,3,6),this.TuskRI3.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRI3,-.349066,0,.1745329),this.TuskRI4=this.model.TuskRI4=new ModelRenderer(this,96,163),this.TuskRI4.addBox(-2.8,14.5,-21.9,0,7,5),this.TuskRI4.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRI4,.1745329,0,.1745329),this.TuskRI5=this.model.TuskRI5=new ModelRenderer(this,112,216),this.TuskRI5.addBox(-2.8,22.9,-17.5,0,7,8),this.TuskRI5.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRI5,-.349066,0,.1745329),this.TuskLW1=this.model.TuskLW1=new ModelRenderer(this,56,166),this.TuskLW1.addBox(1.3,5.5,-24.200001,3,3,7),this.TuskLW1.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLW1,.6981317,0,-.1745329),this.TuskLW2=this.model.TuskLW2=new ModelRenderer(this,60,158),this.TuskLW2.addBox(1.29,16.5,-21.9,3,3,5),this.TuskLW2.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLW2,.1745329,0,-.1745329),this.TuskLW3=this.model.TuskLW3=new ModelRenderer(this,58,149),this.TuskLW3.addBox(1.3,24.9,-15.5,3,3,6),this.TuskLW3.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLW3,-.349066,0,-.1745329),this.TuskLW4=this.model.TuskLW4=new ModelRenderer(this,46,164),this.TuskLW4.addBox(2.7,14.5,-21.9,0,7,5),this.TuskLW4.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLW4,.1745329,0,-.1745329),this.TuskLW5=this.model.TuskLW5=new ModelRenderer(this,52,192),this.TuskLW5.addBox(2.7,22.9,-17.5,0,7,8),this.TuskLW5.setRotationPoint(0,-10,-16.5),setRotation(this.TuskLW5,-.349066,0,-.1745329),this.TuskRW1=this.model.TuskRW1=new ModelRenderer(this,56,166),this.TuskRW1.addBox(-4.3,5.5,-24.200001,3,3,7),this.TuskRW1.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRW1,.6981317,0,.1745329),this.TuskRW2=this.model.TuskRW2=new ModelRenderer(this,60,158),this.TuskRW2.addBox(-4.29,16.5,-21.9,3,3,5),this.TuskRW2.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRW2,.1745329,0,.1745329),this.TuskRW3=this.model.TuskRW3=new ModelRenderer(this,58,149),this.TuskRW3.addBox(-4.3,24.9,-15.5,3,3,6),this.TuskRW3.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRW3,-.349066,0,.1745329),this.TuskRW4=this.model.TuskRW4=new ModelRenderer(this,46,157),this.TuskRW4.addBox(-2.8,14.5,-21.9,0,7,5),this.TuskRW4.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRW4,.1745329,0,.1745329),this.TuskRW5=this.model.TuskRW5=new ModelRenderer(this,52,199),this.TuskRW5.addBox(-2.8,22.9,-17.5,0,7,8),this.TuskRW5.setRotationPoint(0,-10,-16.5),setRotation(this.TuskRW5,-.349066,0,.1745329),this.FortFloor1=this.model.FortFloor1=new ModelRenderer(this,0,176),this.FortFloor1.addBox(-.5,-20,-6,1,8,12),this.FortFloor1.setRotationPoint(0,-16,10),setRotation(this.FortFloor1,1.570796,0,1.570796),this.FortFloor2=this.model.FortFloor2=new ModelRenderer(this,0,176),this.FortFloor2.addBox(-.5,-12,-6,1,8,12),this.FortFloor2.setRotationPoint(0,-16,10),setRotation(this.FortFloor2,1.570796,0,1.570796),this.FortFloor3=this.model.FortFloor3=new ModelRenderer(this,0,176),this.FortFloor3.addBox(-.5,-4,-6,1,8,12),this.FortFloor3.setRotationPoint(0,-16,10),setRotation(this.FortFloor3,1.570796,0,1.570796),this.FortBackWall=this.model.FortBackWall=new ModelRenderer(this,0,176),this.FortBackWall.addBox(-5,-6.2,-6,1,8,12),this.FortBackWall.setRotationPoint(0,-16,10),setRotation(this.FortBackWall,0,1.570796,0),this.FortBackLeftWall=this.model.FortBackLeftWall=new ModelRenderer(this,0,176),this.FortBackLeftWall.addBox(6,-6,-7,1,8,12),this.FortBackLeftWall.setRotationPoint(0,-16,10),this.FortBackRightWall=this.model.FortBackRightWall=new ModelRenderer(this,0,176),this.FortBackRightWall.addBox(-7,-6,-7,1,8,12),this.FortBackRightWall.setRotationPoint(0,-16,10),this.StorageUpLeft=this.model.StorageUpLeft=new ModelRenderer(this,76,226),this.StorageUpLeft.addBox(6.5,1,-14,5,8,10),this.StorageUpLeft.setRotationPoint(0,-16,10),setRotation(this.StorageUpLeft,0,0,-.3839724),
this.StorageUpRight=this.model.StorageUpRight=new ModelRenderer(this,76,208),this.StorageUpRight.addBox(-11.5,1,-14,5,8,10),this.StorageUpRight.setRotationPoint(0,-16,10),setRotation(this.StorageUpRight,0,0,.3839724),this.AdjustY(0)},AdjustY:function(t){var e=t;this.Head.rotationPointY=e+-10,this.Neck.rotationPointY=e+-8,this.HeadBump.rotationPointY=e+-10,this.Chin.rotationPointY=e+-10,this.LowerLip.rotationPointY=e+-10,this.Back.rotationPointY=e+-4,this.LeftSmallEar.rotationPointY=e+-10,this.LeftBigEar.rotationPointY=e+-10,this.RightSmallEar.rotationPointY=e+-10,this.RightBigEar.rotationPointY=e+-10,this.Hump.rotationPointY=e+-13,this.Body.rotationPointY=e+-2,this.Skirt.rotationPointY=e+8,this.RightTuskA.rotationPointY=e+-10,this.RightTuskB.rotationPointY=e+-10,this.RightTuskC.rotationPointY=e+-10,this.RightTuskD.rotationPointY=e+-10,this.LeftTuskA.rotationPointY=e+-10,this.LeftTuskB.rotationPointY=e+-10,this.LeftTuskC.rotationPointY=e+-10,this.LeftTuskD.rotationPointY=e+-10,this.TrunkA.rotationPointY=e+-10,this.TrunkA.rotateAngleX=1.5,this.TrunkB.rotationPointY=e+5.5,this.TrunkC.rotationPointY=e+13,this.TrunkD.rotationPointY=e+16,this.TrunkE.rotationPointY=e+19.5,this.FrontRightUpperLeg.rotationPointY=e+4,this.FrontRightLowerLeg.rotationPointY=e+14,this.FrontLeftUpperLeg.rotationPointY=e+4,this.FrontLeftLowerLeg.rotationPointY=e+14,this.BackRightUpperLeg.rotationPointY=e+4,this.BackRightLowerLeg.rotationPointY=e+14,this.BackLeftUpperLeg.rotationPointY=e+4,this.BackLeftLowerLeg.rotationPointY=e+14,this.TailRoot.rotationPointY=e+-8,this.Tail.rotationPointY=e+-8,this.TailPlush.rotationPointY=e+-8,this.StorageRightBedroll.rotationPointY=e+-10.2,this.StorageLeftBedroll.rotationPointY=e+-10.2,this.StorageFrontRightChest.rotationPointY=e+-1.2,this.StorageBackRightChest.rotationPointY=e+-1.2,this.StorageFrontLeftChest.rotationPointY=e+-1.2,this.StorageBackLeftChest.rotationPointY=e+-1.2,this.StorageRightBlankets.rotationPointY=e+-10.2,this.StorageLeftBlankets.rotationPointY=e+-10.2,this.HarnessBlanket.rotationPointY=e+-13.2,this.HarnessUpperBelt.rotationPointY=e+-2,this.HarnessLowerBelt.rotationPointY=e+-2,this.CabinPillow.rotationPointY=e+-16,this.CabinLeftRail.rotationPointY=e+-23,this.Cabin.rotationPointY=e+-35,this.CabinRightRail.rotationPointY=e+-23,this.CabinBackRail.rotationPointY=e+-23,this.CabinRoof.rotationPointY=e+-34,this.FortBackRightWall.rotationPointY=e+-16,this.FortBackLeftWall.rotationPointY=e+-16,this.FortBackWall.rotationPointY=e+-16,this.FortNeckBeam.rotationPointY=e+-16,this.FortBackBeam.rotationPointY=e+-16,this.FortFloor1.rotationPointY=e+-16,this.FortFloor2.rotationPointY=e+-16,this.FortFloor3.rotationPointY=e+-16,this.StorageUpLeft.rotationPointY=e+-16,this.StorageUpRight.rotationPointY=e+-16,this.TuskLD1.rotationPointY=e+-10,this.TuskLD2.rotationPointY=e+-10,this.TuskLD3.rotationPointY=e+-10,this.TuskLD4.rotationPointY=e+-10,this.TuskLD5.rotationPointY=e+-10,this.TuskRD1.rotationPointY=e+-10,this.TuskRD2.rotationPointY=e+-10,this.TuskRD3.rotationPointY=e+-10,this.TuskRD4.rotationPointY=e+-10,this.TuskRD5.rotationPointY=e+-10,this.TuskLI1.rotationPointY=e+-10,this.TuskLI2.rotationPointY=e+-10,this.TuskLI3.rotationPointY=e+-10,this.TuskLI4.rotationPointY=e+-10,this.TuskLI5.rotationPointY=e+-10,this.TuskRI1.rotationPointY=e+-10,this.TuskRI2.rotationPointY=e+-10,this.TuskRI3.rotationPointY=e+-10,this.TuskRI4.rotationPointY=e+-10,this.TuskRI5.rotationPointY=e+-10,this.TuskLW1.rotationPointY=e+-10,this.TuskLW2.rotationPointY=e+-10,this.TuskLW3.rotationPointY=e+-10,this.TuskLW4.rotationPointY=e+-10,this.TuskLW5.rotationPointY=e+-10,this.TuskRW1.rotationPointY=e+-10,this.TuskRW2.rotationPointY=e+-10,this.TuskRW3.rotationPointY=e+-10,this.TuskRW4.rotationPointY=e+-10,this.TuskRW5.rotationPointY=e+-10},setRotationAngles:function(t,e,i,n,o,s,r,a,h){return},adjustXRotationPoints:function(t,e){var i=t.d-e.d;i<0&&(i*=-1),e.e+=MathHelper.func_76126_a(e.rotateAngleX)*i,e.d+=MathHelper.func_76134_b(e.rotateAngleX)*i},adjustAllRotationPoints:function(t,e){var i=0;i=t.d>e.d?t.d-e.d:e.d-t.d;var n=0;n=t.e>e.e?t.e-e.e:e.e-t.e,e.d+=MathHelper.func_76126_a(e.rotateAngleX)*i,e.e-=MathHelper.func_76134_b(e.rotateAngleY)*(MathHelper.func_76134_b(e.rotateAngleX)*i),e.c-=MathHelper.func_76126_a(e.rotateAngleY)*(MathHelper.func_76134_b(e.rotateAngleX)*i)}}),ModelMoCSnake.prototype=$.extend({},ModelBase.prototype,{bodyparts:40,typeI:0,tongueOff:0,mouthOff:0,rattleOff:0,nearplayer:!1,setRotationAngles:function(f,f1,f2,f3,f4,f5){with(this)this.setRotationAngles2(f3,f4,tongueOff,mouthOff,rattleOff,nearplayer,typeI,f)},setRotationAngles2:function(f3,f4,f6,f7,frattle,nearP,type,f){var w=1.5,t=f/2,movInt=0;with(this)for(var i=0;i<this.bodyparts;i++){var sidef=.5*Math.sin(w*t-.3*i)-movInt/20*Math.sin(.8*t-.2*i);this.bodySnake[i].rotationPointX=1+sidef}var x0=this.bodySnake[0].rotationPointX;this.Head.rotationPointX=x0,this.Nose.rotationPointX=x0,this.LNose.rotationPointX=x0,this.TeethUR.rotationPointX=x0,this.TeethUL.rotationPointX=x0,this.Tongue1.rotationPointX=x0,this.Tongue.rotationPointX=x0,this.Tongue0.rotationPointX=x0,this.Wing1R.rotationPointX=this.Wing1L.rotationPointX=this.bodySnake[1].rotationPointX,this.Wing2R.rotationPointX=this.Wing2L.rotationPointX=this.bodySnake[2].rotationPointX,this.Wing3R.rotationPointX=this.Wing3L.rotationPointX=this.bodySnake[3].rotationPointX,this.Wing3R.rotationPointX=this.Wing4L.rotationPointX=this.bodySnake[4].rotationPointX,this.Wing5R.rotationPointX=this.Wing5L.rotationPointX=this.bodySnake[5].rotationPointX,this.Tail.rotationPointX=this.bodySnake[39].rotationPointX;var rAX=f4/85.943672,rAY=f3/85.943672;this.Head.f=rAX,this.Head.g=rAY,this.bodySnake[0].f=rAX/1.5,this.bodySnake[1].f=rAX/2,this.bodySnake[2].f=rAX/2.5,this.bodySnake[3].f=rAX/3,this.bodySnake[4].f=rAX/3.5;var f8=Math.cos(10*f6)/40;this.Nose.f=this.Head.f-f7,this.LNose.f=this.Head.f+f7,this.Tongue1.f=this.Head.f+f8,this.Tongue.f=this.Head.f+f8,this.Tongue0.f=this.LNose.f,this.TeethUR.f=this.Head.f-f7,this.TeethUL.f=this.Head.f-f7,this.bodySnake[0].g=rAY/1.5,this.bodySnake[1].g=rAY/2,this.bodySnake[2].g=rAY/2.5,this.bodySnake[3].g=rAY/3,this.bodySnake[4].g=rAY/3.5,this.Nose.g=this.Head.g,this.Tongue.g=this.Head.g,this.Tongue0.g=this.Head.g,this.Tongue1.g=this.Head.g,this.LNose.g=this.Head.g,this.TeethUR.g=this.Head.g,this.TeethUL.g=this.Head.g,6==type&&(this.Wing1L.f=this.bodySnake[1].f,this.Wing1L.g=this.bodySnake[1].g,this.Wing1R.f=this.bodySnake[1].f,this.Wing1R.g=this.bodySnake[1].g,this.Wing2L.f=this.bodySnake[2].f,this.Wing2L.g=this.bodySnake[2].g,this.Wing2R.f=this.bodySnake[2].f,this.Wing2R.g=this.bodySnake[2].g,this.Wing3L.f=this.bodySnake[3].f,this.Wing3L.g=this.bodySnake[3].g,this.Wing3R.f=this.bodySnake[3].f,this.Wing3R.g=this.bodySnake[3].g,this.Wing4L.f=this.bodySnake[4].f,this.Wing4L.g=this.bodySnake[4].g,this.Wing4R.f=this.bodySnake[4].f,this.Wing4R.g=this.bodySnake[4].g,this.Wing5L.f=this.bodySnake[4].f,this.Wing5L.g=this.bodySnake[4].g,this.Wing5R.f=this.bodySnake[4].f,this.Wing5R.g=this.bodySnake[4].g),7==type&&(nearP||0!=frattle?this.Tail.f=(20*Math.cos(10*f3)+90)/57.29578:this.Tail.f=0)}}),ModelMoCWereHuman.prototype=ModelBiped.prototype,TechneModel["extends"](ModelBase,{fromJson:function(t){t=t.Techne.Models[0].Model,this.name=t["@name"]||t.Name;var e=t.TextureSize.split(",").map(Number);return this.texture.width=e[0],this.texture.height=e[1],this.importGeometry(t.Geometry),this},importGeometry:function(t){t.Shape&&(t.Shape.length?t.Shape:[t.Shape]).forEach(function(t,e){var i=t.TextureOffset.split(",").map(Number),n=t.Offset.split(",").map(Number),o=t.Position.split(",").map(Number),s=t.Size.split(",").map(Number),r=t.Rotation.split(",").map(Number),a=new ModelRenderer(this,i[0],i[1]);a.addBox(n[0],n[1],n[2],s[0],s[1],s[2]),a.setRotationPoint(o[0],o[1],o[2]),a.rotateAngleX=r[0]*Math.PI/180,a.rotateAngleY=r[1]*Math.PI/180,a.rotateAngleZ=r[2]*Math.PI/180,a.mirror="True"==t.IsMirrored,this.model[e+":"+t["@name"]]=a},this),t.Folder&&t.Folder.forEach(this.importGeometry,this)},fromXml:function(t){var e=$($.parseXML(t)),i=this;this.name="techne:"+e.find("Name").text();var n=e.find("TextureSize").text().split(",").map(Number);return this.texture.width=n[0],this.texture.height=n[1],$(e.find("Shape")).each(function(t,e){var n=$("TextureOffset",e).text().split(",").map(Number),o=$("Offset",e).text().split(",").map(Number),s=$("Position",e).text().split(",").map(Number),r=$("Size",e).text().split(",").map(Number),a=$("Rotation",e).text().split(",").map(Number),h=new ModelRenderer(i,n[0],n[1]);h.addBox(o[0],o[1],o[2],r[0],r[1],r[2]),h.setRotationPoint(s[0],s[1],s[2]),h.rotateAngleX=a[0]*Math.PI/180,h.rotateAngleY=a[1]*Math.PI/180,h.rotateAngleZ=a[2]*Math.PI/180,h.mirror="True"==$("IsMirrored",e).text(),i.model[t+":"+$(e).attr("name")]=h}),this},fromTechne:function(t,e){function i(){--o||e&&e()}var n=this,o=0;return JSZip.loadAsync(t).then(function(t){for(var e in t.files)/png$/.test(e)&&(o++,t.files[e].async("arraybuffer").then(function(t){n.textureList.push(URL.createObjectURL(new Blob([t],{type:"image/png"}))),i()}));"model.xml"in t.files?(o++,t.files["model.xml"].async("string").then(function(t){n.fromXml(t.replace(/\u0000/g,"")),i()})):"model.json"in t.files&&(o++,t.files["model.json"].async("string").then(function(t){n.fromJson(JSON.parse(t.replace(/\u0000/g,""))),i()}))}),this}}),BinaryParser=function(t,e){this.bigEndian=t,this.allowExceptions=e},{p:BinaryParser.prototype}){with(p.encodeFloat=function(t,e,i){var n,o,s,a,h,l=Math.pow(2,i-1)-1,d=-l+1,c=l,u=d-e,g=isNaN(w=parseFloat(t))||w==-(1/0)||w==+(1/0)?w:0,f=0,p=2*l+1+e+3,m=new Array(p),v=(w=0!==g?0:w)<0,w=Math.abs(w),y=Math.floor(w),R=w-y;for(n=p;n;m[--n]=0);for(n=l+2;y&&n;m[--n]=y%2,y=Math.floor(y/2));for(n=l+1;R>0&&n;(m[++n]=((R*=2)>=1)-0)&&--R);for(n=-1;++n<p&&!m[n];);if(m[(o=e-1+(n=(f=l+1-n)>=d&&f<=c?n+1:l+1-(f=d-1)))+1]){if(!(s=m[o]))for(a=o+2;!s&&a<p;s=m[a++]);for(a=o+1;s&&--a>=0;(m[a]=!m[a]-0)&&(s=0));}for(n=n-2<0?-1:n-3;++n<p&&!m[n];);for((f=l+1-n)>=d&&f<=c?++n:f<d&&(f!=l+1-p&&f<u&&this.warn("encodeFloat::float underflow"),n=l+1-(f=d-1)),(y||0!==g)&&(this.warn(y?"encodeFloat::float overflow":"encodeFloat::"+g),f=c+1,n=l+2,g==-(1/0)?v=1:isNaN(g)&&(m[n]=1)),w=Math.abs(f+l),a=i+1,h="";--a;h=w%2+h,w=w>>=1);for(w=0,a=0,n=(h=(v?"1":"0")+h+m.slice(n,n+e).join("")).length,r=[];n;w+=(1<<a)*h.charAt(--n),7==a&&(r[r.length]=String.fromCharCode(w),w=0),a=(a+1)%8);return r[r.length]=w?String.fromCharCode(w):"",(this.bigEndian?r.reverse():r).join("")},p.encodeInt=function(t,e,i){var n=Math.pow(2,e),o=[];for((t>=n||t<-(n>>1))&&this.warn("encodeInt::overflow")&&(t=0),t<0&&(t+=n);t;o[o.length]=String.fromCharCode(t%256),t=Math.floor(t/256));for(e=-(-e>>3)-o.length;e--;o[o.length]="\0");return(this.bigEndian?o.reverse():o).join("")},p.decodeFloat=function(t,e,i){var n,o,s,r=((r=new this.Buffer(this.bigEndian,t)).checkBuffer(e+i+1),r),a=Math.pow(2,i-1)-1,h=r.readBits(e+i,1),l=r.readBits(e,i),d=0,c=2,u=r.buffer.length+(-e>>3)-1;do for(n=r.buffer[++u],o=e%8||8,s=1<<o;s>>=1;n&s&&(d+=1/c),c*=2);while(e-=o);return l==(a<<1)+1?d?NaN:h?-(1/0):+(1/0):(1+h*-2)*(l||d?l?Math.pow(2,l-a)*(1+d):Math.pow(2,-a+1)*d:0)},p.decodeInt=function(t,e,i){var n=new this.Buffer(this.bigEndian,t),o=n.readBits(0,e),s=Math.pow(2,e);return i&&o>=s/2?o-s:o},{p:(p.Buffer=function(t,e){this.bigEndian=t||0,this.buffer=[],this.setBuffer(e)}).prototype})p.readBits=function(t,e){function i(t,e){for(++e;--e;t=1073741824==(1073741824&(t%=2147483648))?2*t:2*(t-1073741824)+2147483647+1);return t}if(t<0||e<=0)return 0;this.checkBuffer(t+e);for(var n,o=t%8,s=this.buffer.length-(t>>3)-1,r=this.buffer.length+(-(t+e)>>3),a=s-r,h=(this.buffer[s]>>o&(1<<(a?8-o:e))-1)+(a&&(n=(t+e)%8)?(this.buffer[r++]&(1<<n)-1)<<(a--<<3)-o:0);a;h+=i(this.buffer[r++],(a--<<3)-o));return h},p.setBuffer=function(t){if(t){for(var e,i=e=t.length,n=this.buffer=new Array(e);i;n[e-i]=t.charCodeAt(--i));this.bigEndian&&n.reverse()}},p.hasNeededBits=function(t){return this.buffer.length>=-(-t>>3)},p.checkBuffer=function(t){if(!this.hasNeededBits(t))throw new Error("checkBuffer::missing bytes")};p.warn=function(t){if(this.allowExceptions)throw new Error(t);return 1},p.toSmall=function(t){return this.decodeInt(t,8,!0)},p.fromSmall=function(t){return this.encodeInt(t,8,!0)},p.toByte=function(t){return this.decodeInt(t,8,!1)},p.fromByte=function(t){return this.encodeInt(t,8,!1)},p.toShort=function(t){return this.decodeInt(t,16,!0)},p.fromShort=function(t){return this.encodeInt(t,16,!0)},p.toWord=function(t){return this.decodeInt(t,16,!1)},p.fromWord=function(t){return this.encodeInt(t,16,!1)},p.toInt=function(t){return this.decodeInt(t,32,!0)},p.fromInt=function(t){return this.encodeInt(t,32,!0)},p.toDWord=function(t){return this.decodeInt(t,32,!1)},p.fromDWord=function(t){return this.encodeInt(t,32,!1)},p.toFloat=function(t){return this.decodeFloat(t,23,8)},p.fromFloat=function(t){return this.encodeFloat(t,23,8)},p.toDouble=function(t){return this.decodeFloat(t,52,11)},p.fromDouble=function(t){return this.encodeFloat(t,52,11)}}with(Bin={"byte":function(t,e){return 255&t.charCodeAt(e)},UInt16BE:function(t,e){return Bin["byte"](t,e)<<8|Bin["byte"](t,e+1)},UInt32BE:function(t,e){return Bin["byte"](t,e)<<24|Bin["byte"](t,e+1)<<16|Bin["byte"](t,e+2)<<8|Bin["byte"](t,e+3)},UInt16LE:function(t,e){return Bin["byte"](t,e+1)<<8|Bin["byte"](t,e)},UInt32LE:function(t,e){return Bin["byte"](t,e+3)<<24|Bin["byte"](t,e+2)<<16|Bin["byte"](t,e+1)<<8|Bin["byte"](t,e)},CString:function(t,e){for(var i=e;i<t.length&&0!=Bin["byte"](t,i);i++);if(i==t.length)throw"No null byte encountered";return t.substring(e,i)},CRC16:function(t,e,i,n){return 65535&crc32(t,e,i,n)},CRC32:function(t,e,i,n){return crc32(t,e,i,n)}},GZip={DEFLATE:8,FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16,load:function(t){var e=this,i=null;return i=e.parseHeader(t),e.parseAllBody(t,i),e.parseFooter(t,i),i},parseHeader:function(t){var e={};if(e.decompressionTime=0,e.id1=Bin["byte"](t,0),e.id2=Bin["byte"](t,1),e.compressionMethod=Bin["byte"](t,2),31!=e.id1||139!=e.id2||e.compressionMethod!=GZip.DEFLATE)throw"Not a GZip file: "+e.id1+","+e.id2+","+e.compressionMethod;e.flags=Bin["byte"](t,3),e.mtime=Bin.UInt32LE(t,4),e.extraFlags=Bin["byte"](t,8),e.operatingSystem=Bin["byte"](t,9);var i=10;if(e.flags&GZip.FEXTRA){var n=Bin.UInt16LE(t,i);i+=2,e.extraField=t.substring(i,i+n),i+=n}if(e.flags&GZip.FNAME&&(e.filename=Bin.CString(t,i),i+=e.filename.length+1),e.flags&GZip.FCOMMENT&&(e.comment=Bin.CString(t,i),i+=e.comment.length+1),e.computedHeaderCRC16=Bin.CRC16(t,0,i,0),e.flags&GZip.FHCRC){if(e.headerCRC16=Bin.UInt16LE(t,i),null!=e.computedHeaderCRC16&&e.headerCRC16!=e.computedHeaderCRC16)throw"Header CRC16 check failed";i+=2}return e.offset=i,e.data=[],e.outputSize=0,e.inflater=new Inflater,e.inflater.start_inflate(e),e},parseBody:function(t,e){return e.inflater.continue_inflate(t,e),e},parseAllBody:function(t,e){return e.inflater.final_inflate(t,e),e},parseFooter:function(t,e){if(e.CRC32=Bin.UInt32LE(t,t.length-8),e.computedCRC32&&e.computedCRC32!=e.CRC32)throw"Data CRC32 check failed";if(e.inputSize=Bin.UInt32LE(t,t.length-4),null!=e.data&&e.inputSize!=e.outputSize%4294967295)throw"Data length check failed";return e}},function(){for(var t="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",e=[],i=0;i<t.length/9;i++)e.push(parseInt("0x"+t.substr(9*i,8)));crc32=function(t,i,n,o){o^=-1;for(var s=Math.min(t.length,i+n),r=i;r<s;r++){var a=255&(o^t.charCodeAt(r));o=o>>>8^e[a]}return o^-1}}(),Inflater=function(){var t,e,i,n,o,s,r,a,h,l,d,c,u,g,f,p,m=32768,v=0,w=9,y=6,R=null,A=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),b=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0),x=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99),L=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577),C=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),k=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),E=function(){this.next=null,this.list=null},B=function(){this.e=0,this.b=0,this.n=0,this.t=null},M=function(t,e,i,n,o,s){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var r,a,h,l,d,c,u,g,f,p,m,v,w,y,R,A,b,x=new Array(this.BMAX+1),L=new Array(this.BMAX+1),C=new B,k=new Array(this.BMAX),M=new Array(this.N_MAX),S=new Array(this.BMAX+1);for(b=this.root=null,c=0;c<x.length;c++)x[c]=0;for(c=0;c<L.length;c++)L[c]=0;for(c=0;c<k.length;c++)k[c]=null;for(c=0;c<M.length;c++)M[c]=0;for(c=0;c<S.length;c++)S[c]=0;a=e>256?t[256]:this.BMAX,f=t,p=0,c=e;do x[f[p]]++,p++;while(--c>0);if(x[0]==e)return this.root=null,this.m=0,void(this.status=0);for(u=1;u<=this.BMAX&&0==x[u];u++);for(g=u,s<u&&(s=u),c=this.BMAX;0!=c&&0==x[c];c--);for(l=c,s>c&&(s=c),y=1<<u;u<c;u++,y<<=1)if((y-=x[u])<0)return this.status=2,void(this.m=s);if((y-=x[c])<0)return this.status=2,void(this.m=s);for(x[c]+=y,S[1]=u=0,f=x,p=1,w=2;--c>0;)S[w++]=u+=f[p++];f=t,p=0,c=0;do 0!=(u=f[p++])&&(M[S[u]++]=c);while(++c<e);for(e=S[l],S[0]=c=0,f=M,p=0,d=-1,v=L[0]=0,m=null,R=0;g<=l;g++)for(r=x[g];r-- >0;){for(;g>v+L[1+d];){if(v+=L[1+d],d++,R=(R=l-v)>s?s:R,(h=1<<(u=g-v))>r+1)for(h-=r+1,w=g;++u<R&&!((h<<=1)<=x[++w]);)h-=x[w];for(v+u>a&&v<a&&(u=a-v),R=1<<u,L[1+d]=u,m=new Array(R),A=0;A<R;A++)m[A]=new B;b=null==b?this.root=new E:b.next=new E,b.next=null,b.list=m,k[d]=m,d>0&&(S[d]=c,C.b=L[d],C.e=16+u,C.t=m,u=(c&(1<<v)-1)>>v-L[d],k[d-1][u].e=C.e,k[d-1][u].b=C.b,k[d-1][u].n=C.n,k[d-1][u].t=C.t)}for(C.b=g-v,p>=e?C.e=99:f[p]<i?(C.e=f[p]<256?16:15,C.n=f[p++]):(C.e=o[f[p]-i],C.n=n[f[p++]-i]),h=1<<g-v,u=c>>v;u<R;u+=h)m[u].e=C.e,m[u].b=C.b,m[u].n=C.n,m[u].t=C.t;for(u=1<<g-1;0!=(c&u);u>>=1)c^=u;for(c^=u;(c&(1<<v)-1)!=S[d];)v-=L[d],d--}this.m=L[1],this.status=0!=y&&1!=l?1:0},S=function(){return f.length<=p?-1:255&f.charCodeAt(p++)},F=function(t){for(;s<t;)o|=S()<<s,s+=8},T=function(t){return o&A[t]},P=function(t){o>>=t,s-=t},_=function(i,n,o){var s,a,f;if(0==o)return 0;for(f=0;;){for(F(u),a=d.list[T(u)],s=a.e;s>16;){if(99==s)return-1;P(a.b),s-=16,F(s),a=a.t[T(s)],s=a.e}if(P(a.b),16!=s){if(15==s)break;for(F(s),h=a.n+T(s),P(s),F(g),a=c.list[T(g)],s=a.e;s>16;){if(99==s)return-1;P(a.b),s-=16,F(s),a=a.t[T(s)],s=a.e}for(P(a.b),F(s),l=e-a.n-T(s),P(s);h>0&&f<o;)h--,l&=m-1,e&=m-1,i[n+f++]=t[e++]=t[l++];if(f==o)return o}else if(e&=m-1,i[n+f++]=t[e++]=a.n,f==o)return o}return r=-1,f},D=function(i,n,a){var l;if(l=7&s,P(l),F(16),l=T(16),P(16),F(16),l!=(65535&~o))return-1;for(P(16),h=l,l=0;h>0&&l<a;)h--,e&=m-1,F(8),i[n+l++]=t[e++]=T(8),P(8);return 0==h&&(r=-1),l},H=function(t,e,o){if(null==R){var s,r,a=new Array(288);for(s=0;s<144;s++)a[s]=8;for(;s<256;s++)a[s]=9;for(;s<280;s++)a[s]=7;for(;s<288;s++)a[s]=8;if(n=7,r=new M(a,288,257,b,x,n),0!=r.status)return alert("HufBuild error: "+r.status),-1;for(R=r.root,n=r.m,s=0;s<30;s++)a[s]=5;if(zip_fixed_bd=5,r=new M(a,30,0,L,C,zip_fixed_bd),r.status>1)throw R=null,"HufBuild error: "+r.status;i=r.root,zip_fixed_bd=r.m}return d=R,c=i,u=n,g=zip_fixed_bd,_(t,e,o)},$=function(t,e,i){var n,o,s,r,a,h,l,f,p,m=new Array(316);for(n=0;n<m.length;n++)m[n]=0;if(F(5),l=257+T(5),P(5),F(5),f=1+T(5),P(5),F(4),h=4+T(4),P(4),l>286||f>30)return-1;for(o=0;o<h;o++)F(3),m[k[o]]=T(3),P(3);for(;o<19;o++)m[k[o]]=0;if(u=7,p=new M(m,19,19,null,null,u),0!=p.status)return-1;for(d=p.root,u=p.m,r=l+f,n=s=0;n<r;)if(F(u),a=d.list[T(u)],o=a.b,P(o),o=a.n,o<16)m[n++]=s=o;else if(16==o){if(F(2),o=3+T(2),P(2),n+o>r)return-1;for(;o-- >0;)m[n++]=s}else if(17==o){if(F(3),o=3+T(3),P(3),n+o>r)return-1;for(;o-- >0;)m[n++]=0;s=0}else{if(F(7),o=11+T(7),P(7),n+o>r)return-1;for(;o-- >0;)m[n++]=0;s=0}if(u=w,p=new M(m,l,257,b,x,u),0==u&&(p.status=1),0!=p.status)return 1==p.status,-1;for(d=p.root,u=p.m,n=0;n<f;n++)m[n]=m[n+l];return g=y,p=new M(m,f,0,L,C,g),c=p.root,g=p.m,0==g&&l>257?-1:(1==p.status,0!=p.status?-1:_(t,e,i))},O=function(){null==t&&(t=new Array(2*m)),e=0,o=0,s=0,r=-1,a=!1,h=l=0,d=null},N=function(i,n,o){var s,c;for(s=0;s<o;){if(a&&r==-1)return s;if(h>0){if(r!=v)for(;h>0&&s<o;)h--,l&=m-1,e&=m-1,i[n+s++]=t[e++]=t[l++];else{for(;h>0&&s<o;)h--,e&=m-1,F(8),i[n+s++]=t[e++]=T(8),P(8);0==h&&(r=-1)}if(s==o)return s}if(r==-1){if(a)break;F(1),0!=T(1)&&(a=!0),P(1),F(2),r=T(2),P(2),d=null,h=0}switch(r){case 0:c=D(i,n+s,o-s);break;case 1:c=null!=d?_(i,n+s,o-s):H(i,n+s,o-s);break;case 2:c=null!=d?_(i,n+s,o-s):$(i,n+s,o-s);break;default:c=-1}if(c==-1)return a?0:-1;s+=c}return s},I=!1,W=function(t){I=!1,O(),p=t.offset,t.computedCRC32=0},j=function(t,e,i){var n,o,s=4096;if(f=t,!I&&t.length<=p+s+64)return e;for(var r=new Array(s);(n=N(r,0,r.length))>0;){var a=new Array(n);for(o=0;o<n;o++)a[o]=String.fromCharCode(r[o]);var h=a.join("");if(e.data.push(h),e.outputSize+=h.length,e.offset=p,e.computedCRC32=Bin.CRC32(h,0,h.length,e.computedCRC32),!I&&t.length<=p+s+64)break}return f=null,i&&i(e),e},X=function(t,e,i){I=!0,j(t,e,i)};this.inflate=function(t,e,i){return W(e),X(t,e,i)},this.start_inflate=W,this.continue_inflate=j,this.final_inflate=X},BigNumber=function(t,e,i){var n,o=this;if(t instanceof BigNumber){for(n in{precision:0,roundType:0,_s:0,_f:0})o[n]=t[n];return void(o._d=t._d.slice())}for(o.precision=isNaN(e=Math.abs(e))?BigNumber.defaultPrecision:e,o.roundType=isNaN(i=Math.abs(i))?BigNumber.defaultRoundType:i,o._s="-"==(t+="").charAt(0),o._f=((t=t.replace(/[^\d.]/g,"").split(".",2))[0]=t[0].replace(/^0+/,"")||"0").length,n=(t=o._d=(t.join("")||"0").split("")).length;n;t[--n]=+t[n]);o.round()},{$:BigNumber,o:BigNumber.prototype})$.ROUND_HALF_EVEN=($.ROUND_HALF_DOWN=($.ROUND_HALF_UP=($.ROUND_FLOOR=($.ROUND_CEIL=($.ROUND_DOWN=($.ROUND_UP=0)+1)+1)+1)+1)+1)+1,$.defaultPrecision=40,$.defaultRoundType=$.ROUND_HALF_UP,o.add=function(t){if(this._s!=(t=new BigNumber(t))._s)return t._s^=1,this.subtract(t);var e,i,n=new BigNumber(this),o=n._d,s=t._d,r=n._f,a=t._f,t=Math.max(r,a);for(r!=a&&((a=r-a)>0?n._zeroes(s,a,1):n._zeroes(o,-a,1)),e=(r=o.length)==(a=s.length)?o.length:((a=r-a)>0?n._zeroes(s,a):n._zeroes(o,-a)).length,i=0;e;i=(o[--e]=o[e]+s[e]+i)/10>>>0,o[e]%=10);return i&&++t&&o.unshift(i),n._f=t,n.round()},o.subtract=function(t){if(this._s!=(t=new BigNumber(t))._s)return t._s^=1,this.add(t);var e,i,n=new BigNumber(this),o=n.abs().compare(t.abs())+1,s=o?n:t,r=o?t:n,a=s._f,h=r._f,l=a;for(s=s._d,r=r._d,a!=h&&((h=a-h)>0?n._zeroes(r,h,1):n._zeroes(s,-h,1)),e=(a=s.length)==(h=r.length)?s.length:((h=a-h)>0?n._zeroes(r,h):n._zeroes(s,-h)).length;e;){if(s[--e]<r[e]){for(i=e;i&&!s[--i];s[i]=9);--s[i],s[e]+=10}r[e]=s[e]-r[e]}return o||(n._s^=1),n._f=l,n._d=r,n.round()},o.multiply=function(t){var e,i,n,o=new BigNumber(this),s=o._d.length>=(t=new BigNumber(t))._d.length,r=(s?o:t)._d,a=(s?t:o)._d,h=r.length,l=a.length,d=new BigNumber;for(e=l;e;s&&n.unshift(s),d.set(d.add(new BigNumber(n.join("")))))for(n=new Array(l- --e).join("0").split(""),s=0,i=h;i;s+=r[--i]*a[e],n.unshift(s%10),s=s/10>>>0);return o._s=o._s!=t._s,o._f=((s=h+l-o._f-t._f)>=(i=(o._d=d._d).length)?this._zeroes(o._d,s-i+1,1).length:i)-s,o.round()},o.divide=function(t){if("0"==(t=new BigNumber(t)))throw new Error("Division by 0");if("0"==this)return new BigNumber;var e,i,n,o=new BigNumber(this),s=o._d,r=t._d,a=s.length-o._f,h=r.length-t._f,l=new BigNumber,d=0,c=1,u=0,g=0;for(l._s=o._s!=t._s,l.precision=Math.max(o.precision,t.precision),l._f=+l._d.pop(),a!=h&&o._zeroes(a>h?r:s,Math.abs(a-h)),t._f=r.length,r=t,r._s=!1,r=r.round(),t=new BigNumber;"0"==s[0];s.shift());t:do{for(n=u=0,"0"==t&&(t._d=[],t._f=0);d<s.length&&t.compare(r)==-1;++d){if(n=d+1==s.length,(!c&&++u>1||(g=n&&"0"==t&&"0"==s[d]))&&(l._f==l._d.length&&++l._f,l._d.push(0)),"0"==s[d]&&"0"==t||(t._d.push(s[d]),++t._f),g)break t;if(n&&t.compare(r)==-1&&(l._f==l._d.length&&++l._f,1)||(n=0))for(;l._d.push(0),t._d.push(0),++t._f,t.compare(r)==-1;);}if(c=0,t.compare(r)==-1&&!(n=0))for(;n?l._d.push(0):n=1,t._d.push(0),++t._f,t.compare(r)==-1;);for(i=new BigNumber,e=0;t.compare(y=i.add(r))+1&&++e;i.set(y));t.set(t.subtract(i)),!n&&l._f==l._d.length&&++l._f,l._d.push(e)}while((d<s.length||"0"!=t)&&l._d.length-l._f<=l.precision);return l.round()},o.mod=function(t){return this.subtract(this.divide(t).intPart().multiply(t))},o.pow=function(t){var e,i=new BigNumber(this);if(0==(t=new BigNumber(t).intPart()))return i.set(1);for(e=Math.abs(t);--e;i.set(i.multiply(this)));return t<0?i.set(new BigNumber(1).divide(i)):i},o.set=function(t){return this.constructor(t),this},o.compare=function(t){var e,i,n=this,o=this._f,s=new BigNumber(t),r=s._f,a=[-1,1];if(n._s!=s._s)return n._s?-1:1;if(o!=r)return a[o>r^n._s];for(o=(n=n._d).length,r=(s=s._d).length,e=-1,i=Math.min(o,r);++e<i;)if(n[e]!=s[e])return a[n[e]>s[e]^n._s];return o!=r?a[o>r^n._s]:0},o.negate=function(){var t=new BigNumber(this);return t._s^=1,t},o.abs=function(){var t=new BigNumber(this);return t._s=0,t},o.intPart=function(){return new BigNumber((this._s?"-":"")+(this._d.slice(0,this._f).join("")||"0"))},o.valueOf=o.toString=function(){var t=this;return(t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0")+(t._f!=t._d.length?"."+t._d.slice(t._f).join(""):"")},o._zeroes=function(t,e,i){var n=["push","unshift"][i||0];for(++e;--e;t[n](0));return t},o.round=function(){if("_rounding"in this)return this;var t,e,i,n,o=BigNumber,s=this.roundType,r=this._d;for(this._rounding=!0;this._f>1&&!r[0];--this._f,r.shift());for(t=this._f,e=this.precision+t,i=r[e];r.length>t&&!r[r.length-1];r.pop());return n=(this._s?"-":"")+(e-t?"0."+this._zeroes([],e-t-1).join(""):"")+1,r.length>e&&(i&&s!=o.DOWN&&(s==o.UP||(s==o.CEIL?!this._s:s==o.FLOOR?this._s:s==o.HALF_UP?i>=5:s==o.HALF_DOWN?i>5:s==o.HALF_EVEN&&(i>=5&&1&r[e-1])))&&this.add(n),r.splice(e,r.length-e)),delete this._rounding,this};with(NBT=function(t){this.binary=new BinaryParser((!0)),t&&this.loadFile(t)},{nbtproto:NBT.prototype})nbtproto.root=new Array,nbtproto.tags={TAG_END:0,TAG_BYTE:1,TAG_SHORT:2,TAG_INT:3,TAG_LONG:4,TAG_FLOAT:5,TAG_DOUBLE:6,TAG_BYTE_ARRAY:7,TAG_STRING:8,TAG_LIST:9,TAG_COMPOUND:10},nbtproto.loadFile=function(t,e){"undefined"==typeof e&&(e=!0),e&&(t=GZip.load(t));var i=new StringStream(t.data.join(""));return this.traverseTag(i,this.root),this.root[this.root.length-1]},nbtproto.purge=function(){this.root=new Array},nbtproto.traverseTag=function(t,e){if(t.eof())return!1;var i=this.readType(t,this.tags.TAG_BYTE);if(i==this.tags.TAG_END)return!1;var n=this.readType(t,this.tags.TAG_STRING),o=this.readType(t,i);return e.push({type:i,name:n,value:o}),!0},nbtproto.readType=function(t,e){switch(e){case this.tags.TAG_BYTE:return this.binary.toSmall(t.read(1));case this.tags.TAG_SHORT:return this.binary.toShort(t.read(2));case this.tags.TAG_INT:return this.binary.toInt(t.read(4));case this.tags.TAG_LONG:var i=new BigNumber(this.binary.toDWord(t.read(4))),n=new BigNumber(this.binary.toDWord(t.read(4))),o=n.add(i.multiply(4294967296)),s=new BigNumber(2);s=s.pow(63);var r=new BigNumber(2);return r=r.pow(64),o.compare(s)>=0&&(o=o.subtract(r)),o;case this.tags.TAG_FLOAT:return this.binary.toFloat(t.read(4));case this.tags.TAG_DOUBLE:return this.binary.toDouble(t.read(8));case this.tags.TAG_BYTE_ARRAY:for(var a=this.readType(t,this.tags.TAG_INT),h=new Array,l=0;l<a;l++)h.push(this.readType(t,this.tags.TAG_BYTE));return h;case this.tags.TAG_STRING:var d=this.readType(t,this.tags.TAG_SHORT);return d?decodeURIComponent(escape(t.read(d))):"";case this.tags.TAG_LIST:for(var c=this.readType(t,this.tags.TAG_BYTE),u=this.readType(t,this.tags.TAG_INT),g={type:c,value:new Array},l=0;l<u&&!t.eof();l++)g.value.push(this.readType(t,c));return g;case this.tags.TAG_COMPOUND:for(var f=new Array;this.traverseTag(t,f););return f}};with(StringStream=function(t){this.string=t,this.position=0},{proto:StringStream.prototype})proto.read=function(t){var e=this.string.substr(this.position,t);if(!e)throw"erro";return this.position+=t,e},proto.seek=function(t){return this.position+=t,!0},proto.rewind=function(){return this.position=0,!0},proto.tell=function(){return this.position},proto.eof=function(){return this.position>=this.string.length};NovaSkinProjects.prototype={applyTemplate:function(t,e){$(t).each(function(){var t=$(this).data("template");t&&$(this).html(t(e))})},showUserInfo:function(){var t=this;$.getJSON("/profile.json",function(e){$(".login").hide(),$("#user").text(e.name),$("#user-profile").attr("href",e.url),$(".user").show(),t.user=e}).fail(function(){$(".login").show()})},showProjects:function(){var t=[],e=0,i=0,n=0,o=0;for(var s in this.resourcePackLoader.resourcepacks){var r=this.resourcePackLoader.resourcepacks[s];t.push({name:r.name,id:r.id,icon:decodeURIComponent(r.icon),extraclass:r.dropbox?"dropbox":"local",isFromDropbox:"dropbox"in r,isLocal:r.isLocal,isFromComputer:r.fromComputer,isOnline:r.isOnline}),r.dropbox?i++:r.isLocal?e++:r.fromComputer?o++:r.isOnline&&n++}t.sort(function(t,e){return t.name.toLocaleLowerCase()>e.name.toLocaleLowerCase()?1:-1}),this.applyTemplate(".project-list-container",{project:t}),$("#resourcepack-count").text(e),$(".protocol").text(location.protocol).addClass("http:"==location.protocol?"label-primary":"label-success"),$("#resourcepack-dropbox-count").text(i||!this.resourcePackLoader.dropboxUser&&"connect"||""),$("#filesystem-usage").text((this.resourcePackLoader.getFileSystemUsage().used/1024/1024).toFixed(2)+"MB"),$("#resourcepack-computer-count").text(o||"install"),$("#resourcepack-online-count").text(n||""),$(".install-resourcepack-manager-header").toggle(0==o)},showProject:function(t){this.project=t;var e=t.cachedResources["textures/gui/options_background.png"];$("#texturepack-skins > div").html(""),$(".projects-editable").toggle(!t.readOnly),$("#sync-status, #ziplink").hide(),$("#resourcepack-export-to-dropbox").toggle(!t.dropbox&&!!this.resourcePackLoader.dropboxUser),
$("#resourcepack-zip").toggle(t.isLocal),$(".dropbox-share").toggle(!!t.dropbox),$("#resourcepack-convert").toggle(!t.isResourcePack),$("#download-zip").show(),$("#texturepack-name").text(t.name),$("#texturepack-image").attr("src",t.icon),$("#texturepack-background").css("background-image",e?'url("'+e+'"")':""),$("#texture-ender").toggle(!t.isResourcePack),$("#sidebar .active").removeClass("active"),$("#resourcepack-name").text(t.name),this.directory={},this.directories={},this.project.filelist.forEach(this.populateDirectory.bind(this)),this.showFolder(this.directory,""),this.setView({tab:"texturepack-page"}),this.notifications.hideLoading()},populateDirectory:function(t){t=assets_path(t);var e=this,i=t.split("/").filter(Boolean),n=i.pop(),o=i.reduce(function(t,i){return t[i]||(t[i]=e.directories[i]={})},this.directory);o[n]=t},populateDirectoryWithModelTree:function(){var t=this;this.getBlockModelLoader().indexModels(function(){try{t.directory.assets.minecraft.models.$hierarchy=t.getBlockModelLoader().modelTree}catch(e){}})},showFolder:function(t,e){function i(t,e){return naturalSort(t.name,e.name)}if(this.folderpath=e,this.addFolderLinks(".folder-links",e),$(".sidebar #sidebar").toggleClass("hidden","$home"!=e),$(".sidebar .folder-links").toggleClass("hidden","$home"==e),"$home"!=e&&"object"==typeof t){var n={folder:[],file:[]};for(var o in t)if("object"==typeof t[o])n.folder.push({name:o,count:property_count(t[o])});else{var s=t[o],r=o.split(".").pop();n.file.push({name:o,href:path(location.pathname+"#"+this.project.name,s),path:s,classes:"",isJson:/mcmeta$|json$/.test(r)&&!/assets\/minecraft\/models/.test(s),isImage:/png$/.test(r),isSound:/ogg$/.test(r),isText:/txt|properties|fsh|vsh|lang$/.test(r)})}n.folder.sort(i),n.file.sort(i);var a=this;this.applyTemplate(".folders, #texturepack-skins .files",n),$("#texturepack-skins .table").empty(),$("#texturepack-skins .folder").on("click",function(){a.showFolder(t[this.dataset.name],path(e,this.dataset.name))}),this.project.readOnly&&$("#texturepack-skins .files .delete-file").remove(),this.updatePreview()}},getFoldersListWithPath:function(t){t=t.startsWith("http")?"":assets_path(t);var e=t.split("/").filter(Boolean);return e.reduce(function(t,e,i,n){var o=e.indexOf(".")>0?"/images/edit.png":"/images/chest-icon.png";return n[i]={name:e,folderpath:path(t,e),icon:o},n[i].folderpath},""),this.project&&e.unshift({name:this.project.name,folderpath:"/",icon:this.project.icon}),e},addFolderLinks:function(t,e,i){e=e.startsWith("http")?"":assets_path(e);var n=e&&$(t).find('[data-folderpath="'+e+'"]').presence();if(n)$(t).find(".active-folder").removeClass("active-folder"),n.addClass("active-folder");else{var o=this.getFoldersListWithPath(e);this.applyTemplate(t,{folder:o}),$(t).find("a:last").addClass("active-folder").attr("data-target",i&&i.target||"#texturepack-page")}this.pushState(this.project&&"$home"!=e&&path(this.project.name,e))},showPath:function(t){this.showFolder(t?t.split("/").reduce(function(t,e){return t[e]||t},this.directory):this.directory,t)},updateFolder:function(){var t=this;this.project.load(function(){t.project.filelist.forEach(t.populateDirectory.bind(t)),t.showPath(t.folderpath)})},showTable:function(t,e){var i={};t.forEach(function(t){for(var e in t)i[e]=!0}),delete i.variant,this.showFolder({},e);var n=$("#texturepack-skins .table"),o=$("<tr>").addClass("active").appendTo(n);for(var s in i)o.append("<th>"+s+"</th>");o.append("<th>model</th>"),o.append("<th>rotation x</th>"),o.append("<th>rotation y</th>"),o.append("<th>uvlock</th>"),o.append("<th>weight</th>"),o.append("<th>preview</th>"),t.forEach(function(t){var o=$("<tr>").appendTo(n);for(var s in i)o.append("<td>"+(t[s]||"-")+"</td>");o.append('<td class="v-separator">'+t.variant.model+"</td>"),o.append("<td>"+BlockRotation[t.variant.rotation].x+"</td>"),o.append("<td>"+BlockRotation[t.variant.rotation].y+"</td>"),o.append("<td>"+(t.variant.uvlock?"yes":"no")+"</td>"),o.append("<td>"+t.variant.weight+"</td>"),o.append('<td class="file" data-filename="'+t.variant.model+'.st" data-path="'+e+'"></td>')}),this.updatePreview()},setView:function(t){$('.switch-tabs a[href="#'+t.tab+'"]').click(),t.filepath&&this.addFolderLinks(".folder-links",t.filepath,{target:"#"+t.tab}),this.showMatchingToolbar(t.tab),this.showEditor(t)},showMatchingToolbar:function(t){$(".new-project-panel").hide(),$(".tab-editor > .tab-pane[id]").each(function(){$(".middle_column, .tab-toolbar").toggleClass("tab-"+this.id,this.id==t)}),$(".inspector").toggle($("#model-editor").is(":visible"))},showEditor:function(t){function e(){n.notifications.hideLoading(),$("#gallery-search-form .search-query").val(n.modelEditor.saveManager.getSearchQuery())}switch(this.view=t,this.view.type){case"model":case"mesh":case"schematic":if(this.view.image){var i=this.modelEditor.layers.working();i.ctx.drawImage(this.view.image,0,0),this.modelEditor.textureview.updateTexturePreview(),this.view.image=null;break}var n=this;this.modelEditor.updateCanvasSize(),this.modelEditor.resourcepack=this.project,this.notifications.showLoading(),"model"==this.view.type?this.modelEditor.showModel(this.view.model,this.view.filepath,e):"mesh"==this.view.type?this.modelEditor.showBlockModel(this.view.model,e):"schematic"==this.view.type&&this.modelEditor.showSchematic(this.view.schematic,this.notifications.hideLoading),$("#show-layers").click(),$(window).scrollTop(250);break;case"json":this.jsoneditor.focus();break;case"text":break;case"pixlr":case"picozu":case"aviary":case"piskel":this.imageEditor.resourcepack=this.project,this.view.image?this.imageEditor.openCanvasImage(this.view.image,this.view.model,this.view.type):this.view.url?this.imageEditor.openImageURL(this.view.url,this.view.model,this.view.type):this.imageEditor.openImage(this.view.filepath,this.view.model,this.view.type)}},updatePreview:function(){var t=this;$(document).lazyScrollLoading({lazyItemSelector:"#texturepack-skins .file",onLazyItemFirstVisible:function(e,i,n){n.each(function(){var e=$(this);t.previewResource(e.data("filename"),e.data("path"),function(t){this.prepend($(t).addClass("preview img-responsive"))}.bind(e))})}}),scrollTo(0,0)},previewResource:function(t,e,i){switch(t.split(".").pop()){case"txt":case"fsh":case"vsh":case"lang":case"properties":this.previewText(t,e,i);break;case"json":case"mcmeta":/^assets\/minecraft\/models/.test(e)?this.previewMesh(t,e,i):this.previewJSON(t,e,i);break;case"ogg":this.previewSound(t,e,i);break;case"png":case"jpg":case"jpeg":var n=/entity|armor|blocks|items|mcpatcher|mocreatures/.test(e)&&this.entityModelLoader.getModelByFileName(e).split(":")[0]||"Image";switch(n){case"Block":if(this.project.files[e+".mcmeta"]){this.previewAnimation(t,e,i);break}case"Item":case"Image":this.previewImage(t,e,i);break;default:this.previewTexture(t,e,i)}break;case"img":this.previewImage(t,e,i);break;case"block":this.previewBlock(t,e,i);break;case"st":this.previewBlockWithState(t,e,i);break;case"nbt":this.previewNBT(t,e,i);break;default:i('<span class="label label-danger">unknow format</span>')}},previewTexture:function(t,e,i){var n=this,o=this.entityModelLoader.getModelByFileName(e);this.project.loadImage(e,function(s){n.entityModelLoader.loadModel(o,function(o){n.render.render({textureList:[{name:t,filename:e,imageurl:s.src}],model:o,grid:{cube:"no-x-ray"},onRender:function(t,e,n){i(e),i($('<span class="label label-success"></span>').text(s.width+"x"+s.height+" "+o.name))}})})})},previewAnimation:function(t,e,i){this.project.loadImage(e,function(t){var e=256,n=Math.max(1,e/t.width),o=8192/t.width|0,s=4*o/16,r=t.width*(isFirefox?n:1),a=$("<div>").css({width:r+"px",height:r+"px","background-image":"url("+t.src+")","-webkit-animation":"changeBackgroundPosition "+s+"s steps("+o+", end) infinite","-moz-animation":"changeBackgroundPosition "+s+"s steps("+o+", end) infinite",animation:"changeBackgroundPosition "+s+"s steps("+o+", end) infinite",zoom:n,"-moz-transform":"scale("+n+")","-moz-transform-origin":"left top"}).addClass("crisp-edges");i(a),i($('<span class="label label-danger"></span>').text(t.height/t.width+"-frames "+t.width+"px"))})},previewImage:function(t,e,i){this.project.loadImage(e,function(t){i($('<span class="label label-info"></span>').text(t.naturalWidth+"x"+t.naturalHeight));var e=Math.max(t.width,t.height);i(e>=256?t:$(t).addClass("crisp-edges").css("width","256px"))})},previewBlock:function(t,e,i){var n=e.split("models/")[1].split(".")[0],o=this.getBlockModelLoader(),s=new Image,r=this;s.src="/images/missing.png",o.loadMesh(n,function(t,e){var n=e.getRequiredTextures();r.project.loadImages(n,function(e){r.render.render({mesh:t,textures:e,resourcepack:r.project,missing:s,onRender:function(t){i(t),e||i($('<span class="label label-warning">template</span>'))}})})})},previewMesh:function(t,e,i){this.previewBlock(t,e,i)},previewBlockWithState:function(t,e,i){this.previewBlock(t,e,function(t){i(t)})},previewBlockTexture:function(t,e){var i=this,n={},o=t.split(".")[0],s=!1;this.getBlockModelLoader().indexModels(function(t){var r=t[path("blocks",o)];for(var a in r)n[a+".block"]=path("assets","minecraft","models",a+".json");n["_edit.img"]=e,i.showFolder(n,e),i.notifications.hideLoading(),s=!0}),s||this.notifications.showLoading()},previewBlockState:function(t,e){var i=t.split(".")[0],n=[],o=this;this.getBlockModelLoader().loadModel(i,function(t){for(var i in t){var s=t[i],r={};r.variant=s,i.split(",").forEach(function(t){t=t.split("="),r[t[0]]=t[1]}),n.push(r)}o.showTable(n,e)})},previewSound:function(t,e,i){i('<h3><span class="glyphicon glyphicon-music"></span></h3><br/><h2><span class="glyphicon glyphicon-play-circle"></span></h2>')},previewText:function(t,e,i){this.project.loadText(e,function(t){i($("<pre>").text(t).addClass("text-preview"))})},previewJSON:function(t,e,i){this.project.loadJSON(e,function(t){i($("<pre>").text(JSON.stringify(t,null,2)).addClass("text-preview"))})},previewNBT:function(t,e,i){},setupJsonEditor:function(){this.jsoneditor=new JSONEditor(document.getElementById("json-editor"),{onChange:this.events.onJsonEditorChange,modes:["tree","view","form","code"]},{})},showSimpleSaveWindow:function(){this.modelEditor.saveManager.suggestFileName(this.view.filepath),this.modelEditor.saveManager.showSimpleSaveWindow()},editResource:function(t,e){switch(t.split(".").pop()){case"txt":case"fsh":case"vsh":case"lang":case"properties":this.editText(t,e);break;case"mcmeta":case"json":/^assets\/minecraft\/models\//.test(e)?this.editBlock(e,e.split("models/")[1]):"sounds.json"==t?this.editSounds(e):this.editJSON(t,e);break;case"ogg":this.editAudio(e,t);break;case"png":var i=this.entityModelLoader.getModelByFileName(e).split(":")[0];switch(i){case"Block":this.previewBlockTexture(t,e);break;case"Image":case"Item":this.editImage(e,i);break;default:this.editModel(e,i)}break;case"img":case"jpg":case"jpeg":this.editImage(e,"Image");break;case"block":this.editBlock(e,t);break;case"st":this.editBlock("",path("block",e));break;case"nbt":this.editNBT(t,e);break;default:return}$(".resource-name").text(t).attr("title",t)},editJSON:function(t,e){this.setView({tab:"json-editor",type:"json",filepath:e});var i=this.jsoneditor;this.project.loadJSON(e,function(e){i.set(e),i.setMode("tree"),i.setName(file_name(t,!0)),i.expandAll()})},editText:function(t,e){this.setView({tab:"text-editor",type:"text",filepath:e}),this.project.loadText(e,function(t){$("#text-editor-area").val(t)})},editSounds:function(t){var e=this,i=t.split("/"),n=(i.pop(),i.join("/")+"/sounds");this.setView({tab:"sounds-editor",filepath:t}),this.audioEditor.resourcepack=this.project,e.project.files[t]?this.project.loadJSON(t,function(t){e.audioEditor.editJsonSounds(t,n)}):this.audioEditor.editJsonSounds({},n)},editNBT:function(t,e){var i=this;this.project.loadBinary(e,function(n){function o(t){var e={};return t.forEach(function(t){e[t.name]=10==t.type?o(t.value[0]):t.value}),e}var s=new NBT;s.purge(),s.loadFile(n);var r=o(s.root[0].value);t.split(".")[0];i.setView({tab:"model-editor",type:"schematic",schematic:r,filepath:e})})},editImage:function(t,e,i){this.setView({tab:"model-editor",type:"model",filepath:t,model:e})},editModel:function(t,e){this.setView({tab:"model-editor",type:"model",filepath:t,model:e})},editBlock:function(t,e){var i=e.split(".")[0];this.setView({tab:"model-editor",type:"mesh",model:i,filepath:t})},editAudio:function(t,e){this.setView({tab:"audio-editor",filepath:t}),this.audioEditor.resourcepack=this.project,this.audioEditor.editAudio(t)},playAudio:function(t){this.audioEditor.resourcepack=this.project,this.audioEditor.playAudio(t)},notifications:{},initNotifications:function(){this.notifications.showProgress=function(t){var e=$("#notifications-area .progress").show(),i=e.find(".progress-bar").text(t).css("width","0%");return function(n){i.css("width",100*n.progress+"%").text(t+" "+Math.round(100*n.progress)+"%"),n.progress>=1&&e.hide()}}.bind(this),this.notifications.showAlert=function(t,e,i){e=e||"warning";var n="alert-"+e,o="info"==e?"glyphicon-info-sign":"success"==e?"glyphicon-ok-sign":"danger"==e?"glyphicon-remove-sign":"glyphicon-exclamation-sign";$("#notifications-area .alert").attr("class","alert alert-dismissable "+n).show(),$("#notifications-area .alert strong").text(""),$("#notifications-area .alert .message").html(t),$("#notifications-area .alert .glyphicon").attr("class","glyphicon "+o),$("#notifications-area .alert .alert-link").off("click").toggle(Boolean(i)).one("click",function(){i&&i(),$("#notifications-area .alert").hide()}).text(i&&i.name||"click")}.bind(this),this.notifications.showLoading=function(t){$(".tab-explorer").addClass("loading"),$(document.body).spin({lines:10,length:12,width:8,radius:16,color:"white",shadow:!0}),this.loadingTimeOut=setTimeout(this.notifications.hideLoading.bind(this),1e4)}.bind(this),this.notifications.hideLoading=function(){$(document.body).spin(!1),$(".tab-explorer").removeClass("loading"),clearInterval(this.loadingTimeOut)}.bind(this),this.notifications.showError=function(t){var e=t&&(t.target&&t.target.error||t.message||t.error||t);this.notifications.showAlert(e,"danger")}.bind(this)},showTechne:function(t,e){var i=this;e=e||1,$.ajax({url:"https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D'http%3A%2F%2Ftechne.zeux.me%2Fapi%2Fmodel%2Fsearch%2F"+t+"'&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=?",dataType:"json",data:{term:t||"",page:e},jsonpCallback:"techneSearchCallback"}),this.notifications.showLoading(),window.techneSearchCallback=function(t){i.notifications.hideLoading();var e=JSON.stringify({modelIds:t.query.results.json.Result.map(function(t){return t.Id||t.href.split("/").pop()})});i.applyTemplate("#techne-listing",{techne:t.query.results.json.Result.map(function(t,i){return{name:t.Name||t.title,id:t.Id||t.href.split("/").pop(),background:"http://techne.zeux.me/api/panorama/previewsmall?test="+e,y:150*-i}})})}},fillSearchTypeAhead:function(){this.resourcePackLoader.get("default",function(t){$('.search-resourcepack input[type="search"]').typeahead({source:t.filelist.map(function(t){return file_name(t,!0)}),autoSelect:!1,minLength:2,showHintOnFocus:!0,autoSelect:!1,fitToElement:!0,items:"all",delay:500})})},getBlockModelLoader:function(){return this.project.blockModelLoader||(this.project.blockModelLoader=new BlockModelLoader(this.project)),this.project.blockModelLoader},_pushState:function(t){var e;e=t?window.location.pathname+window.location.search+"#"+t:window.location.pathname+window.location.search,e!=window.location.href&&history.pushState("",document.title,e)},pushState:function(t){this._pushState(t)},restoreState:function(t){if(this.pushState=function(){},window.location.hash){var e=window.location.hash.substring(1).split("/"),i=e.shift(),n=e.pop(),o=e.join("/"),s=this;if("~"==i[0])return void history.replaceState("",document.title,window.location.pathname+window.location.search);s.notifications.showLoading(),$(function(){s.resourcePackLoader.get(i,function(t){s.project||(s.project=t,t.load(function(){s.project===t&&(s.showProject(t),n&&n.indexOf(".")>0?(s.getBlockModelLoader(),s.editResource(n,path(o,n))):(n&&s.showPath(path(o,n)),s.setView({tab:"texturepack-page"})))}))})}),setTimeout(function(){(!s.project||s.project.name!=i&&"default"!=i)&&(s.notifications.hideLoading(),s.notifications.showAlert("Project "+i+" not found"),history.replaceState("",document.title,window.location.pathname+window.location.search))},5e3)}this.pushState=this._pushState},setupEventListeners:function(){this.resourcePackLoader.onLoad.push(this.showProjects.bind(this)),this.resourcePackLoader.onDropboxStatusChange=this.events.onDropboxStatusChange.bind(this),this.resourcePackLoader.setFileSystemOnError(this.events.onFileSystemError.bind(this)),this.modelEditor.updateCanvasSize=this.events.resizeCanvas,this.audioEditor.onPlayAudioError=this.events.onPlayAudioError,window.onpopstate=this.restoreState.bind(this),$(".project-list-container").on("click","[data-project]",this.events.loadProject.bind(this)).on("click",".delete",this.events.removeProject.bind(this)),$("#texturepack-files").on("click",".file",this.events.cancelEvent).on("click",".folder",this.events.toggleExpanded),$("#texturepack-files").on("change","input",this.events.toggleAndPreview.bind(this)),$("#sidebar, .folder-links").on("click",'a[data-toggle="tab"]',this.events.changeViewTabClick.bind(this)),$(".dropbox-login").click(this.resourcePackLoader.dropboxLogin.bind(this.resourcePackLoader)),$("#dropbox-logout").click(this.resourcePackLoader.dropboxLogout.bind(this.resourcePackLoader)),$(".folder-links").on("click","a",this.events.showFolder.bind(this)),$("#texturepack-skins").on("click",".delete-file",this.events.removeFile.bind(this)),$("#texturepack-skins").on("click",".file",this.events.editResource.bind(this)),$(".simple-save-window").click(this.showSimpleSaveWindow.bind(this)),$("input.btn-file").bootstrapFileInput(),$("#resourcepacks-open").on("change",this.events.load.bind(this)),$("#resourcepacks-import").on("change",this.events.importDirectory.bind(this)),$("#resourcepacks-new, #dropbox-new").on("click",this.events.showNewProjectPanel.bind(this)),$(".new-project-panel form").on("submit",this.events.newProject.bind(this)),$(".resourcepack-toolbar [data-zoom]").click(this.events.zoom.bind(this)),$(".search-resourcepack").submit(this.events.searchResourcePack.bind(this)),$(".texturepack-dropzone").on("drop",this.events.dropZip.bind(this)),$("#texturepack-skins").on("drop",this.events.importFile.bind(this)),$(document).on("dragenter dragover dragleave drop",this.events.showDropZone.bind(this)),$("#resourcepack-import-files").change(this.events.importFile.bind(this)),$(".dropbox-share").click(this.events.shareDropboxResourcePack.bind(this)),$("#resourcepack-export-to-dropbox").click(this.events.exportToDropbox.bind(this)),$("#resourcepack-rename").click(this.events.resourcepackRename.bind(this)),$("#resourcepack-zip").click(this.events.zipResourcePack.bind(this)),$(".alert .close").click(function(){return $(this).parents(".alert").hide(),!1}),$("#entities a").on("click",this.events.editEntity.bind(this)),$("#save-confirm").on("click",this.events.confirmSave.bind(this)),$("#techne-search").on("submit",this.events.techneSearch.bind(this)),$("#techne .pagination").on("click","a",this.events.techneSearch.bind(this)),$("#techne").on("click","[data-techne]",this.events.editTechne.bind(this)),$("#techne-edit-by-id").on("click",this.events.editTechne.bind(this)),$("#open-tcn").change(this.events.openTechne.bind(this)),$("#gallery-panel").on("click",".gallery-item",this.events.onGalleryItemClick.bind(this)),$("#gallery-panel").on("click",".gallery-query",this.events.onGalleryQuery.bind(this)),$("#gallery-search-form").on("submit",this.events.onGallerySearch.bind(this)),$("#text-editor-area").on("mouseenter keyup",this.events.onTextEditorChange.bind(this)),$(".image-editor-selector .btn").on("click",this.events.changeImageEditor.bind(this)),$("#open-image-editor").on("click",this.events.editModelAsImage.bind(this)),$("#edit-image-as-model").on("click",this.events.editImageAsModel.bind(this)),$(".go-fullscreen").on("click",this.events.onFullscreenClick.bind(this)),$("#show-model-editor").on("shown.bs.tab",this.modelEditor.updateCanvasSize.bind(this.modelEditor)),$(".sidebar").on("hide.bs.collapse",this.events.sideBarHidden.bind(this)).on("show.bs.collapse",this.events.sideBarShown.bind(this)),$("#sounds-editor-asjson").click(this.events.editSoundsAsJson.bind(this)),$("#initial-fileinput").on("change",this.events.onInitialFileInputChange.bind(this))},events:{toggleExpanded:function(){return $(this).toggleClass("collapsed").hasClass("collapsed")&&$(this).find(".folder").addClass("collapsed"),!1},cancelEvent:function(t){return!1},loadProject:function(t){var e=this,i=this.resourcePackLoader.resourcepacks[t.currentTarget.dataset.project];i&&(this.notifications.showLoading(i.name),i.load(function(){e.showProject(i),t.currentTarget.dataset.folderpath&&e.showPath(t.currentTarget.dataset.folderpath)}))},removeProject:function(t){var e=this,i=$(t.currentTarget).parents("[data-project]"),n=i.data("projectId");return this.resourcePackLoader.remove(n,function(t){e.notifications.showAlert("ResourcePack "+t.name+" was removed.","warning",function(){t.undo()})}),i.hide("slow"),!1},toggleAndPreview:function(t){var e=$(t.currentTarget).is(":checked");$(t.currentTarget).siblings(".folders, .files").find("input").attr("checked",e),e||$(t.currentTarget).parents(".folder").children("input").attr("checked",e),this.previewSelection()},changeViewTabClick:function(t){var e=(t.currentTarget.dataset.target||t.currentTarget.href).split("#")[1];$('.switch-tabs a[href="#'+e+'"]').click(),this.showMatchingToolbar(e)},changeImageEditor:function(t){this.view.type=t.currentTarget.dataset.editor,this.view.tab="image-editor",this.setView(this.view)},editModelAsImage:function(){this.view.tab="image-editor",this.view.previous_type=this.view.type,this.view.type="piskel",this.view.image=this.modelEditor.layers.working().canvas,this.setView(this.view),$("#edit-image-as-model").show()},editImageAsModel:function(){this.view.tab="model-editor",this.view.type=this.view.previous_type,this.view.image=this.imageEditor.getPixelImage(),this.setView(this.view)},onDropboxStatusChange:function(){var t=this.resourcePackLoader.dropboxUser,e=void 0!=t;$("#dropbox-logout, #dropbox-new").toggle(e),$(".dropbox-disconnected").toggle(!e),$("#dropbox-user").text(t&&t.name||""),e||this.showProjects()},showFolder:function(t){$("#sidebar .active").removeClass("active"),this.showPath(t.currentTarget.dataset.folderpath),t.preventDefault()},editResource:function(t){t.ctrlKey||t.shiftKey||this.editResource(t.currentTarget.dataset.filename,t.currentTarget.dataset.path)},editEntity:function(t){var e=t.currentTarget.href.match(/entity\/(\w+)/)[1],i=t.currentTarget.href.match(/skin=(.*)/);return this.project=this.project||this.resourcePackLoader["default"],this.editModel(i&&i[1]||"",e),$("#model-editor .breadcrumb").empty(),!1},removeFile:function(t){var e=this,i=$(t.currentTarget),n=i.data("path"),o=this.folderpath.split("/").reduce(function(t,e){return e&&t[e]||t},this.directory);this.project.removeFile(n,function(t){$(".tab-pane.active .alert-warning").show(),$(".tab-pane.active .alert-warning .file-name").text(t.name);var n=o[t.name];delete o[t.name],e.notifications.showAlert("The file "+t.name+" was removed.","warning",t.undo&&function(){t.undo(),o[t.name]=n,e.showPath(e.folderpath)}),i.parent().hide("slow")})},onJsonEditorChange:function(){},load:function(t){var e=t.currentTarget.files[0];e&&this.resourcePackLoader.importZip(e,this.notifications.showProgress(e.name),this.notifications.showAlert.bind(this))},importDirectory:function(t){this.resourcePackLoader.importDirectory(t.currentTarget.files,this.notifications.showProgress("importing"),this.notifications.showAlert.bind(this))},showNewProjectPanel:function(t){$(".new-project-panel").show(),$(".new-project-panel input").val(""),$(".new-project-name").focus()},newProject:function(t){var e=$(t.currentTarget).parents(".panel"),i=e.find(".new-project-name"),n=i.val(),o=e.find(".new-project-author").val(),s=e.data("storage");return n?(this.resourcePackLoader.create(n,{author:o,date:(new Date).toUTCString()},s),$(".new-project-panel").hide()):i.focus(),!1},zoom:function(t){var e="in"==t.currentTarget.dataset.zoom?{1:2,2:3,3:4,4:6,6:12,12:12}:{1:1,2:1,3:2,4:3,6:4,12:6};$("#texturepack-page").find("[class|=col]").each(function(){$(this).attr("class",$(this).attr("class").replace(/(col-\w+-)(\d+)/g,function(t,i,n){return i+e[n]}))})},searchResourcePack:function(t){var e={},i=!1,n=$(t.currentTarget).find("input").val().toLowerCase().split(" ");if(t.preventDefault(),t.stopPropagation(),this.project||this.showProject(this.resourcePackLoader["default"]),n){if(this.project.filelist.forEach(function(t){var o=file_name(t).toLowerCase();n.every(function(t){return o.indexOf(t)>=0})&&(i=!0,e[o]=assets_path(t))}),!i)for(var o in this.directories)n.every(function(t){return o.indexOf(t)>=0})&&(e[o]=this.directories[o]);this.showFolder(e,"")}},showDropZone:function(t){var e=$(t.target).hasClass("dropzone")?$(t.target):$(t.target).parents(".dropzone");switch(t.type){case"dragenter":e.addClass("drophere").data("dragenter",Number(e.data("dragenter")||0)+1);break;case"dragleave":case"drop":var i=Number(e.data("dragenter"))-1;e.data("dragenter",i),0==i&&e.removeClass("drophere")}return!1},dropZip:function(t){for(var e=t.originalEvent.dataTransfer,i=0;i<e.files.length;i++){var n=e.files[i];"zip"==n.name.split(".").pop()?this.resourcePackLoader.importZip(n,this.notifications.showProgress(n.name),this.notifications.showAlert.bind(this)):this.notifications.showAlert("Try dropping a .zip resourcepack")}},importFile:function(t){function e(){0==--n&&s.updateFolder()}var i=t.currentTarget.files||t.originalEvent.dataTransfer.files,n=i.length,o=this.folderpath,s=this;this.audioEditor.resourcepack=this.project;for(var r=0;r<i.length;r++)/^audio/.test(i[r].type)?this.audioEditor.importAudioFile(o,i[r],e):this.project.importFile(o,i[r],e)},shareDropboxResourcePack:function(t){var e=t.currentTarget.dataset.zip;this.project.share(function(t){location.href=e?t+"?dl=1":t})},exportToDropbox:function(){var t=this;this.project.exportToDropbox(this.resourcePackLoader.dropbox,this.notifications.showProgress("exporting"),function(){t.project.rename(t.project.name+" (old copy)"),setView({tab:"texturepacks-dropbox"})})},resourcepackRename:function(){var t=prompt("New name",this.project.name);t&&this.project.rename(t,function(){location.reload()})},zipResourcePack:function(){var t=this.project.name+".zip";this.project.zip(function(e,i){downloadFile(e,i,t)},this.notifications.showProgress(this.project.name+".zip"))},confirmSave:function(t){var e=function(t){var e=$("#save-confirm");e.button("loading"),this.modelEditor.saveManager.saveContent(t,function(){e.button("reset"),$(".save-filelist tr:has(:checked)").addClass("success"),$("#save-resource").modal("hide")},function(t){e.button("reset"),alert("Something went wrong while saving.\n"+t)})}.bind(this);switch(this.view.tab){case"model-editor":this.modelEditor.confirmSave();break;case"image-editor":this.imageEditor.confirmSave();break;case"json-editor":e("data:text/plain;base64,"+btoa(unescape(encodeURIComponent(this.jsoneditor.getText()))));break;case"sounds-editor":e("data:text/plain;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(this.audioEditor.getSounds())))));break;case"audio-editor":$("#save-confirm").button("loading");var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=this.notifications.showError,this.audioEditor.getAudioEncodedAsOgg(i.readAsDataURL.bind(i));break;case"text-editor":e("data:text/plain;base64,"+btoa(unescape(encodeURIComponent($("#text-editor-area").val()))))}},editTechne:function(t){var e=t.currentTarget.dataset.techne||$("#techne-id").val().split("/").pop();$("#techne-id").val("techne.zeux.me/"+e),this.editModel("","Techne:"+e),$("#model-editor .breadcrumb").empty()},techneSearch:function(t){return this.showTechne($("#techne-search-term").val(),$(t.currentTarget).data("page")),!1},openTechne:function(t){var e=t.currentTarget.files[0],i=new TechneModel,n=this;i.fromTechne(e,function(){n.modelEditor.entityModelLoader.setModel(i.name,i),n.editModel("",i.name)}),t.currentTarget.parentElement.reset()},onFileSystemError:function(t){this.notifications.showAlert(t&&t.message+"<br> An error occurred while accessing the file system. It does not work in incognito mode and you need to allow Nova Skin to use it when prompted by the browser to allow the website to store files on your computer.","danger"),console.error(t)},onGalleryItemClick:function(t){var e=this;$(t.currentTarget).spin(),ImageUtils.loadImage(t.currentTarget.dataset.url,function(i,n,o){e.modelEditor.layers.add({image:i,title:o,width:e.modelEditor.modelview.activeModel.materials.texture.width,height:e.modelEditor.modelview.activeModel.materials.texture.height}),$(t.currentTarget).spin(!1)},null,t.currentTarget.title)},onGalleryQuery:function(t){this.gallery.search(t.currentTarget.dataset)},onGallerySearch:function(){return this.gallery.search({query:$("#gallery-search-form .search-query").val()}),!1},onTextEditorChange:function(t){var e=t.currentTarget;e.style.height=e.scrollHeight+50+"px"},onFullscreenClick:function(){var t=$(".tab-editor > .active .fullscreen-element").get(0);t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},sideBarHidden:function(){$(".row_fixed .middle_column").addClass("expand"),this.modelEditor.updateCanvasSize()},sideBarShown:function(){$(".row_fixed .middle_column").removeClass("expand"),this.modelEditor.updateCanvasSize()},resizeCanvas:function(){var t=window.innerHeight==screen.height?window.innerHeight:window.innerHeight-70;$("#model-editor").height(t),$(this.canvas).is(":visible")&&(this.canvas.width=$(this.canvas).width(),this.canvas.height=$(this.canvas).height(),this.modelview.onWindowResize())},onPlayAudioError:function(t){this.notifications.showAlert(t,"danger")},editSoundsAsJson:function(){this.setView({tab:"json-editor",type:"json",filepath:this.view.filepath}),this.jsoneditor.set(this.audioEditor.getSounds()),this.jsoneditor.setMode("tree"),this.jsoneditor.setName(file_name(this.view.filepath,!0)),this.jsoneditor.expandAll()},onInitialFileInputChange:function(t){var e=t.currentTarget.files[0],i=URL.createObjectURL(e),n=new FileReader,o=this;switch(this.notifications.showLoading(),e&&e.name.split(".").pop()){case"jpeg":case"jpg":case"png":this.resourcePackLoader.get("default",function(t){var i=t.filelist.filter(function(t){return t.indexOf("assets/minecraft/textures/")>=0||t.indexOf("assets/minecraft/models/")>=0}),n=file_name(e.name,!0).toLowerCase(),s=URL.createObjectURL(e),r=new TemporaryResourcePack("~resourcepack");i.forEach(function(t){r.addFile(t,s)}),o.showProject(r);var a,h={};i.forEach(function(t){file_name(t).toLowerCase().indexOf(n)>=0&&(h[file_name(t)]=t,a=!0)}),a||(h.mobs=o.directories.assets.minecraft.textures.entity,h.block=o.directories.assets.minecraft.models.block,h.item=o.directories.assets.minecraft.models.item),h[e.name]=e.name,r.addFile(e.name,s),o.showFolder(h,"assets/minecraft"),o.notifications.hideLoading()});break;case"ogg":case"mp4":case"mp3":case"wav":this.setView({tab:"audio-editor"}),this.audioEditor.resourcepack=this.project,this.audioEditor.editAudioURL(i,e.name);break;case"txt":case"lang":case"properties":this.setView({tab:"text-editor",type:"text"}),n.onload=function(t){$("#text-editor-area").val(t.target.result),o.notifications.hideLoading()},n.readAsText(e);break;case"json":case"mcmeta":this.setView({tab:"json-editor",type:"json"});var s=this.jsoneditor;n.onload=function(t){
s.set(JSON.parse(t.target.result)),s.setMode("tree"),s.setName(e.name),s.expandAll(),o.notifications.hideLoading()},n.readAsText(e);break;case"tcn":this.events.openTechne.call(this,t);break;case"zip":this.setView({tab:"texturepacks"}),this.resourcePackLoader.importZip(e,this.notifications.showProgress(e.name),this.notifications.showAlert.bind(this)),this.notifications.hideLoading();break;default:this.notifications.showAlert("We are not able to edit this file type")}t.currentTarget.parentElement.reset()}}};var NovaSkinEvents={onLayersChange:function(t){if((t.addLayer||t.removeLayer)&&this.changes.register({addedLayer:t.addLayer,removedLayer:t.removeLayer,undo:NovaSkinEvents.undoLayers.bind(this)}),t.activeLayer&&this.drawtools.setDrawable(this.layers.working()),t.layersBeforeResize)return void this.changes.register({layersBeforeResize:t.layersBeforeResize,width:t.width,height:t.height,undo:NovaSkinEvents.undoResizeLayer.bind(this)});if(t.layerModified){var e=t.tool||this.drawtools.getSelectedTool();e.pixelStack.length>0?(this.changes.register({pixels:e.pixelStack,layer:this.drawtools.drawable,undo:NovaSkinEvents.undoDrawPixels.bind(this)}),e.pixelStack=[]):this.changes.register({layerSnapshot:t.layerModified,undo:NovaSkinEvents.undoLayerSnapshot.bind(this)})}t.orderChange&&this.changes.register({layerOrder:this.layers.container.children(".layer"),undo:NovaSkinEvents.undoLayersOrder.bind(this)}),t.resized&&($(".resolutions .active").removeClass("active"),$(".resolutions [data-width="+t.resized.width+"]").parent().addClass("active"),$(".current-resolution").text(t.resized.width+"x"+t.resized.height),this.modelview.activeModel.materials.texture.width!=t.resized.width&&(this.modelview.activeModel.materials.texture.width=t.resized.width,this.modelview.activeModel.materials.texture.height=t.resized.height,this.modelview.activeModel.materials.texture.scale=t.resized.width/this.modelview.activeModel.model.textureWidth(),this.textureview.paintSkin(),this.modelview.rebuild())),this.textureview.updateTexturePreview(),this.modelview.redraw()},onTextureUpdate:function(t){t.textureupdated&&this.modelview.updateTexture()},onKeyDown:function(t){var e=89,i=90,n=76,o=68,s=32,r=27,a=37,h=38,l=39,d=40,c=107,u=109,g=83;if(!$(t.target).is("input"))switch(t.keyCode){case r:$(".colors").colorpicker("close");break;case i:t.ctrlKey&&(t.shiftKey?this.redo():this.undo());break;case e:t.ctrlKey&&this.redo();break;case n:$("#lighter").click();break;case o:$("#darker").click();break;case s:$("#colorpicker").click(),this.setCursor("colorpicker"),t.preventDefault();break;case a:this.modelview.cameraControls.rotateLeft(-Math.PI/12),this.modelview.redraw();break;case l:this.modelview.cameraControls.rotateLeft(Math.PI/12),this.modelview.redraw();break;case h:this.modelview.cameraControls.rotateUp(-Math.PI/12),this.modelview.redraw();break;case d:this.modelview.cameraControls.rotateUp(Math.PI/12),this.modelview.redraw();break;case c:this.modelview.cameraControls.dollyIn(1.5);break;case u:this.modelview.cameraControls.dollyOut(1.5);break;case g:t.ctrlKey&&($("#save-button").click(),t.preventDefault());break;case 48:this.drawtools.select(9);break;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.drawtools.select(t.keyCode-49);break;default:return}},onCanvasMouseDown:function(t){var e=this.pickFromMouseEvent(t);switch(this.modelview.cameraControls.noRotate=Boolean(e||this.isFlat()),this.modelview.cameraControls.noRotate||this.setCursor("rotate"),this.enforcedMode||t.button){case"draw":case 0:if(!e)break;(this.drawtools.getSelectedTool().needCliping||this.modelview.selected)&&this.layers.clip(this.textureview.areaAt(e.x,e.y)),this.drawtools.apply(e.x,e.y,e.x,e.y),this.initialPick=e,this.lastPick=e,$(document).on("mousemove.draw",NovaSkinEvents.onMouseMoveDraw.bind(this)).on("touchmove.draw",NovaSkinEvents.onTouchMoveDraw.bind(this)),this.textureview.paintSkin();break;case"colorpicker":case 1:if(!e)break;var i=this.drawtools.getSelectedTool();i.setColor(i.pickColor(e.x,e.y));break;case"select":case 2:case"pose":this.selectStartPosition={x:t.pageX,y:t.pageY}}$(document).one("mouseup.novaskin",NovaSkinEvents.onCanvasMouseUp.bind(this)).one("touchend.novaskin",NovaSkinEvents.onCanvasTouchEnd.bind(this)).one("mouseup touchend",function(){$(document).off("mousemove.draw").off("touchmove.draw").off("touchmove.zoom").off("touchmove.start").off("mouseup.novaskin").off("touchend.novaskin")})},onCanvasTouchStart:function(t){var e=t.originalEvent,i=this.pickFromMouseEvent(e.changedTouches[0]);if(this.modelview.cameraControls.enabled=!0,i&&($(document).on("touchmove.zoom",NovaSkinEvents.onTouchMoveZoom.bind(this)),NovaSkinEvents.onTouchMoveZoom.call(this,t)),this.highlighted&&i&&1==e.touches.length)$(document).one("touchmove.start",NovaSkinEvents.onCanvasTouchMoveStart.bind(this)),this.modelview.setGrid(!!i);else{var n=e.changedTouches[0];n.button="select",NovaSkinEvents.onCanvasMouseDown.call(this,n)}},onCanvasTouchMoveStart:function(t){t.originalEvent.touches[0].button="draw",NovaSkinEvents.onCanvasMouseDown.call(this,t.originalEvent.touches[0])},onCanvasMouseMove:function(t){var e=$(this.modelview.canvas).offset(),i=(t.pageX-e.left,t.pageY-e.top,this.pickFromMouseEvent(t)),n={colorpicker:["colorpicker","colorpicker"],select:["rotate","default"],pose:["rotate","cross"],"default":["rotate","tool"]};this.modelview.setGrid(!!i),this.setCursor(n[this.enforcedMode||"default"][i||this.isFlat()?1:0])},onMouseMoveDraw:function(t){var e=this.pickFromMouseEvent(t);if(e&&(this.lastPick.x!=e.x||this.lastPick.y!=e.y)){var i=distance([this.initialPick.origin.x,this.initialPick.origin.y],[e.origin.x,e.origin.y]);this.layers.clearWorkingLayer(),this.drawtools.apply(this.initialPick.x,this.initialPick.y,e.x,e.y,i),this.textureview.paintSkin(),this.lastPick=e}},onTouchMoveDraw:function(t){var e=t.originalEvent;1==e.touches.length&&NovaSkinEvents.onMouseMoveDraw.call(this,e.touches[0]),t.preventDefault()},onTouchMoveZoom:function(t){var e=t.originalEvent;t.preventDefault(),this.highlighted||(this.modelview.grid.zoom={x:e.changedTouches[0].pageX-$(t.target).offset().left,y:e.changedTouches[0].pageY-$(t.target).offset().top,scale:3})},onCanvasMouseUp:function(t){var e=this.pickFromMouseEvent(t),i=this.selectStartPosition&&distance([t.pageX,t.pageY],[this.selectStartPosition.x,this.selectStartPosition.y])<8;switch(this.enforcedMode||t.button){case"draw":case 0:this.layers.combineWorkingLayer(),this.layers.unclip(),this.textureview.updateTexturePreview();break;case"colorpicker":$("#colorpicker, .colorpicker").removeClass("active"),this.setMode("draw");break;case"select":case 2:i&&(e&&0==this.travelByObjects.length&&e.intersects&&e.intersects.forEach(function(t){this.travelByObjects.indexOf(t.object)==-1&&t.object!=this.highlighted&&this.travelByObjects.length<2&&this.travelByObjects.push(t.object)},this),this.highlight(this.travelByObjects.pop()));break;case"pose":if(i){var n;e&&e.intersects.some(function(t){return t.object.controls&&(n=t.object),n}),this.showPoseControls(n)}}},onCanvasTouchEnd:function(t){var e=t.originalEvent,i=this.pickFromMouseEvent(e.changedTouches[0]);this.highlighted&&i&&0==e.touches.length?(e.changedTouches[0].button="draw",NovaSkinEvents.onCanvasMouseUp.call(this,e.changedTouches[0])):(e.changedTouches[0].button="select",NovaSkinEvents.onCanvasMouseUp.call(this,e.changedTouches[0])),this.modelview.grid.zoom=!1,t.preventDefault()},onMouseWheel:function(t){var e=this.pickFromMouseEvent(t),i=t.shiftKey||t.altKey;!Boolean(e)||i?(t.shiftKey=!0,this.modelview.cameraControls.onMouseWheel(t,!1)):NovaSkinEvents.rotateColorSlot.call(this,t),t.preventDefault()},rotateColorSlot:function(t){t.deltaY<0?this.drawtools.nextSlot():this.drawtools.previousSlot(),t.preventDefault()},onMouseEnter:function(t){},onMouseLeave:function(t){},onPanAreaMouseDown:function(t){t.shiftKey=!0,t.panBy=-400/this.modelview.camera.fov,this.modelview.cameraControls.enabled=!0,this.modelview.cameraControls.onMouseDown(t)},onPanMouseWheel:function(t){t.shiftKey=!0,this.modelview.cameraControls.enabled=!0,this.modelview.cameraControls.onMouseWheel(t),t.preventDefault()},preventDefault:function(t){return t.preventDefault(),!1},onChangeResolution:function(){var t=$(this).val().split(",");this.changeResolution(Number(t[0]),Number(t[1]))},onChangeResolutionClick:function(t){this.changeResolution(t.currentTarget.dataset.width)},onLoadImage:function(t){for(var e,i=this,n=0;e=(t.originalEvent.dataTransfer||t.currentTarget).files[n];n++)if(/gif$/.test(e.name))ImageUtils.loadGifFrames(e,function(t,e,n){i.layers.add({image:gifcanvas,title:t.replace(".gif","#"+e),width:i.modelview.activeModel.materials.texture.width,height:i.modelview.activeModel.materials.texture.height})});else{var o=URL.createObjectURL(e);ImageUtils.loadImage(o,function(t,e,n){i.layers.add({image:t,title:n,width:i.modelview.activeModel.materials.texture.width,height:i.modelview.activeModel.materials.texture.height})},null,e.name)}return t.preventDefault(),!1},onRotateLeftClick:function(){this.modelview.cameraControls.rotateLeft(Math.PI/8)},onRotateRightClick:function(){this.modelview.cameraControls.rotateLeft(-Math.PI/8)},onZoomInClick:function(){this.modelview.cameraControls.dollyIn(1.5)},onZoomOutClick:function(){this.modelview.cameraControls.dollyOut(1.5)},fitIntoView:function(){this.modelview.fitModelInVisibleArea()},onNewLayerClick:function(){this.layers.add({filename:"layer"})},onCloneLayerClick:function(){this.layers.clone()},onToggleGridClick:function(t){var e=!$(t.currentTarget).hasClass("active"),i=$(t.currentTarget).data("type");this.modelview.grid[i]=e,this.modelview.updateGrid(),this.modelview.redraw()},onToggleModeClick:function(t){var e=$(t.currentTarget);this.setMode(e.data("type"))},onPartsChange:function(t){var e=$(t.currentTarget).val();this.filterPart(e),"all"!=e&&this.modelview.activeModel.box[e]&&this.filterPart(e),this.modelview.redraw()},onShowEffects:function(t){this.resetFilterValues()},onEffectsFilterChange:function(t){var e=$(t.currentTarget),i=e.data("filter"),n=e.val();this.filters[i]=n,e.find("~ .FilterValue").html(n),this.applyEffects()},applyFilters:function(){this.layers.combineWorkingLayer(),this.textureview.updateTexturePreview(),this.resetFilterValues()},cancelFilters:function(){this.resetFilterValues(),this.applyEffects()},onShowRecordGif:function(t){var e=$("#gif").toggle().is(":visible");$(t.currentTarget).toggleClass("active",e)},onSelectedToolChange:function(t){this.setCursor("tool"),"select"==this.enforcedMode&&($("#select, .part-select-tool").removeClass("active"),this.setMode("draw")),$("#selected-tool").attr("src",this.drawtools.getSelectedTool().getPictureSrc())},onEditToolClick:function(){},toogleColorPicker:function(){this.setMode("colorpicker"),$(event.currentTarget).addClass("active")},setSelectMode:function(t){var e=$(t.currentTarget);this.setMode(e.button("toggle").hasClass("active")?"select":"draw")},setAnimating:function(t){this.setAnimating(!$(t.currentTarget).hasClass("active"))},generateGif:function(){var t=this.gifRecorder.frames.length,e=this;if(t<10||confirm(t+" frames, this can take a while, continue?")){this.gifRecorder.delay=Number(prompt("Delay between images? (in milliseconds)",30));var i=$('<li><a href="#" target="_blank" onclick="window.open(this.href, \'GifResult\',\'resizable,scrollbars,status\'); return false;"> generating gif </a></li>').appendTo("#gifs").find("a");this.gifRecorder.encode(function(t){var n=URL.createObjectURL(dataURLToBlob(t));i.attr("href",n).html('<img src="'+t+'" height="32"> open gif'),open(n,"GifResult","resizable,scrollbars,status"),$("#gif-status").empty().spin(!1),e.gifRecorder.clear()}),$("#gif-status").spin({color:"#333"})}},recordRotate:function(){this.record360Gif(36)},updateGifStatus:function(){$("#gif-status").text(this.gifRecorder.frames.length||"")},onModelOptionChange:function(t){this.modelview.activeModel.model[t.currentTarget.name]="checkbox"==t.currentTarget.type?t.currentTarget.checked:Number(t.currentTarget.value),this.animateModel(0,0)},undoDrawPixels:function(t){var e=new DrawingTool(this.drawtools);this.layers.setLayer(t.layer),t.pixels.reverse().forEach(function(t){e.setPixel(t.x,t.y,t.color)}),this.layers.onChange({layerModified:t.layer,tool:e}),this.textureview.updateTexturePreview()},undoLayerSnapshot:function(t){this.layers.setLayer(t.layerSnapshot),this.layers.onChange({layerModified:t.layerSnapshot}),t.layerSnapshot.ctx.clearRect(0,0,t.layerSnapshot.canvas.width,t.layerSnapshot.canvas.height),t.layerSnapshot.ctx.putImageData(t.snapshot,0,0),t.layerSnapshot.imageData=t.snapshot,this.textureview.updateTexturePreview()},undoLayers:function(t){t.addedLayer?this.layers.remove(t.addedLayer):(this.changes.register({addedLayer:t.removedLayer,undo:NovaSkinEvents.undoLayers.bind(this)}),$(t.removedLayer).removeClass("hidden"),this.layers.setLayer(t.removedLayer),this.layers.updateLayerList()),this.textureview.updateTexturePreview()},undoLayersOrder:function(t){},undoResizeLayer:function(t){this.changes.register({width:this.layers.disposable.canvas.width,height:this.layers.disposable.canvas.height,layersBeforeResize:this.layers.layers.map(function(t){var e=$(t).data();return{canvas:e.canvas,ctx:e.ctx,imageData:e.imageData,layer:t}}),undo:NovaSkinEvents.undoResizeLayer.bind(this)}),t.layersBeforeResize.forEach(function(t){$(t.layer).data({canvas:t.canvas,ctx:t.ctx,imageData:t.imageData}),$(t.layer).find("canvas").replaceWith(t.canvas)}),this.layers.createDisposable(t.width,t.height),this.layers.onChange({resized:{width:t.width,height:t.height}}),this.textureview.updateTexturePreview()},onChangesMade:function(){$("#undo, .undo").toggleClass("disabled",0==this.changes.history.length),$("#redo, .redo").toggleClass("disabled",0==this.changes.undone.length)},onSelectedPartChange:function(t){var e=this.modelview.activeModel.box[$(t.currentTarget).val()];this.highlight(e)},onPoseChange:function(t){var e={};$("form.pose input").each(function(){return e[this.name]=Number(this.value)}),this.pose(e)},onApplyMenuClick:function(){var t=this,e=this.saveManager.resourcePackLoader.resourcepacks["!novaskin"];if(e){if("Block"==this.modelview.activeModel.model.name)return $('#save-button, #save-resource a[href="#save-in-project"]').click(),$("#texturepack-list").ddslick("select",{index:"0"}),!1;this.saveManager.isTexture=!0,this.saveManager.showTexturePackSaveFiles(e);var i=new BatchRender({width:128,height:128});$(".render-preview").each(function(){var e=$(this).data("path"),n=this;t.resourcePackLoader["default"].loadImage(e,function(o){t.entityModelLoader.loadModel(t.modelview.activeModel.model.name,function(t){i.render({textureList:[{name:file_name(e),filename:e,imageurl:o.src,element:n}],model:t,grid:{},onRender:function(t,e,i){$(e.width>1?e:o).addClass("img-responsive").appendTo(n)}})})})}),$(".save-filelist input").typeahead({source:this.resourcePackLoader["default"].filelist.filter(function(t){return/textures/.test(t)})}),$(".save-filelist .input-group").click(function(t){if(!$(t.target).hasClass("btn"))return!1})}else"https:"==location.protocol?$(".apply-menu").html('<li><a href="http://minecraft.novaskin.me/resourcepacks">Switch to http to be able to save textures to the minecraft folder</a></li>'):$(".apply-menu").html('<li><a href="https://storage.googleapis.com/skineditor.appspot.com/public/NovaSkinResourcepackInstaller.exe">Install novaskin resourcepack <span class="badge">required</span></a></li>')},onApplyTextureClick:function(t){var e=t.currentTarget,i=$(e).attr("href"),n=this.saveManager.resourcePackLoader.resourcepacks["!novaskin"];return i&&$(".apply-path").val(i.substring(1)),i=$(".apply-path").val(),n.save(i,this.textureview.canvas.toDataURL(),function(){$(".apply-menu").html('<li class="col-sm-12"><div class="alert alert-success" role="alert"><strong>Texture saved!</strong> <p><img src="/images/enable-resourcepack.jpg" class="img-thumbnail"></p> <p>Open minecraft and enable the novaskin resourcepack.</p> <p>Press F3+T in game to reload the textures.</p> <p><strong>saved as:</strong> '+i+"</p></div></li>")},function(){$(".apply-menu").html('<li class="col-sm-12"><div class="alert alert-danger" role="alert"><strong>Error!</strong> Could not save texture as '+i+"</p></div></li>")}),!1},onCanvasDragOver:function(t){$(t.currentTarget).addClass("dragover")},onCanvasDragEnd:function(t){$(t.currentTarget).removeClass("dragover")},onCopy:function(t){this.drawtools.clipboard.copy(this.highlighted.$cube)},onPaste:function(t){t.currentTarget.dataset.newlayer&&this.layers.add({filename:"clipboard"}),this.drawtools.clipboard.paste(this.highlighted.$cube),this.textureview.updateTexturePreview()},onClipClick:function(t){this.drawtools.clipboard.setClip(t.currentTarget)},onFlipTextureClick:function(t){this.drawtools.clipboard.flip(this.highlighted.$cube),this.layers.combineWorkingLayer(),this.textureview.updateTexturePreview()},onClearTextureClick:function(t){this.drawtools.clipboard.clear(this.highlighted.$cube),this.layers.combineWorkingLayer(),this.textureview.updateTexturePreview()},onRotateTextureClick:function(t){this.drawtools.clipboard.rotate(this.highlighted.$cube,t.currentTarget.dataset.direction),this.layers.combineWorkingLayer(),this.textureview.updateTexturePreview()},onCanvasResize:function(){this.updateCanvasSize()}};DrawingTools.prototype={onSelectedToolChange:eventListener,setupTools:function(){var t=this;this.toolByName={},this.tools=this.container.find("[data-tool]").map(function(e){var i=$(this).data("tool"),n=new DrawingTools.tools[i](t,this,$(this).data());return n.onChange=t.onToolChange.bind(t),n.name=this.id,n.element=this,t.toolByName[n.name]=n,$(this).data("index",e),n}).toArray(),this.update(),this.select(0),this.container.on("click","[data-tool]",function(e){var i=$(this).data("index");i==t.toolIndex?t.getSelectedTool().edit():t.select(i)})},updateOnChanges:function(t,e){this.updateChain.push({tool:e,update:t.update.bind(t)})},onToolChange:function(t){this.updateChain.forEach(function(e){e.tool==t.name&&e.update()}),this.onSelectedToolChange()},getSelectedTool:function(){return this.tools[this.toolIndex]},getTool:function(t){return this.toolByName[t]},select:function(t){this.toolIndex=t;var e=this.getSelectedTool();e.select(),$(e.element).parents(".btn").click(),this.onSelectedToolChange(e)},nextSlot:function(){this.select((this.toolIndex+1)%this.tools.length)},previousSlot:function(){this.select(this.toolIndex>0?this.toolIndex-1:this.tools.length-1)},update:function(t){this.tools.forEach(function(e){e.update(t)})},apply:function(t,e,i,n,o){this.drawable.modified=!0,this.getSelectedTool().apply(t,e,i,n,o||0)},setDrawable:function(t){this.drawable=t},setTextureAreas:function(t){this.textureAreas=t}},DrawingTools.tools={pencil:DrawingToolPencil,floodfill:DrawingToolFloodFill,line:DrawingToolGradientLine,rectangle:DrawingToolGradientRectangle,ellipsis:DrawingToolGradientEllipsis,eraser:DrawingToolEraser},DrawingTool.prototype={getCursor:function(){return"cross"},getPictureSrc:function(){return"/images/pencil.png"},pickColor:function(t,e){var i=this.tools.drawable.ctx.getImageData(t,e,1,1);return[i.data[0],i.data[1],i.data[2],i.data[3]]},drawPixel:function(t,e,i){var n=this.tools.drawable.disposable,o=4*(t+e*n.imageData.width);0==n.imageData.data[o+3]&&this.pixelStack.push({x:t,y:e,color:this.pickColor(t,e)}),n.imageData.data[o+0]=i[0],n.imageData.data[o+1]=i[1],n.imageData.data[o+2]=i[2],n.imageData.data[o+3]=i[3],n.ctx.putImageData(n.imageData,0,0,t,e,1,1)},setPixel:function(t,e,i){var n=this.tools.drawable,o=4*(t+e*n.imageData.width),s=this.pickColor(t,e);n.imageData.data[o+0]=i[0],n.imageData.data[o+1]=i[1],n.imageData.data[o+2]=i[2],n.imageData.data[o+3]=i[3],n.ctx.putImageData(n.imageData,0,0,t,e,1,1),this.pixelStack.push({x:t,y:e,color:s})},setColor:function(t){},update:function(){},select:function(){},edit:function(){},needCliping:!1},DrawingToolPencil["extends"](DrawingTool,{onChange:eventListener,layout:{map:[0,0,1,3],bar:[1,0,1,3],hex:[2,0,1,1],inputs:[2,1,1,2],randomize:[0,3,3,1],brush:[0,4,3,1]},setupColorPicker:function(t){var e=this;this.colorPickerPanel=$("<div>").appendTo("#color-panel"),this.colorPickerPanel.colorpicker({alpha:!0,picture:!0,showSwatches:!0,buttonColorize:!0,parts:["header","map","bar","hex","inputs","preview","swatches","brush","randomize","footer"].filter(function(t){return t in e.layout}),layout:this.layout,onSelect:function(i,n,o){if(o.brush){var s=o.brush.brush.toDataURL(),r=o.img||(o.img=new Image);r.src=s,o.brush.image=r,t.css("background-image","url("+s+")"),t.css("background-color","transparent")}else t.css("background-color",o.color.toRGBA());e.onChange(e)},onClose:function(t,e,i){}}).colorpicker("setColor",t.val()),this.colorpicker=this.colorPickerPanel.data("vanderlee-colorpicker")},select:function(){$("#color-panel > div").hide(),this.colorPickerPanel.show()},edit:function(t){t?this.colorPickerPanel.show():this.select(),$("#show-color-tab").click(),$("#toggle-right").hasClass("display")||$("#toggle-right").click();var e=$("#collapse-color").collapse("toggle")[0];e&&e.scrollIntoViewIfNeeded()},getColor:function(t){var e=0!=t&&this.colorpicker.randomize||0,i=this.getHSV(),n=HSV_RGB(i[0],Math.min(1,Math.max(0,i[1]+(Math.random()-.5)*e*.1)),Math.min(1,Math.max(0,i[2]+(Math.random()-.5)*e*.1)));return[Math.round(255*n[0]),Math.round(255*n[1]),Math.round(255*n[2]),Math.round(255*i[3])]},setColor:function(t){this.colorpicker.setColor("rgb("+t.slice(0,3).join(",")+")"),this.colorpicker.color.a=t[3]/255,this.colorpicker._change(),this.onChange(this)},getRGBA:function(){return this.colorpicker.color.toRGBA()},getHSV:function(){var t=this.colorpicker.color;return[6*t.h,t.s,t.v,t.a]},getPictureSrc:function(){return this.cursorColor!=this.getRGBA()&&(this.cursorCtx.clearRect(0,0,16,16),this.cursorCtx.drawImage(this.mask,0,0,16,16),this.cursorCtx.globalCompositeOperation="source-in",this.cursorCtx.fillStyle=this.cursorColor=this.getRGBA(),this.cursorCtx.fillRect(0,0,16,16),this.cursorCtx.globalCompositeOperation="destination-over",this.cursorCtx.drawImage(this.image,0,0,16,16),this.picture=this.cursorCanvas.toDataURL()),this.picture},getCursor:function(){return'url("'+this.getPictureSrc()+'") 0 15,default'},apply:function(t,e,i,n){var o=this.colorpicker.brush,s=this.tools.drawable.ctx,r=this.tools.drawable.disposable,a=this.getColor(),h=o&&o.type||"pixel",l=this.colorpicker.getBrushSize();switch(h){case"pixel":for(var d=l,c=Math.floor(d/2),u=0;u<d;u++)for(var g=0;g<d;g++){var f=i-c+u,p=n-c+g;s.isClipped&&!s.isPointInPath(f,p)||this.drawPixel(f,p,a)}break;case"line":r.ctx.beginPath();var m=l%2/2;r.ctx.moveTo(t+m,e+m),r.ctx.lineTo(i+m,n+m),r.ctx.lineWidth=l,r.ctx.lineCap="round",a[3]/=255,r.ctx.strokeStyle="rgba("+a.join(",")+")",r.ctx.stroke(),r.dirty=!0;break;default:r.ctx.lineCap="butt",r.ctx.brushedLine(t,e,i,n,o,[l]),r.dirty=!0}}}),DrawingToolFloodFill["extends"](DrawingTool,{update:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalCompositeOperation="source-over",this.ctx.drawImage(this.mask,0,0,32,32),this.ctx.globalCompositeOperation="source-in",this.ctx.fillStyle=this.tools.getTool(this.colorSource).getRGBA(),this.ctx.fillRect(0,0,32,32),this.ctx.globalCompositeOperation="destination-over",this.ctx.drawImage(this.image,0,0,32,32)},edit:function(){this.getColorSource().edit()},getPictureSrc:function(){return this.canvas.toDataURL()},getCursor:function(){return'url("'+this.getPictureSrc()+'") 0 '+(this.canvas.height-1)+",default"},setColor:function(t){this.getColorSource().setColor(t)},getColorSource:function(){return this.tools.getTool(this.colorSource)},apply:function(t,e,i,n,o){function s(t){var e=t%y/4,i=t/y|0;return 0==h[t+f]&&a[t+c]>=b.r[0]&&a[t+c]<=b.r[1]&&a[t+u]>=b.g[0]&&a[t+u]<=b.g[1]&&a[t+g]>=b.b[0]&&a[t+g]<=b.b[1]&&a[t+f]>=b.a[0]&&a[t+f]<=b.a[1]&&(!m.isClipped||m.isPointInPath(e,i))}function r(t){h[t+c]=p[c],h[t+u]=p[u],h[t+g]=p[g],h[t+f]=p[f]}for(var a=this.tools.drawable.imageData.data,h=this.tools.drawable.disposable.imageData.data,l=this.pickColor(t,e),d=this.pickColor(i,n),c=0,u=1,g=2,f=3,p=this.getColorSource().getColor(),m=this.tools.drawable.ctx,v=this.tools.drawable.canvas.width,w=this.tools.drawable.canvas.height,y=4*v,R=[[t,e]],A=0,b={r:[Math.min(l[c],d[c])-2,Math.max(l[c],d[c])+2],g:[Math.min(l[u],d[u])-2,Math.max(l[u],d[u])+2],b:[Math.min(l[g],d[g])-2,Math.max(l[g],d[g])+2],a:[Math.min(l[f],d[f])-2,Math.max(l[f],d[f])+2]};R.length&&A++<v*w;){var x,L,C,k,E,B;for(x=R.pop(),L=x[0],C=x[1],k=4*(C*v+L);C-- >=0&&s(k);)k-=4*v;for(k+=4*v,++C,E=!1,B=!1;C++<w-1&&s(k);)r(k),L>0&&(s(k-4)?E||(R.push([L-1,C]),E=!0):E&&(E=!1)),L<v-1&&(s(k+4)?B||(R.push([L+1,C]),B=!0):B&&(B=!1)),k+=4*v}this.tools.drawable.disposable.ctx.putImageData(this.tools.drawable.disposable.imageData,0,0),this.tools.drawable.disposable.dirty=!0}}),DrawingToolGradientTool["extends"](DrawingTool,{createGradient:function(){var t=this.ctx.createLinearGradient(0,0,32,0);return t.addColorStop(0,this.getStartColor()),t.addColorStop(1,this.getEndColor()),t},getStartColor:function(){return this.tools.getTool(this.startColor).getRGBA()},getEndColor:function(){return this.tools.getTool(this.endColor).getRGBA()},getPictureSrc:function(){return this.cursorCtx.clearRect(0,0,32,32),this.cursorCtx.drawImage(this.canvas,12,0,16,16),this.cursorCtx.drawImage(this.image,0,0,16,16),this.cursorCanvas.toDataURL()},getCursor:function(){return'url("'+this.getPictureSrc()+'") 0 15,default'},setColor:function(t){this.tools.getTool(this.startColor).setColor(t),this.tools.getTool(this.endColor).setColor(t)},edit:function(){this.tools.getTool(this.startColor).edit(),this.tools.getTool(this.endColor).edit(!0)},needCliping:!0}),DrawingToolGradientLine["extends"](DrawingToolGradientTool,{update:function(){this.ctx.fillStyle=this.createGradient(),this.ctx.clearRect(0,8,this.canvas.width,14),this.ctx.fillRect(0,8,this.canvas.width,14),this.ctx.fillStyle="black",this.ctx.fillText("line",5,19),this.ctx.fillStyle="white",this.ctx.fillText("line",4,18)},getBrushSize:function(){return this.tools.getTool(this.startColor).colorpicker.getBrushSize()},apply:function(t,e,i,n){var o=this.tools.drawable.disposable.ctx,s=o.createLinearGradient(t,e,i,n);s.addColorStop(0,this.getStartColor()),s.addColorStop(1,this.getEndColor()),o.save(),o.beginPath(),o.rect(Math.min(t,i),Math.min(e,n),Math.abs(i-t)+1,Math.abs(n-e)+1),o.clip(),o.beginPath(),o.moveTo(t+.5,e+.5),o.lineTo(i+.5,n+.5),o.strokeStyle=s,o.lineWidth=this.getBrushSize(),o.stroke(),o.fillStyle=this.getStartColor(),o.fillRect(t,e,1,1),o.fillStyle=this.getEndColor(),o.fillRect(i,n,1,1),o.restore(),this.tools.drawable.disposable.dirty=!0}}),DrawingToolGradientRectangle["extends"](DrawingToolGradientTool,{update:function(){this.ctx.save(),this.ctx.rotate(-Math.PI/4),this.ctx.translate(-22,10),this.ctx.fillStyle=this.createGradient(),this.ctx.clearRect(0,-14,1.5*this.canvas.width,2*this.canvas.height),this.ctx.fillRect(0,-14,1.5*this.canvas.width,2*this.canvas.height),this.ctx.fillStyle="black",this.ctx.fillText("rectangle",1,19),this.ctx.fillStyle="white",this.ctx.fillText("rectangle",0,18),this.ctx.restore()},apply:function(t,e,i,n){var o=this.tools.drawable.disposable.ctx,s=o.createLinearGradient(t,e,i,n);s.addColorStop(0,this.getStartColor()),s.addColorStop(1,this.getEndColor()),o.save(),o.beginPath(),o.rect(Math.min(t,i),Math.min(e,n),Math.abs(i-t)+1,Math.abs(n-e)+1),o.clip(),o.fillStyle=s,o.fillRect(Math.min(t,i),Math.min(e,n),Math.abs(i-t)+1,Math.abs(n-e)+1),o.restore(),this.tools.drawable.disposable.dirty=!0}}),DrawingToolGradientEllipsis["extends"](DrawingToolGradientTool,{update:function(){this.ctx.save(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var t=this.ctx.createRadialGradient(this.canvas.width/2,this.canvas.height/2,0,this.canvas.width/2,this.canvas.height/2,15);t.addColorStop(0,this.getStartColor()),t.addColorStop(1,this.getEndColor()),this.ctx.fillStyle=t,this.ctx.scale(1,this.canvas.height/this.canvas.width),this.ctx.beginPath(),this.ctx.arc(this.canvas.width/2,this.canvas.width/2,this.canvas.width/2,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore(),this.ctx.fillStyle="black",this.ctx.fillText("ellipsis",1,19),this.ctx.fillStyle="white",this.ctx.fillText("ellipsis",0,18)},apply:function(t,e,i,n){function o(t,e,i,n,o){var s=.5522848,r=(n-e)/2*s,a=(o-i)/2*s,h=(e+n)/2,l=(i+o)/2;t.beginPath(),t.moveTo(e,l),t.bezierCurveTo(e,l-a,h-r,i,h,i),t.bezierCurveTo(h+r,i,n,l-a,n,l),t.bezierCurveTo(n,l+a,h+r,o,h,o),t.bezierCurveTo(h-r,o,e,l+a,e,l),t.closePath(),t.fill()}var s=this.tools.drawable.disposable.ctx,r={x:t,y:e},a=Math.abs(i-r.x),h=Math.abs(n-r.y),l=s.createRadialGradient(r.x,r.y,0,r.x,r.y,Math.max(a,h)/.8);l.addColorStop(0,this.getStartColor()),l.addColorStop(1,this.getEndColor()),s.save(),s.beginPath(),s.rect(Math.min(t,i),Math.min(e,n),2*a+1,2*h+1),s.clip(),s.fillStyle=l,o(s,Math.min(t,i)+.5,Math.min(e,n)+.5,Math.max(t,i)+.5,Math.max(e,n)+.5),s.restore(),this.tools.drawable.disposable.dirty=!0}}),DrawingToolEraser["extends"](DrawingTool,{apply:function(t,e,i,n){for(var o=this.tools.getTool(this.brushSource).colorpicker.getBrushSize(),s=this.tools.drawable.ctx,r=o,a=Math.floor(r/2),h=0;h<r;h++)for(var l=0;l<r;l++){var d=i-a+h,c=n-a+l;s.isClipped&&!s.isPointInPath(d,c)||this.setPixel(d,c,[0,0,0,0])}},getPictureSrc:function(){return this.picture||(this.cursorCtx.clearRect(0,0,16,16),this.cursorCtx.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,16,16),this.picture=this.cursorCanvas.toDataURL()),this.picture},getCursor:function(){return'url("'+this.getPictureSrc()+'") 4 13,default'},edit:function(){},needCliping:!0}),ClipboardTool.prototype={clear:function(t){var e=t.texture.x,i=t.texture.y,n=(t.texture.z,t.size.x),o=t.size.y,s=t.size.z,r=this.tools.drawable.canvas.width/this.tools.textureAreas.textureWidth();this.tools.drawable.ctx.clearRect((e+n)*r,i*r,(n+s)*r,s*r),this.tools.drawable.ctx.clearRect(e*r,(i+s)*r,2*(n+s)*r,o*r),this.tools.drawable.modified=!0},setClip:function(t){this.clip=t,$(".clipboard-list .active").removeClass("active"),$(t).addClass("active")},copy:function(t){var e=t.texture.x,i=t.texture.y,n=(t.texture.z,t.size.x),o=t.size.y,s=t.size.z,r=this.tools.drawable.canvas.width/this.tools.textureAreas.textureWidth(),a=this.tools.drawable.canvas,h=document.createElement("canvas"),l=h.getContext("2d");h.width=2*r*(n+s),h.height=r*(s+o),l.drawImage(a,r*e,r*i,h.width,h.height,0,0,h.width,h.height),l.clearRect(0,0,r*s,r*s),l.clearRect(r*(s+n+s),0,r*n,r*s),h.dataset.sx=n*r,h.dataset.sy=o*r,h.dataset.sz=s*r,$(".clipboard-list").prepend(h),this.setClip(h)},paste:function(t){var e=this.tools.drawable.canvas.width/this.tools.textureAreas.textureWidth(),i=t.texture.x*e,n=t.texture.y*e,o=t.size.x*e,s=t.size.y*e,r=t.size.z*e,a=this.clip,h=this.tools.drawable.ctx,l={top:{x:[0,0,1],y:[0,0,0],w:[1,0,0],h:[0,0,1]},bottom:{x:[1,0,1],y:[0,0,0],w:[1,0,0],h:[0,0,1]},left:{x:[0,0,0],y:[0,0,1],w:[0,0,1],h:[0,1,0]},front:{x:[0,0,1],y:[0,0,1],w:[1,0,0],h:[0,1,0]},right:{x:[1,0,1],y:[0,0,1],w:[0,0,1],h:[0,1,0]},back:{x:[1,0,2],y:[0,0,1],w:[1,0,0],h:[0,1,0]}};for(var d in l){var c=l[d],u={x:c.x[0]*a.dataset.sx+c.x[1]*a.dataset.sy+c.x[2]*a.dataset.sz,y:c.y[0]*a.dataset.sx+c.y[1]*a.dataset.sy+c.y[2]*a.dataset.sz,w:c.w[0]*a.dataset.sx+c.w[1]*a.dataset.sy+c.w[2]*a.dataset.sz,h:c.h[0]*a.dataset.sx+c.h[1]*a.dataset.sy+c.h[2]*a.dataset.sz},g={x:c.x[0]*o+c.x[1]*s+c.x[2]*r,y:c.y[0]*o+c.y[1]*s+c.y[2]*r,w:c.w[0]*o+c.w[1]*s+c.w[2]*r,h:c.h[0]*o+c.h[1]*s+c.h[2]*r};h.drawImage(a,u.x,u.y,u.w,u.h,i+g.x,n+g.y,g.w,g.h)}this.tools.drawable.modified=!0},flip:function(t){var e=this.tools.drawable.canvas,i=this.tools.drawable.disposable.ctx,n=this.tools.drawable.canvas.width/this.tools.textureAreas.textureWidth(),o=t.texture.x,s=t.texture.y,r=t.size.x,a=t.size.y,h=t.size.z;i.save(),i.scale(-1,1),i.drawImage(e,o*n,(s+h)*n,h*n,a*n,-(o+h+r+h)*n,(s+h)*n,h*n,a*n),i.drawImage(e,(o+h)*n,s*n,r*n,(h+a)*n,-(o+h+r)*n,s*n,r*n,(h+a)*n),
i.drawImage(e,(o+h+r)*n,s*n,r*n,h*n,-(o+h+r+h)*n,s*n,r*n,h*n),i.drawImage(e,(o+h+r)*n,(s+h)*n,r*n,a*n,-(o+h)*n,(s+h)*n,r*n,a*n),i.drawImage(e,(o+h+r+h)*n,(s+h)*n,h*n,a*n,-(o+h+r+h+r)*n,(s+h)*n,h*n,a*n),i.restore(),this.tools.drawable.disposable.dirty=!0,this.clear(t)},rotate:function(t,e){var i=this.tools.drawable.canvas.width/this.tools.textureAreas.textureWidth(),n=t.texture.x*i,o=t.texture.y*i,s=t.size.x*i,r=t.size.y*i,a=t.size.z*i,h=this.tools.drawable.canvas,l=this.tools.drawable.disposable.ctx,d={top:{x:[0,0,1],y:[0,0,0],w:[1,0,0],h:[0,0,1]},"-top":{x:[0,0,1],y:[0,0,1],w:[1,0,0],h:[0,0,-1]},bottom:{x:[1,0,1],y:[0,0,0],w:[1,0,0],h:[0,0,1]},"-bottom":{x:[1,0,1],y:[0,0,1],w:[1,0,0],h:[0,0,-1]},left:{x:[0,0,0],y:[0,0,1],w:[0,0,1],h:[0,1,0]},front:{x:[0,0,1],y:[0,0,1],w:[1,0,0],h:[0,1,0]},"-front":{x:[0,0,1],y:[0,1,1],w:[1,0,0],h:[0,-1,0]},right:{x:[1,0,1],y:[0,0,1],w:[0,0,1],h:[0,1,0]},back:{x:[1,0,2],y:[0,0,1],w:[1,0,0],h:[0,1,0]},"-back":{x:[1,0,2],y:[0,1,1],w:[1,0,0],h:[0,-1,0]}},c={right:{left:"front",front:"right",right:"back",back:"left",top:-90,bottom:-90},left:{left:"back",front:"left",right:"front",back:"right",top:90,bottom:90},up:{front:"top",top:"-back",back:"bottom",bottom:"-front",left:-90,right:90},down:{front:"-bottom",top:"front",back:"-top",bottom:"back",left:90,right:-90}};for(var u in d)if("-"!=u[0]){var g=c[e][u],f=d[u],p={x:f.x[0]*s+f.x[1]*r+f.x[2]*a,y:f.y[0]*s+f.y[1]*r+f.y[2]*a,w:f.w[0]*s+f.w[1]*r+f.w[2]*a,h:f.h[0]*s+f.h[1]*r+f.h[2]*a},m=d[g],v=m&&{x:m.x[0]*s+m.x[1]*r+m.x[2]*a,y:m.y[0]*s+m.y[1]*r+m.y[2]*a,w:m.w[0]*s+m.w[1]*r+m.w[2]*a,h:m.h[0]*s+m.h[1]*r+m.h[2]*a};"number"==typeof g?(l.save(),l.translate(n+p.x+p.w/2,o+p.y+p.h/2),l.rotate(g*Math.PI/180),l.translate(-p.h/2,-p.w/2),l.drawImage(h,n+p.x,n+p.y,p.w,p.h,0,0,p.h,p.w),l.restore()):(l.save(),l.translate(n+v.x,o+v.y),v.h<0&&l.scale(1,-1),l.drawImage(h,n+p.x,n+p.y,p.w,p.h,0,0,v.w,Math.abs(v.h)),l.restore())}this.tools.drawable.disposable.dirty=!0,this.clear(t)}},NovaSkinEditor["extends"]({},{resourcepack:null,applyTemplate:function(t,e){$(t).each(function(){$(this).html($(this).data("template")(e))})},showModel:function(t,e,i){var n=this;this.entityModelLoader.loadModel(t,function(t){function o(e){var o=Texture.fromImage(e,e.width/t.textureWidth());o.name=r,n.createModel(t,o),i&&i(t)}var s,r="";if(e)/^http|^data|^blob/.test(e)?s=e:r=e;else{var a=t.textureList[0];/^http|^data|^blob/.test(a)?s=a:a?r=path("textures",a):s=n.createEmptyImage(t.texture)}r?n.resourcepack.loadImage(r,o):s&&ImageUtils.loadImage(s,o),n.saveManager.suggestFileName(r)})},createModel:function(t,e){t.setImage&&t.setImage(e.name,e.width,e.height),this.layers.clear(),this.layers.add({image:e.image,width:e.width,height:e.height,filename:e.name}),this.changes.clear(),this.textureview.setTexture(e),this.textureview.mergeLayers=!0,this.modeldata&&this.modelview.removeModel(this.modeldata),this.modeldata=this.modelview.createModel(t,e),this.modelview.setActiveModel(this.modeldata),this.modelview.camera.zoom*=.75,this.updateResolutions(t.textureWidth(),t.textureHeight()),this.changeResolution(e.width,e.height),this.saveManager.setModelView(this.modelview),this.gifRecorder.setModelView(this.modelview),this.textureview.setTextureAreas(t),this.drawtools.setTextureAreas(t),this.modelview.activeModel.model.afterLoad(),this.updateObjectOptions(),this.textureview.paintSkin(),this.textureview.drawTextureAreas(),this.updateCanvasSize(),this.modelview.draw()},changeModel:function(t,e){var i=this;this.entityModelLoader.loadModel(t,function(t){i.modeldata&&i.modelview.removeModel(i.modeldata),i.modeldata=i.modelview.createModel(t,i.modelview.activeModel.materials.texture),i.textureview.setTextureAreas(t),i.drawtools.setTextureAreas(t),i.modelview.activeModel.model.afterLoad(),i.textureview.drawTextureAreas(),e&&e()})},getBlockModelLoader:function(){return this.resourcepack.blockModelLoader||(this.resourcepack.blockModelLoader=new BlockModelLoader(this.resourcepack)),this.resourcepack.blockModelLoader},showMap:function(){var t=this,e=this.getBlockModelLoader(),i={},n={Blocks:["grass:snowy=false","grass:snowy=false","grass:snowy=true","acacia_log:axis=x","acacia_log:axis=y","acacia_log:axis=z","bed:facing=west,part=foot","bed:facing=west,part=head"],Width:3,Height:1,Length:2};n.Blocks.forEach(function(t){i[t.split(":")[0]]=!0}),e.loadModels(i,function(i){var o={};n.Blocks.forEach(function(t){var n=i[t],s=e.meshes["block/"+n.name.model];o=$.extend(o,s.getRequiredTextures())}),t.resourcepack.loadImages(o,function(i){var o=new TextureMap(0,"terrain","textures/blocks/",new Image,null,i);o.generate(),t.createMap(n,e.blockModels,o)})})},showBlockModel:function(t,e){var i=this;this.getBlockModelLoader().loadMesh(t,function(n,o){var s=o.getRequiredTextures();i.resourcepack.loadImages(s,function(n){var s=new TextureMap(0,"terrain","textures/blocks/",new Image,[o],n);s.generate();var r={};r[t]=o.createMesh({variant:"editor",model:t,rotation:"X0_Y0"}),i.createMap({Blocks:[t],Width:1,Height:1,Length:1},r,s),e&&e()})})},showSchematic:function(t,e){var i=this,n=this.getBlockModelLoader(),o={},s={Blocks:t.blocks.value.map(function(t){return n.blockRegistry.blockfromId[t[0].value]}),Width:t.size.value[0],Height:t.size.value[1],Length:t.size.value[2]};s.Blocks.forEach(function(t){t=t||"air",o[t.split(":")[0]]=!0}),delete o.air,n.loadModels(o,function(t){var o={};s.Blocks.forEach(function(e){if("air"!=e){var i=t[e],s=n.meshes["block/"+i.name.model];o=$.extend(o,s.getRequiredTextures())}}),i.resourcepack.loadImages(o,function(t){var o=new TextureMap(0,"terrain","textures/blocks/",new Image,null,t);o.generate(),i.createMap(s,n.blockModels,o),e&&e()})})},createMap:function(t,e,i){this.texturemap=i;var n=Texture.fromImage(i.texture()),o=i.getFrameCount();this.layers.clear(),this.layers.add({image:n.image,width:n.width,height:n.height,filename:o>1?"frame 1":"atlas"}),this.changes.clear(),this.textureview.setTexture(n),this.textureview.mergeLayers=!1,this.modeldata&&this.modelview.removeModel(this.modeldata),this.modeldata=this.modelview.createMap(t,e,n,i),this.modelview.setActiveModel(this.modeldata);for(var s=2;s<o;s++){i.animate();var r=Texture.fromImage(i.texture(),1);this.layers.add({image:r.image,width:r.width,height:r.height,filename:"frame "+s})}this.modelview.cameraControls.dollyOut(1.25),this.updateResolutions(n.width,n.height),this.changeResolution(n.width,n.height),this.saveManager.setModelView(this.modelview),this.gifRecorder.setModelView(this.modelview),this.textureview.setTextureAtlas(i),this.updateObjectOptions(),this.textureview.paintSkin(),this.textureview.drawTextureAreas(),this.updateCanvasSize(),this.modelview.draw()},updateResolutions:function(t,e){if($("select.resolutions").presence()&&(t>64&&(t/=2,e/=2),t/=4,e/=4,$(".resolutions option:first").val()!=t+","+e))for(var i=$(".resolutions").html("");t<=2048&&e<=2048;t*=2,e*=2)$("<option>").text(t+"x"+e).val(t+","+e).appendTo(i)},changeResolution:function(t,e){e||(e=t*(this.textureview.texture.height/this.textureview.texture.width)),this.modelview.activeModel.materials.texture.width!=t&&this.layers.resize(t,e)},updateObjectOptions:function(){var t=(this.modelview.activeModel.model.model,[]);for(var e in this.modelview.activeModel.model){var i=this.modelview.activeModel.model.details[e];if(i){var n=i&&i.name||e,o=!(!i||!i.persistent);if("boolean"==typeof this.modelview.activeModel.model[e])t.push({isBoolean:!0,name:n,checked:this.modelview.activeModel.model[e],id:e.match(/\w+/g).join("-"),highlight:o});else if("number"==typeof this.modelview.activeModel.model[e])if(i&&"select"==i.type){var s=[];for(var r in i.options)s.push({name:n,value:i.options[r],id:e.match(/\w+/g).join("-"),highlight:o});t.push({isSelect:!0,name:n,value:this.modelview.activeModel.model[e],options:s,id:e.match(/\w+/g).join("-"),highlight:o})}else t.push({isNumeric:!0,name:n,value:this.modelview.activeModel.model[e],type:i&&i.type||"number",min:i&&i.min||0,max:i&&i.max||360,step:i&&i.step||.1,id:e.match(/\w+/g).join("-"),highlight:o})}}this.applyTemplate(".modeloptions",{options:t}),$(".model-parts").html('<option value="all">select</option>');for(var n in this.modelview.activeModel.box)$(".model-parts").append('<option value="'+n+'">'+n.split(".")[0]+"</option>")},updateBlockOptions:function(t){var e=this;$("#customPose form.parts").html("");$("#parts").html('<option value="all">'+strings.allParts+"</option>");var i=$("#modeloptions").html(""),n=Blocks[t].properties;for(var o in n){var s=$("<select>").html(n[o].map(function(t){return"<option>"+t+"</option>"}));$("<label>").text(o).addClass("persistent").append(s).appendTo(i)}var r=$("<input>").attr({type:"number",name:"repeat",min:1,max:10,step:1}).val(1).change(function(){var t=e.modelview.map.Blocks[0];e.modelview.map.Blocks=[];for(var i=0;i<this.value*this.value;i++)e.modelview.map.Blocks.push(t);e.modelview.map.Width=e.modelview.map.Height=this.value,e.modelview.createMap(e.modelview.map),e.modelview.updateCenter(),e.modelview.rotate(0,0),e.modelview.redraw()});r.appendTo($("<label>").text("repeat").attr("title","").appendTo(i))},animate:function(){requestAnimationFrame(this.animate.bind(this)),this.modelview.animate()},createEmptyImage:function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.toDataURL()},updateCanvasSize:function(){var t=$(this.canvas).offset(),e=$(window).width()-t.left,i=$(window).height()-t.top;this.canvas.width=e,this.canvas.height=i,this.canvas.style.width=e+"px",this.canvas.style.height=i+"px",this.modelview.onWindowResize()},undo:function(){this.changes.undo()},redo:function(){this.changes.redo()},decodeEditorOptionsFromUrl:function(t){var e,i={};if(Modernizr.localstorage){var n=localStorage.getItem("url");t==n&&(e=localStorage.getItem("texture"))}var o=t.match(/\/(entity|block|map)\/(\w+)/);switch(o&&o[1]){case"entity":i.model=o[2],i.skin=e||queryStringToJSON().skin;break;case"block":i.model="Block",i.block=o[2],i.texture=e;var s=location.hash.split("?"),r=s&&s[1]||location.search.substring(1);i.state=queryStringToJSON(r);break;case"map":i.model="Block";var a=location.hash.match(/\bmap=([^&#]+)\)?/);i.map=a&&parseMap(decodeURI(a[1])),i.texturemap&&(i.texturemap=JSON.parse(decodeURI(i.texturemap)));break;default:i.model="Start"}var h=t.match(/resourcepack\/(.+?)\//);return i.resourcepack=h&&decodeURI(h[1]),i},filterPart:function(t){},resetFilterValues:function(){var t={};$(".FilterSetting input").val(0).each(function(){var e=$(this).data("filter");t[e]=0}),this.filters=t,this.changedEffects=!1,$("#apply-filters").attr("disabled",!0)},applyEffects:function(t){var e=this,i=this.layers.working(),n=!1,o={};for(var s in this.filters)if(this.filters.hasOwnProperty(s)){var r=parseFloat(this.filters[s],10);r&&(o[s]=r,n=!0)}return this.layers.clearWorkingLayer(),n?this.renderingEffects?void(this.effectsNeedUpdate=!0):(this.renderingEffects=!0,this.effectsNeedUpdate=!1,i.modified=!0,$("#apply-filters").attr("disabled",!1),Caman.Store.flush(),$(i.canvas).data("camanId",!1),i.disposable.ctx.drawImage(i.canvas,0,0),void(this.caman=Caman(i.disposable.canvas,function(){for(var n in o)this[n](o[n]);this.render(function(){return e.renderingEffects=!1,i.disposable.dirty=!0,e.textureview.paintSkin(),e.effectsNeedUpdate?e.applyEffects(i):void(t&&t())})}))):(e.textureview.paintSkin(),void this.textureview.updateTexturePreview())},setCursor:function(t){var e="tool"==t?this.drawtools.getSelectedTool().getCursor():"rotate"==t?rotateCursor:"colorpicker"==t?"url(/images/dropper.png) 0 17,pointer":t||"default";this.canvas.style.cursor!=e&&(this.canvas.style.cursor=this.textureview.map.canvas.style.cursor=e)},travelByObjects:[],highlight:function(t){this.highlighted=t;var e=t&&t.name||"all";t?this.modelview.select(t):this.modelview.unselect(),$(".model-parts, .selected-model-part").val(e),$(".edit-selected .btn").prop("disabled",!t),this.updatePoseEditor(t)},showPoseControls:function(t){t?(t.modStack||(t.modStack=new MOD3.ModifierStack(MOD3.LibraryThree,t),t.twist=new MOD3.Twist,t.bend=new MOD3.KneeBend,t.bend.constraint=MOD3.ModConstant.RIGHT,t.modStack.addModifier(t.twist),t.modStack.addModifier(t.bend)),this.modelview.control.attach(t.pivot),this.modelview.control.setHandles(t.controls)):this.modelview.control.detach()},animationTick:0,animationVisibleLayerIndex:0,setAnimating:function(t){function e(t){i.animationFrame(t),i.animating&&requestAnimFrame(e)}var i=this;this.animating=t,this.animating?e(0):$(".visible-frame").removeClass("visible-frame")},animationFrame:function(t,e){if(this.modelview.activeModel.map){if("undefined"==typeof e&&(e="number"==typeof t?t/200|0:this.animationVisibleLayerIndex+1),e!=this.animationVisibleLayerIndex){$(".visible-frame").removeClass("visible-frame");var i=$(this.layers.layers.concat().reverse()[e%this.layers.layers.length]);i.addClass("visible-frame"),this.animationVisibleLayerIndex=e,this.textureview.previewLayer(i.data()),this.textureview.drawTextureAreas(),this.modelview.updateTexture()}}else this.animationTick=t?30*t/1e4:this.animationTick+.3,this.animateModel(this.animationTick,30,30,30)},animateModel:function(t,e){var i=30*Math.cos(t/5),n=15*Math.sin(t/7);this.modelview.activeModel.model._setRotationAngles(t,e/100,.3,i,n,.3),this.modelview.updatePosition()},pose:function(t){var e=this.modelview.selected;e&&(e.modStack||(e.modStack=new MOD3.ModifierStack(MOD3.LibraryThree,e),e.twist=new MOD3.Twist,e.bend=new MOD3.KneeBend,e.modStack.addModifier(e.twist),e.modStack.addModifier(e.bend)),e.twist.angle=t.twistAngle*Math.PI/180,e.twist.center.xyz[1]=-e.position.y,e.bend.force=t.bendForce,e.bend.offset=1-t.bendOffset,e.bend.len=t.bendLength,e.bend.constraint=MOD3.ModConstant.RIGHT,e.modStack.apply(),e.pivot.rotation.x=t.rotationx*Math.PI/180,e.rotation.y=t.rotationy*Math.PI/180,e.pivot.rotation.y=t.rotationz*Math.PI/180)},updatePoseEditor:function(t){t&&($("form.pose input[name=rotationx]").val(180*t.pivot.rotation.x/Math.PI),$("form.pose input[name=rotationy]").val(180*t.rotation.y/Math.PI),$("form.pose input[name=rotationz]").val(180*t.pivot.rotation.z/Math.PI),$("form.pose input[name=twistAngle]").val(t.twist&&180*t.twist.angle/Math.PI||0),$("form.pose input[name=bendForce]").val(t.bend&&t.bend.force||0),$("form.pose input[name=bendOffset]").val(t.bend&&1-t.bend.offset||.4),$("form.pose input[name=bendLength]").val(t.bend&&t.bend.len||.2))},record360Gif:function(t){for(var e=360/(t||72),i=0;i<360;i+=e)this.modelview.rotate(e*Math.PI/180,0),this.gifRecorder.record()},isFlat:function(){return!1},textureScale:function(){return this.textureview.canvas.width/this.modelview.activeModel.model.textureWidth()},setMode:function(t){"draw"==t&&(t=!1),this.enforcedMode!=t&&(this.enforcedMode=t,$(".model-editor-bottom-toolbar").toggle("pose"!=this.enforcedMode)),console.log(t)},pickFromMouseEvent:function(t){var e=$(this.modelview.canvas).offset(),i=t.pageX-e.left,n=t.pageY-e.top;return this.modelview.pick(i,n)},confirmSave:function(){var t=$("#save-confirm");switch($("#save-resource .nav-tabs .active a").attr("href")){case"#save-in-project":t.button("loading"),this.saveManager.saveTexturePack(function(){t.button("reset"),$(".save-filelist tr:has(:checked)").addClass("success"),$("#save-resource").modal("hide")},function(e){t.button("reset"),alert("Something went wrong while saving.\n"+e)});break;case"#shareTexture":t.button("loading"),this.saveManager.saveOnline(function(){t.button("reset")});break;case"#saveSkinImageContainer":$("#saveSkinImageContainer").tooltip("toggle");break;case"#screenshotContainer":$("#screenshotContainer").tooltip("toggle")}},setupEventListeners:function(){var t=this;this.layers.onChange=NovaSkinEvents.onLayersChange.bind(this),this.textureview.onChange=NovaSkinEvents.onTextureUpdate.bind(this),this.drawtools.onSelectedToolChange=NovaSkinEvents.onSelectedToolChange.bind(this),this.changes.onChange=NovaSkinEvents.onChangesMade.bind(this),this.layers.container.on("click",".layer:not(.hidden)",function(){t.layers.setLayer(this)}).on("mouseover",".layer",function(){t.textureview.previewLayer($(this).data())}).on("mouseleave",".layer",function(){t.textureview.paintSkin()}),$(document).keydown(NovaSkinEvents.onKeyDown.bind(this)),$(this.canvas).on("mousedown.novaskin",NovaSkinEvents.onCanvasMouseDown.bind(this)).on("mousemove.novaskin",NovaSkinEvents.onCanvasMouseMove.bind(this)).on("touchstart.novaskin",NovaSkinEvents.onCanvasTouchStart.bind(this)).on("dragover",NovaSkinEvents.onCanvasDragOver.bind(this)).on("dragend",NovaSkinEvents.onCanvasDragEnd.bind(this)).on("drop",NovaSkinEvents.onLoadImage.bind(this)),this.canvas.oncontextmenu=this.textureview.map.canvas.oncontextmenu=NovaSkinEvents.preventDefault,$(".pan-area").on("mousedown",NovaSkinEvents.onPanAreaMouseDown.bind(this)).on("mousewheel",NovaSkinEvents.onPanMouseWheel.bind(this)),$("#display").on("mousewheel",NovaSkinEvents.onMouseWheel.bind(this)).on("mouseenter",NovaSkinEvents.onMouseEnter.bind(this)).on("mouseleave",NovaSkinEvents.onMouseLeave.bind(this)),$("#colorPickers").on("mousewheel",NovaSkinEvents.rotateColorSlot.bind(this)),$(window).resize(NovaSkinEvents.onCanvasResize.bind(this)),$("#skinName, #skinDescription").onEnter(this.saveManager.saveOnline.bind(this.saveManager)),$("select.resolutions").change(NovaSkinEvents.onChangeResolution.bind(this)),$(".resolutions [data-width]").click(NovaSkinEvents.onChangeResolutionClick.bind(this)),$("#image-fileinput").change(NovaSkinEvents.onLoadImage.bind(this)),$("#undo, .undo").click(this.undo.bind(this)),$("#redo, .redo").click(this.redo.bind(this)),$("#rotateleft").click(NovaSkinEvents.onRotateLeftClick.bind(this)),$("#rotateright").click(NovaSkinEvents.onRotateRightClick.bind(this)),$("#zoomin, zoomin").click(NovaSkinEvents.onZoomInClick.bind(this)),$("#zoomout, .zoomout").click(NovaSkinEvents.onZoomOutClick.bind(this)),$("#fitIntoView, .fitIntoView").click(NovaSkinEvents.fitIntoView.bind(this)),$("#newlayer").click(NovaSkinEvents.onNewLayerClick.bind(this)),$("#clonelayer").click(NovaSkinEvents.onCloneLayerClick.bind(this)),$("#toggle-grid .btn, .toggle-grid .btn").click(NovaSkinEvents.onToggleGridClick.bind(this)),$("#toggle-mode .btn").click(NovaSkinEvents.onToggleModeClick.bind(this)),$("#parts").change(NovaSkinEvents.onPartsChange.bind(this)),$("#show-filter, .show-filter").click(NovaSkinEvents.onShowEffects.bind(this)),$("#Filters").on("change",".FilterSetting input",NovaSkinEvents.onEffectsFilterChange.bind(this)),$("#apply-filters, .apply-filters").click(NovaSkinEvents.applyFilters.bind(this)),$("#cancel-filters, .cancel-filters").click(NovaSkinEvents.cancelFilters.bind(this)),$("#show-record-gif").click(NovaSkinEvents.onShowRecordGif.bind(this)),$("#colorpicker, .colorpicker").click(NovaSkinEvents.toogleColorPicker.bind(this)),$("#select, .part-select-tool").click(NovaSkinEvents.setSelectMode.bind(this)),$("#save-button").click(this.saveManager.showSaveWindow.bind(this.saveManager)),$("#apply-menu").click(NovaSkinEvents.onApplyMenuClick.bind(this)),$(".apply-menu").on("click",".apply-texture",NovaSkinEvents.onApplyTextureClick.bind(this)),$("#floodfill, #gradiente, #rectangle, #ellipse").mouseenter(function(){$("#color1").addClass("highlight")}).mouseleave(function(){$("#color1").removeClass("highlight")}),$("#take-photo").click($.fn.toggle.bind($("#screenshotContainer"))),$("#hide-save").click(this.saveManager.close.bind(this.saveManager)),$("#animate").click(NovaSkinEvents.setAnimating.bind(this)),$("#record").click(this.gifRecorder.record.bind(this.gifRecorder)),$("#record-rotate").click(NovaSkinEvents.recordRotate.bind(this)),$("#cleargif").click(this.gifRecorder.clear.bind(this.gifRecorder)),$("#generate").click(NovaSkinEvents.generateGif.bind(this)),$("#record, #record-rotate, #cleargif").click(NovaSkinEvents.updateGifStatus.bind(this)),$(".modeloptions").on("change","input, select",NovaSkinEvents.onModelOptionChange.bind(this)),$(".model-parts").on("change",NovaSkinEvents.onSelectedPartChange.bind(this)),$("form.pose input").on("change",NovaSkinEvents.onPoseChange.bind(this)),$(".copy").on("click",NovaSkinEvents.onCopy.bind(this)),$(".paste").on("click",NovaSkinEvents.onPaste.bind(this)),$(".clipboard-list").on("click","canvas",NovaSkinEvents.onClipClick.bind(this)),$(".rotate-texture").on("click",NovaSkinEvents.onRotateTextureClick.bind(this)),$(".flip-texture").on("click",NovaSkinEvents.onFlipTextureClick.bind(this)),$(".clear-texture").on("click",NovaSkinEvents.onClearTextureClick.bind(this)),$("#selected-tool").on("click",NovaSkinEvents.onEditToolClick.bind(this))}}),ImageEditor["extends"]({},{resourcepack:null,modelview:{screenshot:function(){return document.createElement("canvas")},activeModel:{model:new ModelImage}},save:function(t){this.modelview.screenshot=function(){return{toDataURL:function(){return t}}},ImageUtils.loadImage(t,function(t){this.saveManager.textureview.canvas=document.createElement("canvas"),this.saveManager.textureview.canvas.width=t.width,this.saveManager.textureview.canvas.height=t.height,this.saveManager.textureview.canvas.getContext("2d").drawImage(t,0,0),$("#save-button").click()}.bind(this))},getPixelImage:function(){var t=new this.pskl.rendering.PiskelRenderer(this.pskl.app.piskelController);return t.renderAsCanvas(1)},savePiskel:function(){var t=this.getPixelImage();this.modelview.screenshot=function(){return t},this.saveManager.textureview.canvas=t,$("#save-button").click()},showIframe:function(t){$("#image-editor-container").empty().append($("<iframe>").attr("src",t))},showPixlr:function(t){this.showIframe("//pixlr.com/editor/?s=c&image="+t+"&referrer=Nova Skin&icon=_host_/favicon.ico&title=Minecraft Skin&target=_host_/pixlrcallback&locktarget=true&"+"locktype=png&locktitle=true&exit=_host_/pixlrcallback".replace(/_host_/g,location.protocol+"//"+location.host)),$("#save-image-button").hide()},showPicozu:function(t){var e={"snapshot.minecraft.novaskin.me":"J2b4Unznd1KdVNQM","minecraft.novaskin.me":"ChC4Zlk2ZOFkJZTV","localhost:8080":"7UusOfZBJ7gVEzB2"};this.showIframe("//www.picozu.com/editor/?workspace=1&theme=default&key="+e[location.host]+"&i="+t),$("#save-image-button").hide()},showAviary:function(t){this.editImage=new Image,this.editImage.onload=this.initAviary.bind(this),this.editImage.src=t,$("#save-image-button").hide()},showPiskel:function(t){var e=this;this.pskl=null,ImageUtils.loadImage(t,function(t){e.editImage=t,e.openPiskel()}),this.showIframe("/piskel?1"),$("#image-editor-container").append('<p class="text-info"> <span class="glyphicon glyphicon-info-sign"></span> <a href="http://www.piskelapp.com/"> Piskel</a> online sprite editor</p>'),$("#save-image-button").show()},initAviary:function(){function t(){var t=i.editImage.width/i.editImage.height;e.launch({image:i.editImage,cropPresets:[8,16,32,64,128,256,512,1024].map(function(e){return e+"x"+e*t})})}var e,i=this;$("#image-editor-container").empty(),e=new Aviary.Feather({apiKey:"c19e6cd38334407fa3c95c47975cfa56",appendTo:"image-editor-container",theme:"dark",enableCORS:!0,noCloseButton:!0,cropPresetsStrict:!0,onLoad:t,onReady:function(){console.log("on ready")},onSave:function(t,e){return i.save(e),!1},onError:function(t){console.error(t)}}),t()},openPiskel:function(){var t=$("#image-editor-container iframe").get(0),e=t.contentDocument.getElementById("loading-mask");if(this.pskl=t.contentWindow.pskl,e||!this.pskl)return setTimeout(this.openPiskel.bind(this),250);var i=this.editImage.height;this.pskl.app.importService.newPiskelFromImage(this.editImage,{importType:"sheet",frameSizeX:this.editImage.width,frameSizeY:i,frameOffsetX:0,frameOffsetY:0,smoothing:!1},function(){}),this.pskl.app.beforeUnloadService.onBeforeUnload=function(){}},openImage:function(t,e,i){var n=this,o="pixlr"==i||"picozu"==i;n.saveManager.suggestFileName(t),this.saveManager.setModelView(this.modelview),this.modelview.activeModel.model="Item"==e?new ModelItem:new ModelImage,this.modelview.activeModel.model.setImage(t,1,1),this.resourcepack.shareImage(t,function(t){n.openImageURL(t,e,i)},o)},openCanvasImage:function(t,e){this.editor="piskel",this.modelview.activeModel.model=new ModelImage,this.showPiskel(t.toDataURL()),$(".image-editor-selector, #save-image-button").hide()},openImageURL:function(t,e,i){this.editor=i||this.editor||"piskel",this[{pixlr:"showPixlr",picozu:"showPicozu",aviary:"showAviary",piskel:"showPiskel"}[this.editor]](t),$(".image-editor-selector").show()},confirmSave:function(){var t=$("#save-confirm");switch($("#save-resource .nav-tabs .active a").attr("href")){case"#save-in-project":t.button("loading"),this.saveManager.saveTexturePack(function(){t.button("reset"),$(".save-filelist tr:has(:checked)").addClass("success"),$("#save-resource").modal("hide")},function(e){t.button("reset"),alert("Something went wrong while saving.\n"+e)});break;case"#shareTexture":t.button("loading"),this.saveManager.saveOnline(function(){t.button("reset")});break;case"#saveSkinImageContainer":$("#saveSkinImageContainer").tooltip("toggle");break;case"#screenshotContainer":$("#screenshotContainer").tooltip("toggle")}}});var FFmpeg={files:{},lazyfiles:[],running:!1,isWorkerLoaded:!1,onDone:eventListener,queue:[],log:[],pending:0,notice:'This software uses code of <a href="http://ffmpeg.org">FFmpeg</a> licensed under the <a href="http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html">LGPLv2.1</a> and its source can be downloaded <a href="/webworkers/ffmpeg-all-codecs.js">here</a>.',wait:function(t,e){t&&FFmpeg.queue.push({fn:t,args:e})||FFmpeg.pending++},done:function(){if(0==--FFmpeg.pending){var t=FFmpeg.queue;FFmpeg.queue=[],t.forEach(function(t){t.fn.apply(this,t.args)})}},run:function(t,e,i,n){FFmpeg.worker||FFmpeg._initWorker(),0==FFmpeg.pending?FFmpeg._runCommand(t,e,i,[n]):FFmpeg.wait(FFmpeg.run,arguments)},_initWorker:function(){FFmpeg.worker=new Worker("/webworkers/ffmpeg-command.js"),FFmpeg.worker.onmessage=FFmpeg._onMessage,FFmpeg.wait()},newfile_index:1,newFileName:function(t){return"file"+FFmpeg.newfile_index++},addFile:function(t){t.name||(t.name=FFmpeg.newFileName()),FFmpeg.addOnlineFile(t.name,URL.createObjectURL(t),t.size)},addArrayBuffer:function(t,e){FFmpeg.files[t]=new Uint8Array(e)},addOnlineFile:function(t,e,i){FFmpeg.files[t]={url:e,size:i}},print:!0,_onMessage:function(t){switch(t.data.type){case"ready":FFmpeg.isWorkerLoaded=!0,FFmpeg.done();break;case"stdout":FFmpeg.logCallback&&FFmpeg.logCallback(t.data.data);break;case"start":console.log("FFmpeg has received command");break;case"done":FFmpeg.running=!1,t.data.files.forEach(function(t){FFmpeg.addArrayBuffer(t.name,t.data)}),FFmpeg.logCallback=null,FFmpeg.done()}},_runCommand:function(t,e,i,n){t=t.replace(/\s+/g," ");var o=[];t.split('"').forEach(function(t,e){t=t.trim(),e%2===1?o.push(t):o=o.concat(t.split(" "))});var s=[],r=[];for(var a in FFmpeg.files)FFmpeg.files[a].url?r.push({name:a,url:FFmpeg.files[a].url,size:FFmpeg.files[a].size}):s.push({name:a,data:FFmpeg.files[a]});FFmpeg.wait(i,n),FFmpeg.wait(),FFmpeg.logCallback=e,FFmpeg.running=!0,FFmpeg.worker.postMessage({type:"command",arguments:o,files:s,lazyfiles:r})},reset:function(){FFmpeg.worker.terminate(),FFmpeg.worker=null;for(var t in FFmpeg.files)"string"==typeof FFmpeg.files[t]&&URL.revokeObjectURL(FFmpeg.files[t]);FFmpeg.files={}},ogg:function(t){t.mimetype="audio/ogg",FFmpeg.execute("-acodec vorbis -q:a 4 -map 0:0",".ogg",t)},execute:function(t,e,i){function n(t){if(/Duration: \d\d:\d\d:\d\d\.\d\d/.test(t)){var e=t.match(/\d\d/g);s=36e8*parseInt(e[0])+6e7*parseInt(e[1])+1e6*parseInt(e[2])+1e4*parseInt(e[3]),a=i.progress&&o}}function o(t){if(/^out_time_ms=/.test(t)){var e=parseInt(t.split("=")[1]);i.progress(i,e/s)}}var s,r=[];FFmpeg.addFile(i.input);var a=function(){i.started(i),a=n},h="output"+e,l=i.progress?" -progress /dev/stdout":"",d='-i "'+i.input.name+'" '+t+l+" -strict experimental "+h;i.output=file_name(i.input.name,!0)+e,FFmpeg.run(d,function(t){r.push(t),a&&a(t)},function(t){var e=FFmpeg.files[h];if(e){var n=new Blob([e],{type:i.mimetype});i.success(i,n)}else i.fail&&i.fail(i,r)})}};AudioEditor.prototype={defaultAudioFiles:[],resourcepack:null,sounds_folder:"assets/minecraft/sounds",onPlayAudioError:null,initSoundPlayer:function(){var t=this,e=WaveSurfer.create({audioContext:this.audioContext,container:this.player,barWidth:3,progressColor:"hsla(200, 100%, 30%, 0.5)",cursorColor:"black",waveColor:"whitesmoke",normalize:!0,hideScrollbar:!0});e.on("ready",function(){e.play()}),e.on("play",function(){$("#audio-play .glyphicon-play").hide(),$("#audio-play .glyphicon-pause").show()}),e.on("pause",function(){$("#audio-play .glyphicon-pause").hide(),$("#audio-play .glyphicon-play").show()}),e.on("error",function(e){t.onPlayAudioError&&t.onPlayAudioError("Error while playing audio, maybe this browser cannot play .ogg audio files. "+e)}),$("#audio-play").click(e.playPause.bind(e)),$("#audio-container .close").click(e.stop.bind(e)),e.showProgress=function(){},e.on("loading",function(t){e.showProgress({progress:t/100})}),this.wavesurfer=e},setupEventListeners:function(){var t=this,e=$(".audio-editor-toolbar");e.find(".btn-playlist-state-group .btn").on("click",function(){$(".btn-fade-state-group").toggle($(this).data("value").startsWith("fade")),$(".btn-select-state-group").toggle("select"==$(this).data("value"))}),e.on("click","[data-emit]",function(){var e=$(this).data();t.playListEvents.emit(e.emit,e.value)}).on("input change",".master-gain",function(e){t.playListEvents.emit("mastervolumechange",e.target.value)}),e.on("change","#audio-add",function(){for(var e=0;e<this.files.length;e++)t.playListEvents.emit("newtrack",this.files[e])}),e.on("click",".btn-trim-audio",function(){t.playlist.adjustDuration(),t.playlist.updateEditor()}),this.playListEvents.on("timeupdate",function(t){e.find(".audio-pos").text(t.toFixed(2)+"s")}).on("select",function(t,i){e.find(".btn-trim-audio").toggleClass("disabled",t>=i),t<i&&e.find(".audio-pos").text(t.toFixed(2)+"s ["+(i-t).toFixed(2)+"s]")}),this.container.on("dragenter",".track-drop",function(t){t.preventDefault(),t.target.classList.add("drag-enter")}).on("dragover",".track-drop",function(t){t.preventDefault()}).on("dragleave",".track-drop",function(t){t.preventDefault(),t.target.classList.remove("drag-enter")}).on("drop",".track-drop",function(e){e.preventDefault(),e.target.classList.remove("drag-enter");for(var i=e.originalEvent,n=0;n<i.dataTransfer.files.length;n++)t.playListEvents.emit("newtrack",i.dataTransfer.files[n])}),this.container.on("click",".import-file",function(){t.container.find(".sound-editor-import-file").click()}),this.container.find(".sound-editor-import-file").on("change",function(e){var i=e.currentTarget.files[0],n="custom/"+file_name(i.name,!0);return t.container.find("select.audio-name optgroup:first").prepend("<option>"+n+"</option>").parent().val(n),t.importAudioFile("assets/minecraft/sounds/custom",i),e.currentTarget.parentElement.reset(),!1})},playAudio:function(t,e){$("#audio-container").collapse("show").find("#audio-playing").text(file_name(t)),this.wavesurfer.showProgress=this.notifications.showProgress(file_name(t)),this.resourcepack.getFileURL(t,function(t){this.wavesurfer.load(t)}.bind(this))},schema:{type:"object",properties:{},patternProperties:{"^[\\w\\.]+$":{$ref:"#/definitions/sound",hideAdd:!0}},definitions:{sound:{type:"object",format:"sounds","default":{sounds:[],replace:!1},properties:{sounds:{type:"array",format:"audio_array",defaultSounds:{},items:{anyOf:[{type:"string",format:"audio",title:"audio file",options:[],description:'The path to a sound file from the "sounds" folder. Uses forward slashes.'},{type:"object",format:"audio",title:"properties",properties:{name:{type:"string",options:[],defaultOptions:[],title:"file name",description:'The path to this sound file from the "sounds" folder. Uses forward slashes instead of backslashes. May also be the name of another sound event.'},volume:{type:"number","default":1,minimum:0,maximum:1,description:"The volume this sound will be played at. Value is a decimal between 0.0 and 1.0. If undefined, defaults to 1.0."
},pitch:{type:"number","default":1,description:"Plays the pitch at the specified value. If undefined, defaults to 1.0, but higher and lower values can be chosen."},weight:{type:"number","default":1,description:"The chance that this sound will be selected to play when this sound event is triggered. Defaults to 1. An example: putting 2 in for the value would be like placing in the name twice. Inversely, putting in 0.5, assuming no other weights are put on other sounds, will behave similarly to putting in all other names but this one twice."},stream:{type:"boolean","default":!1,description:'true/false. True if this sound should be streamed from its file. It is recommended that this is set to "true" for sounds that have a duration longer than a few seconds to avoid lag. Used for all sounds in the "music" and "record" categories (except Note Block sounds), as (almost) all the sounds that belong to those categories are over a minute long. Optional. If undefined, defaults to "false". Setting this to false allows many more instances of the sound to be ran at the same time while setting it to true only allows 4 instances (of that type) to be ran at the same time.'},type:{"enum":["sound","event"],"default":"sound",description:'Two values are available: "sound" and "event"; "sound" plays from the name of the file, while "event" plays from an already defined event. If undefined, defaults to "sound".'}},required:["name"]}]},description:"The sound files this sound event uses. One of the listed sounds is randomly selected to play when this sound event is triggered"},category:{type:"string","enum":["ambient","weather","player","neutral","hostile","block","record","music","master","voice"],description:"(deprecated as of 1.10+) The category this sound event belongs to. This String lets the sound system know what sound events belong to what category, so the volume can be adjusted based on what the sound options are set to for each category."},replace:{type:"boolean","default":!1,description:"True if the sounds listed in sounds should replace the sounds listed in the default sounds.json for this sound event. False if the sounds listed should be added to the list of default sounds."},subtitle:{type:"string",description:"Subtitles are a feature which display text for sounds in game. This feature is mainly intended for players who are hard of hearing, deaf or play with sounds off. They can also be used for hearing quieter sounds."}},required:["sounds"],description:'A sound event. The name of this Object is the name of the sound event, which is usually patterned after its path (such as "random.break").'}}},getAudioFiles:function(t){return t.filelist.filter(function(t){return/\/sounds\/.*\.ogg$/.test(t)}).map(function(t){return t.split("/sounds/")[1].replace(".ogg","")}).sort()},initDefaults:function(){var t=this;this.resourcePackLoader.get("default",function(e){var i=[];e.loadJSON("assets/minecraft/sounds.json",function(e){t.schema.definitions.sound.properties.sounds.defaultSounds=e;for(var n in e)t.schema.properties[n]={$ref:"#/definitions/sound",hideAdd:!0},i.push(n)}),t.defaultAudioFiles=t.getAudioFiles(e),t.schema.definitions.sound.properties.sounds.items.anyOf[0].defaultOptions=t.defaultAudioFiles,t.schema.definitions.sound.properties.sounds.items.anyOf[1].properties.name.defaultOptions=t.defaultAudioFiles,t.schema.definitions.sound.properties.sounds.items.anyOf[0].defaultSoundEvents=i,t.schema.definitions.sound.properties.sounds.items.anyOf[1].properties.name.defaultSoundEvents=i})},editJsonSounds:function(t,e){var i=this.getAudioFiles(this.resourcepack);this.schema.definitions.sound.properties.sounds.items.anyOf[0].options=i,this.schema.definitions.sound.properties.sounds.items.anyOf[1].properties.name.options=i;var n=[];for(var o in t)n.push(o);this.schema.definitions.sound.properties.sounds.items.anyOf[0].soundEvents=n,this.schema.definitions.sound.properties.sounds.items.anyOf[1].properties.name.soundEvents=n,this.sounds_folder=e,this.treema=$("#sounds-editor-treema").treema({schema:this.schema,data:t}),this.treema.build(),this.treema.addNewChild(),$("#sounds-editor-treema .treema-add-child:last").append(" add new sound event").css({"margin-top":"20px","margin-left":"-32px"}),$("#sounds-editor-treema").on("click",".play-audio",function(t){var e=$(t.currentTarget),i=e.data("name")||e.parents("form").find(".audio-name").val()||e.data("audio-name");return this.playAudio(path(this.sounds_folder,i+".ogg")),!1}.bind(this))},getSounds:function(){return this.treema.data},initAudioEditor:function(){this.playlist=WaveformPlaylist.init({ac:this.audioContext,mono:!1,waveHeight:100,container:this.container.find("#playlist").get(0),state:"select",colors:{waveOutlineColor:"#E0EFF1",timeColor:"grey",fadeColor:"black"},timescale:!0,controls:{show:!0,width:200},waveHeight:128,seekStyle:"line"}),this.playListEvents=this.playlist.getEventEmitter()},editAudio:function(t){var e=this;this.notifications.showLoading(),this.resourcepack.getFileURL(t,function(i){e.editAudioURL(i,file_name(t))})},editAudioURL:function(t,e){this.playlist.stop(),this.playlist.tracks=[],this.playlist.load([{src:t,name:e}]).then(this.notifications.hideLoading)},getAudioEncodedAsOgg:function(t,e){var i=this;this.playListEvents.emit("startaudiorendering",e||"buffer"),this.playListEvents.once("audiorenderingfinished",function(e,n){"buffer"==e?i.encodeOgg(n,t,function(e){i.notifications.showError("The editor will try again with FFmpeg, wait while it is loading...<br><br><small>"+e+"</small>"),i.getAudioEncodedAsOgg(t,"wav")}):"wav"==e&&i.encodeOggWithFFmpeg(n,t,i.notifications.showError)})},getAudioBuffer:function(t,e){var i=new FileReader,n=this.audioContext;i.onload=function(t){n.decodeAudioData(t.target.result,function(t){e(t)})},i.readAsArrayBuffer(t)},encodeOgg:function(t,e,i){for(var n=[],o=0;o<t.numberOfChannels;o++)n.push(t.getChannelData(o));this.oggEncoderWorker||(this.oggEncoderWorker=new Worker("/webworkers/OggEncoderWorker.js")),this.oggEncoderWorker.onmessage=function(t){t.data.blob&&e(t.data.blob),t.data.error&&i&&i(t.data.error)},this.oggEncoderWorker.postMessage({command:"start",process:"separate",sampleRate:t.sampleRate,numChannels:t.numberOfChannels,quality:.6}),this.oggEncoderWorker.postMessage({command:"record",buffers:n}),this.oggEncoderWorker.postMessage({command:"finish"})},encodeOggWithFFmpeg:function(t,e,i){var n=this.notifications,o=n.showProgress("conversion");FFmpeg.ogg({input:t,started:function(t){n.showAlert("converting to ogg: "+t.input.name+"<p><small>"+FFmpeg.notice+"</small></p>","info")},progress:function(t,e){o({progress:e})},success:function(t,i){e(i),n.showAlert(t.output+"<p><small>"+FFmpeg.notice+"</small></p>","success"),o({progress:1})},fail:function(t,e){console.log(e.join("\n")),console.error("FFmpeg error"),i&&i("Failed to convert "+t.input.name),o({progress:1})}})},importAudioFile:function(t,e,i){var n=this;"audio/ogg"==e.type?this.resourcepack.importFile(t,e,i):(n.notifications.showAlert("converting to ogg: "+e.name,"info"),this.getAudioBuffer(e,function(o){n.encodeOgg(o,function(o){o.name=file_name(e.name,!0)+".ogg",n.resourcepack.importFile(t,o,i),n.notifications.showAlert("converted <br/>"+o.name,"success")},function(o){n.notifications.showError("The editor will try again with FFmpeg, wait while it is loading...<br><br><small>"+o+"</small>"),n.encodeOggWithFFmpeg(e,function(o){o.name=file_name(e.name,!0)+".ogg",n.resourcepack.importFile(t,o,i)},n.notifications.showError)})}))}},SoundsNode=function(t){function e(t){return _ref=e.__super__.constructor.apply(this,arguments),_ref}return __extends(e,t),e.prototype.valueClass="treema-sounds",e.prototype.toggleTemplate="",e.prototype.childrenTemplate='<div class="treema-children sounds-children"></div>',e.prototype.getChildren=function(){return e.__super__.getChildren.call(this).reverse()},e.prototype.getData=function(){return"undefined"===$.type(this.data)?this.defaultData:this.data},e.prototype.open=function(){TreemaObjectNode.prototype.open.call(this,0)},e.prototype.buildValueForDisplay=function(t,e){return e.sounds?(t.append('<button class="btn btn-link remove-node pull-right"><span class="glyphicon glyphicon-remove"></span></button>'),t.find(".remove-node").click(this.remove.bind(this)).click(returnFalse),void this.buildValueForDisplaySimply(t,e.sounds.length+" sounds"+(e.replace?", replace":""))):this.buildValueForDisplaySimply(t,"sounds is missing")},e}(TreemaObjectNode),AudioArrayNode=function(t){function e(){return _ref=e.__super__.constructor.apply(this,arguments),_ref}return __extends(e,t),e.prototype.valueClass="treema-audio-array",e.prototype.childrenTemplate='<div class="treema-children audio-array-children"></div>',e.prototype.close=function(){},e.prototype.buildValueForDisplay=function(t,e){if(this.parent.keyForParent in this.workingSchema.defaultSounds){var i=this.workingSchema.defaultSounds[this.parent.keyForParent].sounds,n=i.reduce(function(t,e){var i=(e.name||e).split("/"),n=i.pop();return folder=i.join("/"),t+", "+(t.indexOf(folder)==-1?". "+folder+"/":"")+(e.type&&"sound"!=e.type?n:'<a href="#" class="play-audio" data-name="'+path(folder,n)+'">'+n+"</a>")},"").substring(2);t.append('<div class="treema-shortened">defaults:'+n+"</div")}},e}(TreemaArrayNode),AudioNode=function(t){function e(){return _ref=e.__super__.constructor.apply(this,arguments),_ref}return __extends(e,t),e.prototype.valueClass="treema-audio",e.prototype.buildPlayButton=function(t,e){t.append($("<button>").addClass("btn btn-default pull-left play-audio").html('<span class="glyphicon glyphicon-play"></span>').data("audio-name",e.name||e))},e.prototype.buildValueForDisplay=function(t,e){this.buildPlayButton(t,e),t.append('<button class="btn btn-link remove-node pull-right" title="remove sound"><span class="glyphicon glyphicon-minus"></span></button>').find(".remove-node").click(this.remove.bind(this)),this.buildValueForDisplaySimply(t,e.name?e.name+(e.type&&e.type!=this.workingSchema.properties.type["default"]?" type: "+e.type:"")+(e.volume&&e.volume!=this.workingSchema.properties.volume["default"]?" volume: "+e.volume:"")+(e.pitch&&e.pitch!=this.workingSchema.properties.pitch["default"]?" pitch: "+e.pitch:"")+(e.weight&&e.weight!=this.workingSchema.properties.weight["default"]?" weight: "+e.weight:"")+(e.stream?" stream: true":""):e)},e.prototype.buildValueForEditing=function(t,e){var i=$('<form class="form-inline"><div class="form-group"><div class="input-group"><span class="input-group-btn"></span><select class="form-control audio-name"></select><span class="input-group-btn"><button class="btn btn-default import-file" type="button"><span class="glyphicon glyphicon-open-file"></span></button></span></div></div><div class="form-group"><label>volume</label><input type="number" min="0" max="1" step="0.05" class="form-control audio-volume"></div><div class="form-group"><label>pitch</label><input type="number" step="0.1" class="form-control audio-pitch"></div><div class="form-group"><label>weight</label><input type="number" min="1" class="form-control audio-weight"></div><div class="form-group checkbox"><label><input type="checkbox" class="audio-stream"> stream</label></div><input type="submit" class="btn btn-success" value="confirm"/></form>');"string"==typeof e&&(e={name:e}),this.buildPlayButton(i.find(".input-group-btn:first"),e);var n=this.schema.anyOf[1].properties;i.find(".audio-volume").val(void 0!=e.volume?e.volume:n.volume["default"]).parent().attr("title",n.volume.description),i.find(".audio-pitch").val(void 0!=e.pitch?e.pitch:n.pitch["default"]).parent().attr("title",n.pitch.description),i.find(".audio-weight").val(void 0!=e.weight?e.weight:n.weight["default"]).parent().attr("title",n.weight.description),i.find(".audio-stream").attr("checked",Boolean(e.stream)).parent().attr("title",n.stream.description),i.on("submit",function(){return this.traverseWhileEditing(1,!1),!1}.bind(this)),t.append(i);var o=i.find(".audio-name"),s=[];for(var r in this.getRoot().data)s.push(r);o.append('<optgroup data-type="sound" label="sounds"><option>'+n.name.options.join("</option><option>")+"</option></optgroup>"),o.append('<optgroup data-type="sound" label="default"><option>'+n.name.defaultOptions.join("</option><option>")+"</option></optgroup>"),o.append('<optgroup data-type="event" label="sound events"><option>'+s.join("</option><option>")+"</option></optgroup>"),o.append('<optgroup data-type="event" label="default events"><option>'+n.name.defaultSoundEvents.join("</option><option>")+"</optgroup>"),o.focus().val(e.name)},e.prototype.saveChanges=function(t){var i=t.find(".audio-name");this.data={name:i.val(),type:i.find(":selected").parent().data("type"),volume:parseFloat(t.find(".audio-volume").val()),pitch:parseFloat(t.find(".audio-pitch").val()),weight:parseFloat(t.find(".audio-weight").val()),stream:t.find(".audio-stream").is(":checked")};var n=this.schema.anyOf[1].properties;this.data.type==n.type["default"]&&this.data.volume==n.volume["default"]&&this.data.pitch==n.pitch["default"]&&this.data.weight==n.weight["default"]&&this.data.stream==n.stream["default"]?(this.data=this.data.name,this.workingSchema=this.schema.anyOf[0]):this.workingSchema=this.schema.anyOf[1],e.__super__.saveChanges.apply(this,arguments)},e.prototype.createSchemaSelector=function(){},e}(TreemaNode),TreemaNode.setNodeSubclass("sounds",SoundsNode),TreemaNode.setNodeSubclass("audio_array",AudioArrayNode),TreemaNode.setNodeSubclass("audio",AudioNode),/snapshot/.test(location.host)&&alert("This is the experimental nova skin version, desigend to test the upcoming features, it contains bugs. Use minecraft.novaskin.me for a stable version.");